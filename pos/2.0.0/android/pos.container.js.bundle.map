{"version":3,"file":"pos.container.js.bundle","sources":["webpack://pos/../../../src/modules/FederationRuntimePlugins/CorePlugin.ts","webpack://pos/../../../src/modules/FederationRuntimePlugins/PrefetchPlugin.ts","webpack://pos/../../../src/modules/FederationRuntimePlugins/ResolverPlugin.ts","webpack://pos/../../../src/modules/ScriptManager/Script.ts","webpack://pos/../../../src/modules/ScriptManager/ScriptManager.ts","webpack://pos/../../../src/modules/ScriptManager/federated.ts","webpack://pos/../../../src/modules/ScriptManager/getWebpackContext.ts","webpack://pos/../../../src/modules/ScriptManager/index.ts","webpack://pos/../../../src/modules/ScriptManager/types.ts","webpack://pos/./node_modules/@callstack/repack/mf/core-plugin.js","webpack://pos/./node_modules/@callstack/repack/mf/prefetch-plugin.js","webpack://pos/./node_modules/@callstack/repack/mf/resolver-plugin.js","webpack://pos/./node_modules/@module-federation/error-codes/dist/index.cjs.js","webpack://pos/./node_modules/@module-federation/runtime-core/dist/index.cjs.cjs","webpack://pos/./node_modules/@module-federation/runtime-core/dist/polyfills.cjs.cjs","webpack://pos/./node_modules/@module-federation/runtime/dist/index.cjs.cjs","webpack://pos/./node_modules/@module-federation/runtime/dist/utils.cjs.cjs","webpack://pos/./node_modules/@module-federation/sdk/dist/index.cjs.cjs","webpack://pos/./node_modules/@module-federation/sdk/dist/polyfills.cjs.cjs","webpack://pos/./node_modules/@module-federation/webpack-bundler-runtime/dist/constant.cjs.cjs","webpack://pos/./node_modules/@module-federation/webpack-bundler-runtime/dist/index.cjs.cjs","webpack://pos/./node_modules/@swc/helpers/cjs/_array_like_to_array.cjs","webpack://pos/./node_modules/@swc/helpers/cjs/_array_with_holes.cjs","webpack://pos/./node_modules/@swc/helpers/cjs/_array_without_holes.cjs","webpack://pos/./node_modules/@swc/helpers/cjs/_assert_this_initialized.cjs","webpack://pos/./node_modules/@swc/helpers/cjs/_async_to_generator.cjs","webpack://pos/./node_modules/@swc/helpers/cjs/_call_super.cjs","webpack://pos/./node_modules/@swc/helpers/cjs/_class_call_check.cjs","webpack://pos/./node_modules/@swc/helpers/cjs/_create_class.cjs","webpack://pos/./node_modules/@swc/helpers/cjs/_define_property.cjs","webpack://pos/./node_modules/@swc/helpers/cjs/_export_star.cjs","webpack://pos/./node_modules/@swc/helpers/cjs/_get_prototype_of.cjs","webpack://pos/./node_modules/@swc/helpers/cjs/_inherits.cjs","webpack://pos/./node_modules/@swc/helpers/cjs/_interop_require_default.cjs","webpack://pos/./node_modules/@swc/helpers/cjs/_is_native_reflect_construct.cjs","webpack://pos/./node_modules/@swc/helpers/cjs/_iterable_to_array.cjs","webpack://pos/./node_modules/@swc/helpers/cjs/_iterable_to_array_limit.cjs","webpack://pos/./node_modules/@swc/helpers/cjs/_non_iterable_rest.cjs","webpack://pos/./node_modules/@swc/helpers/cjs/_non_iterable_spread.cjs","webpack://pos/./node_modules/@swc/helpers/cjs/_object_spread.cjs","webpack://pos/./node_modules/@swc/helpers/cjs/_possible_constructor_return.cjs","webpack://pos/./node_modules/@swc/helpers/cjs/_set_prototype_of.cjs","webpack://pos/./node_modules/@swc/helpers/cjs/_sliced_to_array.cjs","webpack://pos/./node_modules/@swc/helpers/cjs/_to_array.cjs","webpack://pos/./node_modules/@swc/helpers/cjs/_to_consumable_array.cjs","webpack://pos/./node_modules/@swc/helpers/cjs/_type_of.cjs","webpack://pos/./node_modules/@swc/helpers/cjs/_unsupported_iterable_to_array.cjs","webpack://pos/./node_modules/@callstack/repack/dist/modules/ScriptManager/NativeScriptManager.js","webpack://pos/./node_modules/events/events.js","webpack://pos/./node_modules/shallowequal/index.js","webpack://pos/./node_modules/tapable/lib/AsyncParallelBailHook.js","webpack://pos/./node_modules/tapable/lib/AsyncParallelHook.js","webpack://pos/./node_modules/tapable/lib/AsyncSeriesBailHook.js","webpack://pos/./node_modules/tapable/lib/AsyncSeriesHook.js","webpack://pos/./node_modules/tapable/lib/AsyncSeriesLoopHook.js","webpack://pos/./node_modules/tapable/lib/AsyncSeriesWaterfallHook.js","webpack://pos/./node_modules/tapable/lib/Hook.js","webpack://pos/./node_modules/tapable/lib/HookCodeFactory.js","webpack://pos/./node_modules/tapable/lib/HookMap.js","webpack://pos/./node_modules/tapable/lib/MultiHook.js","webpack://pos/./node_modules/tapable/lib/SyncBailHook.js","webpack://pos/./node_modules/tapable/lib/SyncHook.js","webpack://pos/./node_modules/tapable/lib/SyncLoopHook.js","webpack://pos/./node_modules/tapable/lib/SyncWaterfallHook.js","webpack://pos/./node_modules/tapable/lib/index.js","webpack://pos/./node_modules/tapable/lib/util-browser.js","webpack://pos/"],"sourcesContent":["import type { FederationRuntimePlugin } from '@module-federation/enhanced/runtime';\nimport type * as RepackClient from '../ScriptManager/index.js';\n\nconst RepackCorePlugin: () => FederationRuntimePlugin = () => ({\n  name: 'repack-core-plugin',\n  loadEntry: async ({ remoteInfo }) => {\n    const client = require('../ScriptManager/index.js') as typeof RepackClient;\n    const { ScriptManager, getWebpackContext } = client;\n    const { entry, entryGlobalName } = remoteInfo;\n\n    try {\n      await ScriptManager.shared.loadScript(\n        entryGlobalName,\n        undefined,\n        getWebpackContext(),\n        entry\n      );\n\n      // @ts-ignore\n      if (!globalThis[entryGlobalName]) {\n        throw new Error();\n      }\n\n      // @ts-ignore\n      return globalThis[entryGlobalName];\n    } catch {\n      console.error(`Failed to load remote entry: ${entryGlobalName}`);\n    }\n  },\n  generatePreloadAssets: async () => {\n    // noop for compatibility\n    return Promise.resolve({\n      cssAssets: [],\n      jsAssetsWithoutEntry: [],\n      entryAssets: [],\n    });\n  },\n});\n\nexport default RepackCorePlugin;\n","import type { FederationRuntimePlugin } from '@module-federation/enhanced/runtime';\nimport type * as RepackClient from '../ScriptManager/index.js';\n\ninterface PrefetchAsset {\n  name: string;\n  remoteName: string;\n  url: string;\n}\n\nfunction getAssetName(asset: string): string {\n  // remove the extension from the asset name\n  return asset.split('.')[0];\n}\n\nfunction getAssetUrl(asset: string) {\n  // create placeholder reference url for the asset\n  return 'prefetch:///' + asset;\n}\n\nfunction prefetchAsset(asset: PrefetchAsset) {\n  const client = require('../ScriptManager/index.js') as typeof RepackClient;\n  const { ScriptManager, getWebpackContext } = client;\n\n  // caller should be undefined when fetching/loading the remote entry container\n  const caller = asset.name === asset.remoteName ? undefined : asset.remoteName;\n\n  return ScriptManager.shared.prefetchScript(\n    asset.name,\n    caller,\n    getWebpackContext(),\n    asset.url\n  );\n}\n\nconst RepackPrefetchPlugin: () => FederationRuntimePlugin = () => ({\n  name: 'repack-prefetch-plugin',\n  generatePreloadAssets: async (args) => {\n    const preloadConfig = args.preloadOptions.preloadConfig;\n    const remoteName = preloadConfig.nameOrAlias;\n    const remoteSnapshot = args.remoteSnapshot;\n\n    if (preloadConfig.depsRemote !== false) {\n      console.warn(\n        '[RepackPrefetchPlugin] ' +\n          'The depsRemote configuration option is not implemented yet. ' +\n          'This setting will be ignored and will have no effect. ' +\n          'You can hide this warning by setting depsRemote explicitly to false.'\n      );\n    }\n\n    function handleAssets(assets: string[]): PrefetchAsset[] {\n      return assets.map((asset) => ({\n        name: getAssetName(asset),\n        remoteName,\n        url: getAssetUrl(asset),\n      }));\n    }\n\n    let assets: PrefetchAsset[] = [];\n\n    if ('modules' in remoteSnapshot) {\n      for (const exposedModule of remoteSnapshot.modules) {\n        if (preloadConfig.exposes) {\n          if (!preloadConfig.exposes.includes(exposedModule.moduleName)) {\n            continue;\n          }\n        }\n\n        if (preloadConfig.resourceCategory === 'all') {\n          assets.push(...handleAssets(exposedModule.assets.js.async));\n          assets.push(...handleAssets(exposedModule.assets.js.sync));\n        } else if (preloadConfig.resourceCategory === 'sync') {\n          assets.push(...handleAssets(exposedModule.assets.js.sync));\n        }\n      }\n\n      if (preloadConfig.filter) {\n        assets = assets.filter((asset) => preloadConfig.filter!(asset.name));\n      }\n\n      assets.unshift({\n        name: remoteSnapshot.globalName,\n        remoteName: remoteSnapshot.globalName,\n        url: getAssetUrl(remoteSnapshot.remoteEntry),\n      });\n    }\n\n    await Promise.all(assets.map(prefetchAsset));\n\n    // noop for compatibility\n    return Promise.resolve({\n      cssAssets: [],\n      jsAssetsWithoutEntry: [],\n      entryAssets: [],\n    });\n  },\n});\n\nexport default RepackPrefetchPlugin;\n","import type {\n  FederationHost,\n  FederationRuntimePlugin,\n} from '@module-federation/enhanced/runtime';\nimport type * as RepackClient from '../ScriptManager/index.js';\n\ntype MFRemote = Parameters<FederationHost['registerRemotes']>[0][0];\n\nexport type RepackResolverPluginConfiguration =\n  | Omit<RepackClient.ScriptLocator, 'url'>\n  | ((url: string) => Promise<RepackClient.ScriptLocator>);\n\nconst createScriptLocator = async (\n  entryUrl: string,\n  config?: RepackResolverPluginConfiguration\n) => {\n  if (typeof config === 'function') {\n    const locator = await config(entryUrl);\n    return locator;\n  }\n  if (typeof config === 'object') {\n    return { url: entryUrl, ...config };\n  }\n  return { url: entryUrl };\n};\n\nconst getPublicPath = (url: string) => {\n  return url.split('/').slice(0, -1).join('/');\n};\n\nconst getAssetPath = (url: string) => {\n  const assetPath = url.split(getPublicPath(url))[1];\n  // normalize by removing leading slash\n  return assetPath.startsWith('/') ? assetPath.slice(1) : assetPath;\n};\n\nconst rebaseRemoteUrl = (from: string, to: string) => {\n  const assetPath = getAssetPath(from);\n  const publicPath = getPublicPath(to);\n  return [publicPath, assetPath].join('/');\n};\n\nconst registerResolver = async (\n  remoteInfo: MFRemote,\n  config?: RepackResolverPluginConfiguration\n) => {\n  // when ScriptManager.shared.resolveScript is called, registerResolver\n  // should evaluate before it and and the resolver will be registered\n  // before any remote script is resolved\n  const { ScriptManager } = (await import(\n    '../ScriptManager/index.js'\n  )) as typeof RepackClient;\n\n  // when manifest is used, the valid entry URL comes from the version field\n  // otherwise, the entry URL comes from the entry field which has the correct publicPath for the remote set\n  let entryUrl: string | undefined;\n  if ('version' in remoteInfo && remoteInfo.version) {\n    entryUrl = remoteInfo.version;\n  } else if ('entry' in remoteInfo) {\n    entryUrl = remoteInfo.entry;\n  }\n\n  if (!entryUrl) {\n    throw new Error(\n      '[RepackResolverPlugin] Cannot determine entry URL for remote: ' +\n        remoteInfo.name\n    );\n  }\n\n  ScriptManager.shared.addResolver(\n    async (scriptId, caller, referenceUrl) => {\n      if (scriptId === remoteInfo.name || caller === remoteInfo.name) {\n        // referenceUrl should always be present and this should never happen\n        if (!referenceUrl) {\n          throw new Error('[RepackResolverPlugin] Reference URL is missing');\n        }\n\n        const url = rebaseRemoteUrl(referenceUrl, entryUrl);\n        const locator = await createScriptLocator(url, config);\n        return locator;\n      }\n    },\n    { key: remoteInfo.name }\n  );\n};\n\nconst RepackResolverPlugin: (\n  config?: RepackResolverPluginConfiguration\n) => FederationRuntimePlugin = (config) => ({\n  name: 'repack-resolver-plugin',\n  registerRemote: (args) => {\n    // asynchronously add a resolver for the remote\n    registerResolver(args.remote, config);\n    return args;\n  },\n});\n\nexport default RepackResolverPlugin;\n","import shallowEqual from 'shallowequal';\nimport {\n  type NormalizedScriptLocator,\n  NormalizedScriptLocatorHTTPMethod,\n  NormalizedScriptLocatorSignatureVerificationMode,\n} from './NativeScriptManager.js';\nimport type { ScriptLocator } from './types.js';\n\n/**\n * Representation of a Script to load and execute, used by {@link ScriptManager}.\n *\n * When adding resolvers to `ScriptManager` in `ScriptManager.shared.addResolver(...)`, you can use\n * `Script.getDevServerURL(...)`, `Script.getFileSystemURL(...)` or `Script.getRemoteURL(...)`\n * to create a `url` for the script.\n *\n * Other methods are designed for internal use only.\n */\nexport class Script {\n  static DEFAULT_TIMEOUT = 30000; // 30s\n\n  /**\n   * Get URL of a script hosted on development server.\n   *\n   * @param scriptId Id of the script.\n   */\n  static getDevServerURL(scriptId: string) {\n    return (webpackContext: RepackRuntimeGlobals.WebpackRequire) =>\n      `${webpackContext.p}${webpackContext.u(scriptId)}`;\n  }\n\n  /**\n   * Get URL of a script stored on filesystem on the target mobile device.\n   *\n   * @param scriptId Id of the script.\n   */\n  static getFileSystemURL(scriptId: string) {\n    return (webpackContext: RepackRuntimeGlobals.WebpackRequire) =>\n      webpackContext.u(`file:///${scriptId}`);\n  }\n\n  /**\n   * Get URL of a script hosted on a remote server.\n   *\n   * By default `.chunk.bundle` extension will be added to the URL.\n   * If your script has different extension, you should pass `{ excludeExtension: true }` as 2nd argument.\n   *\n   * @param url A URL to remote location where the script is stored.\n   * @param options Additional options.\n   */\n  static getRemoteURL(\n    url: string,\n    options: { excludeExtension?: boolean } = {}\n  ) {\n    if (options.excludeExtension) {\n      return url;\n    }\n\n    return (webpackContext: RepackRuntimeGlobals.WebpackRequire) =>\n      webpackContext.u(url);\n  }\n\n  /**\n   * Get unique identifier for the script.\n   *\n   * Used to create unique identifier for the script, which serves as its key in the cache.\n   *\n   * @param scriptId Id of the script.\n   * @param caller Optional caller name to prefix the script id.\n   */\n  static getScriptUniqueId(scriptId: string, caller?: string) {\n    const prefix = caller ? caller + '_' : '';\n    return prefix + scriptId;\n  }\n\n  /**\n   * Create new instance of `Script` from non-normalized script locator data.\n   *\n   * @param locator Non-normalized locator data.\n   * @param fetch Initial flag for whether script should be fetched or not.\n   *\n   * @internal\n   */\n  static from(\n    key: { scriptId: string; caller?: string },\n    locator: ScriptLocator,\n    fetch: boolean\n  ) {\n    const headers: Record<string, string> = {};\n    new Headers(locator.headers).forEach((value: string, key: string) => {\n      headers[key.toLowerCase()] = value;\n    });\n\n    const uniqueId = Script.getScriptUniqueId(key.scriptId, key.caller);\n\n    let body: NormalizedScriptLocator['body'];\n    if (locator.body instanceof FormData) {\n      const bodyObject: Record<string, string> = {};\n      locator.body.forEach((value, key) => {\n        if (typeof value === 'string') {\n          bodyObject[key] = value;\n        } else {\n          console.warn('Script does not support File as FormData key in body');\n        }\n      });\n      body = JSON.stringify(bodyObject);\n    } else if (locator.body instanceof URLSearchParams) {\n      const bodyObject: Record<string, string> = {};\n      locator.body.forEach((value, key) => {\n        bodyObject[key] = value;\n      });\n      body = JSON.stringify(bodyObject);\n    } else {\n      body = locator.body ?? undefined;\n    }\n\n    if (typeof locator.url === 'function') {\n      throw new Error('Property url as a function is not support');\n    }\n\n    return new Script(\n      key.scriptId,\n      key.caller,\n      {\n        uniqueId,\n        method:\n          (locator.method as NormalizedScriptLocatorHTTPMethod) ??\n          NormalizedScriptLocatorHTTPMethod.GET,\n        url: locator.url,\n        absolute: locator.absolute ?? false,\n        timeout: locator.timeout ?? Script.DEFAULT_TIMEOUT,\n        retry: locator.retry,\n        retryDelay: locator.retryDelay,\n        query: new URLSearchParams(locator.query).toString() || undefined,\n        body,\n        headers: Object.keys(headers).length ? headers : undefined,\n        fetch: locator.cache === false ? true : fetch,\n        verifyScriptSignature:\n          (locator.verifyScriptSignature as NormalizedScriptLocatorSignatureVerificationMode) ??\n          NormalizedScriptLocatorSignatureVerificationMode.OFF,\n      },\n      locator.cache\n    );\n  }\n\n  /**\n   * Constructs new representation of a script.\n   *\n   * @param locator Normalized locator data.\n   * @param cache Flag whether use cache or not, `true` by default.\n   *\n   * @internal\n   */\n  constructor(\n    public readonly scriptId: string,\n    public readonly caller: string | undefined,\n    public readonly locator: NormalizedScriptLocator & {\n      retry?: number;\n      retryDelay?: number;\n    },\n    public readonly cache: boolean = true\n  ) {}\n\n  /**\n   * Check if the script was already cached and cache should be updated with new data.\n   *\n   * @param cachedData Cached data for the same script.\n   *\n   * @internal\n   */\n  shouldUpdateCache(\n    cachedData: Pick<\n      NormalizedScriptLocator,\n      'method' | 'url' | 'query' | 'headers' | 'body'\n    >\n  ) {\n    if (!this.cache || !cachedData) {\n      return false;\n    }\n\n    return this.checkIfCacheDataOutdated(cachedData);\n  }\n\n  /**\n   * Check if the script should be fetched again or reused,\n   * based on previous cached data.\n   *\n   * @param cachedData Cached data for the same script.\n   *\n   * @internal\n   */\n  shouldRefetch(\n    cachedData: Pick<\n      NormalizedScriptLocator,\n      'method' | 'url' | 'query' | 'headers' | 'body'\n    >\n  ) {\n    if (!this.cache) {\n      return true;\n    }\n\n    return this.checkIfCacheDataOutdated(cachedData);\n  }\n\n  /**\n   * Check if previous cached data is the same as the new one.\n   *\n   * @param cachedData Cached data for the same script.\n   *\n   * @internal\n   */\n  checkIfCacheDataOutdated(\n    cachedData: Pick<\n      NormalizedScriptLocator,\n      'method' | 'url' | 'query' | 'headers' | 'body'\n    >\n  ) {\n    return (\n      cachedData.method !== this.locator.method ||\n      cachedData.url !== this.locator.url ||\n      cachedData.query !== this.locator.query ||\n      !shallowEqual(cachedData.headers, this.locator.headers) ||\n      cachedData.body !== this.locator.body\n    );\n  }\n\n  /**\n   * Get object to store in cache.\n   *\n   * @internal\n   */\n  getCacheData() {\n    return {\n      method: this.locator.method,\n      url: this.locator.url,\n      query: this.locator.query,\n      headers: this.locator.headers,\n      body: this.locator.body,\n    };\n  }\n\n  toObject() {\n    return {\n      scriptId: this.scriptId,\n      caller: this.caller,\n      locator: this.locator,\n      cache: this.cache,\n    };\n  }\n}\n","// biome-ignore lint/style/useNodejsImportProtocol: use 'events' module instead of node builtin\nimport EventEmitter from 'events';\nimport { AsyncSeriesBailHook, AsyncSeriesWaterfallHook } from 'tapable';\nimport NativeScriptManager, {\n  type NormalizedScriptLocator,\n} from './NativeScriptManager.js';\nimport { Script } from './Script.js';\nimport { getWebpackContext } from './getWebpackContext.js';\nimport type {\n  ScriptLocator,\n  ScriptLocatorResolver,\n  StorageApi,\n} from './types.js';\n\ntype Cache = Record<\n  string,\n  Pick<NormalizedScriptLocator, 'method' | 'url' | 'query' | 'headers' | 'body'>\n>;\n\ntype ScriptsPromises = Record<\n  string,\n  (Promise<void> & { isPrefetch?: true }) | undefined\n>;\n\nconst DEFAULT_RESOLVER_PRIORITY = 2;\nconst DEFAULT_RESOLVER_KEY = '__default__';\n\nconst CACHE_NAME = 'Repack.ScriptManager.Cache';\nconst CACHE_VERSION = 'v4';\nconst CACHE_ENV = __DEV__ ? 'debug' : 'release';\n\nconst CACHE_KEY = [CACHE_NAME, CACHE_VERSION, CACHE_ENV].join('.');\n\nconst LOADING_ERROR_CODES = [\n  // android\n  'NetworkFailure',\n  'RequestFailure',\n  // ios\n  'ScriptDownloadFailure',\n];\n\ntype MaybePromise<T> = T | Promise<T>;\n\nfunction promisify<T extends (...args: any[]) => any>(fn: T) {\n  return async (...args: Parameters<T>) => fn(...args);\n}\n\n/* Options for resolver when adding it to a `ScriptManager`. */\nexport interface ResolverOptions {\n  /**\n   * Priority of the resolver. Defaults to `2`.\n   * Resolvers are called based on the highest priority,\n   * so higher the number, the higher priority the resolver gets.\n   */\n  priority?: number;\n  /**\n   * Unique key to identify the resolver.\n   * If not provided, the resolver will be added unconditionally.\n   * If provided, the new resolver will be replace the existing one configured with the same `uniqueKey`.\n   */\n  key?: string;\n}\n\ninterface ResolveScriptOptions {\n  scriptId: string;\n  caller?: string;\n  webpackContext: RepackRuntimeGlobals.WebpackRequire;\n  referenceUrl?: string;\n}\n\ninterface LoadScriptOptions extends ResolveScriptOptions {}\n\ninterface ResolveHookOptions {\n  options: ResolveScriptOptions;\n  resolvers: Array<[string, string | number, ScriptLocatorResolver]>;\n}\n\ninterface BeforeResolveHookOptions {\n  options: ResolveScriptOptions;\n}\n\ninterface AfterResolveHookOptions {\n  options: ResolveScriptOptions;\n  locator: ScriptLocator;\n}\n\ninterface ErrorResolveHookOptions {\n  options: ResolveScriptOptions;\n  error: Error;\n}\n\ninterface BeforeLoadHookOptions {\n  options: LoadScriptOptions;\n  script: Script;\n}\n\ninterface LoadHookOptions {\n  options: LoadScriptOptions;\n  script: Script;\n  loadScript: (\n    scriptId?: string,\n    locator?: NormalizedScriptLocator & { retryDelay?: number; retry?: number }\n  ) => Promise<void>;\n}\n\ninterface AfterLoadHookOptions {\n  options: LoadScriptOptions;\n  script: Script;\n}\n\ninterface ErrorLoadHookOptions {\n  options: LoadScriptOptions;\n  error: Error;\n}\n\n/**\n * A manager to ease resolution, downloading and executing additional code from:\n * - arbitrary JavaScript scripts\n * - Webpack chunks\n * - Webpack bundles\n * - Webpack MF containers\n *\n * ScriptManager is globally available under `ScriptManager.shared` in main bundle, chunks and containers.\n *\n * Use `ScriptManager.shared` instead of creating new instance of `ScriptManager`.\n *\n * This API is mainly useful, if you are working with any form of Code Splitting.\n *\n * `ScriptManager` is also an `EventEmitter` and emits the following events:\n * - `resolving` with `{ scriptId, caller }`\n * - `resolved` with `scriptId: string, caller?: string, locator: NormalizedScriptLocator, cache: boolean`\n * - `prefetching` with `scriptId: string, caller?: string, locator: NormalizedScriptLocator, cache: boolean`\n * - `loading` with `scriptId: string, caller?: string, locator: NormalizedScriptLocator, cache: boolean`\n * - `loaded` with `scriptId: string, caller?: string, locator: NormalizedScriptLocator, cache: boolean`\n * - `error` with `error: Error`\n *\n * Example of using this API with async Webpack chunk:\n * ```js\n * import * as React from 'react';\n * import { ScriptManager, Script } from '@callstack/repack/client';\n *\n * ScriptManager.shared.addResolver(async (scriptId) => {\n *   if (__DEV__) {\n *     return {\n *       url: Script.getDevServerURL(scriptId);\n *       cache: false,\n *     };\n *   }\n *\n *   return {\n *     url: Script.getRemoteURL(`http://domain.exaple/apps/${scriptId}`),\n *   };\n * });\n *\n * // ScriptManager.shared.loadScript is called internally when running `import()`\n * const TeacherModule = React.lazy(() => import('./Teacher.js'));\n * const StudentModule = React.lazy(() => import('./Student.js'));\n *\n * export function App({ role }) {\n *   if (role === 'teacher') {\n *     return <TeacherModule />;\n *   }\n *\n *   return <StudentModule />\n * }\n * ```\n */\nexport class ScriptManager extends EventEmitter {\n  static init() {\n    if (!__webpack_require__.repack.shared.scriptManager) {\n      __webpack_require__.repack.shared.scriptManager = new ScriptManager();\n    }\n  }\n\n  static get shared(): ScriptManager {\n    return __webpack_require__.repack.shared.scriptManager!;\n  }\n\n  protected cache: Cache = {};\n  protected scriptsPromises: ScriptsPromises = {};\n  protected cacheInitialized = false;\n  protected resolvers: Array<[string, string | number, ScriptLocatorResolver]> =\n    [];\n  protected storage?: StorageApi;\n\n  /**\n   * Constructs instance of `ScriptManager`.\n   *\n   * __Should not be called directly__ - use `ScriptManager.shared`.\n   *\n   * @internal\n   */\n  protected constructor(private nativeScriptManager = NativeScriptManager) {\n    super();\n\n    if (!nativeScriptManager) {\n      throw new Error(\n        'repack react-native module was not found.' +\n          (__DEV__ ? ' Did you forget to update native dependencies?' : '')\n      );\n    }\n\n    if (__webpack_require__.repack.shared.scriptManager) {\n      throw new Error(\n        'ScriptManager was already instantiated. Use ScriptManager.shared instead.'\n      );\n    }\n\n    __webpack_require__.repack.shared.scriptManager = this;\n  }\n\n  private hookMap = {\n    beforeResolve: new AsyncSeriesWaterfallHook<\n      BeforeResolveHookOptions,\n      BeforeResolveHookOptions\n    >(['args']),\n    resolve: new AsyncSeriesBailHook<\n      ResolveHookOptions,\n      ScriptLocator | undefined\n    >(['args']),\n    afterResolve: new AsyncSeriesWaterfallHook<\n      AfterResolveHookOptions,\n      AfterResolveHookOptions\n    >(['args']),\n    errorResolve: new AsyncSeriesBailHook<\n      ErrorResolveHookOptions,\n      ScriptLocator | undefined\n    >(['args']),\n    beforeLoad: new AsyncSeriesWaterfallHook<\n      BeforeLoadHookOptions,\n      BeforeLoadHookOptions\n    >(['args']),\n    load: new AsyncSeriesBailHook<LoadHookOptions, boolean>(['args']),\n    afterLoad: new AsyncSeriesWaterfallHook<\n      AfterLoadHookOptions,\n      AfterLoadHookOptions\n    >(['args']),\n    errorLoad: new AsyncSeriesBailHook<ErrorLoadHookOptions, boolean>(['args']),\n  };\n\n  public hooks = {\n    beforeResolve: (\n      fn: (\n        args: BeforeResolveHookOptions\n      ) => MaybePromise<BeforeResolveHookOptions>\n    ) => this.hookMap.beforeResolve.tapPromise('beforeResolve', promisify(fn)),\n    resolve: (\n      fn: (args: ResolveHookOptions) => MaybePromise<ScriptLocator | undefined>\n    ) => this.hookMap.resolve.tapPromise('resolve', promisify(fn)),\n    afterResolve: (\n      fn: (\n        args: AfterResolveHookOptions\n      ) => MaybePromise<AfterResolveHookOptions>\n    ) => this.hookMap.afterResolve.tapPromise('afterResolve', promisify(fn)),\n    errorResolve: (\n      fn: (\n        args: ErrorResolveHookOptions\n      ) => MaybePromise<ScriptLocator | undefined | void>\n    ) => this.hookMap.errorResolve.tapPromise('errorResolve', promisify(fn)),\n    beforeLoad: (\n      fn: (args: BeforeLoadHookOptions) => MaybePromise<BeforeLoadHookOptions>\n    ) => this.hookMap.beforeLoad.tapPromise('beforeLoad', promisify(fn)),\n    load: (fn: (args: LoadHookOptions) => MaybePromise<boolean>) =>\n      this.hookMap.load.tapPromise('load', promisify(fn)),\n    afterLoad: (\n      fn: (args: AfterLoadHookOptions) => MaybePromise<AfterLoadHookOptions>\n    ) => this.hookMap.afterLoad.tapPromise('afterLoad', promisify(fn)),\n    errorLoad: (\n      fn: (\n        args: ErrorLoadHookOptions\n      ) => MaybePromise<boolean | undefined | void>\n    ) => this.hookMap.errorLoad.tapPromise('errorLoad', promisify(fn)),\n  };\n\n  /**\n   * Sets a storage backend to cache resolved scripts locator data.\n   *\n   * The stored data is used to detect if scripts locator data of previously downloaded\n   * script hasn't changed to avoid over-fetching the script.\n   *\n   * @param storage Implementation of storage functions.\n   */\n  setStorage(storage?: StorageApi) {\n    this.storage = storage;\n  }\n\n  /**\n   * Adds new script locator resolver.\n   *\n   * Resolver is an async function to resolve script locator data - in other words, it's a function to\n   * tell the {@link ScriptManager} how to fetch the script.\n   *\n   * There's no limitation on what logic you can run inside this function - it can include:\n   * - fetching/loading remote config\n   * - fetching/loading feature flags\n   * - fetching/loading A/B testing data\n   * - calling native modules\n   * - running arbitrary logic\n   *\n   * @param resolver Resolver function to add.\n   * @param options Resolver options.\n   */\n  addResolver(resolver: ScriptLocatorResolver, options: ResolverOptions = {}) {\n    const priority = options.priority ?? DEFAULT_RESOLVER_PRIORITY;\n    const uniqueKey = options.key;\n\n    this.resolvers = this.resolvers\n      .filter(([key]) => key !== uniqueKey)\n      .concat([[uniqueKey ?? DEFAULT_RESOLVER_KEY, priority, resolver]])\n      .sort(([, a], [, b]) => Number(b) - Number(a));\n  }\n\n  /**\n   * Removes previously added resolver.\n   *\n   * @param resolver Resolver function or resolver's `uniqueKey` to remove.\n   * @returns `true` if resolver was found and removed, `false` otherwise.\n   */\n  removeResolver(resolver: ScriptLocatorResolver | string): boolean {\n    let index: number;\n    if (typeof resolver === 'string') {\n      index = this.resolvers.findIndex(([key]) => key === resolver);\n    } else {\n      index = this.resolvers.findIndex(([, , item]) => item === resolver);\n    }\n\n    if (index > -1) {\n      this.resolvers.splice(index, 1);\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Removes all previously added resolvers.\n   */\n  removeAllResolvers() {\n    this.resolvers = [];\n  }\n\n  protected async initCache() {\n    if (!this.cacheInitialized) {\n      const cacheEntry = await this.storage?.getItem(CACHE_KEY);\n      this.cache = cacheEntry ? JSON.parse(cacheEntry) : {};\n      this.cacheInitialized = true;\n    }\n  }\n\n  protected async saveCache() {\n    await this.storage?.setItem(CACHE_KEY, JSON.stringify(this.cache));\n  }\n\n  protected handleError(error: any, message: string, ...args: any[]): never {\n    console.error(message, ...args, { originalError: error });\n    this.emit('error', { message, args, originalError: error });\n    throw error;\n  }\n\n  /**\n   * Resolves a {@link Script} instance with normalized locator data.\n   *\n   * Resolution will use previously added (via `ScriptManager.shared.addResolver(...)`) resolvers\n   * in series, util one returns a locator data or will throw if no resolver handled the request.\n   *\n   * Use `ScriptManager.shared.on('resolving', ({ scriptId, caller }) => { })` to listen for when\n   * the script resolution begins.\n   *\n   * Use `ScriptManager.shared.on('resolved', (script) => { })` to listen for when\n   * the script's locator data is resolved.\n   *\n   * @param scriptId Id of the script to resolve.\n   * @param caller Name of the calling script - it can be for example: name of the bundle, chunk or container.\n   */\n  async resolveScript(\n    scriptId: string,\n    caller?: string,\n    webpackContext?: RepackRuntimeGlobals.WebpackRequire,\n    referenceUrl?: string\n  ): Promise<Script>;\n\n  // NOTE: Keep declaration and implementation separate\n  // to allow for better naming in JSDocs while preventing\n  // using the arguments directly in the implementation\n  async resolveScript(\n    __scriptId: string,\n    __caller?: string,\n    __webpackContext = getWebpackContext(),\n    __referenceUrl?: string\n  ): Promise<Script> {\n    let options: ResolveScriptOptions = {\n      scriptId: __scriptId,\n      caller: __caller,\n      referenceUrl: __referenceUrl,\n      webpackContext: __webpackContext,\n    };\n\n    let locator: ScriptLocator | undefined;\n\n    try {\n      await this.initCache();\n\n      if (!this.resolvers.length) {\n        throw new Error(\n          'No script resolvers were added. Did you forget to call `ScriptManager.shared.addResolver(...)`?'\n        );\n      }\n\n      if (this.hookMap.beforeResolve.isUsed()) {\n        ({ options } = await this.hookMap.beforeResolve.promise({ options }));\n      }\n\n      this.emit('resolving', {\n        scriptId: options.scriptId,\n        caller: options.caller,\n      });\n\n      if (this.hookMap.resolve.isUsed()) {\n        // obtain the result from custom implementation through the resolve hook\n        locator = await this.hookMap.resolve.promise({\n          options,\n          resolvers: this.resolvers,\n        });\n      } else {\n        // obtain the result from default implementation\n        for (const [, , resolve] of this.resolvers) {\n          const resolvedLocator = await resolve(\n            options.scriptId,\n            options.caller,\n            options.referenceUrl\n          );\n          if (resolvedLocator) {\n            locator = resolvedLocator;\n            break;\n          }\n        }\n      }\n\n      if (!locator) {\n        throw new Error(\n          `No resolver was able to resolve script ${options.scriptId}`\n        );\n      }\n\n      if (this.hookMap.afterResolve.isUsed()) {\n        ({ options, locator } = await this.hookMap.afterResolve.promise({\n          options,\n          locator,\n        }));\n      }\n\n      if (typeof locator.url === 'function') {\n        locator.url = locator.url(options.webpackContext);\n      }\n    } catch (error) {\n      locator = await this.hookMap.errorResolve.promise({\n        options,\n        error: error as Error,\n      });\n\n      if (!locator) {\n        this.handleError(\n          error,\n          '[ScriptManager] Failed while resolving script locator:',\n          { scriptId: options.scriptId, caller: options.caller }\n        );\n      }\n    }\n\n    try {\n      const script = await this.createScript(\n        options.scriptId,\n        options.caller,\n        locator\n      );\n      this.emit('resolved', script.toObject());\n      return script;\n    } catch (error) {\n      this.handleError(error, '[ScriptManager] Failed while creating script:', {\n        scriptId: options.scriptId,\n        caller: options.caller,\n      });\n    }\n  }\n\n  private async createScript(\n    scriptId: string,\n    caller: string | undefined,\n    locator: ScriptLocator\n  ) {\n    const script = Script.from({ scriptId, caller }, locator, false);\n    const cacheKey = script.locator.uniqueId;\n\n    // Check if user provided a custom shouldUpdateScript function\n    if (locator.shouldUpdateScript) {\n      // If so, we need to wait for it to resolve\n      const fetch = await locator.shouldUpdateScript(\n        scriptId,\n        caller,\n        script.shouldUpdateCache(this.cache[cacheKey])\n      );\n\n      // If it returns true, we need to fetch the script\n      if (fetch) {\n        script.locator.fetch = true;\n      }\n    } else {\n      // If no custom shouldUpdateScript function was provided, we use the default behaviour\n      if (!this.cache[cacheKey]) {\n        script.locator.fetch = true;\n      } else if (script.shouldRefetch(this.cache[cacheKey])) {\n        script.locator.fetch = true;\n      }\n    }\n\n    return script;\n  }\n\n  private async updateCache(script: Script) {\n    if (script.locator.fetch) {\n      const cacheKey = script.locator.uniqueId;\n      this.cache[cacheKey] = script.getCacheData();\n      await this.saveCache();\n    }\n  }\n\n  /**\n   * Resolves given script's location, downloads and executes it.\n   * The execution of the code is handled internally by threading in React Native.\n   *\n   * Use `ScriptManager.shared.on('loading', (script) => { })` to listen for when\n   * the script is about to be loaded.\n   *\n   * Use `ScriptManager.shared.on('loaded', (script) => { })` to listen for when\n   * the script is loaded.\n   *\n   * @param scriptId Id of the script to load.\n   * @param caller Name of the calling script - it can be for example: name of the bundle, chunk or container.\n   */\n  async loadScript(\n    scriptId: string,\n    caller?: string,\n    webpackContext?: RepackRuntimeGlobals.WebpackRequire,\n    referenceUrl?: string\n  ): Promise<void>;\n\n  // NOTE: Keep declaration and implementation separate\n  // to allow for better naming in JSDocs while preventing\n  // using the arguments directly in the implementation\n  async loadScript(\n    __scriptId: string,\n    __caller?: string,\n    __webpackContext = getWebpackContext(),\n    __referenceUrl?: string\n  ) {\n    let options: LoadScriptOptions = {\n      scriptId: __scriptId,\n      caller: __caller,\n      referenceUrl: __referenceUrl,\n      webpackContext: __webpackContext,\n    };\n\n    let loaded = false;\n\n    const uniqueId = Script.getScriptUniqueId(options.scriptId, options.caller);\n\n    if (this.scriptsPromises[uniqueId]) {\n      const { isPrefetch } = this.scriptsPromises[uniqueId];\n\n      // prefetch is not execute the script so we need to run loadScript if promise is for prefetch\n      if (isPrefetch) {\n        await this.scriptsPromises[uniqueId];\n      } else {\n        return this.scriptsPromises[uniqueId];\n      }\n    }\n\n    const loadProcess = async () => {\n      let script = await this.resolveScript(\n        options.scriptId,\n        options.caller,\n        options.webpackContext,\n        options.referenceUrl\n      );\n\n      try {\n        if (this.hookMap.beforeLoad.isUsed()) {\n          ({ options, script } = await this.hookMap.beforeLoad.promise({\n            options,\n            script,\n          }));\n        }\n\n        this.emit('loading', script.toObject());\n\n        if (this.hookMap.load.isUsed()) {\n          loaded = await this.hookMap.load.promise({\n            options,\n            script,\n            loadScript: async (\n              scriptId = options.scriptId,\n              locator = script.locator\n            ) => {\n              await this.loadScriptWithRetry(scriptId, locator);\n            },\n          });\n        } else {\n          await this.loadScriptWithRetry(options.scriptId, script.locator);\n          loaded = true;\n        }\n\n        if (this.hookMap.afterLoad.isUsed()) {\n          ({ options, script } = await this.hookMap.afterLoad.promise({\n            options,\n            script,\n          }));\n        }\n\n        this.emit('loaded', script.toObject());\n        await this.updateCache(script);\n      } catch (error) {\n        const { code } = error as Error & { code: string };\n        loaded = await this.hookMap.errorLoad.promise({\n          options,\n          error: error as Error,\n        });\n        if (!loaded) {\n          this.handleError(\n            error,\n            '[ScriptManager] Failed to load script:',\n            code ? `[${code}]` : '',\n            script.toObject()\n          );\n        }\n      } finally {\n        // should delete script promise even script failed\n        delete this.scriptsPromises[uniqueId];\n      }\n    };\n\n    this.scriptsPromises[uniqueId] = loadProcess();\n    return this.scriptsPromises[uniqueId];\n  }\n\n  /**\n   * Loads a script with retry logic.\n   *\n   * This function attempts to load a script using the nativeScriptManager.\n   * If the initial attempt fails, it retries the specified number of times\n   * with an optional delay between retries.\n   *\n   * @param {string} scriptId - The ID of the script to load.\n   * @param {NormalizedScriptLocator} locator - An NormalizedScriptLocator containing retry configuration.\n   * @param {number} [locator.retry=0] - The number of retry attempts.\n   * @param {number} [locator.retryDelay=0] - The delay in milliseconds between retries.\n   * @throws {Error} Throws an error if all retry attempts fail.\n   */\n  protected async loadScriptWithRetry(\n    scriptId: string,\n    locator: NormalizedScriptLocator & { retryDelay?: number; retry?: number }\n  ) {\n    const { retry = 0, retryDelay = 0 } = locator;\n    let attempts = retry + 1; // Include the initial attempt\n\n    while (attempts > 0) {\n      try {\n        await this.nativeScriptManager.loadScript(scriptId, locator);\n        return; // Successfully loaded the script, exit the loop\n      } catch (error) {\n        attempts--;\n        const { code } = error as Error & { code: string };\n        if (attempts > 0 && LOADING_ERROR_CODES.includes(code)) {\n          if (retryDelay > 0) {\n            await new Promise((resolve) => setTimeout(resolve, retryDelay));\n          }\n        } else {\n          throw error; // No more retries, throw the error\n        }\n      }\n    }\n  }\n\n  /**\n   * Resolves given script's location and downloads it without executing.\n   * This function can be awaited to detect if the script was downloaded and for error handling.\n   *\n   * Use `ScriptManager.shared.on('prefetching', (script) => { })` to listen for when\n   * the script's prefetch beings.\n   *\n   * @param scriptId Id of the script to prefetch.\n   * @param caller Name of the calling script - it can be for example: name of the bundle, chunk or container.\n   */\n  async prefetchScript(\n    scriptId: string,\n    caller?: string,\n    webpackContext = getWebpackContext(),\n    referenceUrl?: string\n  ) {\n    const uniqueId = Script.getScriptUniqueId(scriptId, caller);\n    if (this.scriptsPromises[uniqueId]) {\n      return this.scriptsPromises[uniqueId];\n    }\n    const loadProcess = async () => {\n      const script = await this.resolveScript(\n        scriptId,\n        caller,\n        webpackContext,\n        referenceUrl\n      );\n\n      try {\n        this.emit('prefetching', script.toObject());\n        await this.nativeScriptManager.prefetchScript(scriptId, script.locator);\n        await this.updateCache(script);\n      } catch (error) {\n        const { code } = error as Error & { code: string };\n        this.handleError(\n          error,\n          '[ScriptManager] Failed to prefetch script:',\n          code ? `[${code}]` : '',\n          script.toObject()\n        );\n      } finally {\n        // should delete script promise even script failed\n        delete this.scriptsPromises[uniqueId];\n      }\n    };\n\n    this.scriptsPromises[uniqueId] = loadProcess();\n    this.scriptsPromises[uniqueId].isPrefetch = true;\n    return this.scriptsPromises[uniqueId];\n  }\n\n  /**\n   * Clears the cache (if configured in {@link ScriptManager.setStorage}) and removes downloaded\n   * files for given scripts from the filesystem. This function can be awaited to detect if the\n   * scripts were invalidated and for error handling.\n   *\n   * Use `ScriptManager.shared.on('invalidated', (scriptIds) => { })` to listen for when\n   * the invalidation completes.\n   *\n   * @param scriptIds Array of script ids to clear from cache and remove from filesystem.\n   * @returns Array of script ids that were invalidated.\n   */\n  async invalidateScripts(scriptIds: string[] = []) {\n    try {\n      await this.initCache();\n\n      const ids = scriptIds.length ? scriptIds : Object.keys(this.cache);\n      ids.forEach((scriptId) => {\n        delete this.cache[scriptId];\n        delete this.scriptsPromises[scriptId];\n      });\n\n      await this.saveCache();\n      await this.nativeScriptManager.invalidateScripts(scriptIds);\n\n      this.emit('invalidated', ids);\n      return ids;\n    } catch (error) {\n      const { code } = error as Error & { code: string };\n      this.handleError(\n        error,\n        '[ScriptManager] Failed to invalidate scripts:',\n        code ? `[${code}]` : ''\n      );\n    }\n  }\n\n  /**\n   * Evaluates a script synchronously.\n   *\n   * This function sends the script source and its URL to the native script manager for evaluation.\n   * It is functionally identical to `globalEvalWithSourceUrl`.\n   *\n   * @param scriptSource The source code of the script to evaluate.\n   * @param scriptSourceUrl The URL of the script source, used for debugging purposes.\n   */\n  unstable_evaluateScript(scriptSource: string, scriptSourceUrl: string) {\n    this.nativeScriptManager.unstable_evaluateScript(\n      scriptSource,\n      scriptSourceUrl\n    );\n  }\n}\n","import { ScriptManager } from './ScriptManager.js';\n\n/**\n * Namespace for runtime utilities for Module Federation.\n */\nexport namespace Federated {\n  /**\n   * @deprecated\n   *\n   * Resolves URL to a container or a chunk when using Module Federation,\n   * based on given `scriptId` and `caller`.\n   */\n  export type URLResolver = (\n    scriptId: string,\n    caller?: string\n  ) =>\n    | string\n    | ((webpackContext: RepackRuntimeGlobals.WebpackRequire) => string)\n    | undefined;\n\n  /**\n   * @deprecated\n   *\n   * Configuration options for {@link createURLResolver} for Module Federation.\n   * Allows to configure how created {@link URLResolver} will behave.\n   */\n  export interface URLResolverConfig {\n    /**\n     * A Module Federation container names to URL templates mapping.\n     *\n     * The key in the object is a container name and the value is a template\n     * that will be used to resolve a URL.\n     *\n     * Accepted template params:\n     * - `[name]` - Container name\n     * - `[ext]` - Container extension, eg: `.container.bundle`\n     *\n     * You can omit `[ext]`, if you're using custom extension, in which case, you should\n     * provide extension explicitly. When using custom extension, it's recommended to\n     * provide a URL template for chunks as well using `chunks` property.\n     *\n     * @example\n     * ```ts\n     * {\n     *   containers: {\n     *     app1: 'http://localhost:9000/[name][ext]'\n     *   }\n     * }\n     * ```\n     */\n    containers: Record<string, string>;\n\n    /**\n     * An optional Module Federation container names to URL templates mapping.\n     *\n     * The key in the object is a container names and the value is a template\n     * that will be used to resolve a __chunk__ URL for that container.\n     *\n     * Specifying this property is useful if:\n     * - containers have custom extension (different from `.container.bundle`)\n     * - chunks have custom extensions (different from `.chunk.bundle`)\n     * - chunks have different URL that containers\n     *\n     * When this property is left unspecified, the template URLs are inferred from\n     * `containers` property. The following:\n     * ```\n     * {\n     *   containers: {\n     *     app1: 'http://localhost:9000/[name][ext]\n     *     app2: 'http://localhost:9000/[name].js\n     *   },\n     * }\n     * ```\n     * is equivalent to:\n     * ```ts\n     * {\n     *   containers: {\n     *     app1: 'http://localhost:9000/[name][ext]',\n     *     app2: 'http://localhost:9000/[name].js',\n     *   },\n     *   chunks: {\n     *     app1: 'http://localhost:9000/[name][ext]',\n     *     app2: 'http://localhost:9000/[name].js',\n     *   },\n     * }\n     * ```\n     *\n     * Accepted template params:\n     * - `[name]` - Container name\n     * - `[ext]` - Chunk extension, eg: `.chunk.bundle`\n     *\n     * @example\n     * ```ts\n     * {\n     *   containers: {\n     *     app1: 'http://localhost:9000/[name].container.js',\n     *   },\n     *   chunks: {\n     *     app1: 'http://localhost:9000/chunks/[name][ext]',\n     *   }\n     * }\n     * ```\n     */\n    chunks?: Record<string, string>;\n  }\n\n  /**\n   * @deprecated\n   *\n   * Creates URL resolver for Module Federation from provided config.\n   *\n   * @example\n   * ```ts\n   * import { ScriptManager, Script, Federated } from '@callstack/repack/client';\n   *\n   * const resolveURL = Federated.createURLResolver({\n   *   containers: {\n   *     app1: 'http://localhost:9001/[name][ext]',\n   *     app2: 'http://localhost:9002/[name].container.js',\n   *   },\n   *   chunks: {\n   *     app2: 'http://localhost:9002/chunks/[name][ext]',\n   *   },\n   * });\n   *\n   * ScriptManager.shared.addResolver(async (scriptId, caller) => {\n   *   let url;\n   *   if (caller === 'main') {\n   *     url = __DEV__\n   *       ? Script.getDevServerURL(scriptId)\n   *       : Script.getRemoteURL(`http://localhost:9000/${scriptId}`);\n   *   } else {\n   *     url = resolveURL(scriptId, caller);\n   *   }\n   *\n   *   if (!url) {\n   *     return undefined;\n   *   }\n   *\n   *   return {\n   *     url,\n   *     query: {\n   *       platform: Platform.OS,\n   *     },\n   *   };\n   * });\n   * ```\n   *\n   * `createURLResolver` is a abstraction over {@link Script.getRemoteURL},\n   * for example:\n   * ```ts\n   * import { ScriptManager, Federated } from '@callstack/repack/client';\n   *\n   * ScriptManager.shared.addResolver((scriptId, caller) => {\n   *   const resolveURL = Federated.createURLResolver({\n   *     containers: {\n   *       app1: 'http://localhost:9000/[name][ext]',\n   *     },\n   *   });\n   *\n   *   return {\n   *     url: resolveURL(scriptId, caller);\n   *   };\n   * });\n   * ```\n   * is equivalent to:\n   * ```ts\n   * import { ScriptManager, Script } from '@callstack/repack/client';\n   *\n   * ScriptManager.shared.addResolver(async (scriptId, caller) => {\n   *   if (scriptId === 'app1') {\n   *     return {\n   *       url: 'http://localhost:9000/app1.container.bundle',\n   *     };\n   *   }\n   *\n   *   if (caller === 'app1') {\n   *     return {\n   *       url: Script.getRemoteURL(`http://localhost:9000/${scriptId}`),\n   *     };\n   *   }\n   * });\n   * ```\n   *\n   * @param config Configuration for the resolver.\n   * @param containerExt Extension of container bundles. Defaults to `.container.bundle`.\n   * @returns A resolver function which will try to resolve URL based on given `scriptId` and `caller`.\n   */\n  export function createURLResolver(\n    config: Federated.URLResolverConfig,\n    containerExt = '.container.bundle'\n  ): Federated.URLResolver {\n    const resolvers: Record<string, Federated.URLResolver> = {};\n\n    for (const key in config.containers) {\n      resolvers[key] = (scriptId: string, caller?: string) => {\n        if (scriptId === key) {\n          const url = config.containers[key]\n            .replace(/\\[name\\]/g, scriptId)\n            .replace(/\\[ext\\]/g, containerExt);\n          return url;\n        }\n\n        if (caller === key) {\n          const url = (config.chunks?.[key] ?? config.containers[key]).replace(\n            /\\[name\\]/g,\n            scriptId\n          );\n\n          if (url.includes('[ext]')) {\n            return (webpackContext: RepackRuntimeGlobals.WebpackRequire) =>\n              webpackContext.u(url.replace(/\\[ext\\]/g, ''));\n          }\n\n          return url;\n        }\n\n        return undefined;\n      };\n    }\n\n    return (scriptId, caller) => {\n      const resolver =\n        (caller ? resolvers[caller] : undefined) ?? resolvers[scriptId];\n\n      return resolver(scriptId, caller);\n    };\n  }\n\n  declare function __webpack_init_sharing__(scope: string): Promise<void>;\n  declare let __webpack_share_scopes__: Record<string, any>;\n  declare let self: Record<string, any>;\n\n  /**\n   * @deprecated\n   *\n   * Dynamically imports module from a Module Federation container. Similar to `import('file')`, but\n   * specific to Module Federation. Calling `importModule` will create an async boundary.\n   *\n   * Container will be evaluated only once. If you use `importModule` for the same container twice,\n   * the container will be loaded and evaluated only on the first import.\n   *\n   * Under the hood, `importModule` will call `ScriptManager.shared.loadScript(containerName)`.\n   * This means, a resolver must be added with `ScriptManager.shared.addResolver(...)` beforehand and provided proper\n   * resolution logic to resolve URL based on the `containerName`.\n   *\n   * @param containerName Name of the container - should be the same name provided to\n   * `webpack.container.ModuleFederationPlugin` in `library.name`.\n   * @param module Full name with extension of the module to import from the container - only modules\n   * exposed in `exposes` in `webpack.container.ModuleFederationPlugin` can be used.\n   * @param scope Optional, scope for sharing modules between containers. Defaults to `'default'`.\n   * @returns Exports of given `module` from given container.\n   *\n   * @example\n   * ```ts\n   * import * as React from 'react';\n   * import { Federated } from '@callstack/repack/client';\n   *\n   * const Button = React.lazy(() => Federated.importModule('my-components', './Button.js'));\n   *\n   * const myUtil = await Federated.importModule('my-lib', './myUtil.js');\n   * ```\n   */\n  export async function importModule<Exports = any>(\n    containerName: string,\n    module: string,\n    scope = 'default'\n  ): Promise<Exports> {\n    if (!__webpack_share_scopes__[scope]?.__isInitialized) {\n      // Initializes the share scope.\n      // This fills it with known provided modules from this build and all remotes.\n      await __webpack_init_sharing__(scope);\n      __webpack_share_scopes__[scope].__isInitialized = true;\n    }\n\n    // Do not use `const container = self[containerName];` here. Once container is loaded\n    // `container` reference is not updated, so `container.__isInitialized`\n    // will crash the application, because of reading property from `undefined`.\n    if (!self[containerName]) {\n      // Download and execute container\n      await ScriptManager.shared.loadScript(containerName);\n    }\n\n    const container = self[containerName];\n\n    if (!container.__isInitialized) {\n      container.__isInitialized = true;\n      // Initialize the container, it may provide shared modules\n      await container.init(__webpack_share_scopes__[scope]);\n    }\n\n    const factory = await container.get(module);\n    const exports = factory();\n    return exports;\n  }\n}\n","/**\n * Get Webpack runtime context form current JavaScript scope.\n *\n * __You likely don't need to use it.__\n */\nexport function getWebpackContext(): RepackRuntimeGlobals.WebpackRequire {\n  return __webpack_require__;\n}\n","export * from './ScriptManager.js';\nexport * from './Script.js';\nexport * from './types.js';\nexport * from './getWebpackContext.js';\nexport { Federated } from './federated.js';\n","/**\n * Interface specifying how to fetch a script.\n * It represents the output of {@link ScriptLocatorResolver} function used by {@link ScriptManager}.\n */\nexport interface ScriptLocator {\n  /**\n   * A path-only URL to remote location, where to download a script from.\n   *\n   * Changing this field for the same script, will cause cache invalidation for that script\n   * and a fresh version will be downloaded.\n   *\n   * Example: for `scriptId: 'TeacherModule'` the `url` can look like this:\n   * `https://myapp.com/assets/TeacherModule`.\n   *\n   * **Passing query params might lead to unexpected results. To pass query params use `query` field.**\n   */\n  url: string | ((webpackContext: typeof __webpack_require__) => string);\n\n  /**\n   * Query params to append when building the final URL.\n   *\n   * Changing this field for the same script, will cause cache invalidation for that script\n   * and a fresh version will be downloaded.\n   */\n  query?: string | Record<string, string> | URLSearchParams;\n\n  /**\n   * Headers to pass to a script's fetch request.\n   *\n   * When passing `body`, make sure add content `content-type` header, otherwise `text/plain`\n   * will be used.\n   *\n   * Changing this field for the same script, will cause cache invalidation for that script\n   * and a fresh version will be downloaded.\n   */\n  headers?: Record<string, string> | Headers;\n\n  /**\n   * HTTP method used to fetch script.\n   *\n   * Passing `body` with method `GET` is a no-op. Use `POST` to send `body` data.\n   *\n   * Changing this field for the same script, will cause cache invalidation for that script\n   * and a fresh version will be downloaded.\n   */\n  method?: 'GET' | 'POST';\n\n  /**\n   * HTTP body for a script's fetch request.\n   *\n   * When passing `body`, make sure the `method` is set to `POST` and a correct\n   * `content-type` header is provided.\n   *\n   * Changing this field for the same script, will cause cache invalidation for that script\n   * and a fresh version will be downloaded.\n   */\n  body?: FormData | URLSearchParams | string | null;\n\n  /**\n   * Custom timeout for script fetch requests. Defaults to 30s.\n   * On iOS this `timeout` is used as a `timeoutInterval`\n   * On Android this `timeout` is used as a `readTimeout` and `connectionTimeout`.\n   */\n  timeout?: number;\n\n  /**\n   * Number of times to retry fetching the script in case of failure.\n   *\n   * If the script fails to download due to network issues or server errors,\n   * this field determines how many additional attempts should be made to fetch it.\n   * A value of `0` means no retries will be attempted.\n   * Defaults to `0` if not specified.\n   */\n  retry?: number;\n\n  /**\n   * Delay in milliseconds between each retry attempt.\n   *\n   * This field specifies the wait time between consecutive retry attempts\n   * if the script download fails. It helps to avoid immediate retries and allows\n   * the network or server to recover before trying again.\n   * Defaults to `0` if not specified.\n   */\n  retryDelay?: number;\n\n  /**\n   * Flag indicating whether the URL is an absolute FileSystem URL on a target device.\n   * Useful if you're using custom code to download the script and you want `ScriptManager` to\n   * execute it only from a custom FileSystem path.\n   * Defaults to `false`.\n   */\n  absolute?: boolean;\n\n  /**\n   * Flag to disable script caching. By default set to `true`.\n   *\n   * When `true` (default), it will compare method, url, query, headers and body of\n   * previous (if there was) attempt to load the same script. If none of them changed, it\n   * will NOT download a new copy of the script, but instead, it will only execute previously\n   * downloaded script.\n   * Setting this flat to `false`, disables that behavior.\n   */\n  cache?: boolean;\n\n  /**\n   * Flag to enable script's code-signature verification. By default set to `none`\n   *\n   * `strict` means that the script's code-signature will be verfied regardless of the signature being present in the bundle\n   * `lax` means that the script's code-signature will be verfied only when the signature is present in the bundle\n   *  if the signature is not present in the bundle, the script will be loaded without verification\n   * `off` means that the script's code-signature will not be verfied\n   */\n  verifyScriptSignature?: 'strict' | 'lax' | 'off';\n\n  /**\n   * Function called before loading or getting from the cache and after resolving the script locator.\n   * It's an async function which should return a boolean indicating whether the script should be loaded or use default behaviour.\n   * This is useful when you want to load a script only when certain conditions are met\n   * (e.g. ask user if they want to update/download new version of the script)\n   *\n   * When `true` is returned, the script will be loaded from the network.\n   * When `false` is returned, the script will be loaded from the cache.\n   *\n   * @param scriptId Id of the script to resolve.\n   * @param caller Name of the calling script - it can be for example: name of the bundle, chunk or container.\n   * @param isScriptCacheOutdated Boolean indicating whether the script cache is outdated or not. It's `true` when the script\n   * cache is outdated and `false` when the script cache is up to date or there is no cache for the script.\n   * Outdated cache means that the script was previously downloaded and put into cache,\n   * but the script locator data (method, url, query, headers, or body) has changed since then.\n   * @returns Boolean indicating whether the script should be loaded or not\n   */\n  shouldUpdateScript?: (\n    scriptId?: string,\n    caller?: string,\n    isScriptCacheOutdated?: boolean\n  ) => Promise<boolean> | boolean;\n}\n\n/**\n * Defines a function to resolve a script locator used in {@link ScriptManagerConfig}.\n * It's an async function which should return an object with data on how {@link ScriptManager}\n * should fetch the script. All fields describing the script locator data are listed in {@link ScriptLocator}.\n *\n * Return `undefined` if the script should be resolved by other resolvers instead.\n *\n * @param scriptId Id of the script to resolve.\n * @param caller Name of the calling script - it can be for example: name of the bundle, chunk or container.\n */\nexport type ScriptLocatorResolver = (\n  scriptId: string,\n  caller?: string,\n  referenceUrl?: string\n) => Promise<ScriptLocator | undefined>;\n\n/**\n * Interface for storage backend used in {@link ScriptManagerConfig}.\n * The interface is modelled on Async Storage from `react-native-community`.\n */\nexport interface StorageApi {\n  /** Gets the data for the key. */\n  getItem: (key: string) => Promise<string | null | undefined>;\n  /** Sets the item value based on the key. */\n  setItem: (key: string, value: string) => Promise<void>;\n  /** Removes the item based on the key. */\n  removeItem: (key: string) => Promise<void>;\n}\n","export { default } from '../dist/modules/FederationRuntimePlugins/CorePlugin.js';\n","export { default } from '../dist/modules/FederationRuntimePlugins/PrefetchPlugin.js';\n","export { default } from '../dist/modules/FederationRuntimePlugins/ResolverPlugin.js';\n","'use strict';\n\nconst RUNTIME_001 = 'RUNTIME-001';\nconst RUNTIME_002 = 'RUNTIME-002';\nconst RUNTIME_003 = 'RUNTIME-003';\nconst RUNTIME_004 = 'RUNTIME-004';\nconst RUNTIME_005 = 'RUNTIME-005';\nconst RUNTIME_006 = 'RUNTIME-006';\nconst RUNTIME_007 = 'RUNTIME-007';\nconst RUNTIME_008 = 'RUNTIME-008';\nconst TYPE_001 = 'TYPE-001';\nconst BUILD_001 = 'BUILD-001';\n\nconst getDocsUrl = (errorCode)=>{\n    const type = errorCode.split('-')[0].toLowerCase();\n    return `View the docs to see how to solve: https://module-federation.io/guide/troubleshooting/${type}/${errorCode}`;\n};\nconst getShortErrorMsg = (errorCode, errorDescMap, args, originalErrorMsg)=>{\n    const msg = [\n        `${[\n            errorDescMap[errorCode]\n        ]} #${errorCode}`\n    ];\n    args && msg.push(`args: ${JSON.stringify(args)}`);\n    msg.push(getDocsUrl(errorCode));\n    originalErrorMsg && msg.push(`Original Error Message:\\n ${originalErrorMsg}`);\n    return msg.join('\\n');\n};\n\nfunction _extends() {\n    _extends = Object.assign || function assign(target) {\n        for(var i = 1; i < arguments.length; i++){\n            var source = arguments[i];\n            for(var key in source)if (Object.prototype.hasOwnProperty.call(source, key)) target[key] = source[key];\n        }\n        return target;\n    };\n    return _extends.apply(this, arguments);\n}\n\nconst runtimeDescMap = {\n    [RUNTIME_001]: 'Failed to get remoteEntry exports.',\n    [RUNTIME_002]: 'The remote entry interface does not contain \"init\"',\n    [RUNTIME_003]: 'Failed to get manifest.',\n    [RUNTIME_004]: 'Failed to locate remote.',\n    [RUNTIME_005]: 'Invalid loadShareSync function call from bundler runtime',\n    [RUNTIME_006]: 'Invalid loadShareSync function call from runtime',\n    [RUNTIME_007]: 'Failed to get remote snapshot.',\n    [RUNTIME_008]: 'Failed to load script resources.'\n};\nconst typeDescMap = {\n    [TYPE_001]: 'Failed to generate type declaration. Execute the below cmd to reproduce and fix the error.'\n};\nconst buildDescMap = {\n    [BUILD_001]: 'Failed to find expose module.'\n};\nconst errorDescMap = _extends({}, runtimeDescMap, typeDescMap, buildDescMap);\n\nexports.BUILD_001 = BUILD_001;\nexports.RUNTIME_001 = RUNTIME_001;\nexports.RUNTIME_002 = RUNTIME_002;\nexports.RUNTIME_003 = RUNTIME_003;\nexports.RUNTIME_004 = RUNTIME_004;\nexports.RUNTIME_005 = RUNTIME_005;\nexports.RUNTIME_006 = RUNTIME_006;\nexports.RUNTIME_007 = RUNTIME_007;\nexports.RUNTIME_008 = RUNTIME_008;\nexports.TYPE_001 = TYPE_001;\nexports.buildDescMap = buildDescMap;\nexports.errorDescMap = errorDescMap;\nexports.getShortErrorMsg = getShortErrorMsg;\nexports.runtimeDescMap = runtimeDescMap;\nexports.typeDescMap = typeDescMap;\n","'use strict';\n\nvar polyfills = require('./polyfills.cjs.cjs');\nvar sdk = require('@module-federation/sdk');\nvar errorCodes = require('@module-federation/error-codes');\n\nconst LOG_CATEGORY = '[ Federation Runtime ]';\n// FIXME: pre-bundle ?\nconst logger = sdk.createLogger(LOG_CATEGORY);\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nfunction assert(condition, msg) {\n    if (!condition) {\n        error(msg);\n    }\n}\nfunction error(msg) {\n    if (msg instanceof Error) {\n        msg.message = `${LOG_CATEGORY}: ${msg.message}`;\n        throw msg;\n    }\n    throw new Error(`${LOG_CATEGORY}: ${msg}`);\n}\nfunction warn(msg) {\n    if (msg instanceof Error) {\n        msg.message = `${LOG_CATEGORY}: ${msg.message}`;\n        logger.warn(msg);\n    } else {\n        logger.warn(msg);\n    }\n}\n\nfunction addUniqueItem(arr, item) {\n    if (arr.findIndex((name)=>name === item) === -1) {\n        arr.push(item);\n    }\n    return arr;\n}\nfunction getFMId(remoteInfo) {\n    if ('version' in remoteInfo && remoteInfo.version) {\n        return `${remoteInfo.name}:${remoteInfo.version}`;\n    } else if ('entry' in remoteInfo && remoteInfo.entry) {\n        return `${remoteInfo.name}:${remoteInfo.entry}`;\n    } else {\n        return `${remoteInfo.name}`;\n    }\n}\nfunction isRemoteInfoWithEntry(remote) {\n    return typeof remote.entry !== 'undefined';\n}\nfunction isPureRemoteEntry(remote) {\n    return !remote.entry.includes('.json') && remote.entry.includes('.js');\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nasync function safeWrapper(callback, disableWarn) {\n    try {\n        const res = await callback();\n        return res;\n    } catch (e) {\n        !disableWarn && warn(e);\n        return;\n    }\n}\nfunction isObject(val) {\n    return val && typeof val === 'object';\n}\nconst objectToString = Object.prototype.toString;\n// eslint-disable-next-line @typescript-eslint/ban-types\nfunction isPlainObject(val) {\n    return objectToString.call(val) === '[object Object]';\n}\nfunction isStaticResourcesEqual(url1, url2) {\n    const REG_EXP = /^(https?:)?\\/\\//i;\n    // Transform url1 and url2 into relative paths\n    const relativeUrl1 = url1.replace(REG_EXP, '').replace(/\\/$/, '');\n    const relativeUrl2 = url2.replace(REG_EXP, '').replace(/\\/$/, '');\n    // Check if the relative paths are identical\n    return relativeUrl1 === relativeUrl2;\n}\nfunction arrayOptions(options) {\n    return Array.isArray(options) ? options : [\n        options\n    ];\n}\nfunction getRemoteEntryInfoFromSnapshot(snapshot) {\n    const defaultRemoteEntryInfo = {\n        url: '',\n        type: 'global',\n        globalName: ''\n    };\n    if (sdk.isBrowserEnv() || sdk.isReactNativeEnv()) {\n        return 'remoteEntry' in snapshot ? {\n            url: snapshot.remoteEntry,\n            type: snapshot.remoteEntryType,\n            globalName: snapshot.globalName\n        } : defaultRemoteEntryInfo;\n    }\n    if ('ssrRemoteEntry' in snapshot) {\n        return {\n            url: snapshot.ssrRemoteEntry || defaultRemoteEntryInfo.url,\n            type: snapshot.ssrRemoteEntryType || defaultRemoteEntryInfo.type,\n            globalName: snapshot.globalName\n        };\n    }\n    return defaultRemoteEntryInfo;\n}\nconst processModuleAlias = (name, subPath)=>{\n    // @host/ ./button -> @host/button\n    let moduleName;\n    if (name.endsWith('/')) {\n        moduleName = name.slice(0, -1);\n    } else {\n        moduleName = name;\n    }\n    if (subPath.startsWith('.')) {\n        subPath = subPath.slice(1);\n    }\n    moduleName = moduleName + subPath;\n    return moduleName;\n};\n\nconst CurrentGlobal = typeof globalThis === 'object' ? globalThis : window;\nconst nativeGlobal = (()=>{\n    try {\n        // get real window (incase of sandbox)\n        return document.defaultView;\n    } catch (e) {\n        // node env\n        return CurrentGlobal;\n    }\n})();\nconst Global = nativeGlobal;\nfunction definePropertyGlobalVal(target, key, val) {\n    Object.defineProperty(target, key, {\n        value: val,\n        configurable: false,\n        writable: true\n    });\n}\nfunction includeOwnProperty(target, key) {\n    return Object.hasOwnProperty.call(target, key);\n}\n// This section is to prevent encapsulation by certain microfrontend frameworks. Due to reuse policies, sandbox escapes.\n// The sandbox in the microfrontend does not replicate the value of 'configurable'.\n// If there is no loading content on the global object, this section defines the loading object.\nif (!includeOwnProperty(CurrentGlobal, '__GLOBAL_LOADING_REMOTE_ENTRY__')) {\n    definePropertyGlobalVal(CurrentGlobal, '__GLOBAL_LOADING_REMOTE_ENTRY__', {});\n}\nconst globalLoading = CurrentGlobal.__GLOBAL_LOADING_REMOTE_ENTRY__;\nfunction setGlobalDefaultVal(target) {\n    var _target___FEDERATION__, _target___FEDERATION__1, _target___FEDERATION__2, _target___FEDERATION__3, _target___FEDERATION__4, _target___FEDERATION__5;\n    if (includeOwnProperty(target, '__VMOK__') && !includeOwnProperty(target, '__FEDERATION__')) {\n        definePropertyGlobalVal(target, '__FEDERATION__', target.__VMOK__);\n    }\n    if (!includeOwnProperty(target, '__FEDERATION__')) {\n        definePropertyGlobalVal(target, '__FEDERATION__', {\n            __GLOBAL_PLUGIN__: [],\n            __INSTANCES__: [],\n            moduleInfo: {},\n            __SHARE__: {},\n            __MANIFEST_LOADING__: {},\n            __PRELOADED_MAP__: new Map()\n        });\n        definePropertyGlobalVal(target, '__VMOK__', target.__FEDERATION__);\n    }\n    var ___GLOBAL_PLUGIN__;\n    (___GLOBAL_PLUGIN__ = (_target___FEDERATION__ = target.__FEDERATION__).__GLOBAL_PLUGIN__) != null ? ___GLOBAL_PLUGIN__ : _target___FEDERATION__.__GLOBAL_PLUGIN__ = [];\n    var ___INSTANCES__;\n    (___INSTANCES__ = (_target___FEDERATION__1 = target.__FEDERATION__).__INSTANCES__) != null ? ___INSTANCES__ : _target___FEDERATION__1.__INSTANCES__ = [];\n    var _moduleInfo;\n    (_moduleInfo = (_target___FEDERATION__2 = target.__FEDERATION__).moduleInfo) != null ? _moduleInfo : _target___FEDERATION__2.moduleInfo = {};\n    var ___SHARE__;\n    (___SHARE__ = (_target___FEDERATION__3 = target.__FEDERATION__).__SHARE__) != null ? ___SHARE__ : _target___FEDERATION__3.__SHARE__ = {};\n    var ___MANIFEST_LOADING__;\n    (___MANIFEST_LOADING__ = (_target___FEDERATION__4 = target.__FEDERATION__).__MANIFEST_LOADING__) != null ? ___MANIFEST_LOADING__ : _target___FEDERATION__4.__MANIFEST_LOADING__ = {};\n    var ___PRELOADED_MAP__;\n    (___PRELOADED_MAP__ = (_target___FEDERATION__5 = target.__FEDERATION__).__PRELOADED_MAP__) != null ? ___PRELOADED_MAP__ : _target___FEDERATION__5.__PRELOADED_MAP__ = new Map();\n}\nsetGlobalDefaultVal(CurrentGlobal);\nsetGlobalDefaultVal(nativeGlobal);\nfunction resetFederationGlobalInfo() {\n    CurrentGlobal.__FEDERATION__.__GLOBAL_PLUGIN__ = [];\n    CurrentGlobal.__FEDERATION__.__INSTANCES__ = [];\n    CurrentGlobal.__FEDERATION__.moduleInfo = {};\n    CurrentGlobal.__FEDERATION__.__SHARE__ = {};\n    CurrentGlobal.__FEDERATION__.__MANIFEST_LOADING__ = {};\n    Object.keys(globalLoading).forEach((key)=>{\n        delete globalLoading[key];\n    });\n}\nfunction setGlobalFederationInstance(FederationInstance) {\n    CurrentGlobal.__FEDERATION__.__INSTANCES__.push(FederationInstance);\n}\nfunction getGlobalFederationConstructor() {\n    return CurrentGlobal.__FEDERATION__.__DEBUG_CONSTRUCTOR__;\n}\nfunction setGlobalFederationConstructor(FederationConstructor, isDebug = sdk.isDebugMode()) {\n    if (isDebug) {\n        CurrentGlobal.__FEDERATION__.__DEBUG_CONSTRUCTOR__ = FederationConstructor;\n        CurrentGlobal.__FEDERATION__.__DEBUG_CONSTRUCTOR_VERSION__ = \"0.13.1\";\n    }\n}\n// eslint-disable-next-line @typescript-eslint/ban-types\nfunction getInfoWithoutType(target, key) {\n    if (typeof key === 'string') {\n        const keyRes = target[key];\n        if (keyRes) {\n            return {\n                value: target[key],\n                key: key\n            };\n        } else {\n            const targetKeys = Object.keys(target);\n            for (const targetKey of targetKeys){\n                const [targetTypeOrName, _] = targetKey.split(':');\n                const nKey = `${targetTypeOrName}:${key}`;\n                const typeWithKeyRes = target[nKey];\n                if (typeWithKeyRes) {\n                    return {\n                        value: typeWithKeyRes,\n                        key: nKey\n                    };\n                }\n            }\n            return {\n                value: undefined,\n                key: key\n            };\n        }\n    } else {\n        throw new Error('key must be string');\n    }\n}\nconst getGlobalSnapshot = ()=>nativeGlobal.__FEDERATION__.moduleInfo;\nconst getTargetSnapshotInfoByModuleInfo = (moduleInfo, snapshot)=>{\n    // Check if the remote is included in the hostSnapshot\n    const moduleKey = getFMId(moduleInfo);\n    const getModuleInfo = getInfoWithoutType(snapshot, moduleKey).value;\n    // The remoteSnapshot might not include a version\n    if (getModuleInfo && !getModuleInfo.version && 'version' in moduleInfo && moduleInfo['version']) {\n        getModuleInfo.version = moduleInfo['version'];\n    }\n    if (getModuleInfo) {\n        return getModuleInfo;\n    }\n    // If the remote is not included in the hostSnapshot, deploy a micro app snapshot\n    if ('version' in moduleInfo && moduleInfo['version']) {\n        const { version } = moduleInfo, resModuleInfo = polyfills._object_without_properties_loose(moduleInfo, [\n            \"version\"\n        ]);\n        const moduleKeyWithoutVersion = getFMId(resModuleInfo);\n        const getModuleInfoWithoutVersion = getInfoWithoutType(nativeGlobal.__FEDERATION__.moduleInfo, moduleKeyWithoutVersion).value;\n        if ((getModuleInfoWithoutVersion == null ? void 0 : getModuleInfoWithoutVersion.version) === version) {\n            return getModuleInfoWithoutVersion;\n        }\n    }\n    return;\n};\nconst getGlobalSnapshotInfoByModuleInfo = (moduleInfo)=>getTargetSnapshotInfoByModuleInfo(moduleInfo, nativeGlobal.__FEDERATION__.moduleInfo);\nconst setGlobalSnapshotInfoByModuleInfo = (remoteInfo, moduleDetailInfo)=>{\n    const moduleKey = getFMId(remoteInfo);\n    nativeGlobal.__FEDERATION__.moduleInfo[moduleKey] = moduleDetailInfo;\n    return nativeGlobal.__FEDERATION__.moduleInfo;\n};\nconst addGlobalSnapshot = (moduleInfos)=>{\n    nativeGlobal.__FEDERATION__.moduleInfo = polyfills._extends({}, nativeGlobal.__FEDERATION__.moduleInfo, moduleInfos);\n    return ()=>{\n        const keys = Object.keys(moduleInfos);\n        for (const key of keys){\n            delete nativeGlobal.__FEDERATION__.moduleInfo[key];\n        }\n    };\n};\nconst getRemoteEntryExports = (name, globalName)=>{\n    const remoteEntryKey = globalName || `__FEDERATION_${name}:custom__`;\n    const entryExports = CurrentGlobal[remoteEntryKey];\n    return {\n        remoteEntryKey,\n        entryExports\n    };\n};\n// This function is used to register global plugins.\n// It iterates over the provided plugins and checks if they are already registered.\n// If a plugin is not registered, it is added to the global plugins.\n// If a plugin is already registered, a warning message is logged.\nconst registerGlobalPlugins = (plugins)=>{\n    const { __GLOBAL_PLUGIN__ } = nativeGlobal.__FEDERATION__;\n    plugins.forEach((plugin)=>{\n        if (__GLOBAL_PLUGIN__.findIndex((p)=>p.name === plugin.name) === -1) {\n            __GLOBAL_PLUGIN__.push(plugin);\n        } else {\n            warn(`The plugin ${plugin.name} has been registered.`);\n        }\n    });\n};\nconst getGlobalHostPlugins = ()=>nativeGlobal.__FEDERATION__.__GLOBAL_PLUGIN__;\nconst getPreloaded = (id)=>CurrentGlobal.__FEDERATION__.__PRELOADED_MAP__.get(id);\nconst setPreloaded = (id)=>CurrentGlobal.__FEDERATION__.__PRELOADED_MAP__.set(id, true);\n\nconst DEFAULT_SCOPE = 'default';\nconst DEFAULT_REMOTE_TYPE = 'global';\n\n// fork from https://github.com/originjs/vite-plugin-federation/blob/v1.1.12/packages/lib/src/utils/semver/index.ts\n// those constants are based on https://www.rubydoc.info/gems/semantic_range/3.0.0/SemanticRange#BUILDIDENTIFIER-constant\n// Copyright (c)\n// vite-plugin-federation is licensed under Mulan PSL v2.\n// You can use this software according to the terms and conditions of the Mulan PSL v2.\n// You may obtain a copy of Mulan PSL v2 at:\n//      http://license.coscl.org.cn/MulanPSL2\n// THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT, MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\n// See the Mulan PSL v2 for more details.\nconst buildIdentifier = '[0-9A-Za-z-]+';\nconst build = `(?:\\\\+(${buildIdentifier}(?:\\\\.${buildIdentifier})*))`;\nconst numericIdentifier = '0|[1-9]\\\\d*';\nconst numericIdentifierLoose = '[0-9]+';\nconst nonNumericIdentifier = '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*';\nconst preReleaseIdentifierLoose = `(?:${numericIdentifierLoose}|${nonNumericIdentifier})`;\nconst preReleaseLoose = `(?:-?(${preReleaseIdentifierLoose}(?:\\\\.${preReleaseIdentifierLoose})*))`;\nconst preReleaseIdentifier = `(?:${numericIdentifier}|${nonNumericIdentifier})`;\nconst preRelease = `(?:-(${preReleaseIdentifier}(?:\\\\.${preReleaseIdentifier})*))`;\nconst xRangeIdentifier = `${numericIdentifier}|x|X|\\\\*`;\nconst xRangePlain = `[v=\\\\s]*(${xRangeIdentifier})(?:\\\\.(${xRangeIdentifier})(?:\\\\.(${xRangeIdentifier})(?:${preRelease})?${build}?)?)?`;\nconst hyphenRange = `^\\\\s*(${xRangePlain})\\\\s+-\\\\s+(${xRangePlain})\\\\s*$`;\nconst mainVersionLoose = `(${numericIdentifierLoose})\\\\.(${numericIdentifierLoose})\\\\.(${numericIdentifierLoose})`;\nconst loosePlain = `[v=\\\\s]*${mainVersionLoose}${preReleaseLoose}?${build}?`;\nconst gtlt = '((?:<|>)?=?)';\nconst comparatorTrim = `(\\\\s*)${gtlt}\\\\s*(${loosePlain}|${xRangePlain})`;\nconst loneTilde = '(?:~>?)';\nconst tildeTrim = `(\\\\s*)${loneTilde}\\\\s+`;\nconst loneCaret = '(?:\\\\^)';\nconst caretTrim = `(\\\\s*)${loneCaret}\\\\s+`;\nconst star = '(<|>)?=?\\\\s*\\\\*';\nconst caret = `^${loneCaret}${xRangePlain}$`;\nconst mainVersion = `(${numericIdentifier})\\\\.(${numericIdentifier})\\\\.(${numericIdentifier})`;\nconst fullPlain = `v?${mainVersion}${preRelease}?${build}?`;\nconst tilde = `^${loneTilde}${xRangePlain}$`;\nconst xRange = `^${gtlt}\\\\s*${xRangePlain}$`;\nconst comparator = `^${gtlt}\\\\s*(${fullPlain})$|^$`;\n// copy from semver package\nconst gte0 = '^\\\\s*>=\\\\s*0.0.0\\\\s*$';\n\n// fork from https://github.com/originjs/vite-plugin-federation/blob/v1.1.12/packages/lib/src/utils/semver/index.ts\n// Copyright (c)\n// vite-plugin-federation is licensed under Mulan PSL v2.\n// You can use this software according to the terms and conditions of the Mulan PSL v2.\n// You may obtain a copy of Mulan PSL v2 at:\n//      http://license.coscl.org.cn/MulanPSL2\n// THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT, MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\n// See the Mulan PSL v2 for more details.\nfunction parseRegex(source) {\n    return new RegExp(source);\n}\nfunction isXVersion(version) {\n    return !version || version.toLowerCase() === 'x' || version === '*';\n}\nfunction pipe(...fns) {\n    return (x)=>fns.reduce((v, f)=>f(v), x);\n}\nfunction extractComparator(comparatorString) {\n    return comparatorString.match(parseRegex(comparator));\n}\nfunction combineVersion(major, minor, patch, preRelease) {\n    const mainVersion = `${major}.${minor}.${patch}`;\n    if (preRelease) {\n        return `${mainVersion}-${preRelease}`;\n    }\n    return mainVersion;\n}\n\n// fork from https://github.com/originjs/vite-plugin-federation/blob/v1.1.12/packages/lib/src/utils/semver/index.ts\n// Copyright (c)\n// vite-plugin-federation is licensed under Mulan PSL v2.\n// You can use this software according to the terms and conditions of the Mulan PSL v2.\n// You may obtain a copy of Mulan PSL v2 at:\n//      http://license.coscl.org.cn/MulanPSL2\n// THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT, MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\n// See the Mulan PSL v2 for more details.\nfunction parseHyphen(range) {\n    return range.replace(parseRegex(hyphenRange), (_range, from, fromMajor, fromMinor, fromPatch, _fromPreRelease, _fromBuild, to, toMajor, toMinor, toPatch, toPreRelease)=>{\n        if (isXVersion(fromMajor)) {\n            from = '';\n        } else if (isXVersion(fromMinor)) {\n            from = `>=${fromMajor}.0.0`;\n        } else if (isXVersion(fromPatch)) {\n            from = `>=${fromMajor}.${fromMinor}.0`;\n        } else {\n            from = `>=${from}`;\n        }\n        if (isXVersion(toMajor)) {\n            to = '';\n        } else if (isXVersion(toMinor)) {\n            to = `<${Number(toMajor) + 1}.0.0-0`;\n        } else if (isXVersion(toPatch)) {\n            to = `<${toMajor}.${Number(toMinor) + 1}.0-0`;\n        } else if (toPreRelease) {\n            to = `<=${toMajor}.${toMinor}.${toPatch}-${toPreRelease}`;\n        } else {\n            to = `<=${to}`;\n        }\n        return `${from} ${to}`.trim();\n    });\n}\nfunction parseComparatorTrim(range) {\n    return range.replace(parseRegex(comparatorTrim), '$1$2$3');\n}\nfunction parseTildeTrim(range) {\n    return range.replace(parseRegex(tildeTrim), '$1~');\n}\nfunction parseCaretTrim(range) {\n    return range.replace(parseRegex(caretTrim), '$1^');\n}\nfunction parseCarets(range) {\n    return range.trim().split(/\\s+/).map((rangeVersion)=>rangeVersion.replace(parseRegex(caret), (_, major, minor, patch, preRelease)=>{\n            if (isXVersion(major)) {\n                return '';\n            } else if (isXVersion(minor)) {\n                return `>=${major}.0.0 <${Number(major) + 1}.0.0-0`;\n            } else if (isXVersion(patch)) {\n                if (major === '0') {\n                    return `>=${major}.${minor}.0 <${major}.${Number(minor) + 1}.0-0`;\n                } else {\n                    return `>=${major}.${minor}.0 <${Number(major) + 1}.0.0-0`;\n                }\n            } else if (preRelease) {\n                if (major === '0') {\n                    if (minor === '0') {\n                        return `>=${major}.${minor}.${patch}-${preRelease} <${major}.${minor}.${Number(patch) + 1}-0`;\n                    } else {\n                        return `>=${major}.${minor}.${patch}-${preRelease} <${major}.${Number(minor) + 1}.0-0`;\n                    }\n                } else {\n                    return `>=${major}.${minor}.${patch}-${preRelease} <${Number(major) + 1}.0.0-0`;\n                }\n            } else {\n                if (major === '0') {\n                    if (minor === '0') {\n                        return `>=${major}.${minor}.${patch} <${major}.${minor}.${Number(patch) + 1}-0`;\n                    } else {\n                        return `>=${major}.${minor}.${patch} <${major}.${Number(minor) + 1}.0-0`;\n                    }\n                }\n                return `>=${major}.${minor}.${patch} <${Number(major) + 1}.0.0-0`;\n            }\n        })).join(' ');\n}\nfunction parseTildes(range) {\n    return range.trim().split(/\\s+/).map((rangeVersion)=>rangeVersion.replace(parseRegex(tilde), (_, major, minor, patch, preRelease)=>{\n            if (isXVersion(major)) {\n                return '';\n            } else if (isXVersion(minor)) {\n                return `>=${major}.0.0 <${Number(major) + 1}.0.0-0`;\n            } else if (isXVersion(patch)) {\n                return `>=${major}.${minor}.0 <${major}.${Number(minor) + 1}.0-0`;\n            } else if (preRelease) {\n                return `>=${major}.${minor}.${patch}-${preRelease} <${major}.${Number(minor) + 1}.0-0`;\n            }\n            return `>=${major}.${minor}.${patch} <${major}.${Number(minor) + 1}.0-0`;\n        })).join(' ');\n}\nfunction parseXRanges(range) {\n    return range.split(/\\s+/).map((rangeVersion)=>rangeVersion.trim().replace(parseRegex(xRange), (ret, gtlt, major, minor, patch, preRelease)=>{\n            const isXMajor = isXVersion(major);\n            const isXMinor = isXMajor || isXVersion(minor);\n            const isXPatch = isXMinor || isXVersion(patch);\n            if (gtlt === '=' && isXPatch) {\n                gtlt = '';\n            }\n            preRelease = '';\n            if (isXMajor) {\n                if (gtlt === '>' || gtlt === '<') {\n                    // nothing is allowed\n                    return '<0.0.0-0';\n                } else {\n                    // nothing is forbidden\n                    return '*';\n                }\n            } else if (gtlt && isXPatch) {\n                // replace X with 0\n                if (isXMinor) {\n                    minor = 0;\n                }\n                patch = 0;\n                if (gtlt === '>') {\n                    // >1 => >=2.0.0\n                    // >1.2 => >=1.3.0\n                    gtlt = '>=';\n                    if (isXMinor) {\n                        major = Number(major) + 1;\n                        minor = 0;\n                        patch = 0;\n                    } else {\n                        minor = Number(minor) + 1;\n                        patch = 0;\n                    }\n                } else if (gtlt === '<=') {\n                    // <=0.7.x is actually <0.8.0, since any 0.7.x should pass\n                    // Similarly, <=7.x is actually <8.0.0, etc.\n                    gtlt = '<';\n                    if (isXMinor) {\n                        major = Number(major) + 1;\n                    } else {\n                        minor = Number(minor) + 1;\n                    }\n                }\n                if (gtlt === '<') {\n                    preRelease = '-0';\n                }\n                return `${gtlt + major}.${minor}.${patch}${preRelease}`;\n            } else if (isXMinor) {\n                return `>=${major}.0.0${preRelease} <${Number(major) + 1}.0.0-0`;\n            } else if (isXPatch) {\n                return `>=${major}.${minor}.0${preRelease} <${major}.${Number(minor) + 1}.0-0`;\n            }\n            return ret;\n        })).join(' ');\n}\nfunction parseStar(range) {\n    return range.trim().replace(parseRegex(star), '');\n}\nfunction parseGTE0(comparatorString) {\n    return comparatorString.trim().replace(parseRegex(gte0), '');\n}\n\n// fork from https://github.com/originjs/vite-plugin-federation/blob/v1.1.12/packages/lib/src/utils/semver/index.ts\n// Copyright (c)\n// vite-plugin-federation is licensed under Mulan PSL v2.\n// You can use this software according to the terms and conditions of the Mulan PSL v2.\n// You may obtain a copy of Mulan PSL v2 at:\n//      http://license.coscl.org.cn/MulanPSL2\n// THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT, MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\n// See the Mulan PSL v2 for more details.\nfunction compareAtom(rangeAtom, versionAtom) {\n    rangeAtom = Number(rangeAtom) || rangeAtom;\n    versionAtom = Number(versionAtom) || versionAtom;\n    if (rangeAtom > versionAtom) {\n        return 1;\n    }\n    if (rangeAtom === versionAtom) {\n        return 0;\n    }\n    return -1;\n}\nfunction comparePreRelease(rangeAtom, versionAtom) {\n    const { preRelease: rangePreRelease } = rangeAtom;\n    const { preRelease: versionPreRelease } = versionAtom;\n    if (rangePreRelease === undefined && Boolean(versionPreRelease)) {\n        return 1;\n    }\n    if (Boolean(rangePreRelease) && versionPreRelease === undefined) {\n        return -1;\n    }\n    if (rangePreRelease === undefined && versionPreRelease === undefined) {\n        return 0;\n    }\n    for(let i = 0, n = rangePreRelease.length; i <= n; i++){\n        const rangeElement = rangePreRelease[i];\n        const versionElement = versionPreRelease[i];\n        if (rangeElement === versionElement) {\n            continue;\n        }\n        if (rangeElement === undefined && versionElement === undefined) {\n            return 0;\n        }\n        if (!rangeElement) {\n            return 1;\n        }\n        if (!versionElement) {\n            return -1;\n        }\n        return compareAtom(rangeElement, versionElement);\n    }\n    return 0;\n}\nfunction compareVersion(rangeAtom, versionAtom) {\n    return compareAtom(rangeAtom.major, versionAtom.major) || compareAtom(rangeAtom.minor, versionAtom.minor) || compareAtom(rangeAtom.patch, versionAtom.patch) || comparePreRelease(rangeAtom, versionAtom);\n}\nfunction eq(rangeAtom, versionAtom) {\n    return rangeAtom.version === versionAtom.version;\n}\nfunction compare(rangeAtom, versionAtom) {\n    switch(rangeAtom.operator){\n        case '':\n        case '=':\n            return eq(rangeAtom, versionAtom);\n        case '>':\n            return compareVersion(rangeAtom, versionAtom) < 0;\n        case '>=':\n            return eq(rangeAtom, versionAtom) || compareVersion(rangeAtom, versionAtom) < 0;\n        case '<':\n            return compareVersion(rangeAtom, versionAtom) > 0;\n        case '<=':\n            return eq(rangeAtom, versionAtom) || compareVersion(rangeAtom, versionAtom) > 0;\n        case undefined:\n            {\n                // mean * or x -> all versions\n                return true;\n            }\n        default:\n            return false;\n    }\n}\n\n// fork from https://github.com/originjs/vite-plugin-federation/blob/v1.1.12/packages/lib/src/utils/semver/index.ts\n// Copyright (c)\n// vite-plugin-federation is licensed under Mulan PSL v2.\n// You can use this software according to the terms and conditions of the Mulan PSL v2.\n// You may obtain a copy of Mulan PSL v2 at:\n//      http://license.coscl.org.cn/MulanPSL2\n// THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT, MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\n// See the Mulan PSL v2 for more details.\nfunction parseComparatorString(range) {\n    return pipe(// handle caret\n    // ^ --> * (any, kinda silly)\n    // ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0-0\n    // ^2.0, ^2.0.x --> >=2.0.0 <3.0.0-0\n    // ^1.2, ^1.2.x --> >=1.2.0 <2.0.0-0\n    // ^1.2.3 --> >=1.2.3 <2.0.0-0\n    // ^1.2.0 --> >=1.2.0 <2.0.0-0\n    parseCarets, // handle tilde\n    // ~, ~> --> * (any, kinda silly)\n    // ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0-0\n    // ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0-0\n    // ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0-0\n    // ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0-0\n    // ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0-0\n    parseTildes, parseXRanges, parseStar)(range);\n}\nfunction parseRange(range) {\n    return pipe(// handle hyphenRange\n    // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n    parseHyphen, // handle trim comparator\n    // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n    parseComparatorTrim, // handle trim tilde\n    // `~ 1.2.3` => `~1.2.3`\n    parseTildeTrim, // handle trim caret\n    // `^ 1.2.3` => `^1.2.3`\n    parseCaretTrim)(range.trim()).split(/\\s+/).join(' ');\n}\nfunction satisfy(version, range) {\n    if (!version) {\n        return false;\n    }\n    const parsedRange = parseRange(range);\n    const parsedComparator = parsedRange.split(' ').map((rangeVersion)=>parseComparatorString(rangeVersion)).join(' ');\n    const comparators = parsedComparator.split(/\\s+/).map((comparator)=>parseGTE0(comparator));\n    const extractedVersion = extractComparator(version);\n    if (!extractedVersion) {\n        return false;\n    }\n    const [, versionOperator, , versionMajor, versionMinor, versionPatch, versionPreRelease] = extractedVersion;\n    const versionAtom = {\n        operator: versionOperator,\n        version: combineVersion(versionMajor, versionMinor, versionPatch, versionPreRelease),\n        major: versionMajor,\n        minor: versionMinor,\n        patch: versionPatch,\n        preRelease: versionPreRelease == null ? void 0 : versionPreRelease.split('.')\n    };\n    for (const comparator of comparators){\n        const extractedComparator = extractComparator(comparator);\n        if (!extractedComparator) {\n            return false;\n        }\n        const [, rangeOperator, , rangeMajor, rangeMinor, rangePatch, rangePreRelease] = extractedComparator;\n        const rangeAtom = {\n            operator: rangeOperator,\n            version: combineVersion(rangeMajor, rangeMinor, rangePatch, rangePreRelease),\n            major: rangeMajor,\n            minor: rangeMinor,\n            patch: rangePatch,\n            preRelease: rangePreRelease == null ? void 0 : rangePreRelease.split('.')\n        };\n        if (!compare(rangeAtom, versionAtom)) {\n            return false; // early return\n        }\n    }\n    return true;\n}\n\nfunction formatShare(shareArgs, from, name, shareStrategy) {\n    let get;\n    if ('get' in shareArgs) {\n        // eslint-disable-next-line prefer-destructuring\n        get = shareArgs.get;\n    } else if ('lib' in shareArgs) {\n        get = ()=>Promise.resolve(shareArgs.lib);\n    } else {\n        get = ()=>Promise.resolve(()=>{\n                throw new Error(`Can not get shared '${name}'!`);\n            });\n    }\n    var _shareArgs_version, _shareArgs_scope, _shareArgs_strategy;\n    return polyfills._extends({\n        deps: [],\n        useIn: [],\n        from,\n        loading: null\n    }, shareArgs, {\n        shareConfig: polyfills._extends({\n            requiredVersion: `^${shareArgs.version}`,\n            singleton: false,\n            eager: false,\n            strictVersion: false\n        }, shareArgs.shareConfig),\n        get,\n        loaded: (shareArgs == null ? void 0 : shareArgs.loaded) || 'lib' in shareArgs ? true : undefined,\n        version: (_shareArgs_version = shareArgs.version) != null ? _shareArgs_version : '0',\n        scope: Array.isArray(shareArgs.scope) ? shareArgs.scope : [\n            (_shareArgs_scope = shareArgs.scope) != null ? _shareArgs_scope : 'default'\n        ],\n        strategy: ((_shareArgs_strategy = shareArgs.strategy) != null ? _shareArgs_strategy : shareStrategy) || 'version-first'\n    });\n}\nfunction formatShareConfigs(globalOptions, userOptions) {\n    const shareArgs = userOptions.shared || {};\n    const from = userOptions.name;\n    const shareInfos = Object.keys(shareArgs).reduce((res, pkgName)=>{\n        const arrayShareArgs = arrayOptions(shareArgs[pkgName]);\n        res[pkgName] = res[pkgName] || [];\n        arrayShareArgs.forEach((shareConfig)=>{\n            res[pkgName].push(formatShare(shareConfig, from, pkgName, userOptions.shareStrategy));\n        });\n        return res;\n    }, {});\n    const shared = polyfills._extends({}, globalOptions.shared);\n    Object.keys(shareInfos).forEach((shareKey)=>{\n        if (!shared[shareKey]) {\n            shared[shareKey] = shareInfos[shareKey];\n        } else {\n            shareInfos[shareKey].forEach((newUserSharedOptions)=>{\n                const isSameVersion = shared[shareKey].find((sharedVal)=>sharedVal.version === newUserSharedOptions.version);\n                if (!isSameVersion) {\n                    shared[shareKey].push(newUserSharedOptions);\n                }\n            });\n        }\n    });\n    return {\n        shared,\n        shareInfos\n    };\n}\nfunction versionLt(a, b) {\n    const transformInvalidVersion = (version)=>{\n        const isNumberVersion = !Number.isNaN(Number(version));\n        if (isNumberVersion) {\n            const splitArr = version.split('.');\n            let validVersion = version;\n            for(let i = 0; i < 3 - splitArr.length; i++){\n                validVersion += '.0';\n            }\n            return validVersion;\n        }\n        return version;\n    };\n    if (satisfy(transformInvalidVersion(a), `<=${transformInvalidVersion(b)}`)) {\n        return true;\n    } else {\n        return false;\n    }\n}\nconst findVersion = (shareVersionMap, cb)=>{\n    const callback = cb || function(prev, cur) {\n        return versionLt(prev, cur);\n    };\n    return Object.keys(shareVersionMap).reduce((prev, cur)=>{\n        if (!prev) {\n            return cur;\n        }\n        if (callback(prev, cur)) {\n            return cur;\n        }\n        // default version is '0' https://github.com/webpack/webpack/blob/main/lib/sharing/ProvideSharedModule.js#L136\n        if (prev === '0') {\n            return cur;\n        }\n        return prev;\n    }, 0);\n};\nconst isLoaded = (shared)=>{\n    return Boolean(shared.loaded) || typeof shared.lib === 'function';\n};\nconst isLoading = (shared)=>{\n    return Boolean(shared.loading);\n};\nfunction findSingletonVersionOrderByVersion(shareScopeMap, scope, pkgName) {\n    const versions = shareScopeMap[scope][pkgName];\n    const callback = function(prev, cur) {\n        return !isLoaded(versions[prev]) && versionLt(prev, cur);\n    };\n    return findVersion(shareScopeMap[scope][pkgName], callback);\n}\nfunction findSingletonVersionOrderByLoaded(shareScopeMap, scope, pkgName) {\n    const versions = shareScopeMap[scope][pkgName];\n    const callback = function(prev, cur) {\n        const isLoadingOrLoaded = (shared)=>{\n            return isLoaded(shared) || isLoading(shared);\n        };\n        if (isLoadingOrLoaded(versions[cur])) {\n            if (isLoadingOrLoaded(versions[prev])) {\n                return Boolean(versionLt(prev, cur));\n            } else {\n                return true;\n            }\n        }\n        if (isLoadingOrLoaded(versions[prev])) {\n            return false;\n        }\n        return versionLt(prev, cur);\n    };\n    return findVersion(shareScopeMap[scope][pkgName], callback);\n}\nfunction getFindShareFunction(strategy) {\n    if (strategy === 'loaded-first') {\n        return findSingletonVersionOrderByLoaded;\n    }\n    return findSingletonVersionOrderByVersion;\n}\nfunction getRegisteredShare(localShareScopeMap, pkgName, shareInfo, resolveShare) {\n    if (!localShareScopeMap) {\n        return;\n    }\n    const { shareConfig, scope = DEFAULT_SCOPE, strategy } = shareInfo;\n    const scopes = Array.isArray(scope) ? scope : [\n        scope\n    ];\n    for (const sc of scopes){\n        if (shareConfig && localShareScopeMap[sc] && localShareScopeMap[sc][pkgName]) {\n            const { requiredVersion } = shareConfig;\n            const findShareFunction = getFindShareFunction(strategy);\n            const maxOrSingletonVersion = findShareFunction(localShareScopeMap, sc, pkgName);\n            //@ts-ignore\n            const defaultResolver = ()=>{\n                if (shareConfig.singleton) {\n                    if (typeof requiredVersion === 'string' && !satisfy(maxOrSingletonVersion, requiredVersion)) {\n                        const msg = `Version ${maxOrSingletonVersion} from ${maxOrSingletonVersion && localShareScopeMap[sc][pkgName][maxOrSingletonVersion].from} of shared singleton module ${pkgName} does not satisfy the requirement of ${shareInfo.from} which needs ${requiredVersion})`;\n                        if (shareConfig.strictVersion) {\n                            error(msg);\n                        } else {\n                            warn(msg);\n                        }\n                    }\n                    return localShareScopeMap[sc][pkgName][maxOrSingletonVersion];\n                } else {\n                    if (requiredVersion === false || requiredVersion === '*') {\n                        return localShareScopeMap[sc][pkgName][maxOrSingletonVersion];\n                    }\n                    if (satisfy(maxOrSingletonVersion, requiredVersion)) {\n                        return localShareScopeMap[sc][pkgName][maxOrSingletonVersion];\n                    }\n                    for (const [versionKey, versionValue] of Object.entries(localShareScopeMap[sc][pkgName])){\n                        if (satisfy(versionKey, requiredVersion)) {\n                            return versionValue;\n                        }\n                    }\n                }\n            };\n            const params = {\n                shareScopeMap: localShareScopeMap,\n                scope: sc,\n                pkgName,\n                version: maxOrSingletonVersion,\n                GlobalFederation: Global.__FEDERATION__,\n                resolver: defaultResolver\n            };\n            const resolveShared = resolveShare.emit(params) || params;\n            return resolveShared.resolver();\n        }\n    }\n}\nfunction getGlobalShareScope() {\n    return Global.__FEDERATION__.__SHARE__;\n}\nfunction getTargetSharedOptions(options) {\n    const { pkgName, extraOptions, shareInfos } = options;\n    const defaultResolver = (sharedOptions)=>{\n        if (!sharedOptions) {\n            return undefined;\n        }\n        const shareVersionMap = {};\n        sharedOptions.forEach((shared)=>{\n            shareVersionMap[shared.version] = shared;\n        });\n        const callback = function(prev, cur) {\n            return !isLoaded(shareVersionMap[prev]) && versionLt(prev, cur);\n        };\n        const maxVersion = findVersion(shareVersionMap, callback);\n        return shareVersionMap[maxVersion];\n    };\n    var _extraOptions_resolver;\n    const resolver = (_extraOptions_resolver = extraOptions == null ? void 0 : extraOptions.resolver) != null ? _extraOptions_resolver : defaultResolver;\n    return Object.assign({}, resolver(shareInfos[pkgName]), extraOptions == null ? void 0 : extraOptions.customShareInfo);\n}\n\nconst ShareUtils = {\n    getRegisteredShare,\n    getGlobalShareScope\n};\nconst GlobalUtils = {\n    Global,\n    nativeGlobal,\n    resetFederationGlobalInfo,\n    setGlobalFederationInstance,\n    getGlobalFederationConstructor,\n    setGlobalFederationConstructor,\n    getInfoWithoutType,\n    getGlobalSnapshot,\n    getTargetSnapshotInfoByModuleInfo,\n    getGlobalSnapshotInfoByModuleInfo,\n    setGlobalSnapshotInfoByModuleInfo,\n    addGlobalSnapshot,\n    getRemoteEntryExports,\n    registerGlobalPlugins,\n    getGlobalHostPlugins,\n    getPreloaded,\n    setPreloaded\n};\nvar helpers = {\n    global: GlobalUtils,\n    share: ShareUtils\n};\n\nfunction getBuilderId() {\n    //@ts-ignore\n    return typeof FEDERATION_BUILD_IDENTIFIER !== 'undefined' ? FEDERATION_BUILD_IDENTIFIER : '';\n}\n\n// Function to match a remote with its name and expose\n// id: pkgName(@federation/app1) + expose(button) = @federation/app1/button\n// id: alias(app1) + expose(button) = app1/button\n// id: alias(app1/utils) + expose(loadash/sort) = app1/utils/loadash/sort\nfunction matchRemoteWithNameAndExpose(remotes, id) {\n    for (const remote of remotes){\n        // match pkgName\n        const isNameMatched = id.startsWith(remote.name);\n        let expose = id.replace(remote.name, '');\n        if (isNameMatched) {\n            if (expose.startsWith('/')) {\n                const pkgNameOrAlias = remote.name;\n                expose = `.${expose}`;\n                return {\n                    pkgNameOrAlias,\n                    expose,\n                    remote\n                };\n            } else if (expose === '') {\n                return {\n                    pkgNameOrAlias: remote.name,\n                    expose: '.',\n                    remote\n                };\n            }\n        }\n        // match alias\n        const isAliasMatched = remote.alias && id.startsWith(remote.alias);\n        let exposeWithAlias = remote.alias && id.replace(remote.alias, '');\n        if (remote.alias && isAliasMatched) {\n            if (exposeWithAlias && exposeWithAlias.startsWith('/')) {\n                const pkgNameOrAlias = remote.alias;\n                exposeWithAlias = `.${exposeWithAlias}`;\n                return {\n                    pkgNameOrAlias,\n                    expose: exposeWithAlias,\n                    remote\n                };\n            } else if (exposeWithAlias === '') {\n                return {\n                    pkgNameOrAlias: remote.alias,\n                    expose: '.',\n                    remote\n                };\n            }\n        }\n    }\n    return;\n}\n// Function to match a remote with its name or alias\nfunction matchRemote(remotes, nameOrAlias) {\n    for (const remote of remotes){\n        const isNameMatched = nameOrAlias === remote.name;\n        if (isNameMatched) {\n            return remote;\n        }\n        const isAliasMatched = remote.alias && nameOrAlias === remote.alias;\n        if (isAliasMatched) {\n            return remote;\n        }\n    }\n    return;\n}\n\nfunction registerPlugins(plugins, hookInstances) {\n    const globalPlugins = getGlobalHostPlugins();\n    // Incorporate global plugins\n    if (globalPlugins.length > 0) {\n        globalPlugins.forEach((plugin)=>{\n            if (plugins == null ? void 0 : plugins.find((item)=>item.name !== plugin.name)) {\n                plugins.push(plugin);\n            }\n        });\n    }\n    if (plugins && plugins.length > 0) {\n        plugins.forEach((plugin)=>{\n            hookInstances.forEach((hookInstance)=>{\n                hookInstance.applyPlugin(plugin);\n            });\n        });\n    }\n    return plugins;\n}\n\nasync function loadEsmEntry({ entry, remoteEntryExports }) {\n    return new Promise((resolve, reject)=>{\n        try {\n            if (!remoteEntryExports) {\n                if (typeof FEDERATION_ALLOW_NEW_FUNCTION !== 'undefined') {\n                    new Function('callbacks', `import(\"${entry}\").then(callbacks[0]).catch(callbacks[1])`)([\n                        resolve,\n                        reject\n                    ]);\n                } else {\n                    import(/* webpackIgnore: true */ /* @vite-ignore */ entry).then(resolve).catch(reject);\n                }\n            } else {\n                resolve(remoteEntryExports);\n            }\n        } catch (e) {\n            reject(e);\n        }\n    });\n}\nasync function loadSystemJsEntry({ entry, remoteEntryExports }) {\n    return new Promise((resolve, reject)=>{\n        try {\n            if (!remoteEntryExports) {\n                //@ts-ignore\n                if (typeof __system_context__ === 'undefined') {\n                    //@ts-ignore\n                    System.import(entry).then(resolve).catch(reject);\n                } else {\n                    new Function('callbacks', `System.import(\"${entry}\").then(callbacks[0]).catch(callbacks[1])`)([\n                        resolve,\n                        reject\n                    ]);\n                }\n            } else {\n                resolve(remoteEntryExports);\n            }\n        } catch (e) {\n            reject(e);\n        }\n    });\n}\nasync function loadEntryScript({ name, globalName, entry, loaderHook }) {\n    const { entryExports: remoteEntryExports } = getRemoteEntryExports(name, globalName);\n    if (remoteEntryExports) {\n        return remoteEntryExports;\n    }\n    return sdk.loadScript(entry, {\n        attrs: {},\n        createScriptHook: (url, attrs)=>{\n            const res = loaderHook.lifecycle.createScript.emit({\n                url,\n                attrs\n            });\n            if (!res) return;\n            if (res instanceof HTMLScriptElement) {\n                return res;\n            }\n            if ('script' in res || 'timeout' in res) {\n                return res;\n            }\n            return;\n        }\n    }).then(()=>{\n        const { remoteEntryKey, entryExports } = getRemoteEntryExports(name, globalName);\n        assert(entryExports, errorCodes.getShortErrorMsg(errorCodes.RUNTIME_001, errorCodes.runtimeDescMap, {\n            remoteName: name,\n            remoteEntryUrl: entry,\n            remoteEntryKey\n        }));\n        return entryExports;\n    }).catch((e)=>{\n        assert(undefined, errorCodes.getShortErrorMsg(errorCodes.RUNTIME_008, errorCodes.runtimeDescMap, {\n            remoteName: name,\n            resourceUrl: entry\n        }));\n        throw e;\n    });\n}\nasync function loadEntryDom({ remoteInfo, remoteEntryExports, loaderHook }) {\n    const { entry, entryGlobalName: globalName, name, type } = remoteInfo;\n    switch(type){\n        case 'esm':\n        case 'module':\n            return loadEsmEntry({\n                entry,\n                remoteEntryExports\n            });\n        case 'system':\n            return loadSystemJsEntry({\n                entry,\n                remoteEntryExports\n            });\n        default:\n            return loadEntryScript({\n                entry,\n                globalName,\n                name,\n                loaderHook\n            });\n    }\n}\nasync function loadEntryNode({ remoteInfo, loaderHook }) {\n    const { entry, entryGlobalName: globalName, name, type } = remoteInfo;\n    const { entryExports: remoteEntryExports } = getRemoteEntryExports(name, globalName);\n    if (remoteEntryExports) {\n        return remoteEntryExports;\n    }\n    return sdk.loadScriptNode(entry, {\n        attrs: {\n            name,\n            globalName,\n            type\n        },\n        loaderHook: {\n            createScriptHook: (url, attrs = {})=>{\n                const res = loaderHook.lifecycle.createScript.emit({\n                    url,\n                    attrs\n                });\n                if (!res) return;\n                if ('url' in res) {\n                    return res;\n                }\n                return;\n            }\n        }\n    }).then(()=>{\n        const { remoteEntryKey, entryExports } = getRemoteEntryExports(name, globalName);\n        assert(entryExports, errorCodes.getShortErrorMsg(errorCodes.RUNTIME_001, errorCodes.runtimeDescMap, {\n            remoteName: name,\n            remoteEntryUrl: entry,\n            remoteEntryKey\n        }));\n        return entryExports;\n    }).catch((e)=>{\n        throw e;\n    });\n}\nfunction getRemoteEntryUniqueKey(remoteInfo) {\n    const { entry, name } = remoteInfo;\n    return sdk.composeKeyWithSeparator(name, entry);\n}\nasync function getRemoteEntry({ origin, remoteEntryExports, remoteInfo }) {\n    const uniqueKey = getRemoteEntryUniqueKey(remoteInfo);\n    if (remoteEntryExports) {\n        return remoteEntryExports;\n    }\n    if (!globalLoading[uniqueKey]) {\n        const loadEntryHook = origin.remoteHandler.hooks.lifecycle.loadEntry;\n        const loaderHook = origin.loaderHook;\n        globalLoading[uniqueKey] = loadEntryHook.emit({\n            loaderHook,\n            remoteInfo,\n            remoteEntryExports\n        }).then((res)=>{\n            if (res) {\n                return res;\n            }\n            return sdk.isBrowserEnv() ? loadEntryDom({\n                remoteInfo,\n                remoteEntryExports,\n                loaderHook\n            }) : loadEntryNode({\n                remoteInfo,\n                loaderHook\n            });\n        });\n    }\n    return globalLoading[uniqueKey];\n}\nfunction getRemoteInfo(remote) {\n    return polyfills._extends({}, remote, {\n        entry: 'entry' in remote ? remote.entry : '',\n        type: remote.type || DEFAULT_REMOTE_TYPE,\n        entryGlobalName: remote.entryGlobalName || remote.name,\n        shareScope: remote.shareScope || DEFAULT_SCOPE\n    });\n}\n\nlet Module = class Module {\n    async getEntry() {\n        if (this.remoteEntryExports) {\n            return this.remoteEntryExports;\n        }\n        let remoteEntryExports;\n        try {\n            remoteEntryExports = await getRemoteEntry({\n                origin: this.host,\n                remoteInfo: this.remoteInfo,\n                remoteEntryExports: this.remoteEntryExports\n            });\n        } catch (err) {\n            const uniqueKey = getRemoteEntryUniqueKey(this.remoteInfo);\n            remoteEntryExports = await this.host.loaderHook.lifecycle.loadEntryError.emit({\n                getRemoteEntry,\n                origin: this.host,\n                remoteInfo: this.remoteInfo,\n                remoteEntryExports: this.remoteEntryExports,\n                globalLoading,\n                uniqueKey\n            });\n        }\n        assert(remoteEntryExports, `remoteEntryExports is undefined \\n ${sdk.safeToString(this.remoteInfo)}`);\n        this.remoteEntryExports = remoteEntryExports;\n        return this.remoteEntryExports;\n    }\n    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n    async get(id, expose, options, remoteSnapshot) {\n        const { loadFactory = true } = options || {\n            loadFactory: true\n        };\n        // Get remoteEntry.js\n        const remoteEntryExports = await this.getEntry();\n        if (!this.inited) {\n            const localShareScopeMap = this.host.shareScopeMap;\n            const shareScopeKeys = Array.isArray(this.remoteInfo.shareScope) ? this.remoteInfo.shareScope : [\n                this.remoteInfo.shareScope\n            ];\n            if (!shareScopeKeys.length) {\n                shareScopeKeys.push('default');\n            }\n            shareScopeKeys.forEach((shareScopeKey)=>{\n                if (!localShareScopeMap[shareScopeKey]) {\n                    localShareScopeMap[shareScopeKey] = {};\n                }\n            });\n            // TODO: compate legacy init params, should use shareScopeMap if exist\n            const shareScope = localShareScopeMap[shareScopeKeys[0]];\n            const initScope = [];\n            const remoteEntryInitOptions = {\n                version: this.remoteInfo.version || '',\n                shareScopeKeys: Array.isArray(this.remoteInfo.shareScope) ? shareScopeKeys : this.remoteInfo.shareScope || 'default'\n            };\n            // Help to find host instance\n            Object.defineProperty(remoteEntryInitOptions, 'shareScopeMap', {\n                value: localShareScopeMap,\n                // remoteEntryInitOptions will be traversed and assigned during container init, ,so this attribute is not allowed to be traversed\n                enumerable: false\n            });\n            const initContainerOptions = await this.host.hooks.lifecycle.beforeInitContainer.emit({\n                shareScope,\n                // @ts-ignore shareScopeMap will be set by Object.defineProperty\n                remoteEntryInitOptions,\n                initScope,\n                remoteInfo: this.remoteInfo,\n                origin: this.host\n            });\n            if (typeof (remoteEntryExports == null ? void 0 : remoteEntryExports.init) === 'undefined') {\n                error(errorCodes.getShortErrorMsg(errorCodes.RUNTIME_002, errorCodes.runtimeDescMap, {\n                    remoteName: name,\n                    remoteEntryUrl: this.remoteInfo.entry,\n                    remoteEntryKey: this.remoteInfo.entryGlobalName\n                }));\n            }\n            await remoteEntryExports.init(initContainerOptions.shareScope, initContainerOptions.initScope, initContainerOptions.remoteEntryInitOptions);\n            await this.host.hooks.lifecycle.initContainer.emit(polyfills._extends({}, initContainerOptions, {\n                id,\n                remoteSnapshot,\n                remoteEntryExports\n            }));\n        }\n        this.lib = remoteEntryExports;\n        this.inited = true;\n        let moduleFactory;\n        moduleFactory = await this.host.loaderHook.lifecycle.getModuleFactory.emit({\n            remoteEntryExports,\n            expose,\n            moduleInfo: this.remoteInfo\n        });\n        // get exposeGetter\n        if (!moduleFactory) {\n            moduleFactory = await remoteEntryExports.get(expose);\n        }\n        assert(moduleFactory, `${getFMId(this.remoteInfo)} remote don't export ${expose}.`);\n        // keep symbol for module name always one format\n        const symbolName = processModuleAlias(this.remoteInfo.name, expose);\n        const wrapModuleFactory = this.wraperFactory(moduleFactory, symbolName);\n        if (!loadFactory) {\n            return wrapModuleFactory;\n        }\n        const exposeContent = await wrapModuleFactory();\n        return exposeContent;\n    }\n    wraperFactory(moduleFactory, id) {\n        function defineModuleId(res, id) {\n            if (res && typeof res === 'object' && Object.isExtensible(res) && !Object.getOwnPropertyDescriptor(res, Symbol.for('mf_module_id'))) {\n                Object.defineProperty(res, Symbol.for('mf_module_id'), {\n                    value: id,\n                    enumerable: false\n                });\n            }\n        }\n        if (moduleFactory instanceof Promise) {\n            return async ()=>{\n                const res = await moduleFactory();\n                // This parameter is used for bridge debugging\n                defineModuleId(res, id);\n                return res;\n            };\n        } else {\n            return ()=>{\n                const res = moduleFactory();\n                // This parameter is used for bridge debugging\n                defineModuleId(res, id);\n                return res;\n            };\n        }\n    }\n    constructor({ remoteInfo, host }){\n        this.inited = false;\n        this.lib = undefined;\n        this.remoteInfo = remoteInfo;\n        this.host = host;\n    }\n};\n\nclass SyncHook {\n    on(fn) {\n        if (typeof fn === 'function') {\n            this.listeners.add(fn);\n        }\n    }\n    once(fn) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const self = this;\n        this.on(function wrapper(...args) {\n            self.remove(wrapper);\n            // eslint-disable-next-line prefer-spread\n            return fn.apply(null, args);\n        });\n    }\n    emit(...data) {\n        let result;\n        if (this.listeners.size > 0) {\n            // eslint-disable-next-line prefer-spread\n            this.listeners.forEach((fn)=>{\n                result = fn(...data);\n            });\n        }\n        return result;\n    }\n    remove(fn) {\n        this.listeners.delete(fn);\n    }\n    removeAll() {\n        this.listeners.clear();\n    }\n    constructor(type){\n        this.type = '';\n        this.listeners = new Set();\n        if (type) {\n            this.type = type;\n        }\n    }\n}\n\nclass AsyncHook extends SyncHook {\n    emit(...data) {\n        let result;\n        const ls = Array.from(this.listeners);\n        if (ls.length > 0) {\n            let i = 0;\n            const call = (prev)=>{\n                if (prev === false) {\n                    return false; // Abort process\n                } else if (i < ls.length) {\n                    return Promise.resolve(ls[i++].apply(null, data)).then(call);\n                } else {\n                    return prev;\n                }\n            };\n            result = call();\n        }\n        return Promise.resolve(result);\n    }\n}\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nfunction checkReturnData(originalData, returnedData) {\n    if (!isObject(returnedData)) {\n        return false;\n    }\n    if (originalData !== returnedData) {\n        // eslint-disable-next-line no-restricted-syntax\n        for(const key in originalData){\n            if (!(key in returnedData)) {\n                return false;\n            }\n        }\n    }\n    return true;\n}\nclass SyncWaterfallHook extends SyncHook {\n    emit(data) {\n        if (!isObject(data)) {\n            error(`The data for the \"${this.type}\" hook should be an object.`);\n        }\n        for (const fn of this.listeners){\n            try {\n                const tempData = fn(data);\n                if (checkReturnData(data, tempData)) {\n                    data = tempData;\n                } else {\n                    this.onerror(`A plugin returned an unacceptable value for the \"${this.type}\" type.`);\n                    break;\n                }\n            } catch (e) {\n                warn(e);\n                this.onerror(e);\n            }\n        }\n        return data;\n    }\n    constructor(type){\n        super(), this.onerror = error;\n        this.type = type;\n    }\n}\n\nclass AsyncWaterfallHook extends SyncHook {\n    emit(data) {\n        if (!isObject(data)) {\n            error(`The response data for the \"${this.type}\" hook must be an object.`);\n        }\n        const ls = Array.from(this.listeners);\n        if (ls.length > 0) {\n            let i = 0;\n            const processError = (e)=>{\n                warn(e);\n                this.onerror(e);\n                return data;\n            };\n            const call = (prevData)=>{\n                if (checkReturnData(data, prevData)) {\n                    data = prevData;\n                    if (i < ls.length) {\n                        try {\n                            return Promise.resolve(ls[i++](data)).then(call, processError);\n                        } catch (e) {\n                            return processError(e);\n                        }\n                    }\n                } else {\n                    this.onerror(`A plugin returned an incorrect value for the \"${this.type}\" type.`);\n                }\n                return data;\n            };\n            return Promise.resolve(call(data));\n        }\n        return Promise.resolve(data);\n    }\n    constructor(type){\n        super(), this.onerror = error;\n        this.type = type;\n    }\n}\n\nclass PluginSystem {\n    applyPlugin(plugin) {\n        assert(isPlainObject(plugin), 'Plugin configuration is invalid.');\n        // The plugin's name is mandatory and must be unique\n        const pluginName = plugin.name;\n        assert(pluginName, 'A name must be provided by the plugin.');\n        if (!this.registerPlugins[pluginName]) {\n            this.registerPlugins[pluginName] = plugin;\n            Object.keys(this.lifecycle).forEach((key)=>{\n                const pluginLife = plugin[key];\n                if (pluginLife) {\n                    this.lifecycle[key].on(pluginLife);\n                }\n            });\n        }\n    }\n    removePlugin(pluginName) {\n        assert(pluginName, 'A name is required.');\n        const plugin = this.registerPlugins[pluginName];\n        assert(plugin, `The plugin \"${pluginName}\" is not registered.`);\n        Object.keys(plugin).forEach((key)=>{\n            if (key !== 'name') {\n                this.lifecycle[key].remove(plugin[key]);\n            }\n        });\n    }\n    // eslint-disable-next-line @typescript-eslint/no-shadow\n    inherit({ lifecycle, registerPlugins }) {\n        Object.keys(lifecycle).forEach((hookName)=>{\n            assert(!this.lifecycle[hookName], `The hook \"${hookName}\" has a conflict and cannot be inherited.`);\n            this.lifecycle[hookName] = lifecycle[hookName];\n        });\n        Object.keys(registerPlugins).forEach((pluginName)=>{\n            assert(!this.registerPlugins[pluginName], `The plugin \"${pluginName}\" has a conflict and cannot be inherited.`);\n            this.applyPlugin(registerPlugins[pluginName]);\n        });\n    }\n    constructor(lifecycle){\n        this.registerPlugins = {};\n        this.lifecycle = lifecycle;\n        this.lifecycleKeys = Object.keys(lifecycle);\n    }\n}\n\nfunction defaultPreloadArgs(preloadConfig) {\n    return polyfills._extends({\n        resourceCategory: 'sync',\n        share: true,\n        depsRemote: true,\n        prefetchInterface: false\n    }, preloadConfig);\n}\nfunction formatPreloadArgs(remotes, preloadArgs) {\n    return preloadArgs.map((args)=>{\n        const remoteInfo = matchRemote(remotes, args.nameOrAlias);\n        assert(remoteInfo, `Unable to preload ${args.nameOrAlias} as it is not included in ${!remoteInfo && sdk.safeToString({\n            remoteInfo,\n            remotes\n        })}`);\n        return {\n            remote: remoteInfo,\n            preloadConfig: defaultPreloadArgs(args)\n        };\n    });\n}\nfunction normalizePreloadExposes(exposes) {\n    if (!exposes) {\n        return [];\n    }\n    return exposes.map((expose)=>{\n        if (expose === '.') {\n            return expose;\n        }\n        if (expose.startsWith('./')) {\n            return expose.replace('./', '');\n        }\n        return expose;\n    });\n}\nfunction preloadAssets(remoteInfo, host, assets, // It is used to distinguish preload from load remote parallel loading\nuseLinkPreload = true) {\n    const { cssAssets, jsAssetsWithoutEntry, entryAssets } = assets;\n    if (host.options.inBrowser) {\n        entryAssets.forEach((asset)=>{\n            const { moduleInfo } = asset;\n            const module = host.moduleCache.get(remoteInfo.name);\n            if (module) {\n                getRemoteEntry({\n                    origin: host,\n                    remoteInfo: moduleInfo,\n                    remoteEntryExports: module.remoteEntryExports\n                });\n            } else {\n                getRemoteEntry({\n                    origin: host,\n                    remoteInfo: moduleInfo,\n                    remoteEntryExports: undefined\n                });\n            }\n        });\n        if (useLinkPreload) {\n            const defaultAttrs = {\n                rel: 'preload',\n                as: 'style'\n            };\n            cssAssets.forEach((cssUrl)=>{\n                const { link: cssEl, needAttach } = sdk.createLink({\n                    url: cssUrl,\n                    cb: ()=>{\n                    // noop\n                    },\n                    attrs: defaultAttrs,\n                    createLinkHook: (url, attrs)=>{\n                        const res = host.loaderHook.lifecycle.createLink.emit({\n                            url,\n                            attrs\n                        });\n                        if (res instanceof HTMLLinkElement) {\n                            return res;\n                        }\n                        return;\n                    }\n                });\n                needAttach && document.head.appendChild(cssEl);\n            });\n        } else {\n            const defaultAttrs = {\n                rel: 'stylesheet',\n                type: 'text/css'\n            };\n            cssAssets.forEach((cssUrl)=>{\n                const { link: cssEl, needAttach } = sdk.createLink({\n                    url: cssUrl,\n                    cb: ()=>{\n                    // noop\n                    },\n                    attrs: defaultAttrs,\n                    createLinkHook: (url, attrs)=>{\n                        const res = host.loaderHook.lifecycle.createLink.emit({\n                            url,\n                            attrs\n                        });\n                        if (res instanceof HTMLLinkElement) {\n                            return res;\n                        }\n                        return;\n                    },\n                    needDeleteLink: false\n                });\n                needAttach && document.head.appendChild(cssEl);\n            });\n        }\n        if (useLinkPreload) {\n            const defaultAttrs = {\n                rel: 'preload',\n                as: 'script'\n            };\n            jsAssetsWithoutEntry.forEach((jsUrl)=>{\n                const { link: linkEl, needAttach } = sdk.createLink({\n                    url: jsUrl,\n                    cb: ()=>{\n                    // noop\n                    },\n                    attrs: defaultAttrs,\n                    createLinkHook: (url, attrs)=>{\n                        const res = host.loaderHook.lifecycle.createLink.emit({\n                            url,\n                            attrs\n                        });\n                        if (res instanceof HTMLLinkElement) {\n                            return res;\n                        }\n                        return;\n                    }\n                });\n                needAttach && document.head.appendChild(linkEl);\n            });\n        } else {\n            const defaultAttrs = {\n                fetchpriority: 'high',\n                type: (remoteInfo == null ? void 0 : remoteInfo.type) === 'module' ? 'module' : 'text/javascript'\n            };\n            jsAssetsWithoutEntry.forEach((jsUrl)=>{\n                const { script: scriptEl, needAttach } = sdk.createScript({\n                    url: jsUrl,\n                    cb: ()=>{\n                    // noop\n                    },\n                    attrs: defaultAttrs,\n                    createScriptHook: (url, attrs)=>{\n                        const res = host.loaderHook.lifecycle.createScript.emit({\n                            url,\n                            attrs\n                        });\n                        if (res instanceof HTMLScriptElement) {\n                            return res;\n                        }\n                        return;\n                    },\n                    needDeleteScript: true\n                });\n                needAttach && document.head.appendChild(scriptEl);\n            });\n        }\n    }\n}\n\nfunction assignRemoteInfo(remoteInfo, remoteSnapshot) {\n    const remoteEntryInfo = getRemoteEntryInfoFromSnapshot(remoteSnapshot);\n    if (!remoteEntryInfo.url) {\n        error(`The attribute remoteEntry of ${remoteInfo.name} must not be undefined.`);\n    }\n    let entryUrl = sdk.getResourceUrl(remoteSnapshot, remoteEntryInfo.url);\n    if (!sdk.isBrowserEnv() && !entryUrl.startsWith('http')) {\n        entryUrl = `https:${entryUrl}`;\n    }\n    remoteInfo.type = remoteEntryInfo.type;\n    remoteInfo.entryGlobalName = remoteEntryInfo.globalName;\n    remoteInfo.entry = entryUrl;\n    remoteInfo.version = remoteSnapshot.version;\n    remoteInfo.buildVersion = remoteSnapshot.buildVersion;\n}\nfunction snapshotPlugin() {\n    return {\n        name: 'snapshot-plugin',\n        async afterResolve (args) {\n            const { remote, pkgNameOrAlias, expose, origin, remoteInfo } = args;\n            if (!isRemoteInfoWithEntry(remote) || !isPureRemoteEntry(remote)) {\n                const { remoteSnapshot, globalSnapshot } = await origin.snapshotHandler.loadRemoteSnapshotInfo(remote);\n                assignRemoteInfo(remoteInfo, remoteSnapshot);\n                // preloading assets\n                const preloadOptions = {\n                    remote,\n                    preloadConfig: {\n                        nameOrAlias: pkgNameOrAlias,\n                        exposes: [\n                            expose\n                        ],\n                        resourceCategory: 'sync',\n                        share: false,\n                        depsRemote: false\n                    }\n                };\n                const assets = await origin.remoteHandler.hooks.lifecycle.generatePreloadAssets.emit({\n                    origin,\n                    preloadOptions,\n                    remoteInfo,\n                    remote,\n                    remoteSnapshot,\n                    globalSnapshot\n                });\n                if (assets) {\n                    preloadAssets(remoteInfo, origin, assets, false);\n                }\n                return polyfills._extends({}, args, {\n                    remoteSnapshot\n                });\n            }\n            return args;\n        }\n    };\n}\n\n// name\n// name:version\nfunction splitId(id) {\n    const splitInfo = id.split(':');\n    if (splitInfo.length === 1) {\n        return {\n            name: splitInfo[0],\n            version: undefined\n        };\n    } else if (splitInfo.length === 2) {\n        return {\n            name: splitInfo[0],\n            version: splitInfo[1]\n        };\n    } else {\n        return {\n            name: splitInfo[1],\n            version: splitInfo[2]\n        };\n    }\n}\n// Traverse all nodes in moduleInfo and traverse the entire snapshot\nfunction traverseModuleInfo(globalSnapshot, remoteInfo, traverse, isRoot, memo = {}, remoteSnapshot) {\n    const id = getFMId(remoteInfo);\n    const { value: snapshotValue } = getInfoWithoutType(globalSnapshot, id);\n    const effectiveRemoteSnapshot = remoteSnapshot || snapshotValue;\n    if (effectiveRemoteSnapshot && !sdk.isManifestProvider(effectiveRemoteSnapshot)) {\n        traverse(effectiveRemoteSnapshot, remoteInfo, isRoot);\n        if (effectiveRemoteSnapshot.remotesInfo) {\n            const remoteKeys = Object.keys(effectiveRemoteSnapshot.remotesInfo);\n            for (const key of remoteKeys){\n                if (memo[key]) {\n                    continue;\n                }\n                memo[key] = true;\n                const subRemoteInfo = splitId(key);\n                const remoteValue = effectiveRemoteSnapshot.remotesInfo[key];\n                traverseModuleInfo(globalSnapshot, {\n                    name: subRemoteInfo.name,\n                    version: remoteValue.matchedVersion\n                }, traverse, false, memo, undefined);\n            }\n        }\n    }\n}\nconst isExisted = (type, url)=>{\n    return document.querySelector(`${type}[${type === 'link' ? 'href' : 'src'}=\"${url}\"]`);\n};\n// eslint-disable-next-line max-lines-per-function\nfunction generatePreloadAssets(origin, preloadOptions, remote, globalSnapshot, remoteSnapshot) {\n    const cssAssets = [];\n    const jsAssets = [];\n    const entryAssets = [];\n    const loadedSharedJsAssets = new Set();\n    const loadedSharedCssAssets = new Set();\n    const { options } = origin;\n    const { preloadConfig: rootPreloadConfig } = preloadOptions;\n    const { depsRemote } = rootPreloadConfig;\n    const memo = {};\n    traverseModuleInfo(globalSnapshot, remote, (moduleInfoSnapshot, remoteInfo, isRoot)=>{\n        let preloadConfig;\n        if (isRoot) {\n            preloadConfig = rootPreloadConfig;\n        } else {\n            if (Array.isArray(depsRemote)) {\n                // eslint-disable-next-line array-callback-return\n                const findPreloadConfig = depsRemote.find((remoteConfig)=>{\n                    if (remoteConfig.nameOrAlias === remoteInfo.name || remoteConfig.nameOrAlias === remoteInfo.alias) {\n                        return true;\n                    }\n                    return false;\n                });\n                if (!findPreloadConfig) {\n                    return;\n                }\n                preloadConfig = defaultPreloadArgs(findPreloadConfig);\n            } else if (depsRemote === true) {\n                preloadConfig = rootPreloadConfig;\n            } else {\n                return;\n            }\n        }\n        const remoteEntryUrl = sdk.getResourceUrl(moduleInfoSnapshot, getRemoteEntryInfoFromSnapshot(moduleInfoSnapshot).url);\n        if (remoteEntryUrl) {\n            entryAssets.push({\n                name: remoteInfo.name,\n                moduleInfo: {\n                    name: remoteInfo.name,\n                    entry: remoteEntryUrl,\n                    type: 'remoteEntryType' in moduleInfoSnapshot ? moduleInfoSnapshot.remoteEntryType : 'global',\n                    entryGlobalName: 'globalName' in moduleInfoSnapshot ? moduleInfoSnapshot.globalName : remoteInfo.name,\n                    shareScope: '',\n                    version: 'version' in moduleInfoSnapshot ? moduleInfoSnapshot.version : undefined\n                },\n                url: remoteEntryUrl\n            });\n        }\n        let moduleAssetsInfo = 'modules' in moduleInfoSnapshot ? moduleInfoSnapshot.modules : [];\n        const normalizedPreloadExposes = normalizePreloadExposes(preloadConfig.exposes);\n        if (normalizedPreloadExposes.length && 'modules' in moduleInfoSnapshot) {\n            var _moduleInfoSnapshot_modules;\n            moduleAssetsInfo = moduleInfoSnapshot == null ? void 0 : (_moduleInfoSnapshot_modules = moduleInfoSnapshot.modules) == null ? void 0 : _moduleInfoSnapshot_modules.reduce((assets, moduleAssetInfo)=>{\n                if ((normalizedPreloadExposes == null ? void 0 : normalizedPreloadExposes.indexOf(moduleAssetInfo.moduleName)) !== -1) {\n                    assets.push(moduleAssetInfo);\n                }\n                return assets;\n            }, []);\n        }\n        function handleAssets(assets) {\n            const assetsRes = assets.map((asset)=>sdk.getResourceUrl(moduleInfoSnapshot, asset));\n            if (preloadConfig.filter) {\n                return assetsRes.filter(preloadConfig.filter);\n            }\n            return assetsRes;\n        }\n        if (moduleAssetsInfo) {\n            const assetsLength = moduleAssetsInfo.length;\n            for(let index = 0; index < assetsLength; index++){\n                const assetsInfo = moduleAssetsInfo[index];\n                const exposeFullPath = `${remoteInfo.name}/${assetsInfo.moduleName}`;\n                origin.remoteHandler.hooks.lifecycle.handlePreloadModule.emit({\n                    id: assetsInfo.moduleName === '.' ? remoteInfo.name : exposeFullPath,\n                    name: remoteInfo.name,\n                    remoteSnapshot: moduleInfoSnapshot,\n                    preloadConfig,\n                    remote: remoteInfo,\n                    origin\n                });\n                const preloaded = getPreloaded(exposeFullPath);\n                if (preloaded) {\n                    continue;\n                }\n                if (preloadConfig.resourceCategory === 'all') {\n                    cssAssets.push(...handleAssets(assetsInfo.assets.css.async));\n                    cssAssets.push(...handleAssets(assetsInfo.assets.css.sync));\n                    jsAssets.push(...handleAssets(assetsInfo.assets.js.async));\n                    jsAssets.push(...handleAssets(assetsInfo.assets.js.sync));\n                // eslint-disable-next-line no-constant-condition\n                } else if (preloadConfig.resourceCategory = 'sync') {\n                    cssAssets.push(...handleAssets(assetsInfo.assets.css.sync));\n                    jsAssets.push(...handleAssets(assetsInfo.assets.js.sync));\n                }\n                setPreloaded(exposeFullPath);\n            }\n        }\n    }, true, memo, remoteSnapshot);\n    if (remoteSnapshot.shared) {\n        const collectSharedAssets = (shareInfo, snapshotShared)=>{\n            const registeredShared = getRegisteredShare(origin.shareScopeMap, snapshotShared.sharedName, shareInfo, origin.sharedHandler.hooks.lifecycle.resolveShare);\n            // If the global share does not exist, or the lib function does not exist, it means that the shared has not been loaded yet and can be preloaded.\n            if (registeredShared && typeof registeredShared.lib === 'function') {\n                snapshotShared.assets.js.sync.forEach((asset)=>{\n                    loadedSharedJsAssets.add(asset);\n                });\n                snapshotShared.assets.css.sync.forEach((asset)=>{\n                    loadedSharedCssAssets.add(asset);\n                });\n            }\n        };\n        remoteSnapshot.shared.forEach((shared)=>{\n            var _options_shared;\n            const shareInfos = (_options_shared = options.shared) == null ? void 0 : _options_shared[shared.sharedName];\n            if (!shareInfos) {\n                return;\n            }\n            // if no version, preload all shared\n            const sharedOptions = shared.version ? shareInfos.find((s)=>s.version === shared.version) : shareInfos;\n            if (!sharedOptions) {\n                return;\n            }\n            const arrayShareInfo = arrayOptions(sharedOptions);\n            arrayShareInfo.forEach((s)=>{\n                collectSharedAssets(s, shared);\n            });\n        });\n    }\n    const needPreloadJsAssets = jsAssets.filter((asset)=>!loadedSharedJsAssets.has(asset) && !isExisted('script', asset));\n    const needPreloadCssAssets = cssAssets.filter((asset)=>!loadedSharedCssAssets.has(asset) && !isExisted('link', asset));\n    return {\n        cssAssets: needPreloadCssAssets,\n        jsAssetsWithoutEntry: needPreloadJsAssets,\n        entryAssets: entryAssets.filter((entry)=>!isExisted('script', entry.url))\n    };\n}\nconst generatePreloadAssetsPlugin = function() {\n    return {\n        name: 'generate-preload-assets-plugin',\n        async generatePreloadAssets (args) {\n            const { origin, preloadOptions, remoteInfo, remote, globalSnapshot, remoteSnapshot } = args;\n            if (!sdk.isBrowserEnv()) {\n                return {\n                    cssAssets: [],\n                    jsAssetsWithoutEntry: [],\n                    entryAssets: []\n                };\n            }\n            if (isRemoteInfoWithEntry(remote) && isPureRemoteEntry(remote)) {\n                return {\n                    cssAssets: [],\n                    jsAssetsWithoutEntry: [],\n                    entryAssets: [\n                        {\n                            name: remote.name,\n                            url: remote.entry,\n                            moduleInfo: {\n                                name: remoteInfo.name,\n                                entry: remote.entry,\n                                type: remoteInfo.type || 'global',\n                                entryGlobalName: '',\n                                shareScope: ''\n                            }\n                        }\n                    ]\n                };\n            }\n            assignRemoteInfo(remoteInfo, remoteSnapshot);\n            const assets = generatePreloadAssets(origin, preloadOptions, remoteInfo, globalSnapshot, remoteSnapshot);\n            return assets;\n        }\n    };\n};\n\nfunction getGlobalRemoteInfo(moduleInfo, origin) {\n    const hostGlobalSnapshot = getGlobalSnapshotInfoByModuleInfo({\n        name: origin.options.name,\n        version: origin.options.version\n    });\n    // get remote detail info from global\n    const globalRemoteInfo = hostGlobalSnapshot && 'remotesInfo' in hostGlobalSnapshot && hostGlobalSnapshot.remotesInfo && getInfoWithoutType(hostGlobalSnapshot.remotesInfo, moduleInfo.name).value;\n    if (globalRemoteInfo && globalRemoteInfo.matchedVersion) {\n        return {\n            hostGlobalSnapshot,\n            globalSnapshot: getGlobalSnapshot(),\n            remoteSnapshot: getGlobalSnapshotInfoByModuleInfo({\n                name: moduleInfo.name,\n                version: globalRemoteInfo.matchedVersion\n            })\n        };\n    }\n    return {\n        hostGlobalSnapshot: undefined,\n        globalSnapshot: getGlobalSnapshot(),\n        remoteSnapshot: getGlobalSnapshotInfoByModuleInfo({\n            name: moduleInfo.name,\n            version: 'version' in moduleInfo ? moduleInfo.version : undefined\n        })\n    };\n}\nclass SnapshotHandler {\n    async loadSnapshot(moduleInfo) {\n        const { options } = this.HostInstance;\n        const { hostGlobalSnapshot, remoteSnapshot, globalSnapshot } = this.getGlobalRemoteInfo(moduleInfo);\n        const { remoteSnapshot: globalRemoteSnapshot, globalSnapshot: globalSnapshotRes } = await this.hooks.lifecycle.loadSnapshot.emit({\n            options,\n            moduleInfo,\n            hostGlobalSnapshot,\n            remoteSnapshot,\n            globalSnapshot\n        });\n        return {\n            remoteSnapshot: globalRemoteSnapshot,\n            globalSnapshot: globalSnapshotRes\n        };\n    }\n    // eslint-disable-next-line max-lines-per-function\n    async loadRemoteSnapshotInfo(moduleInfo) {\n        const { options } = this.HostInstance;\n        await this.hooks.lifecycle.beforeLoadRemoteSnapshot.emit({\n            options,\n            moduleInfo\n        });\n        let hostSnapshot = getGlobalSnapshotInfoByModuleInfo({\n            name: this.HostInstance.options.name,\n            version: this.HostInstance.options.version\n        });\n        if (!hostSnapshot) {\n            hostSnapshot = {\n                version: this.HostInstance.options.version || '',\n                remoteEntry: '',\n                remotesInfo: {}\n            };\n            addGlobalSnapshot({\n                [this.HostInstance.options.name]: hostSnapshot\n            });\n        }\n        // In dynamic loadRemote scenarios, incomplete remotesInfo delivery may occur. In such cases, the remotesInfo in the host needs to be completed in the snapshot at runtime.\n        // This ensures the snapshot's integrity and helps the chrome plugin correctly identify all producer modules, ensuring that proxyable producer modules will not be missing.\n        if (hostSnapshot && 'remotesInfo' in hostSnapshot && !getInfoWithoutType(hostSnapshot.remotesInfo, moduleInfo.name).value) {\n            if ('version' in moduleInfo || 'entry' in moduleInfo) {\n                hostSnapshot.remotesInfo = polyfills._extends({}, hostSnapshot == null ? void 0 : hostSnapshot.remotesInfo, {\n                    [moduleInfo.name]: {\n                        matchedVersion: 'version' in moduleInfo ? moduleInfo.version : moduleInfo.entry\n                    }\n                });\n            }\n        }\n        const { hostGlobalSnapshot, remoteSnapshot, globalSnapshot } = this.getGlobalRemoteInfo(moduleInfo);\n        const { remoteSnapshot: globalRemoteSnapshot, globalSnapshot: globalSnapshotRes } = await this.hooks.lifecycle.loadSnapshot.emit({\n            options,\n            moduleInfo,\n            hostGlobalSnapshot,\n            remoteSnapshot,\n            globalSnapshot\n        });\n        let mSnapshot;\n        let gSnapshot;\n        // global snapshot includes manifest or module info includes manifest\n        if (globalRemoteSnapshot) {\n            if (sdk.isManifestProvider(globalRemoteSnapshot)) {\n                const remoteEntry = sdk.isBrowserEnv() ? globalRemoteSnapshot.remoteEntry : globalRemoteSnapshot.ssrRemoteEntry || globalRemoteSnapshot.remoteEntry || '';\n                const moduleSnapshot = await this.getManifestJson(remoteEntry, moduleInfo, {});\n                // eslint-disable-next-line @typescript-eslint/no-shadow\n                const globalSnapshotRes = setGlobalSnapshotInfoByModuleInfo(polyfills._extends({}, moduleInfo, {\n                    // The global remote may be overridden\n                    // Therefore, set the snapshot key to the global address of the actual request\n                    entry: remoteEntry\n                }), moduleSnapshot);\n                mSnapshot = moduleSnapshot;\n                gSnapshot = globalSnapshotRes;\n            } else {\n                const { remoteSnapshot: remoteSnapshotRes } = await this.hooks.lifecycle.loadRemoteSnapshot.emit({\n                    options: this.HostInstance.options,\n                    moduleInfo,\n                    remoteSnapshot: globalRemoteSnapshot,\n                    from: 'global'\n                });\n                mSnapshot = remoteSnapshotRes;\n                gSnapshot = globalSnapshotRes;\n            }\n        } else {\n            if (isRemoteInfoWithEntry(moduleInfo)) {\n                // get from manifest.json and merge remote info from remote server\n                const moduleSnapshot = await this.getManifestJson(moduleInfo.entry, moduleInfo, {});\n                // eslint-disable-next-line @typescript-eslint/no-shadow\n                const globalSnapshotRes = setGlobalSnapshotInfoByModuleInfo(moduleInfo, moduleSnapshot);\n                const { remoteSnapshot: remoteSnapshotRes } = await this.hooks.lifecycle.loadRemoteSnapshot.emit({\n                    options: this.HostInstance.options,\n                    moduleInfo,\n                    remoteSnapshot: moduleSnapshot,\n                    from: 'global'\n                });\n                mSnapshot = remoteSnapshotRes;\n                gSnapshot = globalSnapshotRes;\n            } else {\n                error(errorCodes.getShortErrorMsg(errorCodes.RUNTIME_007, errorCodes.runtimeDescMap, {\n                    hostName: moduleInfo.name,\n                    hostVersion: moduleInfo.version,\n                    globalSnapshot: JSON.stringify(globalSnapshotRes)\n                }));\n            }\n        }\n        await this.hooks.lifecycle.afterLoadSnapshot.emit({\n            options,\n            moduleInfo,\n            remoteSnapshot: mSnapshot\n        });\n        return {\n            remoteSnapshot: mSnapshot,\n            globalSnapshot: gSnapshot\n        };\n    }\n    getGlobalRemoteInfo(moduleInfo) {\n        return getGlobalRemoteInfo(moduleInfo, this.HostInstance);\n    }\n    async getManifestJson(manifestUrl, moduleInfo, extraOptions) {\n        const getManifest = async ()=>{\n            let manifestJson = this.manifestCache.get(manifestUrl);\n            if (manifestJson) {\n                return manifestJson;\n            }\n            try {\n                let res = await this.loaderHook.lifecycle.fetch.emit(manifestUrl, {});\n                if (!res || !(res instanceof Response)) {\n                    res = await fetch(manifestUrl, {});\n                }\n                manifestJson = await res.json();\n            } catch (err) {\n                manifestJson = await this.HostInstance.remoteHandler.hooks.lifecycle.errorLoadRemote.emit({\n                    id: manifestUrl,\n                    error: err,\n                    from: 'runtime',\n                    lifecycle: 'afterResolve',\n                    origin: this.HostInstance\n                });\n                if (!manifestJson) {\n                    delete this.manifestLoading[manifestUrl];\n                    error(errorCodes.getShortErrorMsg(errorCodes.RUNTIME_003, errorCodes.runtimeDescMap, {\n                        manifestUrl,\n                        moduleName: moduleInfo.name,\n                        hostName: this.HostInstance.options.name\n                    }, `${err}`));\n                }\n            }\n            assert(manifestJson.metaData && manifestJson.exposes && manifestJson.shared, `${manifestUrl} is not a federation manifest`);\n            this.manifestCache.set(manifestUrl, manifestJson);\n            return manifestJson;\n        };\n        const asyncLoadProcess = async ()=>{\n            const manifestJson = await getManifest();\n            const remoteSnapshot = sdk.generateSnapshotFromManifest(manifestJson, {\n                version: manifestUrl\n            });\n            const { remoteSnapshot: remoteSnapshotRes } = await this.hooks.lifecycle.loadRemoteSnapshot.emit({\n                options: this.HostInstance.options,\n                moduleInfo,\n                manifestJson,\n                remoteSnapshot,\n                manifestUrl,\n                from: 'manifest'\n            });\n            return remoteSnapshotRes;\n        };\n        if (!this.manifestLoading[manifestUrl]) {\n            this.manifestLoading[manifestUrl] = asyncLoadProcess().then((res)=>res);\n        }\n        return this.manifestLoading[manifestUrl];\n    }\n    constructor(HostInstance){\n        this.loadingHostSnapshot = null;\n        this.manifestCache = new Map();\n        this.hooks = new PluginSystem({\n            beforeLoadRemoteSnapshot: new AsyncHook('beforeLoadRemoteSnapshot'),\n            loadSnapshot: new AsyncWaterfallHook('loadGlobalSnapshot'),\n            loadRemoteSnapshot: new AsyncWaterfallHook('loadRemoteSnapshot'),\n            afterLoadSnapshot: new AsyncWaterfallHook('afterLoadSnapshot')\n        });\n        this.manifestLoading = Global.__FEDERATION__.__MANIFEST_LOADING__;\n        this.HostInstance = HostInstance;\n        this.loaderHook = HostInstance.loaderHook;\n    }\n}\n\nclass SharedHandler {\n    // register shared in shareScopeMap\n    registerShared(globalOptions, userOptions) {\n        const { shareInfos, shared } = formatShareConfigs(globalOptions, userOptions);\n        const sharedKeys = Object.keys(shareInfos);\n        sharedKeys.forEach((sharedKey)=>{\n            const sharedVals = shareInfos[sharedKey];\n            sharedVals.forEach((sharedVal)=>{\n                const registeredShared = getRegisteredShare(this.shareScopeMap, sharedKey, sharedVal, this.hooks.lifecycle.resolveShare);\n                if (!registeredShared && sharedVal && sharedVal.lib) {\n                    this.setShared({\n                        pkgName: sharedKey,\n                        lib: sharedVal.lib,\n                        get: sharedVal.get,\n                        loaded: true,\n                        shared: sharedVal,\n                        from: userOptions.name\n                    });\n                }\n            });\n        });\n        return {\n            shareInfos,\n            shared\n        };\n    }\n    async loadShare(pkgName, extraOptions) {\n        const { host } = this;\n        // This function performs the following steps:\n        // 1. Checks if the currently loaded share already exists, if not, it throws an error\n        // 2. Searches globally for a matching share, if found, it uses it directly\n        // 3. If not found, it retrieves it from the current share and stores the obtained share globally.\n        const shareInfo = getTargetSharedOptions({\n            pkgName,\n            extraOptions,\n            shareInfos: host.options.shared\n        });\n        if (shareInfo == null ? void 0 : shareInfo.scope) {\n            await Promise.all(shareInfo.scope.map(async (shareScope)=>{\n                await Promise.all(this.initializeSharing(shareScope, {\n                    strategy: shareInfo.strategy\n                }));\n                return;\n            }));\n        }\n        const loadShareRes = await this.hooks.lifecycle.beforeLoadShare.emit({\n            pkgName,\n            shareInfo,\n            shared: host.options.shared,\n            origin: host\n        });\n        const { shareInfo: shareInfoRes } = loadShareRes;\n        // Assert that shareInfoRes exists, if not, throw an error\n        assert(shareInfoRes, `Cannot find ${pkgName} Share in the ${host.options.name}. Please ensure that the ${pkgName} Share parameters have been injected`);\n        // Retrieve from cache\n        const registeredShared = getRegisteredShare(this.shareScopeMap, pkgName, shareInfoRes, this.hooks.lifecycle.resolveShare);\n        const addUseIn = (shared)=>{\n            if (!shared.useIn) {\n                shared.useIn = [];\n            }\n            addUniqueItem(shared.useIn, host.options.name);\n        };\n        if (registeredShared && registeredShared.lib) {\n            addUseIn(registeredShared);\n            return registeredShared.lib;\n        } else if (registeredShared && registeredShared.loading && !registeredShared.loaded) {\n            const factory = await registeredShared.loading;\n            registeredShared.loaded = true;\n            if (!registeredShared.lib) {\n                registeredShared.lib = factory;\n            }\n            addUseIn(registeredShared);\n            return factory;\n        } else if (registeredShared) {\n            const asyncLoadProcess = async ()=>{\n                const factory = await registeredShared.get();\n                shareInfoRes.lib = factory;\n                shareInfoRes.loaded = true;\n                addUseIn(shareInfoRes);\n                const gShared = getRegisteredShare(this.shareScopeMap, pkgName, shareInfoRes, this.hooks.lifecycle.resolveShare);\n                if (gShared) {\n                    gShared.lib = factory;\n                    gShared.loaded = true;\n                }\n                return factory;\n            };\n            const loading = asyncLoadProcess();\n            this.setShared({\n                pkgName,\n                loaded: false,\n                shared: registeredShared,\n                from: host.options.name,\n                lib: null,\n                loading\n            });\n            return loading;\n        } else {\n            if (extraOptions == null ? void 0 : extraOptions.customShareInfo) {\n                return false;\n            }\n            const asyncLoadProcess = async ()=>{\n                const factory = await shareInfoRes.get();\n                shareInfoRes.lib = factory;\n                shareInfoRes.loaded = true;\n                addUseIn(shareInfoRes);\n                const gShared = getRegisteredShare(this.shareScopeMap, pkgName, shareInfoRes, this.hooks.lifecycle.resolveShare);\n                if (gShared) {\n                    gShared.lib = factory;\n                    gShared.loaded = true;\n                }\n                return factory;\n            };\n            const loading = asyncLoadProcess();\n            this.setShared({\n                pkgName,\n                loaded: false,\n                shared: shareInfoRes,\n                from: host.options.name,\n                lib: null,\n                loading\n            });\n            return loading;\n        }\n    }\n    /**\n   * This function initializes the sharing sequence (executed only once per share scope).\n   * It accepts one argument, the name of the share scope.\n   * If the share scope does not exist, it creates one.\n   */ // eslint-disable-next-line @typescript-eslint/member-ordering\n    initializeSharing(shareScopeName = DEFAULT_SCOPE, extraOptions) {\n        const { host } = this;\n        const from = extraOptions == null ? void 0 : extraOptions.from;\n        const strategy = extraOptions == null ? void 0 : extraOptions.strategy;\n        let initScope = extraOptions == null ? void 0 : extraOptions.initScope;\n        const promises = [];\n        if (from !== 'build') {\n            const { initTokens } = this;\n            if (!initScope) initScope = [];\n            let initToken = initTokens[shareScopeName];\n            if (!initToken) initToken = initTokens[shareScopeName] = {\n                from: this.host.name\n            };\n            if (initScope.indexOf(initToken) >= 0) return promises;\n            initScope.push(initToken);\n        }\n        const shareScope = this.shareScopeMap;\n        const hostName = host.options.name;\n        // Creates a new share scope if necessary\n        if (!shareScope[shareScopeName]) {\n            shareScope[shareScopeName] = {};\n        }\n        // Executes all initialization snippets from all accessible modules\n        const scope = shareScope[shareScopeName];\n        const register = (name, shared)=>{\n            var _activeVersion_shareConfig;\n            const { version, eager } = shared;\n            scope[name] = scope[name] || {};\n            const versions = scope[name];\n            const activeVersion = versions[version];\n            const activeVersionEager = Boolean(activeVersion && (activeVersion.eager || ((_activeVersion_shareConfig = activeVersion.shareConfig) == null ? void 0 : _activeVersion_shareConfig.eager)));\n            if (!activeVersion || activeVersion.strategy !== 'loaded-first' && !activeVersion.loaded && (Boolean(!eager) !== !activeVersionEager ? eager : hostName > activeVersion.from)) {\n                versions[version] = shared;\n            }\n        };\n        const initFn = (mod)=>mod && mod.init && mod.init(shareScope[shareScopeName], initScope);\n        const initRemoteModule = async (key)=>{\n            const { module } = await host.remoteHandler.getRemoteModuleAndOptions({\n                id: key\n            });\n            if (module.getEntry) {\n                let remoteEntryExports;\n                try {\n                    remoteEntryExports = await module.getEntry();\n                } catch (error) {\n                    remoteEntryExports = await host.remoteHandler.hooks.lifecycle.errorLoadRemote.emit({\n                        id: key,\n                        error,\n                        from: 'runtime',\n                        lifecycle: 'beforeLoadShare',\n                        origin: host\n                    });\n                }\n                if (!module.inited) {\n                    await initFn(remoteEntryExports);\n                    module.inited = true;\n                }\n            }\n        };\n        Object.keys(host.options.shared).forEach((shareName)=>{\n            const sharedArr = host.options.shared[shareName];\n            sharedArr.forEach((shared)=>{\n                if (shared.scope.includes(shareScopeName)) {\n                    register(shareName, shared);\n                }\n            });\n        });\n        // TODO: strategy==='version-first' need to be removed in the future\n        if (host.options.shareStrategy === 'version-first' || strategy === 'version-first') {\n            host.options.remotes.forEach((remote)=>{\n                if (remote.shareScope === shareScopeName) {\n                    promises.push(initRemoteModule(remote.name));\n                }\n            });\n        }\n        return promises;\n    }\n    // The lib function will only be available if the shared set by eager or runtime init is set or the shared is successfully loaded.\n    // 1. If the loaded shared already exists globally, then it will be reused\n    // 2. If lib exists in local shared, it will be used directly\n    // 3. If the local get returns something other than Promise, then it will be used directly\n    loadShareSync(pkgName, extraOptions) {\n        const { host } = this;\n        const shareInfo = getTargetSharedOptions({\n            pkgName,\n            extraOptions,\n            shareInfos: host.options.shared\n        });\n        if (shareInfo == null ? void 0 : shareInfo.scope) {\n            shareInfo.scope.forEach((shareScope)=>{\n                this.initializeSharing(shareScope, {\n                    strategy: shareInfo.strategy\n                });\n            });\n        }\n        const registeredShared = getRegisteredShare(this.shareScopeMap, pkgName, shareInfo, this.hooks.lifecycle.resolveShare);\n        const addUseIn = (shared)=>{\n            if (!shared.useIn) {\n                shared.useIn = [];\n            }\n            addUniqueItem(shared.useIn, host.options.name);\n        };\n        if (registeredShared) {\n            if (typeof registeredShared.lib === 'function') {\n                addUseIn(registeredShared);\n                if (!registeredShared.loaded) {\n                    registeredShared.loaded = true;\n                    if (registeredShared.from === host.options.name) {\n                        shareInfo.loaded = true;\n                    }\n                }\n                return registeredShared.lib;\n            }\n            if (typeof registeredShared.get === 'function') {\n                const module = registeredShared.get();\n                if (!(module instanceof Promise)) {\n                    addUseIn(registeredShared);\n                    this.setShared({\n                        pkgName,\n                        loaded: true,\n                        from: host.options.name,\n                        lib: module,\n                        shared: registeredShared\n                    });\n                    return module;\n                }\n            }\n        }\n        if (shareInfo.lib) {\n            if (!shareInfo.loaded) {\n                shareInfo.loaded = true;\n            }\n            return shareInfo.lib;\n        }\n        if (shareInfo.get) {\n            const module = shareInfo.get();\n            if (module instanceof Promise) {\n                const errorCode = (extraOptions == null ? void 0 : extraOptions.from) === 'build' ? errorCodes.RUNTIME_005 : errorCodes.RUNTIME_006;\n                throw new Error(errorCodes.getShortErrorMsg(errorCode, errorCodes.runtimeDescMap, {\n                    hostName: host.options.name,\n                    sharedPkgName: pkgName\n                }));\n            }\n            shareInfo.lib = module;\n            this.setShared({\n                pkgName,\n                loaded: true,\n                from: host.options.name,\n                lib: shareInfo.lib,\n                shared: shareInfo\n            });\n            return shareInfo.lib;\n        }\n        throw new Error(errorCodes.getShortErrorMsg(errorCodes.RUNTIME_006, errorCodes.runtimeDescMap, {\n            hostName: host.options.name,\n            sharedPkgName: pkgName\n        }));\n    }\n    initShareScopeMap(scopeName, shareScope, extraOptions = {}) {\n        const { host } = this;\n        this.shareScopeMap[scopeName] = shareScope;\n        this.hooks.lifecycle.initContainerShareScopeMap.emit({\n            shareScope,\n            options: host.options,\n            origin: host,\n            scopeName,\n            hostShareScopeMap: extraOptions.hostShareScopeMap\n        });\n    }\n    setShared({ pkgName, shared, from, lib, loading, loaded, get }) {\n        const { version, scope = 'default' } = shared, shareInfo = polyfills._object_without_properties_loose(shared, [\n            \"version\",\n            \"scope\"\n        ]);\n        const scopes = Array.isArray(scope) ? scope : [\n            scope\n        ];\n        scopes.forEach((sc)=>{\n            if (!this.shareScopeMap[sc]) {\n                this.shareScopeMap[sc] = {};\n            }\n            if (!this.shareScopeMap[sc][pkgName]) {\n                this.shareScopeMap[sc][pkgName] = {};\n            }\n            if (!this.shareScopeMap[sc][pkgName][version]) {\n                this.shareScopeMap[sc][pkgName][version] = polyfills._extends({\n                    version,\n                    scope: [\n                        'default'\n                    ]\n                }, shareInfo, {\n                    lib,\n                    loaded,\n                    loading\n                });\n                if (get) {\n                    this.shareScopeMap[sc][pkgName][version].get = get;\n                }\n                return;\n            }\n            const registeredShared = this.shareScopeMap[sc][pkgName][version];\n            if (loading && !registeredShared.loading) {\n                registeredShared.loading = loading;\n            }\n        });\n    }\n    _setGlobalShareScopeMap(hostOptions) {\n        const globalShareScopeMap = getGlobalShareScope();\n        const identifier = hostOptions.id || hostOptions.name;\n        if (identifier && !globalShareScopeMap[identifier]) {\n            globalShareScopeMap[identifier] = this.shareScopeMap;\n        }\n    }\n    constructor(host){\n        this.hooks = new PluginSystem({\n            afterResolve: new AsyncWaterfallHook('afterResolve'),\n            beforeLoadShare: new AsyncWaterfallHook('beforeLoadShare'),\n            // not used yet\n            loadShare: new AsyncHook(),\n            resolveShare: new SyncWaterfallHook('resolveShare'),\n            // maybe will change, temporarily for internal use only\n            initContainerShareScopeMap: new SyncWaterfallHook('initContainerShareScopeMap')\n        });\n        this.host = host;\n        this.shareScopeMap = {};\n        this.initTokens = {};\n        this._setGlobalShareScopeMap(host.options);\n    }\n}\n\nclass RemoteHandler {\n    formatAndRegisterRemote(globalOptions, userOptions) {\n        const userRemotes = userOptions.remotes || [];\n        return userRemotes.reduce((res, remote)=>{\n            this.registerRemote(remote, res, {\n                force: false\n            });\n            return res;\n        }, globalOptions.remotes);\n    }\n    setIdToRemoteMap(id, remoteMatchInfo) {\n        const { remote, expose } = remoteMatchInfo;\n        const { name, alias } = remote;\n        this.idToRemoteMap[id] = {\n            name: remote.name,\n            expose\n        };\n        if (alias && id.startsWith(name)) {\n            const idWithAlias = id.replace(name, alias);\n            this.idToRemoteMap[idWithAlias] = {\n                name: remote.name,\n                expose\n            };\n            return;\n        }\n        if (alias && id.startsWith(alias)) {\n            const idWithName = id.replace(alias, name);\n            this.idToRemoteMap[idWithName] = {\n                name: remote.name,\n                expose\n            };\n        }\n    }\n    // eslint-disable-next-line max-lines-per-function\n    // eslint-disable-next-line @typescript-eslint/member-ordering\n    async loadRemote(id, options) {\n        const { host } = this;\n        try {\n            const { loadFactory = true } = options || {\n                loadFactory: true\n            };\n            // 1. Validate the parameters of the retrieved module. There are two module request methods: pkgName + expose and alias + expose.\n            // 2. Request the snapshot information of the current host and globally store the obtained snapshot information. The retrieved module information is partially offline and partially online. The online module information will retrieve the modules used online.\n            // 3. Retrieve the detailed information of the current module from global (remoteEntry address, expose resource address)\n            // 4. After retrieving remoteEntry, call the init of the module, and then retrieve the exported content of the module through get\n            // id: pkgName(@federation/app1) + expose(button) = @federation/app1/button\n            // id: alias(app1) + expose(button) = app1/button\n            // id: alias(app1/utils) + expose(loadash/sort) = app1/utils/loadash/sort\n            const { module, moduleOptions, remoteMatchInfo } = await this.getRemoteModuleAndOptions({\n                id\n            });\n            const { pkgNameOrAlias, remote, expose, id: idRes, remoteSnapshot } = remoteMatchInfo;\n            const moduleOrFactory = await module.get(idRes, expose, options, remoteSnapshot);\n            const moduleWrapper = await this.hooks.lifecycle.onLoad.emit({\n                id: idRes,\n                pkgNameOrAlias,\n                expose,\n                exposeModule: loadFactory ? moduleOrFactory : undefined,\n                exposeModuleFactory: loadFactory ? undefined : moduleOrFactory,\n                remote,\n                options: moduleOptions,\n                moduleInstance: module,\n                origin: host\n            });\n            this.setIdToRemoteMap(id, remoteMatchInfo);\n            if (typeof moduleWrapper === 'function') {\n                return moduleWrapper;\n            }\n            return moduleOrFactory;\n        } catch (error) {\n            const { from = 'runtime' } = options || {\n                from: 'runtime'\n            };\n            const failOver = await this.hooks.lifecycle.errorLoadRemote.emit({\n                id,\n                error,\n                from,\n                lifecycle: 'onLoad',\n                origin: host\n            });\n            if (!failOver) {\n                throw error;\n            }\n            return failOver;\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/member-ordering\n    async preloadRemote(preloadOptions) {\n        const { host } = this;\n        await this.hooks.lifecycle.beforePreloadRemote.emit({\n            preloadOps: preloadOptions,\n            options: host.options,\n            origin: host\n        });\n        const preloadOps = formatPreloadArgs(host.options.remotes, preloadOptions);\n        await Promise.all(preloadOps.map(async (ops)=>{\n            const { remote } = ops;\n            const remoteInfo = getRemoteInfo(remote);\n            const { globalSnapshot, remoteSnapshot } = await host.snapshotHandler.loadRemoteSnapshotInfo(remote);\n            const assets = await this.hooks.lifecycle.generatePreloadAssets.emit({\n                origin: host,\n                preloadOptions: ops,\n                remote,\n                remoteInfo,\n                globalSnapshot,\n                remoteSnapshot\n            });\n            if (!assets) {\n                return;\n            }\n            preloadAssets(remoteInfo, host, assets);\n        }));\n    }\n    registerRemotes(remotes, options) {\n        const { host } = this;\n        remotes.forEach((remote)=>{\n            this.registerRemote(remote, host.options.remotes, {\n                force: options == null ? void 0 : options.force\n            });\n        });\n    }\n    async getRemoteModuleAndOptions(options) {\n        const { host } = this;\n        const { id } = options;\n        let loadRemoteArgs;\n        try {\n            loadRemoteArgs = await this.hooks.lifecycle.beforeRequest.emit({\n                id,\n                options: host.options,\n                origin: host\n            });\n        } catch (error) {\n            loadRemoteArgs = await this.hooks.lifecycle.errorLoadRemote.emit({\n                id,\n                options: host.options,\n                origin: host,\n                from: 'runtime',\n                error,\n                lifecycle: 'beforeRequest'\n            });\n            if (!loadRemoteArgs) {\n                throw error;\n            }\n        }\n        const { id: idRes } = loadRemoteArgs;\n        const remoteSplitInfo = matchRemoteWithNameAndExpose(host.options.remotes, idRes);\n        assert(remoteSplitInfo, errorCodes.getShortErrorMsg(errorCodes.RUNTIME_004, errorCodes.runtimeDescMap, {\n            hostName: host.options.name,\n            requestId: idRes\n        }));\n        const { remote: rawRemote } = remoteSplitInfo;\n        const remoteInfo = getRemoteInfo(rawRemote);\n        const matchInfo = await host.sharedHandler.hooks.lifecycle.afterResolve.emit(polyfills._extends({\n            id: idRes\n        }, remoteSplitInfo, {\n            options: host.options,\n            origin: host,\n            remoteInfo\n        }));\n        const { remote, expose } = matchInfo;\n        assert(remote && expose, `The 'beforeRequest' hook was executed, but it failed to return the correct 'remote' and 'expose' values while loading ${idRes}.`);\n        let module = host.moduleCache.get(remote.name);\n        const moduleOptions = {\n            host: host,\n            remoteInfo\n        };\n        if (!module) {\n            module = new Module(moduleOptions);\n            host.moduleCache.set(remote.name, module);\n        }\n        return {\n            module,\n            moduleOptions,\n            remoteMatchInfo: matchInfo\n        };\n    }\n    registerRemote(remote, targetRemotes, options) {\n        const { host } = this;\n        const normalizeRemote = ()=>{\n            if (remote.alias) {\n                // Validate if alias equals the prefix of remote.name and remote.alias, if so, throw an error\n                // As multi-level path references cannot guarantee unique names, alias being a prefix of remote.name is not supported\n                const findEqual = targetRemotes.find((item)=>{\n                    var _item_alias;\n                    return remote.alias && (item.name.startsWith(remote.alias) || ((_item_alias = item.alias) == null ? void 0 : _item_alias.startsWith(remote.alias)));\n                });\n                assert(!findEqual, `The alias ${remote.alias} of remote ${remote.name} is not allowed to be the prefix of ${findEqual && findEqual.name} name or alias`);\n            }\n            // Set the remote entry to a complete path\n            if ('entry' in remote) {\n                if (sdk.isBrowserEnv() && !remote.entry.startsWith('http')) {\n                    remote.entry = new URL(remote.entry, window.location.origin).href;\n                }\n            }\n            if (!remote.shareScope) {\n                remote.shareScope = DEFAULT_SCOPE;\n            }\n            if (!remote.type) {\n                remote.type = DEFAULT_REMOTE_TYPE;\n            }\n        };\n        this.hooks.lifecycle.beforeRegisterRemote.emit({\n            remote,\n            origin: host\n        });\n        const registeredRemote = targetRemotes.find((item)=>item.name === remote.name);\n        if (!registeredRemote) {\n            normalizeRemote();\n            targetRemotes.push(remote);\n            this.hooks.lifecycle.registerRemote.emit({\n                remote,\n                origin: host\n            });\n        } else {\n            const messages = [\n                `The remote \"${remote.name}\" is already registered.`,\n                'Please note that overriding it may cause unexpected errors.'\n            ];\n            if (options == null ? void 0 : options.force) {\n                // remove registered remote\n                this.removeRemote(registeredRemote);\n                normalizeRemote();\n                targetRemotes.push(remote);\n                this.hooks.lifecycle.registerRemote.emit({\n                    remote,\n                    origin: host\n                });\n                sdk.warn(messages.join(' '));\n            }\n        }\n    }\n    removeRemote(remote) {\n        try {\n            const { host } = this;\n            const { name } = remote;\n            const remoteIndex = host.options.remotes.findIndex((item)=>item.name === name);\n            if (remoteIndex !== -1) {\n                host.options.remotes.splice(remoteIndex, 1);\n            }\n            const loadedModule = host.moduleCache.get(remote.name);\n            if (loadedModule) {\n                const remoteInfo = loadedModule.remoteInfo;\n                const key = remoteInfo.entryGlobalName;\n                if (CurrentGlobal[key]) {\n                    var _Object_getOwnPropertyDescriptor;\n                    if ((_Object_getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor(CurrentGlobal, key)) == null ? void 0 : _Object_getOwnPropertyDescriptor.configurable) {\n                        delete CurrentGlobal[key];\n                    } else {\n                        // @ts-ignore\n                        CurrentGlobal[key] = undefined;\n                    }\n                }\n                const remoteEntryUniqueKey = getRemoteEntryUniqueKey(loadedModule.remoteInfo);\n                if (globalLoading[remoteEntryUniqueKey]) {\n                    delete globalLoading[remoteEntryUniqueKey];\n                }\n                host.snapshotHandler.manifestCache.delete(remoteInfo.entry);\n                // delete unloaded shared and instance\n                let remoteInsId = remoteInfo.buildVersion ? sdk.composeKeyWithSeparator(remoteInfo.name, remoteInfo.buildVersion) : remoteInfo.name;\n                const remoteInsIndex = CurrentGlobal.__FEDERATION__.__INSTANCES__.findIndex((ins)=>{\n                    if (remoteInfo.buildVersion) {\n                        return ins.options.id === remoteInsId;\n                    } else {\n                        return ins.name === remoteInsId;\n                    }\n                });\n                if (remoteInsIndex !== -1) {\n                    const remoteIns = CurrentGlobal.__FEDERATION__.__INSTANCES__[remoteInsIndex];\n                    remoteInsId = remoteIns.options.id || remoteInsId;\n                    const globalShareScopeMap = getGlobalShareScope();\n                    let isAllSharedNotUsed = true;\n                    const needDeleteKeys = [];\n                    Object.keys(globalShareScopeMap).forEach((instId)=>{\n                        const shareScopeMap = globalShareScopeMap[instId];\n                        shareScopeMap && Object.keys(shareScopeMap).forEach((shareScope)=>{\n                            const shareScopeVal = shareScopeMap[shareScope];\n                            shareScopeVal && Object.keys(shareScopeVal).forEach((shareName)=>{\n                                const sharedPkgs = shareScopeVal[shareName];\n                                sharedPkgs && Object.keys(sharedPkgs).forEach((shareVersion)=>{\n                                    const shared = sharedPkgs[shareVersion];\n                                    if (shared && typeof shared === 'object' && shared.from === remoteInfo.name) {\n                                        if (shared.loaded || shared.loading) {\n                                            shared.useIn = shared.useIn.filter((usedHostName)=>usedHostName !== remoteInfo.name);\n                                            if (shared.useIn.length) {\n                                                isAllSharedNotUsed = false;\n                                            } else {\n                                                needDeleteKeys.push([\n                                                    instId,\n                                                    shareScope,\n                                                    shareName,\n                                                    shareVersion\n                                                ]);\n                                            }\n                                        } else {\n                                            needDeleteKeys.push([\n                                                instId,\n                                                shareScope,\n                                                shareName,\n                                                shareVersion\n                                            ]);\n                                        }\n                                    }\n                                });\n                            });\n                        });\n                    });\n                    if (isAllSharedNotUsed) {\n                        remoteIns.shareScopeMap = {};\n                        delete globalShareScopeMap[remoteInsId];\n                    }\n                    needDeleteKeys.forEach(([insId, shareScope, shareName, shareVersion])=>{\n                        var _globalShareScopeMap_insId_shareScope_shareName, _globalShareScopeMap_insId_shareScope, _globalShareScopeMap_insId;\n                        (_globalShareScopeMap_insId = globalShareScopeMap[insId]) == null ? true : (_globalShareScopeMap_insId_shareScope = _globalShareScopeMap_insId[shareScope]) == null ? true : (_globalShareScopeMap_insId_shareScope_shareName = _globalShareScopeMap_insId_shareScope[shareName]) == null ? true : delete _globalShareScopeMap_insId_shareScope_shareName[shareVersion];\n                    });\n                    CurrentGlobal.__FEDERATION__.__INSTANCES__.splice(remoteInsIndex, 1);\n                }\n                const { hostGlobalSnapshot } = getGlobalRemoteInfo(remote, host);\n                if (hostGlobalSnapshot) {\n                    const remoteKey = hostGlobalSnapshot && 'remotesInfo' in hostGlobalSnapshot && hostGlobalSnapshot.remotesInfo && getInfoWithoutType(hostGlobalSnapshot.remotesInfo, remote.name).key;\n                    if (remoteKey) {\n                        delete hostGlobalSnapshot.remotesInfo[remoteKey];\n                        if (//eslint-disable-next-line no-extra-boolean-cast\n                        Boolean(Global.__FEDERATION__.__MANIFEST_LOADING__[remoteKey])) {\n                            delete Global.__FEDERATION__.__MANIFEST_LOADING__[remoteKey];\n                        }\n                    }\n                }\n                host.moduleCache.delete(remote.name);\n            }\n        } catch (err) {\n            logger.log('removeRemote fail: ', err);\n        }\n    }\n    constructor(host){\n        this.hooks = new PluginSystem({\n            beforeRegisterRemote: new SyncWaterfallHook('beforeRegisterRemote'),\n            registerRemote: new SyncWaterfallHook('registerRemote'),\n            beforeRequest: new AsyncWaterfallHook('beforeRequest'),\n            onLoad: new AsyncHook('onLoad'),\n            handlePreloadModule: new SyncHook('handlePreloadModule'),\n            errorLoadRemote: new AsyncHook('errorLoadRemote'),\n            beforePreloadRemote: new AsyncHook('beforePreloadRemote'),\n            generatePreloadAssets: new AsyncHook('generatePreloadAssets'),\n            // not used yet\n            afterPreloadRemote: new AsyncHook(),\n            loadEntry: new AsyncHook()\n        });\n        this.host = host;\n        this.idToRemoteMap = {};\n    }\n}\n\nclass FederationHost {\n    initOptions(userOptions) {\n        this.registerPlugins(userOptions.plugins);\n        const options = this.formatOptions(this.options, userOptions);\n        this.options = options;\n        return options;\n    }\n    async loadShare(pkgName, extraOptions) {\n        return this.sharedHandler.loadShare(pkgName, extraOptions);\n    }\n    // The lib function will only be available if the shared set by eager or runtime init is set or the shared is successfully loaded.\n    // 1. If the loaded shared already exists globally, then it will be reused\n    // 2. If lib exists in local shared, it will be used directly\n    // 3. If the local get returns something other than Promise, then it will be used directly\n    loadShareSync(pkgName, extraOptions) {\n        return this.sharedHandler.loadShareSync(pkgName, extraOptions);\n    }\n    initializeSharing(shareScopeName = DEFAULT_SCOPE, extraOptions) {\n        return this.sharedHandler.initializeSharing(shareScopeName, extraOptions);\n    }\n    initRawContainer(name, url, container) {\n        const remoteInfo = getRemoteInfo({\n            name,\n            entry: url\n        });\n        const module = new Module({\n            host: this,\n            remoteInfo\n        });\n        module.remoteEntryExports = container;\n        this.moduleCache.set(name, module);\n        return module;\n    }\n    // eslint-disable-next-line max-lines-per-function\n    // eslint-disable-next-line @typescript-eslint/member-ordering\n    async loadRemote(id, options) {\n        return this.remoteHandler.loadRemote(id, options);\n    }\n    // eslint-disable-next-line @typescript-eslint/member-ordering\n    async preloadRemote(preloadOptions) {\n        return this.remoteHandler.preloadRemote(preloadOptions);\n    }\n    initShareScopeMap(scopeName, shareScope, extraOptions = {}) {\n        this.sharedHandler.initShareScopeMap(scopeName, shareScope, extraOptions);\n    }\n    formatOptions(globalOptions, userOptions) {\n        const { shared } = formatShareConfigs(globalOptions, userOptions);\n        const { userOptions: userOptionsRes, options: globalOptionsRes } = this.hooks.lifecycle.beforeInit.emit({\n            origin: this,\n            userOptions,\n            options: globalOptions,\n            shareInfo: shared\n        });\n        const remotes = this.remoteHandler.formatAndRegisterRemote(globalOptionsRes, userOptionsRes);\n        const { shared: handledShared } = this.sharedHandler.registerShared(globalOptionsRes, userOptionsRes);\n        const plugins = [\n            ...globalOptionsRes.plugins\n        ];\n        if (userOptionsRes.plugins) {\n            userOptionsRes.plugins.forEach((plugin)=>{\n                if (!plugins.includes(plugin)) {\n                    plugins.push(plugin);\n                }\n            });\n        }\n        const optionsRes = polyfills._extends({}, globalOptions, userOptions, {\n            plugins,\n            remotes,\n            shared: handledShared\n        });\n        this.hooks.lifecycle.init.emit({\n            origin: this,\n            options: optionsRes\n        });\n        return optionsRes;\n    }\n    registerPlugins(plugins) {\n        const pluginRes = registerPlugins(plugins, [\n            this.hooks,\n            this.remoteHandler.hooks,\n            this.sharedHandler.hooks,\n            this.snapshotHandler.hooks,\n            this.loaderHook,\n            this.bridgeHook\n        ]);\n        // Merge plugin\n        this.options.plugins = this.options.plugins.reduce((res, plugin)=>{\n            if (!plugin) return res;\n            if (res && !res.find((item)=>item.name === plugin.name)) {\n                res.push(plugin);\n            }\n            return res;\n        }, pluginRes || []);\n    }\n    registerRemotes(remotes, options) {\n        return this.remoteHandler.registerRemotes(remotes, options);\n    }\n    constructor(userOptions){\n        this.hooks = new PluginSystem({\n            beforeInit: new SyncWaterfallHook('beforeInit'),\n            init: new SyncHook(),\n            // maybe will change, temporarily for internal use only\n            beforeInitContainer: new AsyncWaterfallHook('beforeInitContainer'),\n            // maybe will change, temporarily for internal use only\n            initContainer: new AsyncWaterfallHook('initContainer')\n        });\n        this.version = \"0.13.1\";\n        this.moduleCache = new Map();\n        this.loaderHook = new PluginSystem({\n            // FIXME: may not be suitable , not open to the public yet\n            getModuleInfo: new SyncHook(),\n            createScript: new SyncHook(),\n            createLink: new SyncHook(),\n            fetch: new AsyncHook(),\n            loadEntryError: new AsyncHook(),\n            getModuleFactory: new AsyncHook()\n        });\n        this.bridgeHook = new PluginSystem({\n            beforeBridgeRender: new SyncHook(),\n            afterBridgeRender: new SyncHook(),\n            beforeBridgeDestroy: new SyncHook(),\n            afterBridgeDestroy: new SyncHook()\n        });\n        // TODO: Validate the details of the options\n        // Initialize options with default values\n        const defaultOptions = {\n            id: getBuilderId(),\n            name: userOptions.name,\n            plugins: [\n                snapshotPlugin(),\n                generatePreloadAssetsPlugin()\n            ],\n            remotes: [],\n            shared: {},\n            inBrowser: sdk.isBrowserEnv()\n        };\n        this.name = userOptions.name;\n        this.options = defaultOptions;\n        this.snapshotHandler = new SnapshotHandler(this);\n        this.sharedHandler = new SharedHandler(this);\n        this.remoteHandler = new RemoteHandler(this);\n        this.shareScopeMap = this.sharedHandler.shareScopeMap;\n        this.registerPlugins([\n            ...defaultOptions.plugins,\n            ...userOptions.plugins || []\n        ]);\n        this.options = this.formatOptions(defaultOptions, userOptions);\n    }\n}\n\nvar index = /*#__PURE__*/Object.freeze({\n  __proto__: null\n});\n\nexports.loadScript = sdk.loadScript;\nexports.loadScriptNode = sdk.loadScriptNode;\nexports.CurrentGlobal = CurrentGlobal;\nexports.FederationHost = FederationHost;\nexports.Global = Global;\nexports.Module = Module;\nexports.addGlobalSnapshot = addGlobalSnapshot;\nexports.assert = assert;\nexports.getGlobalFederationConstructor = getGlobalFederationConstructor;\nexports.getGlobalSnapshot = getGlobalSnapshot;\nexports.getInfoWithoutType = getInfoWithoutType;\nexports.getRegisteredShare = getRegisteredShare;\nexports.getRemoteEntry = getRemoteEntry;\nexports.getRemoteInfo = getRemoteInfo;\nexports.helpers = helpers;\nexports.isStaticResourcesEqual = isStaticResourcesEqual;\nexports.matchRemoteWithNameAndExpose = matchRemoteWithNameAndExpose;\nexports.registerGlobalPlugins = registerGlobalPlugins;\nexports.resetFederationGlobalInfo = resetFederationGlobalInfo;\nexports.safeWrapper = safeWrapper;\nexports.satisfy = satisfy;\nexports.setGlobalFederationConstructor = setGlobalFederationConstructor;\nexports.setGlobalFederationInstance = setGlobalFederationInstance;\nexports.types = index;\n","'use strict';\n\nfunction _extends() {\n    _extends = Object.assign || function assign(target) {\n        for(var i = 1; i < arguments.length; i++){\n            var source = arguments[i];\n            for(var key in source)if (Object.prototype.hasOwnProperty.call(source, key)) target[key] = source[key];\n        }\n        return target;\n    };\n    return _extends.apply(this, arguments);\n}\n\nfunction _object_without_properties_loose(source, excluded) {\n    if (source == null) return {};\n    var target = {};\n    var sourceKeys = Object.keys(source);\n    var key, i;\n    for(i = 0; i < sourceKeys.length; i++){\n        key = sourceKeys[i];\n        if (excluded.indexOf(key) >= 0) continue;\n        target[key] = source[key];\n    }\n    return target;\n}\n\nexports._extends = _extends;\nexports._object_without_properties_loose = _object_without_properties_loose;\n","'use strict';\n\nvar runtimeCore = require('@module-federation/runtime-core');\nvar utils = require('./utils.cjs.cjs');\n\nlet FederationInstance = null;\nfunction init(options) {\n    // Retrieve the same instance with the same name\n    const instance = utils.getGlobalFederationInstance(options.name, options.version);\n    if (!instance) {\n        // Retrieve debug constructor\n        const FederationConstructor = runtimeCore.getGlobalFederationConstructor() || runtimeCore.FederationHost;\n        FederationInstance = new FederationConstructor(options);\n        runtimeCore.setGlobalFederationInstance(FederationInstance);\n        return FederationInstance;\n    } else {\n        // Merge options\n        instance.initOptions(options);\n        if (!FederationInstance) {\n            FederationInstance = instance;\n        }\n        return instance;\n    }\n}\nfunction loadRemote(...args) {\n    runtimeCore.assert(FederationInstance, 'Please call init first');\n    const loadRemote1 = FederationInstance.loadRemote;\n    // eslint-disable-next-line prefer-spread\n    return loadRemote1.apply(FederationInstance, args);\n}\nfunction loadShare(...args) {\n    runtimeCore.assert(FederationInstance, 'Please call init first');\n    // eslint-disable-next-line prefer-spread\n    const loadShare1 = FederationInstance.loadShare;\n    return loadShare1.apply(FederationInstance, args);\n}\nfunction loadShareSync(...args) {\n    runtimeCore.assert(FederationInstance, 'Please call init first');\n    const loadShareSync1 = FederationInstance.loadShareSync;\n    // eslint-disable-next-line prefer-spread\n    return loadShareSync1.apply(FederationInstance, args);\n}\nfunction preloadRemote(...args) {\n    runtimeCore.assert(FederationInstance, 'Please call init first');\n    // eslint-disable-next-line prefer-spread\n    return FederationInstance.preloadRemote.apply(FederationInstance, args);\n}\nfunction registerRemotes(...args) {\n    runtimeCore.assert(FederationInstance, 'Please call init first');\n    // eslint-disable-next-line prefer-spread\n    return FederationInstance.registerRemotes.apply(FederationInstance, args);\n}\nfunction registerPlugins(...args) {\n    runtimeCore.assert(FederationInstance, 'Please call init first');\n    // eslint-disable-next-line prefer-spread\n    return FederationInstance.registerPlugins.apply(FederationInstance, args);\n}\nfunction getInstance() {\n    return FederationInstance;\n}\n// Inject for debug\nruntimeCore.setGlobalFederationConstructor(runtimeCore.FederationHost);\n\nexports.FederationHost = runtimeCore.FederationHost;\nexports.Module = runtimeCore.Module;\nexports.getRemoteEntry = runtimeCore.getRemoteEntry;\nexports.getRemoteInfo = runtimeCore.getRemoteInfo;\nexports.loadScript = runtimeCore.loadScript;\nexports.loadScriptNode = runtimeCore.loadScriptNode;\nexports.registerGlobalPlugins = runtimeCore.registerGlobalPlugins;\nexports.getInstance = getInstance;\nexports.init = init;\nexports.loadRemote = loadRemote;\nexports.loadShare = loadShare;\nexports.loadShareSync = loadShareSync;\nexports.preloadRemote = preloadRemote;\nexports.registerPlugins = registerPlugins;\nexports.registerRemotes = registerRemotes;\n","'use strict';\n\nvar runtimeCore = require('@module-federation/runtime-core');\n\n// injected by bundler, so it can not use runtime-core stuff\nfunction getBuilderId() {\n    //@ts-ignore\n    return typeof FEDERATION_BUILD_IDENTIFIER !== 'undefined' ? FEDERATION_BUILD_IDENTIFIER : '';\n}\nfunction getGlobalFederationInstance(name, version) {\n    const buildId = getBuilderId();\n    return runtimeCore.CurrentGlobal.__FEDERATION__.__INSTANCES__.find((GMInstance)=>{\n        if (buildId && GMInstance.options.id === getBuilderId()) {\n            return true;\n        }\n        if (GMInstance.options.name === name && !GMInstance.options.version && !version) {\n            return true;\n        }\n        if (GMInstance.options.name === name && version && GMInstance.options.version === version) {\n            return true;\n        }\n        return false;\n    });\n}\n\nexports.getGlobalFederationInstance = getGlobalFederationInstance;\n","'use strict';\n\nvar polyfills = require('./polyfills.cjs.cjs');\n\nconst FederationModuleManifest = 'federation-manifest.json';\nconst MANIFEST_EXT = '.json';\nconst BROWSER_LOG_KEY = 'FEDERATION_DEBUG';\nconst BROWSER_LOG_VALUE = '1';\nconst NameTransformSymbol = {\n    AT: '@',\n    HYPHEN: '-',\n    SLASH: '/'\n};\nconst NameTransformMap = {\n    [NameTransformSymbol.AT]: 'scope_',\n    [NameTransformSymbol.HYPHEN]: '_',\n    [NameTransformSymbol.SLASH]: '__'\n};\nconst EncodedNameTransformMap = {\n    [NameTransformMap[NameTransformSymbol.AT]]: NameTransformSymbol.AT,\n    [NameTransformMap[NameTransformSymbol.HYPHEN]]: NameTransformSymbol.HYPHEN,\n    [NameTransformMap[NameTransformSymbol.SLASH]]: NameTransformSymbol.SLASH\n};\nconst SEPARATOR = ':';\nconst ManifestFileName = 'mf-manifest.json';\nconst StatsFileName = 'mf-stats.json';\nconst MFModuleType = {\n    NPM: 'npm',\n    APP: 'app'\n};\nconst MODULE_DEVTOOL_IDENTIFIER = '__MF_DEVTOOLS_MODULE_INFO__';\nconst ENCODE_NAME_PREFIX = 'ENCODE_NAME_PREFIX';\nconst TEMP_DIR = '.federation';\nconst MFPrefetchCommon = {\n    identifier: 'MFDataPrefetch',\n    globalKey: '__PREFETCH__',\n    library: 'mf-data-prefetch',\n    exportsKey: '__PREFETCH_EXPORTS__',\n    fileName: 'bootstrap.js'\n};\n\nvar ContainerPlugin = /*#__PURE__*/Object.freeze({\n  __proto__: null\n});\n\nvar ContainerReferencePlugin = /*#__PURE__*/Object.freeze({\n  __proto__: null\n});\n\nvar ModuleFederationPlugin = /*#__PURE__*/Object.freeze({\n  __proto__: null\n});\n\nvar SharePlugin = /*#__PURE__*/Object.freeze({\n  __proto__: null\n});\n\nfunction isBrowserEnv() {\n    return typeof window !== 'undefined' && typeof window.document !== 'undefined';\n}\nfunction isReactNativeEnv() {\n    var _navigator;\n    return typeof navigator !== 'undefined' && ((_navigator = navigator) == null ? void 0 : _navigator.product) === 'ReactNative';\n}\nfunction isBrowserDebug() {\n    try {\n        if (isBrowserEnv() && window.localStorage) {\n            return localStorage.getItem(BROWSER_LOG_KEY) === BROWSER_LOG_VALUE;\n        }\n    } catch (error) {\n        return false;\n    }\n    return false;\n}\nfunction isDebugMode() {\n    if (typeof process !== 'undefined' && process.env && process.env['FEDERATION_DEBUG']) {\n        return Boolean(process.env['FEDERATION_DEBUG']);\n    }\n    if (typeof FEDERATION_DEBUG !== 'undefined' && Boolean(FEDERATION_DEBUG)) {\n        return true;\n    }\n    return isBrowserDebug();\n}\nconst getProcessEnv = function() {\n    return typeof process !== 'undefined' && process.env ? process.env : {};\n};\n\nconst LOG_CATEGORY = '[ Federation Runtime ]';\n// entry: name:version   version : 1.0.0 | ^1.2.3\n// entry: name:entry  entry:  https://localhost:9000/federation-manifest.json\nconst parseEntry = (str, devVerOrUrl, separator = SEPARATOR)=>{\n    const strSplit = str.split(separator);\n    const devVersionOrUrl = getProcessEnv()['NODE_ENV'] === 'development' && devVerOrUrl;\n    const defaultVersion = '*';\n    const isEntry = (s)=>s.startsWith('http') || s.includes(MANIFEST_EXT);\n    // Check if the string starts with a type\n    if (strSplit.length >= 2) {\n        let [name, ...versionOrEntryArr] = strSplit;\n        // @name@manifest-url.json\n        if (str.startsWith(separator)) {\n            name = strSplit.slice(0, 2).join(separator);\n            versionOrEntryArr = [\n                devVersionOrUrl || strSplit.slice(2).join(separator)\n            ];\n        }\n        let versionOrEntry = devVersionOrUrl || versionOrEntryArr.join(separator);\n        if (isEntry(versionOrEntry)) {\n            return {\n                name,\n                entry: versionOrEntry\n            };\n        } else {\n            // Apply version rule\n            // devVersionOrUrl => inputVersion => defaultVersion\n            return {\n                name,\n                version: versionOrEntry || defaultVersion\n            };\n        }\n    } else if (strSplit.length === 1) {\n        const [name] = strSplit;\n        if (devVersionOrUrl && isEntry(devVersionOrUrl)) {\n            return {\n                name,\n                entry: devVersionOrUrl\n            };\n        }\n        return {\n            name,\n            version: devVersionOrUrl || defaultVersion\n        };\n    } else {\n        throw `Invalid entry value: ${str}`;\n    }\n};\nconst composeKeyWithSeparator = function(...args) {\n    if (!args.length) {\n        return '';\n    }\n    return args.reduce((sum, cur)=>{\n        if (!cur) {\n            return sum;\n        }\n        if (!sum) {\n            return cur;\n        }\n        return `${sum}${SEPARATOR}${cur}`;\n    }, '');\n};\nconst encodeName = function(name, prefix = '', withExt = false) {\n    try {\n        const ext = withExt ? '.js' : '';\n        return `${prefix}${name.replace(new RegExp(`${NameTransformSymbol.AT}`, 'g'), NameTransformMap[NameTransformSymbol.AT]).replace(new RegExp(`${NameTransformSymbol.HYPHEN}`, 'g'), NameTransformMap[NameTransformSymbol.HYPHEN]).replace(new RegExp(`${NameTransformSymbol.SLASH}`, 'g'), NameTransformMap[NameTransformSymbol.SLASH])}${ext}`;\n    } catch (err) {\n        throw err;\n    }\n};\nconst decodeName = function(name, prefix, withExt) {\n    try {\n        let decodedName = name;\n        if (prefix) {\n            if (!decodedName.startsWith(prefix)) {\n                return decodedName;\n            }\n            decodedName = decodedName.replace(new RegExp(prefix, 'g'), '');\n        }\n        decodedName = decodedName.replace(new RegExp(`${NameTransformMap[NameTransformSymbol.AT]}`, 'g'), EncodedNameTransformMap[NameTransformMap[NameTransformSymbol.AT]]).replace(new RegExp(`${NameTransformMap[NameTransformSymbol.SLASH]}`, 'g'), EncodedNameTransformMap[NameTransformMap[NameTransformSymbol.SLASH]]).replace(new RegExp(`${NameTransformMap[NameTransformSymbol.HYPHEN]}`, 'g'), EncodedNameTransformMap[NameTransformMap[NameTransformSymbol.HYPHEN]]);\n        if (withExt) {\n            decodedName = decodedName.replace('.js', '');\n        }\n        return decodedName;\n    } catch (err) {\n        throw err;\n    }\n};\nconst generateExposeFilename = (exposeName, withExt)=>{\n    if (!exposeName) {\n        return '';\n    }\n    let expose = exposeName;\n    if (expose === '.') {\n        expose = 'default_export';\n    }\n    if (expose.startsWith('./')) {\n        expose = expose.replace('./', '');\n    }\n    return encodeName(expose, '__federation_expose_', withExt);\n};\nconst generateShareFilename = (pkgName, withExt)=>{\n    if (!pkgName) {\n        return '';\n    }\n    return encodeName(pkgName, '__federation_shared_', withExt);\n};\nconst getResourceUrl = (module, sourceUrl)=>{\n    if ('getPublicPath' in module) {\n        let publicPath;\n        if (!module.getPublicPath.startsWith('function')) {\n            publicPath = new Function(module.getPublicPath)();\n        } else {\n            publicPath = new Function('return ' + module.getPublicPath)()();\n        }\n        return `${publicPath}${sourceUrl}`;\n    } else if ('publicPath' in module) {\n        if (!isBrowserEnv() && !isReactNativeEnv() && 'ssrPublicPath' in module) {\n            return `${module.ssrPublicPath}${sourceUrl}`;\n        }\n        return `${module.publicPath}${sourceUrl}`;\n    } else {\n        console.warn('Cannot get resource URL. If in debug mode, please ignore.', module, sourceUrl);\n        return '';\n    }\n};\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nconst assert = (condition, msg)=>{\n    if (!condition) {\n        error(msg);\n    }\n};\nconst error = (msg)=>{\n    throw new Error(`${LOG_CATEGORY}: ${msg}`);\n};\nconst warn = (msg)=>{\n    console.warn(`${LOG_CATEGORY}: ${msg}`);\n};\nfunction safeToString(info) {\n    try {\n        return JSON.stringify(info, null, 2);\n    } catch (e) {\n        return '';\n    }\n}\n// RegExp for version string\nconst VERSION_PATTERN_REGEXP = /^([\\d^=v<>~]|[*xX]$)/;\nfunction isRequiredVersion(str) {\n    return VERSION_PATTERN_REGEXP.test(str);\n}\n\nconst simpleJoinRemoteEntry = (rPath, rName)=>{\n    if (!rPath) {\n        return rName;\n    }\n    const transformPath = (str)=>{\n        if (str === '.') {\n            return '';\n        }\n        if (str.startsWith('./')) {\n            return str.replace('./', '');\n        }\n        if (str.startsWith('/')) {\n            const strWithoutSlash = str.slice(1);\n            if (strWithoutSlash.endsWith('/')) {\n                return strWithoutSlash.slice(0, -1);\n            }\n            return strWithoutSlash;\n        }\n        return str;\n    };\n    const transformedPath = transformPath(rPath);\n    if (!transformedPath) {\n        return rName;\n    }\n    if (transformedPath.endsWith('/')) {\n        return `${transformedPath}${rName}`;\n    }\n    return `${transformedPath}/${rName}`;\n};\nfunction inferAutoPublicPath(url) {\n    return url.replace(/#.*$/, '').replace(/\\?.*$/, '').replace(/\\/[^\\/]+$/, '/');\n}\n// Priority: overrides > remotes\n// eslint-disable-next-line max-lines-per-function\nfunction generateSnapshotFromManifest(manifest, options = {}) {\n    var _manifest_metaData, _manifest_metaData1;\n    const { remotes = {}, overrides = {}, version } = options;\n    let remoteSnapshot;\n    const getPublicPath = ()=>{\n        if ('publicPath' in manifest.metaData) {\n            if (manifest.metaData.publicPath === 'auto' && version) {\n                // use same implementation as publicPath auto runtime module implements\n                return inferAutoPublicPath(version);\n            }\n            return manifest.metaData.publicPath;\n        } else {\n            return manifest.metaData.getPublicPath;\n        }\n    };\n    const overridesKeys = Object.keys(overrides);\n    let remotesInfo = {};\n    // If remotes are not provided, only the remotes in the manifest will be read\n    if (!Object.keys(remotes).length) {\n        var _manifest_remotes;\n        remotesInfo = ((_manifest_remotes = manifest.remotes) == null ? void 0 : _manifest_remotes.reduce((res, next)=>{\n            let matchedVersion;\n            const name = next.federationContainerName;\n            // overrides have higher priority\n            if (overridesKeys.includes(name)) {\n                matchedVersion = overrides[name];\n            } else {\n                if ('version' in next) {\n                    matchedVersion = next.version;\n                } else {\n                    matchedVersion = next.entry;\n                }\n            }\n            res[name] = {\n                matchedVersion\n            };\n            return res;\n        }, {})) || {};\n    }\n    // If remotes (deploy scenario) are specified, they need to be traversed again\n    Object.keys(remotes).forEach((key)=>remotesInfo[key] = {\n            // overrides will override dependencies\n            matchedVersion: overridesKeys.includes(key) ? overrides[key] : remotes[key]\n        });\n    const { remoteEntry: { path: remoteEntryPath, name: remoteEntryName, type: remoteEntryType }, types: remoteTypes, buildInfo: { buildVersion }, globalName, ssrRemoteEntry } = manifest.metaData;\n    const { exposes } = manifest;\n    let basicRemoteSnapshot = {\n        version: version ? version : '',\n        buildVersion,\n        globalName,\n        remoteEntry: simpleJoinRemoteEntry(remoteEntryPath, remoteEntryName),\n        remoteEntryType,\n        remoteTypes: simpleJoinRemoteEntry(remoteTypes.path, remoteTypes.name),\n        remoteTypesZip: remoteTypes.zip || '',\n        remoteTypesAPI: remoteTypes.api || '',\n        remotesInfo,\n        shared: manifest == null ? void 0 : manifest.shared.map((item)=>({\n                assets: item.assets,\n                sharedName: item.name,\n                version: item.version\n            })),\n        modules: exposes == null ? void 0 : exposes.map((expose)=>({\n                moduleName: expose.name,\n                modulePath: expose.path,\n                assets: expose.assets\n            }))\n    };\n    if ((_manifest_metaData = manifest.metaData) == null ? void 0 : _manifest_metaData.prefetchInterface) {\n        const prefetchInterface = manifest.metaData.prefetchInterface;\n        basicRemoteSnapshot = polyfills._({}, basicRemoteSnapshot, {\n            prefetchInterface\n        });\n    }\n    if ((_manifest_metaData1 = manifest.metaData) == null ? void 0 : _manifest_metaData1.prefetchEntry) {\n        const { path, name, type } = manifest.metaData.prefetchEntry;\n        basicRemoteSnapshot = polyfills._({}, basicRemoteSnapshot, {\n            prefetchEntry: simpleJoinRemoteEntry(path, name),\n            prefetchEntryType: type\n        });\n    }\n    if ('publicPath' in manifest.metaData) {\n        remoteSnapshot = polyfills._({}, basicRemoteSnapshot, {\n            publicPath: getPublicPath(),\n            ssrPublicPath: manifest.metaData.ssrPublicPath\n        });\n    } else {\n        remoteSnapshot = polyfills._({}, basicRemoteSnapshot, {\n            getPublicPath: getPublicPath()\n        });\n    }\n    if (ssrRemoteEntry) {\n        const fullSSRRemoteEntry = simpleJoinRemoteEntry(ssrRemoteEntry.path, ssrRemoteEntry.name);\n        remoteSnapshot.ssrRemoteEntry = fullSSRRemoteEntry;\n        remoteSnapshot.ssrRemoteEntryType = ssrRemoteEntry.type || 'commonjs-module';\n    }\n    return remoteSnapshot;\n}\nfunction isManifestProvider(moduleInfo) {\n    if ('remoteEntry' in moduleInfo && moduleInfo.remoteEntry.includes(MANIFEST_EXT)) {\n        return true;\n    } else {\n        return false;\n    }\n}\n\nconst PREFIX = '[ Module Federation ]';\nlet Logger = class Logger {\n    setPrefix(prefix) {\n        this.prefix = prefix;\n    }\n    log(...args) {\n        console.log(this.prefix, ...args);\n    }\n    warn(...args) {\n        console.log(this.prefix, ...args);\n    }\n    error(...args) {\n        console.log(this.prefix, ...args);\n    }\n    success(...args) {\n        console.log(this.prefix, ...args);\n    }\n    info(...args) {\n        console.log(this.prefix, ...args);\n    }\n    ready(...args) {\n        console.log(this.prefix, ...args);\n    }\n    debug(...args) {\n        if (isDebugMode()) {\n            console.log(this.prefix, ...args);\n        }\n    }\n    constructor(prefix){\n        this.prefix = prefix;\n    }\n};\nfunction createLogger(prefix) {\n    return new Logger(prefix);\n}\nconst logger = createLogger(PREFIX);\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nasync function safeWrapper(callback, disableWarn) {\n    try {\n        const res = await callback();\n        return res;\n    } catch (e) {\n        !disableWarn && warn(e);\n        return;\n    }\n}\nfunction isStaticResourcesEqual(url1, url2) {\n    const REG_EXP = /^(https?:)?\\/\\//i;\n    // Transform url1 and url2 into relative paths\n    const relativeUrl1 = url1.replace(REG_EXP, '').replace(/\\/$/, '');\n    const relativeUrl2 = url2.replace(REG_EXP, '').replace(/\\/$/, '');\n    // Check if the relative paths are identical\n    return relativeUrl1 === relativeUrl2;\n}\nfunction createScript(info) {\n    // Retrieve the existing script element by its src attribute\n    let script = null;\n    let needAttach = true;\n    let timeout = 20000;\n    let timeoutId;\n    const scripts = document.getElementsByTagName('script');\n    for(let i = 0; i < scripts.length; i++){\n        const s = scripts[i];\n        const scriptSrc = s.getAttribute('src');\n        if (scriptSrc && isStaticResourcesEqual(scriptSrc, info.url)) {\n            script = s;\n            needAttach = false;\n            break;\n        }\n    }\n    if (!script) {\n        const attrs = info.attrs;\n        script = document.createElement('script');\n        script.type = (attrs == null ? void 0 : attrs['type']) === 'module' ? 'module' : 'text/javascript';\n        let createScriptRes = undefined;\n        if (info.createScriptHook) {\n            createScriptRes = info.createScriptHook(info.url, info.attrs);\n            if (createScriptRes instanceof HTMLScriptElement) {\n                script = createScriptRes;\n            } else if (typeof createScriptRes === 'object') {\n                if ('script' in createScriptRes && createScriptRes.script) {\n                    script = createScriptRes.script;\n                }\n                if ('timeout' in createScriptRes && createScriptRes.timeout) {\n                    timeout = createScriptRes.timeout;\n                }\n            }\n        }\n        if (!script.src) {\n            script.src = info.url;\n        }\n        if (attrs && !createScriptRes) {\n            Object.keys(attrs).forEach((name)=>{\n                if (script) {\n                    if (name === 'async' || name === 'defer') {\n                        script[name] = attrs[name];\n                    // Attributes that do not exist are considered overridden\n                    } else if (!script.getAttribute(name)) {\n                        script.setAttribute(name, attrs[name]);\n                    }\n                }\n            });\n        }\n    }\n    const onScriptComplete = async (prev, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    event)=>{\n        clearTimeout(timeoutId);\n        const onScriptCompleteCallback = ()=>{\n            if ((event == null ? void 0 : event.type) === 'error') {\n                (info == null ? void 0 : info.onErrorCallback) && (info == null ? void 0 : info.onErrorCallback(event));\n            } else {\n                (info == null ? void 0 : info.cb) && (info == null ? void 0 : info.cb());\n            }\n        };\n        // Prevent memory leaks in IE.\n        if (script) {\n            script.onerror = null;\n            script.onload = null;\n            safeWrapper(()=>{\n                const { needDeleteScript = true } = info;\n                if (needDeleteScript) {\n                    (script == null ? void 0 : script.parentNode) && script.parentNode.removeChild(script);\n                }\n            });\n            if (prev && typeof prev === 'function') {\n                const result = prev(event);\n                if (result instanceof Promise) {\n                    const res = await result;\n                    onScriptCompleteCallback();\n                    return res;\n                }\n                onScriptCompleteCallback();\n                return result;\n            }\n        }\n        onScriptCompleteCallback();\n    };\n    script.onerror = onScriptComplete.bind(null, script.onerror);\n    script.onload = onScriptComplete.bind(null, script.onload);\n    timeoutId = setTimeout(()=>{\n        onScriptComplete(null, new Error(`Remote script \"${info.url}\" time-outed.`));\n    }, timeout);\n    return {\n        script,\n        needAttach\n    };\n}\nfunction createLink(info) {\n    // <link rel=\"preload\" href=\"script.js\" as=\"script\">\n    // Retrieve the existing script element by its src attribute\n    let link = null;\n    let needAttach = true;\n    const links = document.getElementsByTagName('link');\n    for(let i = 0; i < links.length; i++){\n        const l = links[i];\n        const linkHref = l.getAttribute('href');\n        const linkRel = l.getAttribute('rel');\n        if (linkHref && isStaticResourcesEqual(linkHref, info.url) && linkRel === info.attrs['rel']) {\n            link = l;\n            needAttach = false;\n            break;\n        }\n    }\n    if (!link) {\n        link = document.createElement('link');\n        link.setAttribute('href', info.url);\n        let createLinkRes = undefined;\n        const attrs = info.attrs;\n        if (info.createLinkHook) {\n            createLinkRes = info.createLinkHook(info.url, attrs);\n            if (createLinkRes instanceof HTMLLinkElement) {\n                link = createLinkRes;\n            }\n        }\n        if (attrs && !createLinkRes) {\n            Object.keys(attrs).forEach((name)=>{\n                if (link && !link.getAttribute(name)) {\n                    link.setAttribute(name, attrs[name]);\n                }\n            });\n        }\n    }\n    const onLinkComplete = (prev, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    event)=>{\n        const onLinkCompleteCallback = ()=>{\n            if ((event == null ? void 0 : event.type) === 'error') {\n                (info == null ? void 0 : info.onErrorCallback) && (info == null ? void 0 : info.onErrorCallback(event));\n            } else {\n                (info == null ? void 0 : info.cb) && (info == null ? void 0 : info.cb());\n            }\n        };\n        // Prevent memory leaks in IE.\n        if (link) {\n            link.onerror = null;\n            link.onload = null;\n            safeWrapper(()=>{\n                const { needDeleteLink = true } = info;\n                if (needDeleteLink) {\n                    (link == null ? void 0 : link.parentNode) && link.parentNode.removeChild(link);\n                }\n            });\n            if (prev) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                const res = prev(event);\n                onLinkCompleteCallback();\n                return res;\n            }\n        }\n        onLinkCompleteCallback();\n    };\n    link.onerror = onLinkComplete.bind(null, link.onerror);\n    link.onload = onLinkComplete.bind(null, link.onload);\n    return {\n        link,\n        needAttach\n    };\n}\nfunction loadScript(url, info) {\n    const { attrs = {}, createScriptHook } = info;\n    return new Promise((resolve, reject)=>{\n        const { script, needAttach } = createScript({\n            url,\n            cb: resolve,\n            onErrorCallback: reject,\n            attrs: polyfills._({\n                fetchpriority: 'high'\n            }, attrs),\n            createScriptHook,\n            needDeleteScript: true\n        });\n        needAttach && document.head.appendChild(script);\n    });\n}\n\nfunction importNodeModule(name) {\n    if (!name) {\n        throw new Error('import specifier is required');\n    }\n    const importModule = new Function('name', `return import(name)`);\n    return importModule(name).then((res)=>res).catch((error)=>{\n        console.error(`Error importing module ${name}:`, error);\n        throw error;\n    });\n}\nconst loadNodeFetch = async ()=>{\n    const fetchModule = await importNodeModule('node-fetch');\n    return fetchModule.default || fetchModule;\n};\nconst lazyLoaderHookFetch = async (input, init, loaderHook)=>{\n    const hook = (url, init)=>{\n        return loaderHook.lifecycle.fetch.emit(url, init);\n    };\n    const res = await hook(input, init || {});\n    if (!res || !(res instanceof Response)) {\n        const fetchFunction = typeof fetch === 'undefined' ? await loadNodeFetch() : fetch;\n        return fetchFunction(input, init || {});\n    }\n    return res;\n};\nfunction createScriptNode(url, cb, attrs, loaderHook) {\n    if (loaderHook == null ? void 0 : loaderHook.createScriptHook) {\n        const hookResult = loaderHook.createScriptHook(url);\n        if (hookResult && typeof hookResult === 'object' && 'url' in hookResult) {\n            url = hookResult.url;\n        }\n    }\n    let urlObj;\n    try {\n        urlObj = new URL(url);\n    } catch (e) {\n        console.error('Error constructing URL:', e);\n        cb(new Error(`Invalid URL: ${e}`));\n        return;\n    }\n    const getFetch = async ()=>{\n        if (loaderHook == null ? void 0 : loaderHook.fetch) {\n            return (input, init)=>lazyLoaderHookFetch(input, init, loaderHook);\n        }\n        return typeof fetch === 'undefined' ? loadNodeFetch() : fetch;\n    };\n    const handleScriptFetch = async (f, urlObj)=>{\n        try {\n            var //@ts-ignore\n            _vm_constants;\n            const res = await f(urlObj.href);\n            const data = await res.text();\n            const [path, vm] = await Promise.all([\n                importNodeModule('path'),\n                importNodeModule('vm')\n            ]);\n            const scriptContext = {\n                exports: {},\n                module: {\n                    exports: {}\n                }\n            };\n            const urlDirname = urlObj.pathname.split('/').slice(0, -1).join('/');\n            const filename = path.basename(urlObj.pathname);\n            var _vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER;\n            const script = new vm.Script(`(function(exports, module, require, __dirname, __filename) {${data}\\n})`, {\n                filename,\n                importModuleDynamically: (_vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER = (_vm_constants = vm.constants) == null ? void 0 : _vm_constants.USE_MAIN_CONTEXT_DEFAULT_LOADER) != null ? _vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER : importNodeModule\n            });\n            script.runInThisContext()(scriptContext.exports, scriptContext.module, eval('require'), urlDirname, filename);\n            const exportedInterface = scriptContext.module.exports || scriptContext.exports;\n            if (attrs && exportedInterface && attrs['globalName']) {\n                const container = exportedInterface[attrs['globalName']] || exportedInterface;\n                cb(undefined, container);\n                return;\n            }\n            cb(undefined, exportedInterface);\n        } catch (e) {\n            cb(e instanceof Error ? e : new Error(`Script execution error: ${e}`));\n        }\n    };\n    getFetch().then(async (f)=>{\n        if ((attrs == null ? void 0 : attrs['type']) === 'esm' || (attrs == null ? void 0 : attrs['type']) === 'module') {\n            return loadModule(urlObj.href, {\n                fetch: f,\n                vm: await importNodeModule('vm')\n            }).then(async (module)=>{\n                await module.evaluate();\n                cb(undefined, module.namespace);\n            }).catch((e)=>{\n                cb(e instanceof Error ? e : new Error(`Script execution error: ${e}`));\n            });\n        }\n        handleScriptFetch(f, urlObj);\n    }).catch((err)=>{\n        cb(err);\n    });\n}\nfunction loadScriptNode(url, info) {\n    return new Promise((resolve, reject)=>{\n        createScriptNode(url, (error, scriptContext)=>{\n            if (error) {\n                reject(error);\n            } else {\n                var _info_attrs, _info_attrs1;\n                const remoteEntryKey = (info == null ? void 0 : (_info_attrs = info.attrs) == null ? void 0 : _info_attrs['globalName']) || `__FEDERATION_${info == null ? void 0 : (_info_attrs1 = info.attrs) == null ? void 0 : _info_attrs1['name']}:custom__`;\n                const entryExports = globalThis[remoteEntryKey] = scriptContext;\n                resolve(entryExports);\n            }\n        }, info.attrs, info.loaderHook);\n    });\n}\nasync function loadModule(url, options) {\n    const { fetch: fetch1, vm } = options;\n    const response = await fetch1(url);\n    const code = await response.text();\n    const module = new vm.SourceTextModule(code, {\n        // @ts-ignore\n        importModuleDynamically: async (specifier, script)=>{\n            const resolvedUrl = new URL(specifier, url).href;\n            return loadModule(resolvedUrl, options);\n        }\n    });\n    await module.link(async (specifier)=>{\n        const resolvedUrl = new URL(specifier, url).href;\n        const module = await loadModule(resolvedUrl, options);\n        return module;\n    });\n    return module;\n}\n\nfunction normalizeOptions(enableDefault, defaultOptions, key) {\n    return function(options) {\n        if (options === false) {\n            return false;\n        }\n        if (typeof options === 'undefined') {\n            if (enableDefault) {\n                return defaultOptions;\n            } else {\n                return false;\n            }\n        }\n        if (options === true) {\n            return defaultOptions;\n        }\n        if (options && typeof options === 'object') {\n            return polyfills._({}, defaultOptions, options);\n        }\n        throw new Error(`Unexpected type for \\`${key}\\`, expect boolean/undefined/object, got: ${typeof options}`);\n    };\n}\n\nexports.BROWSER_LOG_KEY = BROWSER_LOG_KEY;\nexports.BROWSER_LOG_VALUE = BROWSER_LOG_VALUE;\nexports.ENCODE_NAME_PREFIX = ENCODE_NAME_PREFIX;\nexports.EncodedNameTransformMap = EncodedNameTransformMap;\nexports.FederationModuleManifest = FederationModuleManifest;\nexports.MANIFEST_EXT = MANIFEST_EXT;\nexports.MFModuleType = MFModuleType;\nexports.MFPrefetchCommon = MFPrefetchCommon;\nexports.MODULE_DEVTOOL_IDENTIFIER = MODULE_DEVTOOL_IDENTIFIER;\nexports.ManifestFileName = ManifestFileName;\nexports.NameTransformMap = NameTransformMap;\nexports.NameTransformSymbol = NameTransformSymbol;\nexports.SEPARATOR = SEPARATOR;\nexports.StatsFileName = StatsFileName;\nexports.TEMP_DIR = TEMP_DIR;\nexports.assert = assert;\nexports.composeKeyWithSeparator = composeKeyWithSeparator;\nexports.containerPlugin = ContainerPlugin;\nexports.containerReferencePlugin = ContainerReferencePlugin;\nexports.createLink = createLink;\nexports.createLogger = createLogger;\nexports.createScript = createScript;\nexports.createScriptNode = createScriptNode;\nexports.decodeName = decodeName;\nexports.encodeName = encodeName;\nexports.error = error;\nexports.generateExposeFilename = generateExposeFilename;\nexports.generateShareFilename = generateShareFilename;\nexports.generateSnapshotFromManifest = generateSnapshotFromManifest;\nexports.getProcessEnv = getProcessEnv;\nexports.getResourceUrl = getResourceUrl;\nexports.inferAutoPublicPath = inferAutoPublicPath;\nexports.isBrowserEnv = isBrowserEnv;\nexports.isDebugMode = isDebugMode;\nexports.isManifestProvider = isManifestProvider;\nexports.isReactNativeEnv = isReactNativeEnv;\nexports.isRequiredVersion = isRequiredVersion;\nexports.isStaticResourcesEqual = isStaticResourcesEqual;\nexports.loadScript = loadScript;\nexports.loadScriptNode = loadScriptNode;\nexports.logger = logger;\nexports.moduleFederationPlugin = ModuleFederationPlugin;\nexports.normalizeOptions = normalizeOptions;\nexports.parseEntry = parseEntry;\nexports.safeToString = safeToString;\nexports.safeWrapper = safeWrapper;\nexports.sharePlugin = SharePlugin;\nexports.simpleJoinRemoteEntry = simpleJoinRemoteEntry;\nexports.warn = warn;\n","'use strict';\n\nfunction _extends() {\n    _extends = Object.assign || function assign(target) {\n        for(var i = 1; i < arguments.length; i++){\n            var source = arguments[i];\n            for(var key in source)if (Object.prototype.hasOwnProperty.call(source, key)) target[key] = source[key];\n        }\n        return target;\n    };\n    return _extends.apply(this, arguments);\n}\n\nexports._ = _extends;\n","'use strict';\n\nconst FEDERATION_SUPPORTED_TYPES = [\n    'script'\n];\n\nexports.FEDERATION_SUPPORTED_TYPES = FEDERATION_SUPPORTED_TYPES;\n","'use strict';\n\nvar runtime = require('@module-federation/runtime');\nvar constant = require('./constant.cjs.cjs');\nvar sdk = require('@module-federation/sdk');\n\nfunction _interopNamespaceDefault(e) {\n  var n = Object.create(null);\n  if (e) {\n    for (var k in e) {\n      n[k] = e[k];\n    }\n  }\n  n.default = e;\n  return Object.freeze(n);\n}\n\nvar runtime__namespace = /*#__PURE__*/_interopNamespaceDefault(runtime);\n\nfunction attachShareScopeMap(webpackRequire) {\n    if (!webpackRequire.S || webpackRequire.federation.hasAttachShareScopeMap || !webpackRequire.federation.instance || !webpackRequire.federation.instance.shareScopeMap) {\n        return;\n    }\n    webpackRequire.S = webpackRequire.federation.instance.shareScopeMap;\n    webpackRequire.federation.hasAttachShareScopeMap = true;\n}\n\nfunction remotes(options) {\n    const { chunkId, promises, chunkMapping, idToExternalAndNameMapping, webpackRequire, idToRemoteMap } = options;\n    attachShareScopeMap(webpackRequire);\n    if (webpackRequire.o(chunkMapping, chunkId)) {\n        chunkMapping[chunkId].forEach((id)=>{\n            let getScope = webpackRequire.R;\n            if (!getScope) {\n                getScope = [];\n            }\n            const data = idToExternalAndNameMapping[id];\n            const remoteInfos = idToRemoteMap[id];\n            // @ts-ignore seems not work\n            if (getScope.indexOf(data) >= 0) {\n                return;\n            }\n            // @ts-ignore seems not work\n            getScope.push(data);\n            if (data.p) {\n                return promises.push(data.p);\n            }\n            const onError = (error)=>{\n                if (!error) {\n                    error = new Error('Container missing');\n                }\n                if (typeof error.message === 'string') {\n                    error.message += `\\nwhile loading \"${data[1]}\" from ${data[2]}`;\n                }\n                webpackRequire.m[id] = ()=>{\n                    throw error;\n                };\n                data.p = 0;\n            };\n            const handleFunction = (fn, arg1, arg2, d, next, first)=>{\n                try {\n                    const promise = fn(arg1, arg2);\n                    if (promise && promise.then) {\n                        const p = promise.then((result)=>next(result, d), onError);\n                        if (first) {\n                            promises.push(data.p = p);\n                        } else {\n                            return p;\n                        }\n                    } else {\n                        return next(promise, d, first);\n                    }\n                } catch (error) {\n                    onError(error);\n                }\n            };\n            const onExternal = (external, _, first)=>external ? handleFunction(webpackRequire.I, data[0], 0, external, onInitialized, first) : onError();\n            // eslint-disable-next-line no-var\n            var onInitialized = (_, external, first)=>handleFunction(external.get, data[1], getScope, 0, onFactory, first);\n            // eslint-disable-next-line no-var\n            var onFactory = (factory)=>{\n                data.p = 1;\n                webpackRequire.m[id] = (module)=>{\n                    module.exports = factory();\n                };\n            };\n            const onRemoteLoaded = ()=>{\n                try {\n                    const remoteName = sdk.decodeName(remoteInfos[0].name, sdk.ENCODE_NAME_PREFIX);\n                    const remoteModuleName = remoteName + data[1].slice(1);\n                    const instance = webpackRequire.federation.instance;\n                    const loadRemote = ()=>webpackRequire.federation.instance.loadRemote(remoteModuleName, {\n                            loadFactory: false,\n                            from: 'build'\n                        });\n                    if (instance.options.shareStrategy === 'version-first') {\n                        return Promise.all(instance.sharedHandler.initializeSharing(data[0])).then(()=>{\n                            return loadRemote();\n                        });\n                    }\n                    return loadRemote();\n                } catch (error) {\n                    onError(error);\n                }\n            };\n            const useRuntimeLoad = remoteInfos.length === 1 && constant.FEDERATION_SUPPORTED_TYPES.includes(remoteInfos[0].externalType) && remoteInfos[0].name;\n            if (useRuntimeLoad) {\n                handleFunction(onRemoteLoaded, data[2], 0, 0, onFactory, 1);\n            } else {\n                handleFunction(webpackRequire, data[2], 0, 0, onExternal, 1);\n            }\n        });\n    }\n}\n\nfunction consumes(options) {\n    const { chunkId, promises, chunkMapping, installedModules, moduleToHandlerMapping, webpackRequire } = options;\n    attachShareScopeMap(webpackRequire);\n    if (webpackRequire.o(chunkMapping, chunkId)) {\n        chunkMapping[chunkId].forEach((id)=>{\n            if (webpackRequire.o(installedModules, id)) {\n                return promises.push(installedModules[id]);\n            }\n            const onFactory = (factory)=>{\n                installedModules[id] = 0;\n                webpackRequire.m[id] = (module)=>{\n                    delete webpackRequire.c[id];\n                    module.exports = factory();\n                };\n            };\n            const onError = (error)=>{\n                delete installedModules[id];\n                webpackRequire.m[id] = (module)=>{\n                    delete webpackRequire.c[id];\n                    throw error;\n                };\n            };\n            try {\n                const federationInstance = webpackRequire.federation.instance;\n                if (!federationInstance) {\n                    throw new Error('Federation instance not found!');\n                }\n                const { shareKey, getter, shareInfo } = moduleToHandlerMapping[id];\n                const promise = federationInstance.loadShare(shareKey, {\n                    customShareInfo: shareInfo\n                }).then((factory)=>{\n                    if (factory === false) {\n                        return getter();\n                    }\n                    return factory;\n                });\n                if (promise.then) {\n                    promises.push(installedModules[id] = promise.then(onFactory).catch(onError));\n                } else {\n                    // @ts-ignore maintain previous logic\n                    onFactory(promise);\n                }\n            } catch (e) {\n                onError(e);\n            }\n        });\n    }\n}\n\nfunction initializeSharing({ shareScopeName, webpackRequire, initPromises, initTokens, initScope }) {\n    const shareScopeKeys = Array.isArray(shareScopeName) ? shareScopeName : [\n        shareScopeName\n    ];\n    var initializeSharingPromises = [];\n    var _initializeSharing = function(shareScopeKey) {\n        if (!initScope) initScope = [];\n        const mfInstance = webpackRequire.federation.instance;\n        // handling circular init calls\n        var initToken = initTokens[shareScopeKey];\n        if (!initToken) initToken = initTokens[shareScopeKey] = {\n            from: mfInstance.name\n        };\n        if (initScope.indexOf(initToken) >= 0) return;\n        initScope.push(initToken);\n        const promise = initPromises[shareScopeKey];\n        if (promise) return promise;\n        var warn = (msg)=>typeof console !== 'undefined' && console.warn && console.warn(msg);\n        var initExternal = (id)=>{\n            var handleError = (err)=>warn('Initialization of sharing external failed: ' + err);\n            try {\n                var module = webpackRequire(id);\n                if (!module) return;\n                var initFn = (module)=>module && module.init && // @ts-ignore compat legacy mf shared behavior\n                    module.init(webpackRequire.S[shareScopeKey], initScope, {\n                        shareScopeMap: webpackRequire.S || {},\n                        shareScopeKeys: shareScopeName\n                    });\n                if (module.then) return promises.push(module.then(initFn, handleError));\n                var initResult = initFn(module);\n                // @ts-ignore\n                if (initResult && typeof initResult !== 'boolean' && initResult.then) // @ts-ignore\n                return promises.push(initResult['catch'](handleError));\n            } catch (err) {\n                handleError(err);\n            }\n        };\n        const promises = mfInstance.initializeSharing(shareScopeKey, {\n            strategy: mfInstance.options.shareStrategy,\n            initScope,\n            from: 'build'\n        });\n        attachShareScopeMap(webpackRequire);\n        const bundlerRuntimeRemotesOptions = webpackRequire.federation.bundlerRuntimeOptions.remotes;\n        if (bundlerRuntimeRemotesOptions) {\n            Object.keys(bundlerRuntimeRemotesOptions.idToRemoteMap).forEach((moduleId)=>{\n                const info = bundlerRuntimeRemotesOptions.idToRemoteMap[moduleId];\n                const externalModuleId = bundlerRuntimeRemotesOptions.idToExternalAndNameMapping[moduleId][2];\n                if (info.length > 1) {\n                    initExternal(externalModuleId);\n                } else if (info.length === 1) {\n                    const remoteInfo = info[0];\n                    if (!constant.FEDERATION_SUPPORTED_TYPES.includes(remoteInfo.externalType)) {\n                        initExternal(externalModuleId);\n                    }\n                }\n            });\n        }\n        if (!promises.length) {\n            return initPromises[shareScopeKey] = true;\n        }\n        return initPromises[shareScopeKey] = Promise.all(promises).then(()=>initPromises[shareScopeKey] = true);\n    };\n    shareScopeKeys.forEach((key)=>{\n        initializeSharingPromises.push(_initializeSharing(key));\n    });\n    return Promise.all(initializeSharingPromises).then(()=>true);\n}\n\nfunction handleInitialConsumes(options) {\n    const { moduleId, moduleToHandlerMapping, webpackRequire } = options;\n    const federationInstance = webpackRequire.federation.instance;\n    if (!federationInstance) {\n        throw new Error('Federation instance not found!');\n    }\n    const { shareKey, shareInfo } = moduleToHandlerMapping[moduleId];\n    try {\n        return federationInstance.loadShareSync(shareKey, {\n            customShareInfo: shareInfo\n        });\n    } catch (err) {\n        console.error('loadShareSync failed! The function should not be called unless you set \"eager:true\". If you do not set it, and encounter this issue, you can check whether an async boundary is implemented.');\n        console.error('The original error message is as follows: ');\n        throw err;\n    }\n}\nfunction installInitialConsumes(options) {\n    const { moduleToHandlerMapping, webpackRequire, installedModules, initialConsumes } = options;\n    initialConsumes.forEach((id)=>{\n        webpackRequire.m[id] = (module)=>{\n            // Handle scenario when module is used synchronously\n            installedModules[id] = 0;\n            delete webpackRequire.c[id];\n            const factory = handleInitialConsumes({\n                moduleId: id,\n                moduleToHandlerMapping,\n                webpackRequire\n            });\n            if (typeof factory !== 'function') {\n                throw new Error(`Shared module is not available for eager consumption: ${id}`);\n            }\n            module.exports = factory();\n        };\n    });\n}\n\nfunction _extends() {\n    _extends = Object.assign || function assign(target) {\n        for(var i = 1; i < arguments.length; i++){\n            var source = arguments[i];\n            for(var key in source)if (Object.prototype.hasOwnProperty.call(source, key)) target[key] = source[key];\n        }\n        return target;\n    };\n    return _extends.apply(this, arguments);\n}\n\nfunction initContainerEntry(options) {\n    const { webpackRequire, shareScope, initScope, shareScopeKey, remoteEntryInitOptions } = options;\n    if (!webpackRequire.S) return;\n    if (!webpackRequire.federation || !webpackRequire.federation.instance || !webpackRequire.federation.initOptions) return;\n    const federationInstance = webpackRequire.federation.instance;\n    federationInstance.initOptions(_extends({\n        name: webpackRequire.federation.initOptions.name,\n        remotes: []\n    }, remoteEntryInitOptions));\n    const hostShareScopeKeys = remoteEntryInitOptions == null ? void 0 : remoteEntryInitOptions.shareScopeKeys;\n    const hostShareScopeMap = remoteEntryInitOptions == null ? void 0 : remoteEntryInitOptions.shareScopeMap;\n    // host: 'default' remote: 'default'  remote['default'] = hostShareScopeMap['default']\n    // host: ['default', 'scope1'] remote: 'default'  remote['default'] = hostShareScopeMap['default']; remote['scope1'] = hostShareScopeMap['scop1']\n    // host: 'default' remote: ['default','scope1']  remote['default'] = hostShareScopeMap['default']; remote['scope1'] = hostShareScopeMap['scope1'] = {}\n    // host: ['scope1','default'] remote: ['scope1','scope2'] => remote['scope1'] = hostShareScopeMap['scope1']; remote['scope2'] = hostShareScopeMap['scope2'] = {};\n    if (!shareScopeKey || typeof shareScopeKey === 'string') {\n        const key = shareScopeKey || 'default';\n        if (Array.isArray(hostShareScopeKeys)) {\n            // const sc = hostShareScopeMap![key];\n            // if (!sc) {\n            //   throw new Error('shareScopeKey is not exist in hostShareScopeMap');\n            // }\n            // federationInstance.initShareScopeMap(key, sc, {\n            //   hostShareScopeMap: remoteEntryInitOptions?.shareScopeMap || {},\n            // });\n            hostShareScopeKeys.forEach((hostKey)=>{\n                if (!hostShareScopeMap[hostKey]) {\n                    hostShareScopeMap[hostKey] = {};\n                }\n                const sc = hostShareScopeMap[hostKey];\n                federationInstance.initShareScopeMap(hostKey, sc, {\n                    hostShareScopeMap: (remoteEntryInitOptions == null ? void 0 : remoteEntryInitOptions.shareScopeMap) || {}\n                });\n            });\n        } else {\n            federationInstance.initShareScopeMap(key, shareScope, {\n                hostShareScopeMap: (remoteEntryInitOptions == null ? void 0 : remoteEntryInitOptions.shareScopeMap) || {}\n            });\n        }\n    } else {\n        shareScopeKey.forEach((key)=>{\n            if (!hostShareScopeKeys || !hostShareScopeMap) {\n                federationInstance.initShareScopeMap(key, shareScope, {\n                    hostShareScopeMap: (remoteEntryInitOptions == null ? void 0 : remoteEntryInitOptions.shareScopeMap) || {}\n                });\n                return;\n            }\n            if (!hostShareScopeMap[key]) {\n                hostShareScopeMap[key] = {};\n            }\n            const sc = hostShareScopeMap[key];\n            federationInstance.initShareScopeMap(key, sc, {\n                hostShareScopeMap: (remoteEntryInitOptions == null ? void 0 : remoteEntryInitOptions.shareScopeMap) || {}\n            });\n        });\n    }\n    if (webpackRequire.federation.attachShareScopeMap) {\n        webpackRequire.federation.attachShareScopeMap(webpackRequire);\n    }\n    if (typeof webpackRequire.federation.prefetch === 'function') {\n        webpackRequire.federation.prefetch();\n    }\n    if (!Array.isArray(shareScopeKey)) {\n        // @ts-ignore\n        return webpackRequire.I(shareScopeKey || 'default', initScope);\n    }\n    var proxyInitializeSharing = Boolean(webpackRequire.federation.initOptions.shared);\n    if (proxyInitializeSharing) {\n        // @ts-ignore\n        return webpackRequire.I(shareScopeKey, initScope);\n    }\n    // @ts-ignore\n    return Promise.all(shareScopeKey.map((key)=>{\n        // @ts-ignore\n        return webpackRequire.I(key, initScope);\n    })).then(()=>true);\n}\n\nconst federation = {\n    runtime: runtime__namespace,\n    instance: undefined,\n    initOptions: undefined,\n    bundlerRuntime: {\n        remotes,\n        consumes,\n        I: initializeSharing,\n        S: {},\n        installInitialConsumes,\n        initContainerEntry\n    },\n    attachShareScopeMap,\n    bundlerRuntimeOptions: {}\n};\n\nmodule.exports = federation;\n","\"use strict\";\n\nfunction _array_like_to_array(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n    return arr2;\n}\nexports._ = _array_like_to_array;\n","\"use strict\";\n\nfunction _array_with_holes(arr) {\n    if (Array.isArray(arr)) return arr;\n}\nexports._ = _array_with_holes;\n","\"use strict\";\n\nvar _array_like_to_array = require(\"./_array_like_to_array.cjs\");\n\nfunction _array_without_holes(arr) {\n    if (Array.isArray(arr)) return _array_like_to_array._(arr);\n}\nexports._ = _array_without_holes;\n","\"use strict\";\n\nfunction _assert_this_initialized(self) {\n    if (self === void 0) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n\n    return self;\n}\nexports._ = _assert_this_initialized;\n","\"use strict\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n    try {\n        var info = gen[key](arg);\n        var value = info.value;\n    } catch (error) {\n        reject(error);\n        return;\n    }\n    if (info.done) resolve(value);\n    else Promise.resolve(value).then(_next, _throw);\n}\nfunction _async_to_generator(fn) {\n    return function() {\n        var self = this, args = arguments;\n\n        return new Promise(function(resolve, reject) {\n            var gen = fn.apply(self, args);\n\n            function _next(value) {\n                asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n            }\n\n            function _throw(err) {\n                asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n            }\n\n            _next(undefined);\n        });\n    };\n}\nexports._ = _async_to_generator;\n","\"use strict\";\n\nvar _get_prototype_of = require(\"./_get_prototype_of.cjs\");\nvar _is_native_reflect_construct = require(\"./_is_native_reflect_construct.cjs\");\nvar _possible_constructor_return = require(\"./_possible_constructor_return.cjs\");\n\nfunction _call_super(_this, derived, args) {\n    // Super\n    derived = _get_prototype_of._(derived);\n    return _possible_constructor_return._(\n        _this,\n        _is_native_reflect_construct._()\n            // NOTE: This doesn't work if this.__proto__.constructor has been modified.\n            ? Reflect.construct(derived, args || [], _get_prototype_of._(_this).constructor)\n            : derived.apply(_this, args)\n    );\n}\n\nexports._ = _call_super;\n","\"use strict\";\n\nfunction _class_call_check(instance, Constructor) {\n    if (!(instance instanceof Constructor)) throw new TypeError(\"Cannot call a class as a function\");\n}\nexports._ = _class_call_check;\n","\"use strict\";\n\nfunction _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n\n        if (\"value\" in descriptor) descriptor.writable = true;\n\n        Object.defineProperty(target, descriptor.key, descriptor);\n    }\n}\nfunction _create_class(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n\n    return Constructor;\n}\nexports._ = _create_class;\n","\"use strict\";\n\nfunction _define_property(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });\n    } else obj[key] = value;\n\n    return obj;\n}\nexports._ = _define_property;\n","\"use strict\";\n\nfunction _export_star(from, to) {\n    Object.keys(from).forEach(function(k) {\n        if (k !== \"default\" && !Object.prototype.hasOwnProperty.call(to, k)) {\n            Object.defineProperty(to, k, {\n                enumerable: true,\n                get: function() {\n                    return from[k];\n                }\n            });\n        }\n    });\n\n    return from;\n}\nexports._ = _export_star;\n","\"use strict\";\n\nfunction _get_prototype_of(o) {\n    exports._ = _get_prototype_of = Object.setPrototypeOf ? Object.getPrototypeOf : function getPrototypeOf(o) {\n        return o.__proto__ || Object.getPrototypeOf(o);\n    };\n\n    return _get_prototype_of(o);\n}\nexports._ = _get_prototype_of;\n","\"use strict\";\n\nvar _set_prototype_of = require(\"./_set_prototype_of.cjs\");\n\nfunction _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n        throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });\n\n    if (superClass) _set_prototype_of._(subClass, superClass);\n}\nexports._ = _inherits;\n","\"use strict\";\n\nfunction _interop_require_default(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\nexports._ = _interop_require_default;\n","\"use strict\";\n\nfunction _is_native_reflect_construct() {\n    // Since Reflect.construct can't be properly polyfilled, some\n    // implementations (e.g. core-js@2) don't set the correct internal slots.\n    // Those polyfills don't allow us to subclass built-ins, so we need to\n    // use our fallback implementation.\n    try {\n        // If the internal slots aren't set, this throws an error similar to\n        //   TypeError: this is not a Boolean object.\n        var result = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));\n    } catch (_) {}\n    return (exports._ = _is_native_reflect_construct = function() {\n        return !!result;\n    })();\n}\n\nexports._ = _is_native_reflect_construct;\n","\"use strict\";\n\nfunction _iterable_to_array(iter) {\n    if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) {\n        return Array.from(iter);\n    }\n}\nexports._ = _iterable_to_array;\n","\"use strict\";\n\nfunction _iterable_to_array_limit(arr, i) {\n    var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n    if (_i == null) return;\n\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _s, _e;\n\n    try {\n        for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n            _arr.push(_s.value);\n            if (i && _arr.length === i) break;\n        }\n    } catch (err) {\n        _d = true;\n        _e = err;\n    } finally {\n        try {\n            if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n        } finally {\n            if (_d) throw _e;\n        }\n    }\n\n    return _arr;\n}\nexports._ = _iterable_to_array_limit;\n","\"use strict\";\n\nfunction _non_iterable_rest() {\n    throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nexports._ = _non_iterable_rest;\n","\"use strict\";\n\nfunction _non_iterable_spread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nexports._ = _non_iterable_spread;\n","\"use strict\";\n\nvar _define_property = require(\"./_define_property.cjs\");\n\nfunction _object_spread(target) {\n    for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i] != null ? arguments[i] : {};\n        var ownKeys = Object.keys(source);\n\n        if (typeof Object.getOwnPropertySymbols === \"function\") {\n            ownKeys = ownKeys.concat(\n                Object.getOwnPropertySymbols(source).filter(function(sym) {\n                    return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n                })\n            );\n        }\n\n        ownKeys.forEach(function(key) {\n            _define_property._(target, key, source[key]);\n        });\n    }\n\n    return target;\n}\nexports._ = _object_spread;\n","\"use strict\";\n\nvar _assert_this_initialized = require(\"./_assert_this_initialized.cjs\");\nvar _type_of = require(\"./_type_of.cjs\");\n\nfunction _possible_constructor_return(self, call) {\n    if (call && (_type_of._(call) === \"object\" || typeof call === \"function\")) return call;\n\n    return _assert_this_initialized._(self);\n}\nexports._ = _possible_constructor_return;\n","\"use strict\";\n\nfunction _set_prototype_of(o, p) {\n    exports._ = _set_prototype_of = Object.setPrototypeOf || function setPrototypeOf(o, p) {\n        o.__proto__ = p;\n\n        return o;\n    };\n\n    return _set_prototype_of(o, p);\n}\nexports._ = _set_prototype_of;\n","\"use strict\";\n\nvar _array_with_holes = require(\"./_array_with_holes.cjs\");\nvar _iterable_to_array_limit = require(\"./_iterable_to_array_limit.cjs\");\nvar _non_iterable_rest = require(\"./_non_iterable_rest.cjs\");\nvar _unsupported_iterable_to_array = require(\"./_unsupported_iterable_to_array.cjs\");\n\nfunction _sliced_to_array(arr, i) {\n    return _array_with_holes._(arr) || _iterable_to_array_limit._(arr, i) || _unsupported_iterable_to_array._(arr, i) || _non_iterable_rest._();\n}\nexports._ = _sliced_to_array;\n","\"use strict\";\n\nvar _array_with_holes = require(\"./_array_with_holes.cjs\");\nvar _iterable_to_array = require(\"./_iterable_to_array.cjs\");\nvar _non_iterable_rest = require(\"./_non_iterable_rest.cjs\");\nvar _unsupported_iterable_to_array = require(\"./_unsupported_iterable_to_array.cjs\");\n\nfunction _to_array(arr) {\n    return _array_with_holes._(arr) || _iterable_to_array._(arr) || _unsupported_iterable_to_array._(arr) || _non_iterable_rest._();\n}\nexports._ = _to_array;\n","\"use strict\";\n\nvar _array_without_holes = require(\"./_array_without_holes.cjs\");\nvar _iterable_to_array = require(\"./_iterable_to_array.cjs\");\nvar _non_iterable_spread = require(\"./_non_iterable_spread.cjs\");\nvar _unsupported_iterable_to_array = require(\"./_unsupported_iterable_to_array.cjs\");\n\nfunction _to_consumable_array(arr) {\n    return _array_without_holes._(arr) || _iterable_to_array._(arr) || _unsupported_iterable_to_array._(arr) || _non_iterable_spread._();\n}\nexports._ = _to_consumable_array;\n","\"use strict\";\n\nfunction _type_of(obj) {\n    \"@swc/helpers - typeof\";\n\n    return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj;\n}\nexports._ = _type_of;\n","\"use strict\";\n\nvar _array_like_to_array = require(\"./_array_like_to_array.cjs\");\n\nfunction _unsupported_iterable_to_array(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _array_like_to_array._(o, minLen);\n\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(n);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _array_like_to_array._(o, minLen);\n}\nexports._ = _unsupported_iterable_to_array;\n","import { TurboModuleRegistry } from 'react-native';\nexport let NormalizedScriptLocatorHTTPMethod = /*#__PURE__*/function (NormalizedScriptLocatorHTTPMethod) {\n  NormalizedScriptLocatorHTTPMethod[\"GET\"] = \"GET\";\n  NormalizedScriptLocatorHTTPMethod[\"POST\"] = \"POST\";\n  return NormalizedScriptLocatorHTTPMethod;\n}({});\nexport let NormalizedScriptLocatorSignatureVerificationMode = /*#__PURE__*/function (NormalizedScriptLocatorSignatureVerificationMode) {\n  NormalizedScriptLocatorSignatureVerificationMode[\"STRICT\"] = \"strict\";\n  NormalizedScriptLocatorSignatureVerificationMode[\"LAX\"] = \"lax\";\n  NormalizedScriptLocatorSignatureVerificationMode[\"OFF\"] = \"off\";\n  return NormalizedScriptLocatorSignatureVerificationMode;\n}({});\nexport default TurboModuleRegistry.get('ScriptManager');\n//# sourceMappingURL=NativeScriptManager.js.map","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","//\n\nmodule.exports = function shallowEqual(objA, objB, compare, compareContext) {\n  var ret = compare ? compare.call(compareContext, objA, objB) : void 0;\n\n  if (ret !== void 0) {\n    return !!ret;\n  }\n\n  if (objA === objB) {\n    return true;\n  }\n\n  if (typeof objA !== \"object\" || !objA || typeof objB !== \"object\" || !objB) {\n    return false;\n  }\n\n  var keysA = Object.keys(objA);\n  var keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  var bHasOwnProperty = Object.prototype.hasOwnProperty.bind(objB);\n\n  // Test for A's keys different from B.\n  for (var idx = 0; idx < keysA.length; idx++) {\n    var key = keysA[idx];\n\n    if (!bHasOwnProperty(key)) {\n      return false;\n    }\n\n    var valueA = objA[key];\n    var valueB = objB[key];\n\n    ret = compare ? compare.call(compareContext, valueA, valueB, key) : void 0;\n\n    if (ret === false || (ret === void 0 && valueA !== valueB)) {\n      return false;\n    }\n  }\n\n  return true;\n};\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass AsyncParallelBailHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onResult, onDone }) {\n\t\tlet code = \"\";\n\t\tcode += `var _results = new Array(${this.options.taps.length});\\n`;\n\t\tcode += \"var _checkDone = function() {\\n\";\n\t\tcode += \"for(var i = 0; i < _results.length; i++) {\\n\";\n\t\tcode += \"var item = _results[i];\\n\";\n\t\tcode += \"if(item === undefined) return false;\\n\";\n\t\tcode += \"if(item.result !== undefined) {\\n\";\n\t\tcode += onResult(\"item.result\");\n\t\tcode += \"return true;\\n\";\n\t\tcode += \"}\\n\";\n\t\tcode += \"if(item.error) {\\n\";\n\t\tcode += onError(\"item.error\");\n\t\tcode += \"return true;\\n\";\n\t\tcode += \"}\\n\";\n\t\tcode += \"}\\n\";\n\t\tcode += \"return false;\\n\";\n\t\tcode += \"}\\n\";\n\t\tcode += this.callTapsParallel({\n\t\t\tonError: (i, err, done, doneBreak) => {\n\t\t\t\tlet code = \"\";\n\t\t\t\tcode += `if(${i} < _results.length && ((_results.length = ${i +\n\t\t\t\t\t1}), (_results[${i}] = { error: ${err} }), _checkDone())) {\\n`;\n\t\t\t\tcode += doneBreak(true);\n\t\t\t\tcode += \"} else {\\n\";\n\t\t\t\tcode += done();\n\t\t\t\tcode += \"}\\n\";\n\t\t\t\treturn code;\n\t\t\t},\n\t\t\tonResult: (i, result, done, doneBreak) => {\n\t\t\t\tlet code = \"\";\n\t\t\t\tcode += `if(${i} < _results.length && (${result} !== undefined && (_results.length = ${i +\n\t\t\t\t\t1}), (_results[${i}] = { result: ${result} }), _checkDone())) {\\n`;\n\t\t\t\tcode += doneBreak(true);\n\t\t\t\tcode += \"} else {\\n\";\n\t\t\t\tcode += done();\n\t\t\t\tcode += \"}\\n\";\n\t\t\t\treturn code;\n\t\t\t},\n\t\t\tonTap: (i, run, done, doneBreak) => {\n\t\t\t\tlet code = \"\";\n\t\t\t\tif (i > 0) {\n\t\t\t\t\tcode += `if(${i} >= _results.length) {\\n`;\n\t\t\t\t\tcode += done();\n\t\t\t\t\tcode += \"} else {\\n\";\n\t\t\t\t}\n\t\t\t\tcode += run();\n\t\t\t\tif (i > 0) code += \"}\\n\";\n\t\t\t\treturn code;\n\t\t\t},\n\t\t\tonDone\n\t\t});\n\t\treturn code;\n\t}\n}\n\nconst factory = new AsyncParallelBailHookCodeFactory();\n\nconst COMPILE = function(options) {\n\tfactory.setup(this, options);\n\treturn factory.create(options);\n};\n\nfunction AsyncParallelBailHook(args = [], name = undefined) {\n\tconst hook = new Hook(args, name);\n\thook.constructor = AsyncParallelBailHook;\n\thook.compile = COMPILE;\n\thook._call = undefined;\n\thook.call = undefined;\n\treturn hook;\n}\n\nAsyncParallelBailHook.prototype = null;\n\nmodule.exports = AsyncParallelBailHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass AsyncParallelHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onDone }) {\n\t\treturn this.callTapsParallel({\n\t\t\tonError: (i, err, done, doneBreak) => onError(err) + doneBreak(true),\n\t\t\tonDone\n\t\t});\n\t}\n}\n\nconst factory = new AsyncParallelHookCodeFactory();\n\nconst COMPILE = function(options) {\n\tfactory.setup(this, options);\n\treturn factory.create(options);\n};\n\nfunction AsyncParallelHook(args = [], name = undefined) {\n\tconst hook = new Hook(args, name);\n\thook.constructor = AsyncParallelHook;\n\thook.compile = COMPILE;\n\thook._call = undefined;\n\thook.call = undefined;\n\treturn hook;\n}\n\nAsyncParallelHook.prototype = null;\n\nmodule.exports = AsyncParallelHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass AsyncSeriesBailHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onResult, resultReturns, onDone }) {\n\t\treturn this.callTapsSeries({\n\t\t\tonError: (i, err, next, doneBreak) => onError(err) + doneBreak(true),\n\t\t\tonResult: (i, result, next) =>\n\t\t\t\t`if(${result} !== undefined) {\\n${onResult(\n\t\t\t\t\tresult\n\t\t\t\t)}\\n} else {\\n${next()}}\\n`,\n\t\t\tresultReturns,\n\t\t\tonDone\n\t\t});\n\t}\n}\n\nconst factory = new AsyncSeriesBailHookCodeFactory();\n\nconst COMPILE = function(options) {\n\tfactory.setup(this, options);\n\treturn factory.create(options);\n};\n\nfunction AsyncSeriesBailHook(args = [], name = undefined) {\n\tconst hook = new Hook(args, name);\n\thook.constructor = AsyncSeriesBailHook;\n\thook.compile = COMPILE;\n\thook._call = undefined;\n\thook.call = undefined;\n\treturn hook;\n}\n\nAsyncSeriesBailHook.prototype = null;\n\nmodule.exports = AsyncSeriesBailHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass AsyncSeriesHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onDone }) {\n\t\treturn this.callTapsSeries({\n\t\t\tonError: (i, err, next, doneBreak) => onError(err) + doneBreak(true),\n\t\t\tonDone\n\t\t});\n\t}\n}\n\nconst factory = new AsyncSeriesHookCodeFactory();\n\nconst COMPILE = function(options) {\n\tfactory.setup(this, options);\n\treturn factory.create(options);\n};\n\nfunction AsyncSeriesHook(args = [], name = undefined) {\n\tconst hook = new Hook(args, name);\n\thook.constructor = AsyncSeriesHook;\n\thook.compile = COMPILE;\n\thook._call = undefined;\n\thook.call = undefined;\n\treturn hook;\n}\n\nAsyncSeriesHook.prototype = null;\n\nmodule.exports = AsyncSeriesHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass AsyncSeriesLoopHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onDone }) {\n\t\treturn this.callTapsLooping({\n\t\t\tonError: (i, err, next, doneBreak) => onError(err) + doneBreak(true),\n\t\t\tonDone\n\t\t});\n\t}\n}\n\nconst factory = new AsyncSeriesLoopHookCodeFactory();\n\nconst COMPILE = function(options) {\n\tfactory.setup(this, options);\n\treturn factory.create(options);\n};\n\nfunction AsyncSeriesLoopHook(args = [], name = undefined) {\n\tconst hook = new Hook(args, name);\n\thook.constructor = AsyncSeriesLoopHook;\n\thook.compile = COMPILE;\n\thook._call = undefined;\n\thook.call = undefined;\n\treturn hook;\n}\n\nAsyncSeriesLoopHook.prototype = null;\n\nmodule.exports = AsyncSeriesLoopHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass AsyncSeriesWaterfallHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onResult, onDone }) {\n\t\treturn this.callTapsSeries({\n\t\t\tonError: (i, err, next, doneBreak) => onError(err) + doneBreak(true),\n\t\t\tonResult: (i, result, next) => {\n\t\t\t\tlet code = \"\";\n\t\t\t\tcode += `if(${result} !== undefined) {\\n`;\n\t\t\t\tcode += `${this._args[0]} = ${result};\\n`;\n\t\t\t\tcode += `}\\n`;\n\t\t\t\tcode += next();\n\t\t\t\treturn code;\n\t\t\t},\n\t\t\tonDone: () => onResult(this._args[0])\n\t\t});\n\t}\n}\n\nconst factory = new AsyncSeriesWaterfallHookCodeFactory();\n\nconst COMPILE = function(options) {\n\tfactory.setup(this, options);\n\treturn factory.create(options);\n};\n\nfunction AsyncSeriesWaterfallHook(args = [], name = undefined) {\n\tif (args.length < 1)\n\t\tthrow new Error(\"Waterfall hooks must have at least one argument\");\n\tconst hook = new Hook(args, name);\n\thook.constructor = AsyncSeriesWaterfallHook;\n\thook.compile = COMPILE;\n\thook._call = undefined;\n\thook.call = undefined;\n\treturn hook;\n}\n\nAsyncSeriesWaterfallHook.prototype = null;\n\nmodule.exports = AsyncSeriesWaterfallHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst util = require(\"util\");\n\nconst deprecateContext = util.deprecate(() => {},\n\"Hook.context is deprecated and will be removed\");\n\nconst CALL_DELEGATE = function(...args) {\n\tthis.call = this._createCall(\"sync\");\n\treturn this.call(...args);\n};\nconst CALL_ASYNC_DELEGATE = function(...args) {\n\tthis.callAsync = this._createCall(\"async\");\n\treturn this.callAsync(...args);\n};\nconst PROMISE_DELEGATE = function(...args) {\n\tthis.promise = this._createCall(\"promise\");\n\treturn this.promise(...args);\n};\n\nclass Hook {\n\tconstructor(args = [], name = undefined) {\n\t\tthis._args = args;\n\t\tthis.name = name;\n\t\tthis.taps = [];\n\t\tthis.interceptors = [];\n\t\tthis._call = CALL_DELEGATE;\n\t\tthis.call = CALL_DELEGATE;\n\t\tthis._callAsync = CALL_ASYNC_DELEGATE;\n\t\tthis.callAsync = CALL_ASYNC_DELEGATE;\n\t\tthis._promise = PROMISE_DELEGATE;\n\t\tthis.promise = PROMISE_DELEGATE;\n\t\tthis._x = undefined;\n\n\t\tthis.compile = this.compile;\n\t\tthis.tap = this.tap;\n\t\tthis.tapAsync = this.tapAsync;\n\t\tthis.tapPromise = this.tapPromise;\n\t}\n\n\tcompile(options) {\n\t\tthrow new Error(\"Abstract: should be overridden\");\n\t}\n\n\t_createCall(type) {\n\t\treturn this.compile({\n\t\t\ttaps: this.taps,\n\t\t\tinterceptors: this.interceptors,\n\t\t\targs: this._args,\n\t\t\ttype: type\n\t\t});\n\t}\n\n\t_tap(type, options, fn) {\n\t\tif (typeof options === \"string\") {\n\t\t\toptions = {\n\t\t\t\tname: options.trim()\n\t\t\t};\n\t\t} else if (typeof options !== \"object\" || options === null) {\n\t\t\tthrow new Error(\"Invalid tap options\");\n\t\t}\n\t\tif (typeof options.name !== \"string\" || options.name === \"\") {\n\t\t\tthrow new Error(\"Missing name for tap\");\n\t\t}\n\t\tif (typeof options.context !== \"undefined\") {\n\t\t\tdeprecateContext();\n\t\t}\n\t\toptions = Object.assign({ type, fn }, options);\n\t\toptions = this._runRegisterInterceptors(options);\n\t\tthis._insert(options);\n\t}\n\n\ttap(options, fn) {\n\t\tthis._tap(\"sync\", options, fn);\n\t}\n\n\ttapAsync(options, fn) {\n\t\tthis._tap(\"async\", options, fn);\n\t}\n\n\ttapPromise(options, fn) {\n\t\tthis._tap(\"promise\", options, fn);\n\t}\n\n\t_runRegisterInterceptors(options) {\n\t\tfor (const interceptor of this.interceptors) {\n\t\t\tif (interceptor.register) {\n\t\t\t\tconst newOptions = interceptor.register(options);\n\t\t\t\tif (newOptions !== undefined) {\n\t\t\t\t\toptions = newOptions;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn options;\n\t}\n\n\twithOptions(options) {\n\t\tconst mergeOptions = opt =>\n\t\t\tObject.assign({}, options, typeof opt === \"string\" ? { name: opt } : opt);\n\n\t\treturn {\n\t\t\tname: this.name,\n\t\t\ttap: (opt, fn) => this.tap(mergeOptions(opt), fn),\n\t\t\ttapAsync: (opt, fn) => this.tapAsync(mergeOptions(opt), fn),\n\t\t\ttapPromise: (opt, fn) => this.tapPromise(mergeOptions(opt), fn),\n\t\t\tintercept: interceptor => this.intercept(interceptor),\n\t\t\tisUsed: () => this.isUsed(),\n\t\t\twithOptions: opt => this.withOptions(mergeOptions(opt))\n\t\t};\n\t}\n\n\tisUsed() {\n\t\treturn this.taps.length > 0 || this.interceptors.length > 0;\n\t}\n\n\tintercept(interceptor) {\n\t\tthis._resetCompilation();\n\t\tthis.interceptors.push(Object.assign({}, interceptor));\n\t\tif (interceptor.register) {\n\t\t\tfor (let i = 0; i < this.taps.length; i++) {\n\t\t\t\tthis.taps[i] = interceptor.register(this.taps[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\t_resetCompilation() {\n\t\tthis.call = this._call;\n\t\tthis.callAsync = this._callAsync;\n\t\tthis.promise = this._promise;\n\t}\n\n\t_insert(item) {\n\t\tthis._resetCompilation();\n\t\tlet before;\n\t\tif (typeof item.before === \"string\") {\n\t\t\tbefore = new Set([item.before]);\n\t\t} else if (Array.isArray(item.before)) {\n\t\t\tbefore = new Set(item.before);\n\t\t}\n\t\tlet stage = 0;\n\t\tif (typeof item.stage === \"number\") {\n\t\t\tstage = item.stage;\n\t\t}\n\t\tlet i = this.taps.length;\n\t\twhile (i > 0) {\n\t\t\ti--;\n\t\t\tconst x = this.taps[i];\n\t\t\tthis.taps[i + 1] = x;\n\t\t\tconst xStage = x.stage || 0;\n\t\t\tif (before) {\n\t\t\t\tif (before.has(x.name)) {\n\t\t\t\t\tbefore.delete(x.name);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (before.size > 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (xStage > stage) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\ti++;\n\t\t\tbreak;\n\t\t}\n\t\tthis.taps[i] = item;\n\t}\n}\n\nObject.setPrototypeOf(Hook.prototype, null);\n\nmodule.exports = Hook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nclass HookCodeFactory {\n\tconstructor(config) {\n\t\tthis.config = config;\n\t\tthis.options = undefined;\n\t\tthis._args = undefined;\n\t}\n\n\tcreate(options) {\n\t\tthis.init(options);\n\t\tlet fn;\n\t\tswitch (this.options.type) {\n\t\t\tcase \"sync\":\n\t\t\t\tfn = new Function(\n\t\t\t\t\tthis.args(),\n\t\t\t\t\t'\"use strict\";\\n' +\n\t\t\t\t\t\tthis.header() +\n\t\t\t\t\t\tthis.contentWithInterceptors({\n\t\t\t\t\t\t\tonError: err => `throw ${err};\\n`,\n\t\t\t\t\t\t\tonResult: result => `return ${result};\\n`,\n\t\t\t\t\t\t\tresultReturns: true,\n\t\t\t\t\t\t\tonDone: () => \"\",\n\t\t\t\t\t\t\trethrowIfPossible: true\n\t\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase \"async\":\n\t\t\t\tfn = new Function(\n\t\t\t\t\tthis.args({\n\t\t\t\t\t\tafter: \"_callback\"\n\t\t\t\t\t}),\n\t\t\t\t\t'\"use strict\";\\n' +\n\t\t\t\t\t\tthis.header() +\n\t\t\t\t\t\tthis.contentWithInterceptors({\n\t\t\t\t\t\t\tonError: err => `_callback(${err});\\n`,\n\t\t\t\t\t\t\tonResult: result => `_callback(null, ${result});\\n`,\n\t\t\t\t\t\t\tonDone: () => \"_callback();\\n\"\n\t\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase \"promise\":\n\t\t\t\tlet errorHelperUsed = false;\n\t\t\t\tconst content = this.contentWithInterceptors({\n\t\t\t\t\tonError: err => {\n\t\t\t\t\t\terrorHelperUsed = true;\n\t\t\t\t\t\treturn `_error(${err});\\n`;\n\t\t\t\t\t},\n\t\t\t\t\tonResult: result => `_resolve(${result});\\n`,\n\t\t\t\t\tonDone: () => \"_resolve();\\n\"\n\t\t\t\t});\n\t\t\t\tlet code = \"\";\n\t\t\t\tcode += '\"use strict\";\\n';\n\t\t\t\tcode += this.header();\n\t\t\t\tcode += \"return new Promise((function(_resolve, _reject) {\\n\";\n\t\t\t\tif (errorHelperUsed) {\n\t\t\t\t\tcode += \"var _sync = true;\\n\";\n\t\t\t\t\tcode += \"function _error(_err) {\\n\";\n\t\t\t\t\tcode += \"if(_sync)\\n\";\n\t\t\t\t\tcode +=\n\t\t\t\t\t\t\"_resolve(Promise.resolve().then((function() { throw _err; })));\\n\";\n\t\t\t\t\tcode += \"else\\n\";\n\t\t\t\t\tcode += \"_reject(_err);\\n\";\n\t\t\t\t\tcode += \"};\\n\";\n\t\t\t\t}\n\t\t\t\tcode += content;\n\t\t\t\tif (errorHelperUsed) {\n\t\t\t\t\tcode += \"_sync = false;\\n\";\n\t\t\t\t}\n\t\t\t\tcode += \"}));\\n\";\n\t\t\t\tfn = new Function(this.args(), code);\n\t\t\t\tbreak;\n\t\t}\n\t\tthis.deinit();\n\t\treturn fn;\n\t}\n\n\tsetup(instance, options) {\n\t\tinstance._x = options.taps.map(t => t.fn);\n\t}\n\n\t/**\n\t * @param {{ type: \"sync\" | \"promise\" | \"async\", taps: Array<Tap>, interceptors: Array<Interceptor> }} options\n\t */\n\tinit(options) {\n\t\tthis.options = options;\n\t\tthis._args = options.args.slice();\n\t}\n\n\tdeinit() {\n\t\tthis.options = undefined;\n\t\tthis._args = undefined;\n\t}\n\n\tcontentWithInterceptors(options) {\n\t\tif (this.options.interceptors.length > 0) {\n\t\t\tconst onError = options.onError;\n\t\t\tconst onResult = options.onResult;\n\t\t\tconst onDone = options.onDone;\n\t\t\tlet code = \"\";\n\t\t\tfor (let i = 0; i < this.options.interceptors.length; i++) {\n\t\t\t\tconst interceptor = this.options.interceptors[i];\n\t\t\t\tif (interceptor.call) {\n\t\t\t\t\tcode += `${this.getInterceptor(i)}.call(${this.args({\n\t\t\t\t\t\tbefore: interceptor.context ? \"_context\" : undefined\n\t\t\t\t\t})});\\n`;\n\t\t\t\t}\n\t\t\t}\n\t\t\tcode += this.content(\n\t\t\t\tObject.assign(options, {\n\t\t\t\t\tonError:\n\t\t\t\t\t\tonError &&\n\t\t\t\t\t\t(err => {\n\t\t\t\t\t\t\tlet code = \"\";\n\t\t\t\t\t\t\tfor (let i = 0; i < this.options.interceptors.length; i++) {\n\t\t\t\t\t\t\t\tconst interceptor = this.options.interceptors[i];\n\t\t\t\t\t\t\t\tif (interceptor.error) {\n\t\t\t\t\t\t\t\t\tcode += `${this.getInterceptor(i)}.error(${err});\\n`;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcode += onError(err);\n\t\t\t\t\t\t\treturn code;\n\t\t\t\t\t\t}),\n\t\t\t\t\tonResult:\n\t\t\t\t\t\tonResult &&\n\t\t\t\t\t\t(result => {\n\t\t\t\t\t\t\tlet code = \"\";\n\t\t\t\t\t\t\tfor (let i = 0; i < this.options.interceptors.length; i++) {\n\t\t\t\t\t\t\t\tconst interceptor = this.options.interceptors[i];\n\t\t\t\t\t\t\t\tif (interceptor.result) {\n\t\t\t\t\t\t\t\t\tcode += `${this.getInterceptor(i)}.result(${result});\\n`;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcode += onResult(result);\n\t\t\t\t\t\t\treturn code;\n\t\t\t\t\t\t}),\n\t\t\t\t\tonDone:\n\t\t\t\t\t\tonDone &&\n\t\t\t\t\t\t(() => {\n\t\t\t\t\t\t\tlet code = \"\";\n\t\t\t\t\t\t\tfor (let i = 0; i < this.options.interceptors.length; i++) {\n\t\t\t\t\t\t\t\tconst interceptor = this.options.interceptors[i];\n\t\t\t\t\t\t\t\tif (interceptor.done) {\n\t\t\t\t\t\t\t\t\tcode += `${this.getInterceptor(i)}.done();\\n`;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcode += onDone();\n\t\t\t\t\t\t\treturn code;\n\t\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t);\n\t\t\treturn code;\n\t\t} else {\n\t\t\treturn this.content(options);\n\t\t}\n\t}\n\n\theader() {\n\t\tlet code = \"\";\n\t\tif (this.needContext()) {\n\t\t\tcode += \"var _context = {};\\n\";\n\t\t} else {\n\t\t\tcode += \"var _context;\\n\";\n\t\t}\n\t\tcode += \"var _x = this._x;\\n\";\n\t\tif (this.options.interceptors.length > 0) {\n\t\t\tcode += \"var _taps = this.taps;\\n\";\n\t\t\tcode += \"var _interceptors = this.interceptors;\\n\";\n\t\t}\n\t\treturn code;\n\t}\n\n\tneedContext() {\n\t\tfor (const tap of this.options.taps) if (tap.context) return true;\n\t\treturn false;\n\t}\n\n\tcallTap(tapIndex, { onError, onResult, onDone, rethrowIfPossible }) {\n\t\tlet code = \"\";\n\t\tlet hasTapCached = false;\n\t\tfor (let i = 0; i < this.options.interceptors.length; i++) {\n\t\t\tconst interceptor = this.options.interceptors[i];\n\t\t\tif (interceptor.tap) {\n\t\t\t\tif (!hasTapCached) {\n\t\t\t\t\tcode += `var _tap${tapIndex} = ${this.getTap(tapIndex)};\\n`;\n\t\t\t\t\thasTapCached = true;\n\t\t\t\t}\n\t\t\t\tcode += `${this.getInterceptor(i)}.tap(${\n\t\t\t\t\tinterceptor.context ? \"_context, \" : \"\"\n\t\t\t\t}_tap${tapIndex});\\n`;\n\t\t\t}\n\t\t}\n\t\tcode += `var _fn${tapIndex} = ${this.getTapFn(tapIndex)};\\n`;\n\t\tconst tap = this.options.taps[tapIndex];\n\t\tswitch (tap.type) {\n\t\t\tcase \"sync\":\n\t\t\t\tif (!rethrowIfPossible) {\n\t\t\t\t\tcode += `var _hasError${tapIndex} = false;\\n`;\n\t\t\t\t\tcode += \"try {\\n\";\n\t\t\t\t}\n\t\t\t\tif (onResult) {\n\t\t\t\t\tcode += `var _result${tapIndex} = _fn${tapIndex}(${this.args({\n\t\t\t\t\t\tbefore: tap.context ? \"_context\" : undefined\n\t\t\t\t\t})});\\n`;\n\t\t\t\t} else {\n\t\t\t\t\tcode += `_fn${tapIndex}(${this.args({\n\t\t\t\t\t\tbefore: tap.context ? \"_context\" : undefined\n\t\t\t\t\t})});\\n`;\n\t\t\t\t}\n\t\t\t\tif (!rethrowIfPossible) {\n\t\t\t\t\tcode += \"} catch(_err) {\\n\";\n\t\t\t\t\tcode += `_hasError${tapIndex} = true;\\n`;\n\t\t\t\t\tcode += onError(\"_err\");\n\t\t\t\t\tcode += \"}\\n\";\n\t\t\t\t\tcode += `if(!_hasError${tapIndex}) {\\n`;\n\t\t\t\t}\n\t\t\t\tif (onResult) {\n\t\t\t\t\tcode += onResult(`_result${tapIndex}`);\n\t\t\t\t}\n\t\t\t\tif (onDone) {\n\t\t\t\t\tcode += onDone();\n\t\t\t\t}\n\t\t\t\tif (!rethrowIfPossible) {\n\t\t\t\t\tcode += \"}\\n\";\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"async\":\n\t\t\t\tlet cbCode = \"\";\n\t\t\t\tif (onResult)\n\t\t\t\t\tcbCode += `(function(_err${tapIndex}, _result${tapIndex}) {\\n`;\n\t\t\t\telse cbCode += `(function(_err${tapIndex}) {\\n`;\n\t\t\t\tcbCode += `if(_err${tapIndex}) {\\n`;\n\t\t\t\tcbCode += onError(`_err${tapIndex}`);\n\t\t\t\tcbCode += \"} else {\\n\";\n\t\t\t\tif (onResult) {\n\t\t\t\t\tcbCode += onResult(`_result${tapIndex}`);\n\t\t\t\t}\n\t\t\t\tif (onDone) {\n\t\t\t\t\tcbCode += onDone();\n\t\t\t\t}\n\t\t\t\tcbCode += \"}\\n\";\n\t\t\t\tcbCode += \"})\";\n\t\t\t\tcode += `_fn${tapIndex}(${this.args({\n\t\t\t\t\tbefore: tap.context ? \"_context\" : undefined,\n\t\t\t\t\tafter: cbCode\n\t\t\t\t})});\\n`;\n\t\t\t\tbreak;\n\t\t\tcase \"promise\":\n\t\t\t\tcode += `var _hasResult${tapIndex} = false;\\n`;\n\t\t\t\tcode += `var _promise${tapIndex} = _fn${tapIndex}(${this.args({\n\t\t\t\t\tbefore: tap.context ? \"_context\" : undefined\n\t\t\t\t})});\\n`;\n\t\t\t\tcode += `if (!_promise${tapIndex} || !_promise${tapIndex}.then)\\n`;\n\t\t\t\tcode += `  throw new Error('Tap function (tapPromise) did not return promise (returned ' + _promise${tapIndex} + ')');\\n`;\n\t\t\t\tcode += `_promise${tapIndex}.then((function(_result${tapIndex}) {\\n`;\n\t\t\t\tcode += `_hasResult${tapIndex} = true;\\n`;\n\t\t\t\tif (onResult) {\n\t\t\t\t\tcode += onResult(`_result${tapIndex}`);\n\t\t\t\t}\n\t\t\t\tif (onDone) {\n\t\t\t\t\tcode += onDone();\n\t\t\t\t}\n\t\t\t\tcode += `}), function(_err${tapIndex}) {\\n`;\n\t\t\t\tcode += `if(_hasResult${tapIndex}) throw _err${tapIndex};\\n`;\n\t\t\t\tcode += onError(`_err${tapIndex}`);\n\t\t\t\tcode += \"});\\n\";\n\t\t\t\tbreak;\n\t\t}\n\t\treturn code;\n\t}\n\n\tcallTapsSeries({\n\t\tonError,\n\t\tonResult,\n\t\tresultReturns,\n\t\tonDone,\n\t\tdoneReturns,\n\t\trethrowIfPossible\n\t}) {\n\t\tif (this.options.taps.length === 0) return onDone();\n\t\tconst firstAsync = this.options.taps.findIndex(t => t.type !== \"sync\");\n\t\tconst somethingReturns = resultReturns || doneReturns;\n\t\tlet code = \"\";\n\t\tlet current = onDone;\n\t\tlet unrollCounter = 0;\n\t\tfor (let j = this.options.taps.length - 1; j >= 0; j--) {\n\t\t\tconst i = j;\n\t\t\tconst unroll =\n\t\t\t\tcurrent !== onDone &&\n\t\t\t\t(this.options.taps[i].type !== \"sync\" || unrollCounter++ > 20);\n\t\t\tif (unroll) {\n\t\t\t\tunrollCounter = 0;\n\t\t\t\tcode += `function _next${i}() {\\n`;\n\t\t\t\tcode += current();\n\t\t\t\tcode += `}\\n`;\n\t\t\t\tcurrent = () => `${somethingReturns ? \"return \" : \"\"}_next${i}();\\n`;\n\t\t\t}\n\t\t\tconst done = current;\n\t\t\tconst doneBreak = skipDone => {\n\t\t\t\tif (skipDone) return \"\";\n\t\t\t\treturn onDone();\n\t\t\t};\n\t\t\tconst content = this.callTap(i, {\n\t\t\t\tonError: error => onError(i, error, done, doneBreak),\n\t\t\t\tonResult:\n\t\t\t\t\tonResult &&\n\t\t\t\t\t(result => {\n\t\t\t\t\t\treturn onResult(i, result, done, doneBreak);\n\t\t\t\t\t}),\n\t\t\t\tonDone: !onResult && done,\n\t\t\t\trethrowIfPossible:\n\t\t\t\t\trethrowIfPossible && (firstAsync < 0 || i < firstAsync)\n\t\t\t});\n\t\t\tcurrent = () => content;\n\t\t}\n\t\tcode += current();\n\t\treturn code;\n\t}\n\n\tcallTapsLooping({ onError, onDone, rethrowIfPossible }) {\n\t\tif (this.options.taps.length === 0) return onDone();\n\t\tconst syncOnly = this.options.taps.every(t => t.type === \"sync\");\n\t\tlet code = \"\";\n\t\tif (!syncOnly) {\n\t\t\tcode += \"var _looper = (function() {\\n\";\n\t\t\tcode += \"var _loopAsync = false;\\n\";\n\t\t}\n\t\tcode += \"var _loop;\\n\";\n\t\tcode += \"do {\\n\";\n\t\tcode += \"_loop = false;\\n\";\n\t\tfor (let i = 0; i < this.options.interceptors.length; i++) {\n\t\t\tconst interceptor = this.options.interceptors[i];\n\t\t\tif (interceptor.loop) {\n\t\t\t\tcode += `${this.getInterceptor(i)}.loop(${this.args({\n\t\t\t\t\tbefore: interceptor.context ? \"_context\" : undefined\n\t\t\t\t})});\\n`;\n\t\t\t}\n\t\t}\n\t\tcode += this.callTapsSeries({\n\t\t\tonError,\n\t\t\tonResult: (i, result, next, doneBreak) => {\n\t\t\t\tlet code = \"\";\n\t\t\t\tcode += `if(${result} !== undefined) {\\n`;\n\t\t\t\tcode += \"_loop = true;\\n\";\n\t\t\t\tif (!syncOnly) code += \"if(_loopAsync) _looper();\\n\";\n\t\t\t\tcode += doneBreak(true);\n\t\t\t\tcode += `} else {\\n`;\n\t\t\t\tcode += next();\n\t\t\t\tcode += `}\\n`;\n\t\t\t\treturn code;\n\t\t\t},\n\t\t\tonDone:\n\t\t\t\tonDone &&\n\t\t\t\t(() => {\n\t\t\t\t\tlet code = \"\";\n\t\t\t\t\tcode += \"if(!_loop) {\\n\";\n\t\t\t\t\tcode += onDone();\n\t\t\t\t\tcode += \"}\\n\";\n\t\t\t\t\treturn code;\n\t\t\t\t}),\n\t\t\trethrowIfPossible: rethrowIfPossible && syncOnly\n\t\t});\n\t\tcode += \"} while(_loop);\\n\";\n\t\tif (!syncOnly) {\n\t\t\tcode += \"_loopAsync = true;\\n\";\n\t\t\tcode += \"});\\n\";\n\t\t\tcode += \"_looper();\\n\";\n\t\t}\n\t\treturn code;\n\t}\n\n\tcallTapsParallel({\n\t\tonError,\n\t\tonResult,\n\t\tonDone,\n\t\trethrowIfPossible,\n\t\tonTap = (i, run) => run()\n\t}) {\n\t\tif (this.options.taps.length <= 1) {\n\t\t\treturn this.callTapsSeries({\n\t\t\t\tonError,\n\t\t\t\tonResult,\n\t\t\t\tonDone,\n\t\t\t\trethrowIfPossible\n\t\t\t});\n\t\t}\n\t\tlet code = \"\";\n\t\tcode += \"do {\\n\";\n\t\tcode += `var _counter = ${this.options.taps.length};\\n`;\n\t\tif (onDone) {\n\t\t\tcode += \"var _done = (function() {\\n\";\n\t\t\tcode += onDone();\n\t\t\tcode += \"});\\n\";\n\t\t}\n\t\tfor (let i = 0; i < this.options.taps.length; i++) {\n\t\t\tconst done = () => {\n\t\t\t\tif (onDone) return \"if(--_counter === 0) _done();\\n\";\n\t\t\t\telse return \"--_counter;\";\n\t\t\t};\n\t\t\tconst doneBreak = skipDone => {\n\t\t\t\tif (skipDone || !onDone) return \"_counter = 0;\\n\";\n\t\t\t\telse return \"_counter = 0;\\n_done();\\n\";\n\t\t\t};\n\t\t\tcode += \"if(_counter <= 0) break;\\n\";\n\t\t\tcode += onTap(\n\t\t\t\ti,\n\t\t\t\t() =>\n\t\t\t\t\tthis.callTap(i, {\n\t\t\t\t\t\tonError: error => {\n\t\t\t\t\t\t\tlet code = \"\";\n\t\t\t\t\t\t\tcode += \"if(_counter > 0) {\\n\";\n\t\t\t\t\t\t\tcode += onError(i, error, done, doneBreak);\n\t\t\t\t\t\t\tcode += \"}\\n\";\n\t\t\t\t\t\t\treturn code;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonResult:\n\t\t\t\t\t\t\tonResult &&\n\t\t\t\t\t\t\t(result => {\n\t\t\t\t\t\t\t\tlet code = \"\";\n\t\t\t\t\t\t\t\tcode += \"if(_counter > 0) {\\n\";\n\t\t\t\t\t\t\t\tcode += onResult(i, result, done, doneBreak);\n\t\t\t\t\t\t\t\tcode += \"}\\n\";\n\t\t\t\t\t\t\t\treturn code;\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\tonDone:\n\t\t\t\t\t\t\t!onResult &&\n\t\t\t\t\t\t\t(() => {\n\t\t\t\t\t\t\t\treturn done();\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\trethrowIfPossible\n\t\t\t\t\t}),\n\t\t\t\tdone,\n\t\t\t\tdoneBreak\n\t\t\t);\n\t\t}\n\t\tcode += \"} while(false);\\n\";\n\t\treturn code;\n\t}\n\n\targs({ before, after } = {}) {\n\t\tlet allArgs = this._args;\n\t\tif (before) allArgs = [before].concat(allArgs);\n\t\tif (after) allArgs = allArgs.concat(after);\n\t\tif (allArgs.length === 0) {\n\t\t\treturn \"\";\n\t\t} else {\n\t\t\treturn allArgs.join(\", \");\n\t\t}\n\t}\n\n\tgetTapFn(idx) {\n\t\treturn `_x[${idx}]`;\n\t}\n\n\tgetTap(idx) {\n\t\treturn `_taps[${idx}]`;\n\t}\n\n\tgetInterceptor(idx) {\n\t\treturn `_interceptors[${idx}]`;\n\t}\n}\n\nmodule.exports = HookCodeFactory;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst util = require(\"util\");\n\nconst defaultFactory = (key, hook) => hook;\n\nclass HookMap {\n\tconstructor(factory, name = undefined) {\n\t\tthis._map = new Map();\n\t\tthis.name = name;\n\t\tthis._factory = factory;\n\t\tthis._interceptors = [];\n\t}\n\n\tget(key) {\n\t\treturn this._map.get(key);\n\t}\n\n\tfor(key) {\n\t\tconst hook = this.get(key);\n\t\tif (hook !== undefined) {\n\t\t\treturn hook;\n\t\t}\n\t\tlet newHook = this._factory(key);\n\t\tconst interceptors = this._interceptors;\n\t\tfor (let i = 0; i < interceptors.length; i++) {\n\t\t\tnewHook = interceptors[i].factory(key, newHook);\n\t\t}\n\t\tthis._map.set(key, newHook);\n\t\treturn newHook;\n\t}\n\n\tintercept(interceptor) {\n\t\tthis._interceptors.push(\n\t\t\tObject.assign(\n\t\t\t\t{\n\t\t\t\t\tfactory: defaultFactory\n\t\t\t\t},\n\t\t\t\tinterceptor\n\t\t\t)\n\t\t);\n\t}\n}\n\nHookMap.prototype.tap = util.deprecate(function(key, options, fn) {\n\treturn this.for(key).tap(options, fn);\n}, \"HookMap#tap(key,) is deprecated. Use HookMap#for(key).tap() instead.\");\n\nHookMap.prototype.tapAsync = util.deprecate(function(key, options, fn) {\n\treturn this.for(key).tapAsync(options, fn);\n}, \"HookMap#tapAsync(key,) is deprecated. Use HookMap#for(key).tapAsync() instead.\");\n\nHookMap.prototype.tapPromise = util.deprecate(function(key, options, fn) {\n\treturn this.for(key).tapPromise(options, fn);\n}, \"HookMap#tapPromise(key,) is deprecated. Use HookMap#for(key).tapPromise() instead.\");\n\nmodule.exports = HookMap;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\n\nclass MultiHook {\n\tconstructor(hooks, name = undefined) {\n\t\tthis.hooks = hooks;\n\t\tthis.name = name;\n\t}\n\n\ttap(options, fn) {\n\t\tfor (const hook of this.hooks) {\n\t\t\thook.tap(options, fn);\n\t\t}\n\t}\n\n\ttapAsync(options, fn) {\n\t\tfor (const hook of this.hooks) {\n\t\t\thook.tapAsync(options, fn);\n\t\t}\n\t}\n\n\ttapPromise(options, fn) {\n\t\tfor (const hook of this.hooks) {\n\t\t\thook.tapPromise(options, fn);\n\t\t}\n\t}\n\n\tisUsed() {\n\t\tfor (const hook of this.hooks) {\n\t\t\tif (hook.isUsed()) return true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tintercept(interceptor) {\n\t\tfor (const hook of this.hooks) {\n\t\t\thook.intercept(interceptor);\n\t\t}\n\t}\n\n\twithOptions(options) {\n\t\treturn new MultiHook(\n\t\t\tthis.hooks.map(h => h.withOptions(options)),\n\t\t\tthis.name\n\t\t);\n\t}\n}\n\nmodule.exports = MultiHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass SyncBailHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onResult, resultReturns, onDone, rethrowIfPossible }) {\n\t\treturn this.callTapsSeries({\n\t\t\tonError: (i, err) => onError(err),\n\t\t\tonResult: (i, result, next) =>\n\t\t\t\t`if(${result} !== undefined) {\\n${onResult(\n\t\t\t\t\tresult\n\t\t\t\t)};\\n} else {\\n${next()}}\\n`,\n\t\t\tresultReturns,\n\t\t\tonDone,\n\t\t\trethrowIfPossible\n\t\t});\n\t}\n}\n\nconst factory = new SyncBailHookCodeFactory();\n\nconst TAP_ASYNC = () => {\n\tthrow new Error(\"tapAsync is not supported on a SyncBailHook\");\n};\n\nconst TAP_PROMISE = () => {\n\tthrow new Error(\"tapPromise is not supported on a SyncBailHook\");\n};\n\nconst COMPILE = function(options) {\n\tfactory.setup(this, options);\n\treturn factory.create(options);\n};\n\nfunction SyncBailHook(args = [], name = undefined) {\n\tconst hook = new Hook(args, name);\n\thook.constructor = SyncBailHook;\n\thook.tapAsync = TAP_ASYNC;\n\thook.tapPromise = TAP_PROMISE;\n\thook.compile = COMPILE;\n\treturn hook;\n}\n\nSyncBailHook.prototype = null;\n\nmodule.exports = SyncBailHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass SyncHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onDone, rethrowIfPossible }) {\n\t\treturn this.callTapsSeries({\n\t\t\tonError: (i, err) => onError(err),\n\t\t\tonDone,\n\t\t\trethrowIfPossible\n\t\t});\n\t}\n}\n\nconst factory = new SyncHookCodeFactory();\n\nconst TAP_ASYNC = () => {\n\tthrow new Error(\"tapAsync is not supported on a SyncHook\");\n};\n\nconst TAP_PROMISE = () => {\n\tthrow new Error(\"tapPromise is not supported on a SyncHook\");\n};\n\nconst COMPILE = function(options) {\n\tfactory.setup(this, options);\n\treturn factory.create(options);\n};\n\nfunction SyncHook(args = [], name = undefined) {\n\tconst hook = new Hook(args, name);\n\thook.constructor = SyncHook;\n\thook.tapAsync = TAP_ASYNC;\n\thook.tapPromise = TAP_PROMISE;\n\thook.compile = COMPILE;\n\treturn hook;\n}\n\nSyncHook.prototype = null;\n\nmodule.exports = SyncHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass SyncLoopHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onDone, rethrowIfPossible }) {\n\t\treturn this.callTapsLooping({\n\t\t\tonError: (i, err) => onError(err),\n\t\t\tonDone,\n\t\t\trethrowIfPossible\n\t\t});\n\t}\n}\n\nconst factory = new SyncLoopHookCodeFactory();\n\nconst TAP_ASYNC = () => {\n\tthrow new Error(\"tapAsync is not supported on a SyncLoopHook\");\n};\n\nconst TAP_PROMISE = () => {\n\tthrow new Error(\"tapPromise is not supported on a SyncLoopHook\");\n};\n\nconst COMPILE = function(options) {\n\tfactory.setup(this, options);\n\treturn factory.create(options);\n};\n\nfunction SyncLoopHook(args = [], name = undefined) {\n\tconst hook = new Hook(args, name);\n\thook.constructor = SyncLoopHook;\n\thook.tapAsync = TAP_ASYNC;\n\thook.tapPromise = TAP_PROMISE;\n\thook.compile = COMPILE;\n\treturn hook;\n}\n\nSyncLoopHook.prototype = null;\n\nmodule.exports = SyncLoopHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Hook = require(\"./Hook\");\nconst HookCodeFactory = require(\"./HookCodeFactory\");\n\nclass SyncWaterfallHookCodeFactory extends HookCodeFactory {\n\tcontent({ onError, onResult, resultReturns, rethrowIfPossible }) {\n\t\treturn this.callTapsSeries({\n\t\t\tonError: (i, err) => onError(err),\n\t\t\tonResult: (i, result, next) => {\n\t\t\t\tlet code = \"\";\n\t\t\t\tcode += `if(${result} !== undefined) {\\n`;\n\t\t\t\tcode += `${this._args[0]} = ${result};\\n`;\n\t\t\t\tcode += `}\\n`;\n\t\t\t\tcode += next();\n\t\t\t\treturn code;\n\t\t\t},\n\t\t\tonDone: () => onResult(this._args[0]),\n\t\t\tdoneReturns: resultReturns,\n\t\t\trethrowIfPossible\n\t\t});\n\t}\n}\n\nconst factory = new SyncWaterfallHookCodeFactory();\n\nconst TAP_ASYNC = () => {\n\tthrow new Error(\"tapAsync is not supported on a SyncWaterfallHook\");\n};\n\nconst TAP_PROMISE = () => {\n\tthrow new Error(\"tapPromise is not supported on a SyncWaterfallHook\");\n};\n\nconst COMPILE = function(options) {\n\tfactory.setup(this, options);\n\treturn factory.create(options);\n};\n\nfunction SyncWaterfallHook(args = [], name = undefined) {\n\tif (args.length < 1)\n\t\tthrow new Error(\"Waterfall hooks must have at least one argument\");\n\tconst hook = new Hook(args, name);\n\thook.constructor = SyncWaterfallHook;\n\thook.tapAsync = TAP_ASYNC;\n\thook.tapPromise = TAP_PROMISE;\n\thook.compile = COMPILE;\n\treturn hook;\n}\n\nSyncWaterfallHook.prototype = null;\n\nmodule.exports = SyncWaterfallHook;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nexports.__esModule = true;\nexports.SyncHook = require(\"./SyncHook\");\nexports.SyncBailHook = require(\"./SyncBailHook\");\nexports.SyncWaterfallHook = require(\"./SyncWaterfallHook\");\nexports.SyncLoopHook = require(\"./SyncLoopHook\");\nexports.AsyncParallelHook = require(\"./AsyncParallelHook\");\nexports.AsyncParallelBailHook = require(\"./AsyncParallelBailHook\");\nexports.AsyncSeriesHook = require(\"./AsyncSeriesHook\");\nexports.AsyncSeriesBailHook = require(\"./AsyncSeriesBailHook\");\nexports.AsyncSeriesLoopHook = require(\"./AsyncSeriesLoopHook\");\nexports.AsyncSeriesWaterfallHook = require(\"./AsyncSeriesWaterfallHook\");\nexports.HookMap = require(\"./HookMap\");\nexports.MultiHook = require(\"./MultiHook\");\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nexports.deprecate = (fn, msg) => {\n\tlet once = true;\n\treturn function() {\n\t\tif (once) {\n\t\t\tconsole.warn(\"DeprecationWarning: \" + msg);\n\t\t\tonce = false;\n\t\t}\n\t\treturn fn.apply(this, arguments);\n\t};\n};\n","import __module_federation_bundler_runtime__ from \"/Users/apple/Documents/Developer/repack/claim/node_modules/@module-federation/webpack-bundler-runtime/dist/index.cjs.cjs\";import __module_federation_runtime_plugin_0__ from \"/Users/apple/Documents/Developer/repack/claim/node_modules/@callstack/repack/mf/prefetch-plugin.js\";import __module_federation_runtime_plugin_1__ from \"/Users/apple/Documents/Developer/repack/claim/node_modules/@callstack/repack/mf/resolver-plugin.js\";import __module_federation_runtime_plugin_2__ from \"/Users/apple/Documents/Developer/repack/claim/node_modules/@callstack/repack/mf/core-plugin.js\";const __module_federation_runtime_plugins__ = [__module_federation_runtime_plugin_0__(), __module_federation_runtime_plugin_1__(), __module_federation_runtime_plugin_2__()];const __module_federation_remote_infos__ = {};const __module_federation_container_name__ = \"pos\";const __module_federation_share_strategy__ = \"loaded-first\";if((__webpack_require__.initializeSharingData||__webpack_require__.initializeExposesData)&&__webpack_require__.federation){var __webpack_require___remotesLoadingData,__webpack_require___remotesLoadingData1,__webpack_require___initializeSharingData,__webpack_require___consumesLoadingData,__webpack_require___consumesLoadingData1,__webpack_require___initializeExposesData,__webpack_require___consumesLoadingData2;const override=(obj,key,value)=>{if(!obj)return;if(obj[key])obj[key]=value};const merge=(obj,key,fn)=>{const value=fn();if(Array.isArray(value)){var _obj,_key;var _;(_=(_obj=obj)[_key=key])!==null&&_!==void 0?_:_obj[_key]=[];obj[key].push(...value)}else if(typeof value===\"object\"&&value!==null){var _obj1,_key1;var _1;(_1=(_obj1=obj)[_key1=key])!==null&&_1!==void 0?_1:_obj1[_key1]={};Object.assign(obj[key],value)}};const early=(obj,key,initial)=>{var _obj,_key;var _;(_=(_obj=obj)[_key=key])!==null&&_!==void 0?_:_obj[_key]=initial()};var __webpack_require___remotesLoadingData_chunkMapping;const remotesLoadingChunkMapping=(__webpack_require___remotesLoadingData_chunkMapping=(__webpack_require___remotesLoadingData=__webpack_require__.remotesLoadingData)===null||__webpack_require___remotesLoadingData===void 0?void 0:__webpack_require___remotesLoadingData.chunkMapping)!==null&&__webpack_require___remotesLoadingData_chunkMapping!==void 0?__webpack_require___remotesLoadingData_chunkMapping:{};var __webpack_require___remotesLoadingData_moduleIdToRemoteDataMapping;const remotesLoadingModuleIdToRemoteDataMapping=(__webpack_require___remotesLoadingData_moduleIdToRemoteDataMapping=(__webpack_require___remotesLoadingData1=__webpack_require__.remotesLoadingData)===null||__webpack_require___remotesLoadingData1===void 0?void 0:__webpack_require___remotesLoadingData1.moduleIdToRemoteDataMapping)!==null&&__webpack_require___remotesLoadingData_moduleIdToRemoteDataMapping!==void 0?__webpack_require___remotesLoadingData_moduleIdToRemoteDataMapping:{};var __webpack_require___initializeSharingData_scopeToSharingDataMapping;const initializeSharingScopeToInitDataMapping=(__webpack_require___initializeSharingData_scopeToSharingDataMapping=(__webpack_require___initializeSharingData=__webpack_require__.initializeSharingData)===null||__webpack_require___initializeSharingData===void 0?void 0:__webpack_require___initializeSharingData.scopeToSharingDataMapping)!==null&&__webpack_require___initializeSharingData_scopeToSharingDataMapping!==void 0?__webpack_require___initializeSharingData_scopeToSharingDataMapping:{};var __webpack_require___consumesLoadingData_chunkMapping;const consumesLoadingChunkMapping=(__webpack_require___consumesLoadingData_chunkMapping=(__webpack_require___consumesLoadingData=__webpack_require__.consumesLoadingData)===null||__webpack_require___consumesLoadingData===void 0?void 0:__webpack_require___consumesLoadingData.chunkMapping)!==null&&__webpack_require___consumesLoadingData_chunkMapping!==void 0?__webpack_require___consumesLoadingData_chunkMapping:{};var __webpack_require___consumesLoadingData_moduleIdToConsumeDataMapping;const consumesLoadingModuleToConsumeDataMapping=(__webpack_require___consumesLoadingData_moduleIdToConsumeDataMapping=(__webpack_require___consumesLoadingData1=__webpack_require__.consumesLoadingData)===null||__webpack_require___consumesLoadingData1===void 0?void 0:__webpack_require___consumesLoadingData1.moduleIdToConsumeDataMapping)!==null&&__webpack_require___consumesLoadingData_moduleIdToConsumeDataMapping!==void 0?__webpack_require___consumesLoadingData_moduleIdToConsumeDataMapping:{};const consumesLoadinginstalledModules={};const initializeSharingInitPromises=[];const initializeSharingInitTokens={};const containerShareScope=(__webpack_require___initializeExposesData=__webpack_require__.initializeExposesData)===null||__webpack_require___initializeExposesData===void 0?void 0:__webpack_require___initializeExposesData.shareScope;for(const key in __module_federation_bundler_runtime__){__webpack_require__.federation[key]=__module_federation_bundler_runtime__[key]}early(__webpack_require__.federation,\"consumesLoadingModuleToHandlerMapping\",()=>{const consumesLoadingModuleToHandlerMapping={};for(let[moduleId,data]of Object.entries(consumesLoadingModuleToConsumeDataMapping)){consumesLoadingModuleToHandlerMapping[moduleId]={getter:data.fallback,shareInfo:{shareConfig:{fixedDependencies:false,requiredVersion:data.requiredVersion,strictVersion:data.strictVersion,singleton:data.singleton,eager:data.eager},scope:[data.shareScope]},shareKey:data.shareKey}}return consumesLoadingModuleToHandlerMapping});early(__webpack_require__.federation,\"initOptions\",()=>({}));early(__webpack_require__.federation.initOptions,\"name\",()=>__module_federation_container_name__);early(__webpack_require__.federation.initOptions,\"shareStrategy\",()=>__module_federation_share_strategy__);early(__webpack_require__.federation.initOptions,\"shared\",()=>{const shared={};for(let[scope,stages]of Object.entries(initializeSharingScopeToInitDataMapping)){for(let stage of stages){if(typeof stage===\"object\"&&stage!==null){const{name,version,factory,eager,singleton,requiredVersion,strictVersion}=stage;const shareConfig={};const isValidValue=function(val){return typeof val!==\"undefined\"};if(isValidValue(singleton)){shareConfig.singleton=singleton}if(isValidValue(requiredVersion)){shareConfig.requiredVersion=requiredVersion}if(isValidValue(eager)){shareConfig.eager=eager}if(isValidValue(strictVersion)){shareConfig.strictVersion=strictVersion}const options={version,scope:[scope],shareConfig,get:factory};if(shared[name]){shared[name].push(options)}else{shared[name]=[options]}}}}return shared});merge(__webpack_require__.federation.initOptions,\"remotes\",()=>Object.values(__module_federation_remote_infos__).flat().filter(remote=>remote.externalType===\"script\"));merge(__webpack_require__.federation.initOptions,\"plugins\",()=>__module_federation_runtime_plugins__);early(__webpack_require__.federation,\"bundlerRuntimeOptions\",()=>({}));early(__webpack_require__.federation.bundlerRuntimeOptions,\"remotes\",()=>({}));early(__webpack_require__.federation.bundlerRuntimeOptions.remotes,\"chunkMapping\",()=>remotesLoadingChunkMapping);early(__webpack_require__.federation.bundlerRuntimeOptions.remotes,\"idToExternalAndNameMapping\",()=>{const remotesLoadingIdToExternalAndNameMappingMapping={};for(let[moduleId,data]of Object.entries(remotesLoadingModuleIdToRemoteDataMapping)){remotesLoadingIdToExternalAndNameMappingMapping[moduleId]=[data.shareScope,data.name,data.externalModuleId,data.remoteName]}return remotesLoadingIdToExternalAndNameMappingMapping});early(__webpack_require__.federation.bundlerRuntimeOptions.remotes,\"webpackRequire\",()=>__webpack_require__);merge(__webpack_require__.federation.bundlerRuntimeOptions.remotes,\"idToRemoteMap\",()=>{const idToRemoteMap={};for(let[id,remoteData]of Object.entries(remotesLoadingModuleIdToRemoteDataMapping)){const info=__module_federation_remote_infos__[remoteData.remoteName];if(info)idToRemoteMap[id]=info}return idToRemoteMap});override(__webpack_require__,\"S\",__webpack_require__.federation.bundlerRuntime.S);if(__webpack_require__.federation.attachShareScopeMap){__webpack_require__.federation.attachShareScopeMap(__webpack_require__)}override(__webpack_require__.f,\"remotes\",(chunkId,promises)=>__webpack_require__.federation.bundlerRuntime.remotes({chunkId,promises,chunkMapping:remotesLoadingChunkMapping,idToExternalAndNameMapping:__webpack_require__.federation.bundlerRuntimeOptions.remotes.idToExternalAndNameMapping,idToRemoteMap:__webpack_require__.federation.bundlerRuntimeOptions.remotes.idToRemoteMap,webpackRequire:__webpack_require__}));override(__webpack_require__.f,\"consumes\",(chunkId,promises)=>__webpack_require__.federation.bundlerRuntime.consumes({chunkId,promises,chunkMapping:consumesLoadingChunkMapping,moduleToHandlerMapping:__webpack_require__.federation.consumesLoadingModuleToHandlerMapping,installedModules:consumesLoadinginstalledModules,webpackRequire:__webpack_require__}));override(__webpack_require__,\"I\",(name,initScope)=>__webpack_require__.federation.bundlerRuntime.I({shareScopeName:name,initScope,initPromises:initializeSharingInitPromises,initTokens:initializeSharingInitTokens,webpackRequire:__webpack_require__}));override(__webpack_require__,\"initContainer\",(shareScope,initScope,remoteEntryInitOptions)=>__webpack_require__.federation.bundlerRuntime.initContainerEntry({shareScope,initScope,remoteEntryInitOptions,shareScopeKey:containerShareScope,webpackRequire:__webpack_require__}));override(__webpack_require__,\"getContainer\",(module1,getScope)=>{var moduleMap=__webpack_require__.initializeExposesData.moduleMap;__webpack_require__.R=getScope;getScope=Object.prototype.hasOwnProperty.call(moduleMap,module1)?moduleMap[module1]():Promise.resolve().then(()=>{throw new Error('Module \"'+module1+'\" does not exist in container.')});__webpack_require__.R=undefined;return getScope});__webpack_require__.federation.instance=__webpack_require__.federation.runtime.init(__webpack_require__.federation.initOptions);if((__webpack_require___consumesLoadingData2=__webpack_require__.consumesLoadingData)===null||__webpack_require___consumesLoadingData2===void 0?void 0:__webpack_require___consumesLoadingData2.initialConsumes){__webpack_require__.federation.bundlerRuntime.installInitialConsumes({webpackRequire:__webpack_require__,installedModules:consumesLoadinginstalledModules,initialConsumes:__webpack_require__.consumesLoadingData.initialConsumes,moduleToHandlerMapping:__webpack_require__.federation.consumesLoadingModuleToHandlerMapping})}}"],"names":["RepackCorePlugin","name","loadEntry","remoteInfo","client","require","ScriptManager","getWebpackContext","entry","entryGlobalName","shared","loadScript","undefined","globalThis","Error","console","error","generatePreloadAssets","Promise","resolve","cssAssets","jsAssetsWithoutEntry","entryAssets","getAssetName","asset","split","getAssetUrl","prefetchAsset","caller","remoteName","prefetchScript","url","RepackPrefetchPlugin","args","preloadConfig","preloadOptions","nameOrAlias","remoteSnapshot","depsRemote","warn","handleAssets","assets","map","exposedModule","modules","exposes","includes","moduleName","resourceCategory","push","js","async","sync","filter","unshift","globalName","remoteEntry","all","createScriptLocator","entryUrl","config","locator","getPublicPath","slice","join","getAssetPath","assetPath","startsWith","rebaseRemoteUrl","from","to","publicPath","registerResolver","version","addResolver","scriptId","referenceUrl","key","RepackResolverPlugin","registerRemote","remote","shallowEqual","NormalizedScriptLocatorHTTPMethod","NormalizedScriptLocatorSignatureVerificationMode","Script","DEFAULT_TIMEOUT","getDevServerURL","webpackContext","p","u","getFileSystemURL","getRemoteURL","options","excludeExtension","getScriptUniqueId","prefix","fetch","headers","Headers","forEach","value","toLowerCase","uniqueId","body","FormData","bodyObject","JSON","stringify","URLSearchParams","method","GET","absolute","timeout","retry","retryDelay","query","toString","Object","keys","length","cache","verifyScriptSignature","OFF","constructor","shouldUpdateCache","cachedData","checkIfCacheDataOutdated","shouldRefetch","getCacheData","toObject","EventEmitter","AsyncSeriesBailHook","AsyncSeriesWaterfallHook","NativeScriptManager","DEFAULT_RESOLVER_PRIORITY","DEFAULT_RESOLVER_KEY","CACHE_NAME","CACHE_VERSION","CACHE_ENV","__DEV__","CACHE_KEY","LOADING_ERROR_CODES","promisify","fn","init","__webpack_require__","repack","scriptManager","scriptsPromises","cacheInitialized","resolvers","nativeScriptManager","hookMap","beforeResolve","afterResolve","errorResolve","beforeLoad","load","afterLoad","errorLoad","hooks","tapPromise","setStorage","storage","resolver","priority","uniqueKey","concat","sort","a","b","Number","removeResolver","index","findIndex","item","splice","removeAllResolvers","initCache","cacheEntry","getItem","parse","saveCache","setItem","handleError","message","originalError","emit","resolveScript","__scriptId","__caller","__webpackContext","__referenceUrl","isUsed","promise","resolvedLocator","script","createScript","cacheKey","shouldUpdateScript","updateCache","loaded","isPrefetch","loadProcess","loadScriptWithRetry","code","attempts","setTimeout","invalidateScripts","scriptIds","ids","unstable_evaluateScript","scriptSource","scriptSourceUrl","Federated","_Federated","createURLResolver","containerExt","containers","replace","chunks","importModule","containerName","module","scope","__webpack_share_scopes__","__isInitialized","__webpack_init_sharing__","self","container","factory","get","exports","_CorePlugin","_PrefetchPlugin","_ResolverPlugin","RUNTIME_001","RUNTIME_002","RUNTIME_003","RUNTIME_004","RUNTIME_005","RUNTIME_006","RUNTIME_007","RUNTIME_008","TYPE_001","BUILD_001","getDocsUrl","errorCode","type","getShortErrorMsg","errorDescMap","originalErrorMsg","msg","_extends","assign","target","i","arguments","source","runtimeDescMap","typeDescMap","buildDescMap","polyfills","sdk","errorCodes","LOG_CATEGORY","logger","assert","condition","addUniqueItem","arr","name1","getFMId","isRemoteInfoWithEntry","isPureRemoteEntry","_safeWrapper","callback","disableWarn","res","e","isObject","val","objectToString","isPlainObject","isStaticResourcesEqual","url1","url2","REG_EXP","relativeUrl1","relativeUrl2","arrayOptions","Array","getRemoteEntryInfoFromSnapshot","snapshot","defaultRemoteEntryInfo","processModuleAlias","subPath","CurrentGlobal","window","nativeGlobal","document","Global","definePropertyGlobalVal","includeOwnProperty","globalLoading","setGlobalDefaultVal","_target___FEDERATION__","_target___FEDERATION__1","_target___FEDERATION__2","_target___FEDERATION__3","_target___FEDERATION__4","_target___FEDERATION__5","Map","___GLOBAL_PLUGIN__","___INSTANCES__","_moduleInfo","___SHARE__","___MANIFEST_LOADING__","___PRELOADED_MAP__","resetFederationGlobalInfo","setGlobalFederationInstance","FederationInstance","getGlobalFederationConstructor","setGlobalFederationConstructor","FederationConstructor","ref","isDebug","getInfoWithoutType","keyRes","targetKeys","targetKey","_targetKey_split","targetTypeOrName","_","nKey","typeWithKeyRes","getGlobalSnapshot","getTargetSnapshotInfoByModuleInfo","moduleInfo","moduleKey","getModuleInfo","resModuleInfo","moduleKeyWithoutVersion","getModuleInfoWithoutVersion","getGlobalSnapshotInfoByModuleInfo","setGlobalSnapshotInfoByModuleInfo","moduleDetailInfo","addGlobalSnapshot","moduleInfos","getRemoteEntryExports","remoteEntryKey","entryExports","registerGlobalPlugins","plugins","__GLOBAL_PLUGIN__","plugin","getGlobalHostPlugins","getPreloaded","id","setPreloaded","DEFAULT_SCOPE","DEFAULT_REMOTE_TYPE","buildIdentifier","build","numericIdentifier","numericIdentifierLoose","nonNumericIdentifier","preReleaseIdentifierLoose","preReleaseLoose","preReleaseIdentifier","preRelease","xRangeIdentifier","xRangePlain","hyphenRange","mainVersionLoose","loosePlain","gtlt","comparatorTrim","loneTilde","tildeTrim","loneCaret","caretTrim","star","caret","mainVersion","fullPlain","tilde","xRange","comparator","gte0","parseRegex","RegExp","isXVersion","pipe","fns","x","v","f","extractComparator","comparatorString","combineVersion","major","minor","patch","parseHyphen","range","_range","fromMajor","fromMinor","fromPatch","_fromPreRelease","_fromBuild","toMajor","toMinor","toPatch","toPreRelease","parseComparatorTrim","parseTildeTrim","parseCaretTrim","parseCarets","rangeVersion","parseTildes","parseXRanges","ret","isXMajor","isXMinor","isXPatch","parseStar","parseGTE0","compareAtom","rangeAtom","versionAtom","comparePreRelease","rangePreRelease","versionPreRelease","Boolean","n","rangeElement","versionElement","compareVersion","eq","compare","parseComparatorString","parseRange","satisfy","parsedRange","parsedComparator","comparators","extractedVersion","_extractedVersion","versionOperator","versionMajor","versionMinor","versionPatch","extractedComparator","_extractedComparator","rangeOperator","rangeMajor","rangeMinor","rangePatch","formatShare","shareArgs","shareStrategy","_shareArgs_version","_shareArgs_scope","_shareArgs_strategy","formatShareConfigs","globalOptions","userOptions","shareInfos","pkgName","arrayShareArgs","shareConfig","shareKey","newUserSharedOptions","isSameVersion","sharedVal","versionLt","transformInvalidVersion","isNumberVersion","splitArr","validVersion","findVersion","shareVersionMap","cb","prev","cur","isLoaded","isLoading","findSingletonVersionOrderByVersion","shareScopeMap","versions","findSingletonVersionOrderByLoaded","isLoadingOrLoaded","getFindShareFunction","strategy","getRegisteredShare","localShareScopeMap","shareInfo","resolveShare","sc","requiredVersion","findShareFunction","maxOrSingletonVersion","defaultResolver","versionKey","versionValue","params","resolveShared","scopes","getGlobalShareScope","getTargetSharedOptions","extraOptions","sharedOptions","maxVersion","_extraOptions_resolver","ShareUtils","GlobalUtils","helpers","getBuilderId","FEDERATION_BUILD_IDENTIFIER","matchRemoteWithNameAndExpose","remotes","isNameMatched","expose","pkgNameOrAlias","isAliasMatched","exposeWithAlias","pkgNameOrAlias1","matchRemote","registerPlugins","hookInstances","globalPlugins","hookInstance","_loadEsmEntry","remoteEntryExports","reject","FEDERATION_ALLOW_NEW_FUNCTION","Function","_loadSystemJsEntry","__system_context__","System","_loadEntryScript","loaderHook","_getRemoteEntryExports","attrs","HTMLScriptElement","_loadEntryDom","loadEsmEntry","loadSystemJsEntry","loadEntryScript","_loadEntryNode","getRemoteEntryUniqueKey","_getRemoteEntry","origin","loadEntryHook","loadEntryDom","loadEntryNode","getRemoteInfo","Module","host","getEntry","getRemoteEntry","err","_ref","loadFactory","shareScopeKeys","shareScopeKey","shareScope","initScope","remoteEntryInitOptions","initContainerOptions","moduleFactory","symbolName","wrapModuleFactory","exposeContent","wraperFactory","defineModuleId","Symbol","SyncHook","Set","on","once","wrapper","data","result","remove","removeAll","AsyncHook","ls","call","checkReturnData","originalData","returnedData","SyncWaterfallHook","tempData","AsyncWaterfallHook","processError","prevData","PluginSystem","lifecycle","applyPlugin","pluginName","pluginLife","removePlugin","inherit","hookName","defaultPreloadArgs","formatPreloadArgs","preloadArgs","normalizePreloadExposes","preloadAssets","useLinkPreload","defaultAttrs","cssUrl","_sdk_createLink","HTMLLinkElement","cssEl","needAttach","defaultAttrs1","defaultAttrs2","jsUrl","linkEl","defaultAttrs3","_sdk_createScript","scriptEl","assignRemoteInfo","remoteEntryInfo","snapshotPlugin","globalSnapshot","splitId","splitInfo","traverseModuleInfo","traverse","isRoot","_getInfoWithoutType","snapshotValue","effectiveRemoteSnapshot","remoteKeys","memo","subRemoteInfo","remoteValue","isExisted","jsAssets","loadedSharedJsAssets","loadedSharedCssAssets","rootPreloadConfig","moduleInfoSnapshot","findPreloadConfig","remoteConfig","remoteEntryUrl","moduleAssetsInfo","normalizedPreloadExposes","_moduleInfoSnapshot_modules","moduleAssetInfo","assetsRes","assetsLength","assetsInfo","exposeFullPath","preloaded","_cssAssets","_cssAssets1","_jsAssets","_jsAssets1","_cssAssets2","_jsAssets2","collectSharedAssets","snapshotShared","registeredShared","_options_shared","s","arrayShareInfo","needPreloadJsAssets","needPreloadCssAssets","generatePreloadAssetsPlugin","getGlobalRemoteInfo","hostGlobalSnapshot","globalRemoteInfo","SnapshotHandler","HostInstance","loadSnapshot","_this_getGlobalRemoteInfo","globalRemoteSnapshot","globalSnapshotRes","loadRemoteSnapshotInfo","hostSnapshot","mSnapshot","gSnapshot","moduleSnapshot","globalSnapshotRes1","_ref1","remoteSnapshotRes","moduleSnapshot1","globalSnapshotRes2","_ref2","remoteSnapshotRes1","getGlobalRemoteInfo1","getManifestJson","manifestUrl","getManifest","manifestJson","Response","asyncLoadProcess","SharedHandler","registerShared","_formatShareConfigs","sharedKeys","sharedKey","sharedVals","loadShare","loadShareRes","shareInfoRes","addUseIn","gShared","loading","asyncLoadProcess1","loading1","initializeSharing","promises","initTokens","initToken","shareScopeName","hostName","register","_activeVersion_shareConfig","eager","activeVersion","activeVersionEager","initFn","mod","initRemoteModule","shareName","sharedArr","loadShareSync","module1","initShareScopeMap","scopeName","setShared","lib","_setGlobalShareScopeMap","hostOptions","globalShareScopeMap","identifier","RemoteHandler","formatAndRegisterRemote","userRemotes","setIdToRemoteMap","remoteMatchInfo","alias","idWithAlias","idWithName","loadRemote","moduleOptions","idRes","moduleOrFactory","moduleWrapper","failOver","preloadRemote","preloadOps","ops","registerRemotes","getRemoteModuleAndOptions","loadRemoteArgs","remoteSplitInfo","rawRemote","matchInfo","targetRemotes","normalizeRemote","findEqual","_item_alias","URL","registeredRemote","messages","removeRemote","remoteIndex","loadedModule","_Object_getOwnPropertyDescriptor","remoteEntryUniqueKey","remoteInsId","remoteInsIndex","ins","remoteIns","isAllSharedNotUsed","needDeleteKeys","instId","shareScopeVal","sharedPkgs","shareVersion","usedHostName","insId","_globalShareScopeMap_insId_shareScope_shareName","_globalShareScopeMap_insId_shareScope","_globalShareScopeMap_insId","remoteKey","FederationHost","defaultOptions","initOptions","initRawContainer","formatOptions","_this_hooks_lifecycle_beforeInit_emit","userOptionsRes","globalOptionsRes","_this_sharedHandler_registerShared","handledShared","optionsRes","registerPlugins1","pluginRes","safeWrapper","_object_without_properties_loose","excluded","sourceKeys","runtimeCore","utils","instance","loadRemote1","loadShare1","loadShareSync1","getInstance","getGlobalFederationInstance","buildId","GMInstance","FederationModuleManifest","MANIFEST_EXT","BROWSER_LOG_KEY","BROWSER_LOG_VALUE","NameTransformSymbol","NameTransformMap","EncodedNameTransformMap","SEPARATOR","ManifestFileName","StatsFileName","MFModuleType","MODULE_DEVTOOL_IDENTIFIER","ENCODE_NAME_PREFIX","TEMP_DIR","MFPrefetchCommon","ContainerPlugin","ContainerReferencePlugin","ModuleFederationPlugin","SharePlugin","isBrowserEnv","isReactNativeEnv","_navigator","navigator","isBrowserDebug","localStorage","error1","isDebugMode","process","FEDERATION_DEBUG","getProcessEnv","parseEntry","str","devVerOrUrl","separator","strSplit","devVersionOrUrl","defaultVersion","isEntry","_strSplit","versionOrEntryArr","versionOrEntry","_strSplit1","composeKeyWithSeparator","sum","encodeName","ref1","ext","withExt","decodeName","decodedName","generateExposeFilename","exposeName","generateShareFilename","getResourceUrl","sourceUrl","safeToString","info","VERSION_PATTERN_REGEXP","isRequiredVersion","simpleJoinRemoteEntry","rPath","rName","transformPath","strWithoutSlash","transformedPath","inferAutoPublicPath","generateSnapshotFromManifest","manifest","_manifest_metaData","_manifest_metaData1","overrides","overridesKeys","remotesInfo","_manifest_remotes","next","matchedVersion","_manifest_metaData2","remoteEntryPath","remoteEntryName","remoteEntryType","remoteTypes","buildVersion","ssrRemoteEntry","basicRemoteSnapshot","prefetchInterface","_manifest_metaData_prefetchEntry","path","fullSSRRemoteEntry","isManifestProvider","PREFIX","Logger","Logger1","setPrefix","log","_console","warn1","success","ready","debug","createLogger","timeoutId","scripts","scriptSrc","createScriptRes","onScriptComplete","event","clearTimeout","onScriptCompleteCallback","needDeleteScript","createLink","link","links","l","linkHref","linkRel","createLinkRes","onLinkComplete","onLinkCompleteCallback","needDeleteLink","createScriptHook","_createScript","importNodeModule","loadNodeFetch1","fetchModule","lazyLoaderHookFetch1","input","hook","fetchFunction","loadNodeFetch","createScriptNode","hookResult","urlObj","getFetch","lazyLoaderHookFetch","handleScriptFetch","_vm_constants","vm","scriptContext","urlDirname","filename","_vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER","eval","exportedInterface","loadModule","loadScriptNode","_info_attrs","_info_attrs1","_loadModule","fetch1","response","specifier","resolvedUrl","normalizeOptions","enableDefault","FEDERATION_SUPPORTED_TYPES","runtime","constant","_interopNamespaceDefault","k","runtime__namespace","attachShareScopeMap","webpackRequire","chunkId","chunkMapping","idToExternalAndNameMapping","idToRemoteMap","getScope","remoteInfos","onError","handleFunction","arg1","arg2","d","first","onExternal","external","onInitialized","onFactory","onRemoteLoaded","remoteModuleName","useRuntimeLoad","consumes","installedModules","moduleToHandlerMapping","federationInstance","_moduleToHandlerMapping_id","getter","initPromises","initializeSharingPromises","_initializeSharing","mfInstance","initExternal","_$module","initResult","bundlerRuntimeRemotesOptions","moduleId","externalModuleId","handleInitialConsumes","_moduleToHandlerMapping_moduleId","installInitialConsumes","initialConsumes","initContainerEntry","hostShareScopeKeys","hostShareScopeMap","hostKey","proxyInitializeSharing","federation","_array_like_to_array","len","arr2","_array_with_holes","_array_without_holes","_assert_this_initialized","ReferenceError","asyncGeneratorStep","gen","_next","_throw","arg","_async_to_generator","_get_prototype_of","_is_native_reflect_construct","_possible_constructor_return","_call_super","_this","derived","Reflect","_class_call_check","Constructor","TypeError","_defineProperties","props","descriptor","_create_class","protoProps","staticProps","_define_property","obj","_export_star","o","getPrototypeOf","_set_prototype_of","_inherits","subClass","superClass","_interop_require_default","_iterable_to_array","iter","_iterable_to_array_limit","_i","_arr","_n","_d","_s","_e","_non_iterable_rest","_non_iterable_spread","_object_spread","ownKeys","sym","_type_of","setPrototypeOf","_unsupported_iterable_to_array","_sliced_to_array","_to_array","_to_consumable_array","minLen","TurboModuleRegistry","R","ReflectApply","receiver","ReflectOwnKeys","ProcessEmitWarning","warning","NumberIsNaN","defaultMaxListeners","checkListener","listener","RangeError","setMaxListeners","_getMaxListeners","that","getMaxListeners","doError","events","er","handler","listeners","arrayClone","_addListener","prepend","m","existing","w","String","addListener","prependListener","onceWrapper","_onceWrap","state","wrapped","prependOnceListener","removeListener","list","position","originalListener","spliceOne","removeAllListeners","_listeners","unwrap","evlistener","unwrapListeners","rawListeners","emitter","listenerCount","eventNames","copy","errorListener","eventTargetAgnosticAddListener","addErrorHandlerIfEventEmitter","flags","wrapListener","objA","objB","compareContext","keysA","keysB","bHasOwnProperty","idx","valueA","valueB","Hook","HookCodeFactory","AsyncParallelBailHookCodeFactory","content","onResult","onDone","done","doneBreak","run","COMPILE","AsyncParallelBailHook","AsyncParallelHookCodeFactory","AsyncParallelHook","AsyncSeriesBailHookCodeFactory","resultReturns","AsyncSeriesHookCodeFactory","AsyncSeriesHook","AsyncSeriesLoopHookCodeFactory","AsyncSeriesLoopHook","AsyncSeriesWaterfallHookCodeFactory","util","deprecateContext","CALL_DELEGATE","CALL_ASYNC_DELEGATE","PROMISE_DELEGATE","compile","_createCall","_tap","tap","tapAsync","_runRegisterInterceptors","interceptor","newOptions","withOptions","mergeOptions","opt","intercept","_resetCompilation","_insert","before","stage","xStage","create","errorHelperUsed","setup","t","deinit","contentWithInterceptors","header","needContext","callTap","tapIndex","rethrowIfPossible","hasTapCached","cbCode","callTapsSeries","j","unroll","current","unrollCounter","somethingReturns","skipDone","firstAsync","doneReturns","callTapsLooping","syncOnly","callTapsParallel","onTap","after","allArgs","getTapFn","getTap","getInterceptor","defaultFactory","HookMap","_for","newHook","interceptors","MultiHook","h","SyncBailHookCodeFactory","TAP_ASYNC","TAP_PROMISE","SyncBailHook","SyncHookCodeFactory","SyncLoopHookCodeFactory","SyncLoopHook","SyncWaterfallHookCodeFactory","__module_federation_runtime_plugins__","_prefetchplugin","_resolverplugin","_coreplugin","__module_federation_remote_infos__","__module_federation_container_name__","__module_federation_share_strategy__","__webpack_require___remotesLoadingData","__webpack_require___remotesLoadingData1","__webpack_require___initializeSharingData","__webpack_require___consumesLoadingData","__webpack_require___consumesLoadingData1","__webpack_require___initializeExposesData","__webpack_require___consumesLoadingData2","override","merge","_obj_key","_obj","_key","_obj1","_key1","_1","early","initial","__webpack_require___remotesLoadingData_chunkMapping","remotesLoadingChunkMapping","__webpack_require___remotesLoadingData_moduleIdToRemoteDataMapping","remotesLoadingModuleIdToRemoteDataMapping","__webpack_require___initializeSharingData_scopeToSharingDataMapping","initializeSharingScopeToInitDataMapping","__webpack_require___consumesLoadingData_chunkMapping","consumesLoadingChunkMapping","__webpack_require___consumesLoadingData_moduleIdToConsumeDataMapping","consumesLoadingModuleToConsumeDataMapping","consumesLoadinginstalledModules","initializeSharingInitPromises","initializeSharingInitTokens","containerShareScope","_indexcjscjs","consumesLoadingModuleToHandlerMapping","stages","singleton","strictVersion","isValidValue","remotesLoadingIdToExternalAndNameMappingMapping","remoteData","moduleMap"],"mappings":";;;;;;;;;;;;;;;;AAGA,IAAMA,gBAA+C,GAAGA,CAAA,IAAO;QAC7DC,IAAI,EAAE,oBAAoB;QAC1BC,SAAS;6CAAE,MAAAA,CAAO;qCAAEC;gBAClB,IAAMC,MAAM,GAAGC,mBAAO,CAAC,KAA2B,CAAwB;gBAC1E,IAAQC,EAAF,WAAe,6CAAwBF,MAAM,CAA5BG;gBACvB,MAAM,iBAAEC,KAAK,oBAAsBL,UAAU,CAA9BM;gBAEf,IAAI;oBACF,MAAMH,aAAa,CAACI,MAAM,CAACC,UAAU,CACnCF,eAAe,EACfG,SAAS,EACTL,iBAAiB,CAAC,CAAC,EACnBC,KACF,CAAC;oBAED;oBACA,IAAI,CAACK,UAAU,CAACJ,eAAe,CAAC,EAAE;wBAChC,MAAM,IAAIK,KAAK,CAAC,CAAC;oBACnB;oBAEA;oBACA,OAAOD,UAAU,CAACJ,eAAe,CAAC;gBACpC,CAAC,CAAC,OAAM;oBACNM,OAAO,CAACC,KAAK,CAAC,gCAAgCP,eAAe,EAAE,CAAC;gBAClE;YACF,CAAC;;;;;QACDQ,qBAAqB,sCAAE,MAAAA,CAAA,KAAY;YACjC;YACA,OAAOC,OAAO,CAACC,OAAO,CAAC;gBACrBC,SAAS,EAAE,EAAE;gBACbC,oBAAoB,EAAE,EAAE;gBACxBC,WAAW,EAAE;YACf,CAAC,CAAC;QACJ;KACF,CAAC,CAAC;IAEF,WAAetB,gBAAgB;;;;;;;;;;;;;;;;AC9B/B,SAASuB,YAAYA,CAACC,KAAa,EAAU;IAC3C;IACA,OAAOA,KAAK,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AAC5B;AAEA,SAASC,WAAWA,CAACF,KAAa,EAAE;IAClC;IACA,OAAO,cAAc,GAAGA,KAAK;AAC/B;AAEA,SAASG,aAAaA,CAACH,KAAoB,EAAE;IAC3C,IAAMpB,MAAM,GAAGC,mBAAO,CAAC,KAA2B,CAAwB;IAC1E,MAAM,qBAAEC,aAAa,sBAAwBF,MAAM,CAA5BG;IAEvB;IACA,IAAMqB,MAAM,GAAGJ,KAAK,CAACvB,IAAI,KAAKuB,KAAK,CAACK,UAAU,GAAGjB,SAAS,GAAGY,KAAK,CAACK,UAAU;IAE7E,OAAOvB,aAAa,CAACI,MAAM,CAACoB,cAAc,CACxCN,KAAK,CAACvB,IAAI,EACV2B,MAAM,EACNrB,iBAAiB,CAAC,CAAC,EACnBiB,KAAK,CAACO,GACR,CAAC;AACH;AAEA,IAAMC,oBAAmD,GAAGA,CAAA,IAAO;QACjE/B,IAAI,EAAE,wBAAwB;QAC9BgB,qBAAqB;6CAAE;gBACrB,IAAMiB,aAAa,GAAGD,IAAI,CAACE,cAAc,CAACD,aAAa;gBACvD,IAAML,UAAU,GAAGK,aAAa,CAACE,WAAW;gBAC5C,IAAMC,cAAc,GAAGJ,IAAI,CAACI,cAAc;gBAE1C,IAAIH,aAAa,CAACI,UAAU,KAAK,KAAK,EAAE;oBACtCvB,OAAO,CAACwB,IAAI,CACV,yBAAyB,GACvB,8DAA8D,GAC9D,wDAAwD,GACxD,sEACJ,CAAC;gBACH;gBAEA,SAASC,YAAYA,CAACC,MAAgB,EAAmB;oBACvD,OAAOA,MAAM,CAACC,GAAG,EAAElB,KAAK,IAAM;4BAC5BvB,IAAI,EAAEsB,YAAY,CAACC,KAAK,CAAC;4BACzBK,UAAU;4BACVE,GAAG,EAAEL,WAAW,CAACF,KAAK;yBACxB,CAAC,CAAC,CAAC;gBACL;gBAEA,IAAIiB,MAAuB,GAAG,EAAE;gBAEhC,IAAI,SAAS,IAAIJ,cAAc,EAAE;oBAC/B,KAAK,IAAMM,aAAa,IAAIN,cAAc,CAACO,OAAO,CAAE;wBAClD,IAAIV,aAAa,CAACW,OAAO,EAAE;4BACzB,IAAI,CAACX,aAAa,CAACW,OAAO,CAACC,QAAQ,CAACH,aAAa,CAACI,UAAU,CAAC,EAAE;gCAC7D;4BACF;wBACF;wBAEA,IAAIb,aAAa,CAACc,gBAAgB,KAAK,KAAK,EAAE;;+CACrCC,IAAI,OAAXR,MAAM,GAAM,uBAAGD,YAAY,CAACG,aAAa,CAACF,MAAM,CAACS,EAAE,CAACC,KAAK,CAAC,CAAC;gDACpDF,IAAI,OAAXR,MAAM,IAAM,uBAAGD,YAAY,CAACG,aAAa,CAACF,MAAM,CAACS,EAAE,CAACE,IAAI,CAAC,CAAC;wBAC5D,CAAC,MAAM,IAAIlB,aAAa,CAACc,gBAAgB,KAAK,MAAM,EAAE;;gDAC7CC,IAAI,OAAXR,MAAM,IAAM,uBAAGD,YAAY,CAACG,aAAa,CAACF,MAAM,CAACS,EAAE,CAACE,IAAI,CAAC,CAAC;wBAC5D;oBACF;oBAEA,IAAIlB,aAAa,CAACmB,MAAM,EAAE;wBACxBZ,MAAM,GAAGA,MAAM,CAACY,MAAM,EAAE7B,KAAK,GAAKU,aAAa,CAACmB,MAAM,CAAE7B,KAAK,CAACvB,IAAI,CAAC,CAAC;oBACtE;oBAEAwC,MAAM,CAACa,OAAO,CAAC;wBACbrD,IAAI,EAAEoC,cAAc,CAACkB,UAAU;wBAC/B1B,UAAU,EAAEQ,cAAc,CAACkB,UAAU;wBACrCxB,GAAG,EAAEL,WAAW,CAACW,cAAc,CAACmB,WAAW;oBAC7C,CAAC,CAAC;gBACJ;gBAEA,MAAMtC,OAAO,CAACuC,GAAG,CAAChB,MAAM,CAACC,GAAG,CAACf,aAAa,CAAC,CAAC;gBAE5C;gBACA,OAAOT,OAAO,CAACC,OAAO,CAAC;oBACrBC,SAAS,EAAE,EAAE;oBACbC,oBAAoB,EAAE,EAAE;oBACxBC,WAAW,EAAE;gBACf,CAAC,CAAC;YACJ;4BA3D8BW,IAAI;;;;IA4DpC,CAAC,CAAC;IAEF,WAAeD,oBAAoB;;;;;;;;;;;;;;;;ACtFnC;qCAA4B,MAAA0B;QAI1B,IAAI,OAAOE,MAAM,KAAK,UAAU,EAAE;YAChC,IAAMC,OAAO,GAAG,MAAMD,MAAM,CAACD,QAAQ,CAAC;YACtC,OAAOE,OAAO;QAChB;QACA,IAAI,OAAOD,MAAM,KAAK,QAAQ,EAAE;YAC9B,OAAO;gBAAE7B,GAAG,EAAE4B,QAAQ;eAAKC;QAC7B;QACA,OAAO;YAAE7B,GAAG,EAAE4B;QAAS,CAAC;IAC1B,CAAC;oBAZKD,mBAAmB,CACvBC,QAAgB,EAChBC,MAA0C;;;;AAY5C,IAAME,aAAa,IAAI/B,GAAW,IAAK;IACrC,OAAOA,GAAG,CAACN,KAAK,CAAC,GAAG,CAAC,CAACsC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC;AAC9C,CAAC;AAED,IAAMC,YAAY,IAAIlC,GAAW,IAAK;IACpC,IAAMmC,SAAS,GAAGnC,GAAG,CAACN,KAAK,CAACqC,aAAa,CAAC/B,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IAClD;IACA,OAAOmC,SAAS,CAACC,UAAU,CAAC,GAAG,CAAC,GAAGD,SAAS,CAACH,KAAK,CAAC,CAAC,CAAC,GAAGG,SAAS;AACnE,CAAC;AAED,IAAME,eAAe,GAAGA,CAACC,IAAY,EAAEC,EAAU;IAC/C,IAAMJ,SAAS,GAAGD,YAAY,CAACI,IAAI,CAAC;IACpC,IAAME,UAAU,GAAGT,aAAa,CAACQ,EAAE,CAAC;IACpC,OAAO;QAACC,UAAU;QAAEL,SAAS;KAAC,CAACF,IAAI,CAAC,GAAG,CAAC;AAC1C,CAAC;AAED;qCAAyB,MAAAQ,gBAEvBZ,MAA0C;QAE1C;QACA;QACA;QACA,IAAM,iBAAqB,MAAM,gGAEjC,CAAyB,CAFjBtD;QAIR;QACA;QACA,IAAIqD,QAA4B;QAChC,IAAI,SAAS,IAAIxD,UAAU,IAAIA,UAAU,CAACsE,OAAO,EAAE;YACjDd,QAAQ,GAAGxD,UAAU,CAACsE,OAAO;QAC/B,CAAC,MAAM,IAAI,OAAO,IAAItE,UAAU,EAAE;YAChCwD,QAAQ,GAAGxD,UAAU,CAACK,KAAK;QAC7B;QAEA,IAAI,CAACmD,QAAQ,EAAE;YACb,MAAM,IAAI7C,KAAK,CACb,gEAAgE,GAC9DX,UAAU,CAACF,IACf,CAAC;QACH;QAEAK,aAAa,CAACI,MAAM,CAACgE,WAAW;6CAC9B;gBACE,IAAIC,QAAQ,KAAKxE,UAAU,CAACF,IAAI,IAAI2B,MAAM,KAAKzB,UAAU,CAACF,IAAI,EAAE;oBAC9D;oBACA,IAAI,CAAC2E,YAAY,EAAE;wBACjB,MAAM,IAAI9D,KAAK,CAAC,iDAAiD,CAAC;oBACpE;oBAEA,IAAMiB,GAAG,GAAGqC,eAAe,CAACQ,YAAY,EAAEjB,QAAQ,CAAC;oBACnD,IAAME,OAAO,GAAG,MAAMH,mBAAmB,CAAC3B,GAAG,EAAE6B,MAAM,CAAC;oBACtD,OAAOC,OAAO;gBAChB;YACF,CAAC;4BAXMc,QAAQ,EAAE/C,MAAM,EAAEgD,YAAY;;;aAYrC;YAAEC,GAAG,EAAE1E,UAAU,CAACF,IAAAA;QAAK,CACzB,CAAC;IACH,CAAC;oBA1CKuE,gBAAgB,CACpBrE,UAAoB;;;;AA2CtB,IAAM2E,oBAEsB,IAAIlB,MAAM,IAAM;QAC1C3D,IAAI,EAAE,wBAAwB;QAC9B8E,cAAc,GAAG9C,IAAI,IAAK;YACxB;YACAuC,gBAAgB,CAACvC,IAAI,CAAC+C,MAAM,EAAEpB,MAAM,CAAC;YACrC,OAAO3B,IAAI;QACb;KACF,CAAC,CAAC;IAEF,WAAe6C,oBAAoB;;;;;;;;;;;;;;;;;iFCjGV,IAAc;+CAKhC,KAA0B;2BAY1B;;oBAwIaH,QAAgB,EAChB/C,MAA0B,EAC1BiC,OAGf,EACe2D,KAAc;qCAAG,IAAI,EACrC;;QAAA,KAPgB7C,QAAgB,GAAhBA,QAAgB;QAAA,KAChB/C,MAA0B,GAA1BA,MAA0B;QAAA,KAC1BiC,OAGf,GAHeA,OAGf;QAAA,KACe2D,KAAc,GAAdA,KAAc;;;;YAGhC;;;;;;GAMF;4BACEI,iBAAiBA,CACfC,UAGC,EACD;gBACA,IAAI,CAAC,IAAI,CAACL,KAAK,IAAI,CAACK,UAAU,EAAE;oBAC9B,OAAO,KAAK;gBACd;gBAEA,OAAO,IAAI,CAACC,wBAAwB,CAACD,UAAU,CAAC;YAClD;;;YAEA;;;;;;;GAOF;4BACEE,aAAaA,CACXF,UAGC,EACD;gBACA,IAAI,CAAC,IAAI,CAACL,KAAK,EAAE;oBACf,OAAO,IAAI;gBACb;gBAEA,OAAO,IAAI,CAACM,wBAAwB,CAACD,UAAU,CAAC;YAClD;;;YAEA;;;;;;GAMF,QACEC,wBAAwBA;qDACtBD,UAGC,EACD;gBACA,OACEA,UAAU,CAAChB,MAAM,KAAK,IAAI,CAAChD,OAAO,CAACgD,MAAM,IACzCgB,UAAU,CAAC9F,GAAG,KAAK,IAAI,CAAC8B,OAAO,CAAC9B,GAAG,IACnC8F,UAAU,CAACV,KAAK,KAAK,IAAI,CAACtD,OAAO,CAACsD,KAAK,IACvC,KAAClC,qBAAY,EAAC4C,UAAU,CAAC5B,OAAO,EAAE,IAAI,CAACpC,OAAO,CAACoC,OAAO,CAAC,IACvD4B,UAAU,CAACtB,IAAI,KAAK,IAAI,CAAC1C,OAAO,CAAC0C,IAAI;YAEzC;;;YAEA;;;;GAIF,GACEyB,YAAYA,CAAA,EAAG;;gBACb,OAAO;oBACLnB,MAAM,EAAE,IAAI,CAAChD,OAAO,CAACgD,MAAM;oBAC3B9E,GAAG,EAAE,IAAI,CAAC8B,OAAO,CAAC9B,GAAG;oBACrBoF,KAAK,EAAE,IAAI,CAACtD,OAAO,CAACsD,KAAK;oBACzBlB,OAAO,EAAE,IAAI,CAACpC,OAAO,CAACoC,OAAO;oBAC7BM,IAAI,EAAE,IAAI,CAAC1C,OAAO,CAAC0C,IAAAA;gBACrB,CAAC;YACH;;;;4BAEA0B,QAAQA,CAAA,EAAG;gBACT,OAAO;oBACLtD,QAAQ,EAAE,IAAI,CAACA,QAAQ;oBACvB/C,MAAM,EAAE,IAAI,CAACA,MAAM;oBACnBiC,OAAO,EAAE,IAAI,CAACA,OAAO;oBACrB2D,KAAK,EAAE,IAAI,CAACA,KAAAA;gBACd,CAAC;YACH;;;;;mBAnOA;;;;GAIF,GACE,SAAOlC,eAAeA,CAACX,QAAgB,EAAE;gBACvC,QAAQY,cAAmD,GACzD,GAAGA,cAAc,CAACC,CAAC,GAAGD,cAAc,CAACE,CAAC,CAACd,QAAQ,CAAC,EAAE;YACtD;;;;mBAOA;;;;GADF,YACSe,gBAAgBA,CAACf,QAAgB,EAAE;gBACxC,QAAQY,cAAmD,GACzDA,cAAc,CAACE,CAAC,CAAC,WAAWd,QAAQ,EAAE,CAAC;YAC3C;;;;mBAEA;;;;;;;;GAQF,GACE,SAAOgB,YAAYA,CACjB5D,GAAW;+CAC+B,CAAC,CAAC,EAC5C,CADA6D;gBAEA,IAAIA,OAAO,CAACC,gBAAgB,EAAE;oBAC5B,OAAO9D,GAAG;gBACZ;gBAEA,QAAQwD,cAAmD,GACzDA,cAAc,CAACE,CAAC,CAAC1D,GAAG,CAAC;YACzB;;;iBAUO+D,iBAAiBA;mBAAxB;;;;;;;GADF,8BAC2BnB,QAAgB,EAAE/C,MAAe,EAAE;gBAC1D,IAAMmE,MAAM,GAAGnE,MAAM,GAAGA,MAAM,GAAG,GAAG,GAAG,EAAE;gBACzC,OAAOmE,MAAM,GAAGpB,QAAQ;YAC1B;;;iBAUON,IAAIA;mBAAX;;;;;;;GADF,iBAEIQ,GAA0C,EAC1ChB,OAAsB,EACtBmC,KAAc,EACd;gBACA,IAAMC,OAA+B,GAAG,CAAC,CAAC;gBAC1C,IAAIC,OAAO,CAACrC,OAAO,CAACoC,OAAO,CAAC,CAACE,OAAO,CAAC,CAACC,KAAa,EAAEvB,GAAW;oBAC9DoB,OAAO,CAACpB,GAAG,CAACwB,WAAW,CAAC,CAAC,CAAC,GAAGD,KAAK;gBACpC,CAAC,CAAC;gBAEF,IAAME,QAAQ,GAAGlB,MAAM,CAACU,iBAAiB,CAACjB,GAAG,CAACF,QAAQ,EAAEE,GAAG,CAACjD,MAAM,CAAC;gBAEnE,IAAI2E,IAAqC;gBACzC,IAAI1C,OAAO,CAAC0C,IAAI,YAAYC,QAAQ,EAAE;oBACpC,IAAMC,UAAkC,GAAG,CAAC,CAAC;oBAC7C5C,OAAO,CAAC0C,IAAI,CAACJ,OAAO,CAAC,CAACC,KAAK,EAAEvB,GAAG;wBAC9B,IAAI,OAAOuB,KAAK,KAAK,QAAQ,EAAE;4BAC7BK,UAAU,CAAC5B,GAAG,CAAC,GAAGuB,KAAK;wBACzB,CAAC,MAAM;4BACLrF,OAAO,CAACwB,IAAI,CAAC,sDAAsD,CAAC;wBACtE;oBACF,CAAC,CAAC;oBACFgE,IAAI,GAAGG,IAAI,CAACC,SAAS,CAACF,UAAU,CAAC;gBACnC,CAAC,MAAM,IAAI5C,OAAO,CAAC0C,IAAI,YAAYK,eAAe,EAAE;oBAClD,IAAMH,UAAkC,IAAG,CAAC,CAAC;oBAC7C5C,OAAO,CAAC0C,IAAI,CAACJ,OAAO,CAAC,CAACC,KAAK,EAAEvB,GAAG;wBAC9B4B,WAAU,CAAC5B,GAAG,CAAC,GAAGuB,KAAK;oBACzB,CAAC,CAAC;oBACFG,IAAI,GAAGG,IAAI,CAACC,SAAS,CAACF,UAAU,CAAC;gBACnC,CAAC,MAAM;oBACLF,IAAI,GAAG1C,OAAO,CAAC0C,IAAI,IAAI3F,SAAS;gBAClC;gBAEA,IAAI,OAAOiD,OAAO,CAAC9B,GAAG,KAAK,UAAU,EAAE;oBACrC,MAAM,IAAIjB,KAAK,CAAC,2CAA2C,CAAC;gBAC9D;gBAEA,OAAO,IAAIsE,MAAM,CACfP,GAAG,CAACF,QAAQ,EACZE,GAAG,CAACjD,MAAM,EACV;oBACE0E,QAAQ;oBACRO,MAAM,EACHhD,OAAO,CAACgD,MAAM,IACf3B,sDAAiC,CAAC4B,GAAG;oBACvC/E,GAAG,EAAE8B,OAAO,CAAC9B,GAAG;oBAChBgF,QAAQ,EAAElD,OAAO,CAACkD,QAAQ,IAAI,KAAK;oBACnCC,OAAO,EAAEnD,OAAO,CAACmD,OAAO,IAAI5B,MAAM,CAACC,eAAe;oBAClD4B,KAAK,EAAEpD,OAAO,CAACoD,KAAK;oBACpBC,UAAU,EAAErD,OAAO,CAACqD,UAAU;oBAC9BC,KAAK,EAAE,IAAIP,eAAe,CAAC/C,OAAO,CAACsD,KAAK,CAAC,CAACC,QAAQ,CAAC,CAAC,IAAIxG,SAAS;oBACjE2F,IAAI;oBACJN,OAAO,EAAEoB,MAAM,CAACC,IAAI,CAACrB,OAAO,CAAC,CAACsB,MAAM,GAAGtB,OAAO,GAAGrF,SAAS;oBAC1DoF,KAAK,EAAEnC,OAAO,CAAC2D,KAAK,KAAK,KAAK,GAAG,IAAI,GAAGxB,KAAK;oBAC7CyB,qBAAqB,EAClB5D,OAAO,CAAC4D,qBAAqB,IAC9BtC,qEAAgD,CAACuC,GAAAA;gBACrD,CAAC,EACD7D,OAAO,CAAC2D,KACV,CAAC;YACH;;;;;;AA7HWpC,MAAM,CACVC,eAAe,GAAG,KAAK,CAAE;;;;;;AClBlC;;;;;;;;;;;;;;;;;;2EACyB,KAAQ;mCAC6B,KAAS;wFAGhE,KAA0B;kCACV,KAAa;6CACF,KAAwB;AAiB1D,IAAMiD,yBAAyB,GAAG,CAAC;AACnC,IAAMC,oBAAoB,GAAG,aAAa;AAE1C,IAAMC,UAAU,GAAG,4BAA4B;AAC/C,IAAMC,aAAa,GAAG,IAAI;AAC1B,IAAMC,SAAS,GAAGC,MAAO,GAAG,CAAO,GAAG,SAAS;AAE/C,IAAMC,SAAS,GAAG;IAACJ,UAAU;IAAEC,aAAa;IAAEC,SAAS;CAAC,CAAC1E,IAAI,CAAC,GAAG,CAAC;AAElE,IAAM6E,mBAAmB,GAAG;IAC1B;IACA,gBAAgB;IAChB,gBAAgB;IAChB;IACA,uBAAuB;CACxB;AAID,SAASC,SAASA,CAAoCC,EAAK,EAAE;IAC3D,2CAAO,UAAO,GAAG9G,IAAmB;6BAAK8G,EAAE,CAAC,uBAAG9G,IAAI,CAAC;;AACtD;kCA0HO;;;;kCAyByBsH,iBAAsBlB,EAAH,0BAAsB,EAAE;;;gBACvE,KAAK,CAAC,CAAC,mCAfCb,KAAK,GAAU,CAAC,CAAC,QACjB4B,eAAe,GAAoB,CAAC,CAAC,QACrCC,gBAAgB,GAAG,KAAK,QACxBC,SAAS,GACjB,EAAE,QA6BIE,OAAO,GAAG;YAChBC,aAAa,EAAE,IAAIrB,iCAAwB,CAGzC;gBAAC,MAAM;aAAC,CAAC;YACXjH,OAAO,EAAE,IAAIgH,4BAAmB,CAG9B;gBAAC,MAAM;aAAC,CAAC;YACXuB,YAAY,EAAE,IAAItB,iCAAwB,CAGxC;gBAAC,MAAM;aAAC,CAAC;YACXuB,YAAY,EAAE,IAAIxB,4BAAmB,CAGnC;gBAAC,MAAM;aAAC,CAAC;YACXyB,UAAU,EAAE,IAAIxB,iCAAwB,CAGtC;gBAAC,MAAM;aAAC,CAAC;YACXyB,IAAI,EAAE,IAAI1B,4BAAmB,CAA2B;gBAAC,MAAM;aAAC,CAAC;YACjE2B,SAAS,EAAE,IAAI1B,iCAAwB,CAGrC;gBAAC,MAAM;aAAC,CAAC;YACX2B,SAAS,EAAE,IAAI5B,4BAAmB,CAAgC;gBAAC,MAAM;aAAC;QAC5E,CAAC,QAEM6B,KAAK,GAAG;YACbP,aAAa,GACXV,EAE2C,GACxC,IAAI,EAACS,OAAO,CAACC,aAAa,CAACQ,UAAU,CAAC,eAAe,EAAEnB,SAAS,CAACC,EAAE,CAAC,CAAC;YAC1E5H,OAAO,GACL4H,EAAyE,GACtE,IAAI,EAACS,OAAO,CAACrI,OAAO,CAAC8I,UAAU,CAAC,SAAS,EAAEnB,SAAS,CAACC,EAAE,CAAC,CAAC;YAC9DW,YAAY,GACVX,EAE0C,GACvC,IAAI,EAACS,OAAO,CAACE,YAAY,CAACO,UAAU,CAAC,cAAc,EAAEnB,SAAS,CAACC,EAAE,CAAC,CAAC;YACxEY,YAAY,GACVZ,EAEmD,GAChD,IAAI,EAACS,OAAO,CAACG,YAAY,CAACM,UAAU,CAAC,cAAc,EAAEnB,SAAS,CAACC,EAAE,CAAC,CAAC;YACxEa,UAAU,GACRb,EAAwE,GACrE,IAAI,EAACS,OAAO,CAACI,UAAU,CAACK,UAAU,CAAC,YAAY,EAAEnB,SAAS,CAACC,EAAE,CAAC,CAAC;YACpEc,IAAI,GAAGd,EAAoD,GACzD,IAAI,EAACS,OAAO,CAACK,IAAI,CAACI,UAAU,CAAC,MAAM,EAAEnB,SAAS,CAACC,EAAE,CAAC,CAAC;YACrDe,SAAS,GACPf,EAAsE,GACnE,IAAI,EAACS,OAAO,CAACM,SAAS,CAACG,UAAU,CAAC,WAAW,EAAEnB,SAAS,CAACC,EAAE,CAAC,CAAC;YAClEgB,SAAS,GACPhB,EAE6C,GAC1C,IAAI,EAACS,OAAO,CAACO,SAAS,CAACE,UAAU,CAAC,WAAW,EAAEnB,SAAS,CAACC,EAAE,CAAC;QACnE,CAAC;QA/ES,MADoBQ,mBAAmB,GAAnBA,mBAAmB;QAG/C,IAAI,CAACA,mBAAmB,EAAE;YACxB,MAAM,IAAIzI,KAAK,CACb,2CAA2C,IACxC6H,MAAO,GAAG,CAAgD,GAAG,GAAE,CACpE,CAAC;QACH;QAEA,IAAIM,mBAAmB,CAACC,MAAM,CAACxI,MAAM,CAACyI,aAAa,EAAE;YACnD,MAAM,IAAIrI,KAAK,CACb,2EACF,CAAC;QACH;QAEAmI,mBAAmB,CAACC,MAAM,CAACxI,MAAM,CAACyI,aAAa,GAAG,IAAI;;;;;YAkExD;;;;;;;GAOF;mBACEe,UAAUA,UAACC,OAAoB,EAAE;gBAC/B,IAAI,CAACA,OAAO,GAAGA,OAAO;YACxB;;;YAEA;;;;;;;;;;;;;;;GAeF;4BACEzF,WAAWA,CAAC0F,QAA+B;+CAA6B,CAAC,CAAC,EAAE,CAA/BxE;gBAC3C,IAAMyE,QAAQ,GAAGzE,OAAO,CAACyE,QAAQ,IAAI/B,yBAAyB;gBAC9D,IAAMgC,SAAS,GAAG1E,OAAO,CAACf,GAAG;gBAE7B,IAAI,CAACyE,SAAS,GAAG,IAAI,CAACA,SAAS,CAC5BjG,MAAM,CAAC,CAAC;2DAACwB,GAAG,CAAC;2BAAKA,GAAG,KAAKyF,SAAS,CAAC;mBACpCC,MAAM,CAAC;oBAAC;wBAACD,SAAS,IAAI/B,oBAAoB;wBAAE8B,QAAQ;wBAAED,QAAQ;qBAAC;iBAAC,CAAC,CACjEI,IAAI,CAAC,CAAC;2DAAGC,CAAC,CAAC,EAAE,8CAAGC,CAAC,CAAC;2BAAKC,MAAM,CAACD,CAAC,CAAC,GAAGC,MAAM,CAACF,CAAC,CAAC,CAAC;;YAClD;;;YAEA;;;;;GAKF;mBACEG,cAAcA,UAACR,QAAwC,EAAW;gBAChE,IAAIS,KAAa;gBACjB,IAAI,OAAOT,QAAQ,KAAK,QAAQ,EAAE;oBAChCS,KAAK,GAAG,IAAI,CAACvB,SAAS,CAACwB,SAAS,CAAC,CAAC;+DAACjG,GAAG,CAAC;+BAAKA,GAAG,KAAKuF,QAAQ,CAAC;;gBAC/D,CAAC,MAAM;oBACLS,KAAK,GAAG,IAAI,CAACvB,SAAS,CAACwB,SAAS,CAAC,CAAC;+DAAKC,IAAI,CAAC;+BAAKA,IAAI,KAAKX,QAAQ,CAAC;;gBACrE;gBAEA,IAAIS,KAAK,GAAG,CAAC,CAAC,EAAE;oBACd,IAAI,CAACvB,SAAS,CAAC0B,MAAM,CAACH,KAAK,EAAE,CAAC,CAAC;oBAC/B,OAAO,IAAI;gBACb;gBACA,OAAO,KAAK;YACd;;;YAEA;;GAEF;mBACEI,kBAAkBA,CAAA,EAAG;gBACnB,IAAI,CAAC3B,SAAS,GAAG,EAAE;YACrB;;;YAEgB4B,SAASA,CAAA,EAAG;mBAA5B;;;oBACE,IAAI,CAAC,IAAI,EAAC7B,gBAAgB,EAAE;;wBAC1B,IAAM8B,UAAU,GAAG,6BAAWhB,OAAO,kDAAZ,IAAI,UAAUiB,OAAO,CAACxC,SAAS,CAAC;wBACzD,IAAI,EAACpB,KAAK,GAAG2D,UAAU,GAAGzE,IAAI,CAAC2E,KAAK,CAACF,UAAU,CAAC,GAAG,CAAC,CAAC;wBACrD,IAAI,EAAC9B,gBAAgB,GAAG,IAAI;oBAC9B;gBACF;;;;;4BAEgBiC,SAASA,CAAA,EAAG;;uBAA5B;;oBACE,uBAAM,IAAI,EAACnB,OAAO,gEAAEoB,OAAO,CAAC3C,SAAS,EAAElC,IAAI,CAACC,SAAS,CAAC,IAAI,EAACa,KAAK,CAAC,CAAC;gBACpE;;;;;4BAEUgE,WAAWA,CAACxK,KAAU,EAAEyK,OAAe,EAAE,GAAGxJ,IAAW,EAAS;;qCAChEjB,KAAK;oBAACyK,OAAO;kBAArB1K,OAAuB,uBAAGkB,IAAI;oBAAE;wBAAEyJ,aAAa,EAAE1K;oBAAM,CAAC;iBAAC;gBACzD,IAAI,CAAC2K,IAAI,CAAC,OAAO,EAAE;oBAAEF,OAAO;oBAAExJ,IAAI;oBAAEyJ,aAAa,EAAE1K;gBAAM,CAAC,CAAC;gBAC3D,MAAMA,KAAK;YACb;;;iBA2BM4K,aAAaA;mBAzBnB;;;;;;;;;;;;;;GAcF,GAQE;YACA;YACA;mCAEEC,UAAkB,EAClBC,QAAiB,OAEjBE,cAAuB,EACN;4DAFEzL,oCAAiB,CAAC,CAAC,IAAtCwL;;;oBAGA,IAAInG,OAA6B,GAAG;wBAClCjB,QAAQ,EAAEkH,UAAU;wBACpBjK,MAAM,EAAEkK,QAAQ;wBAChBlH,YAAY,EAAEoH,cAAc;wBAC5BzG,cAAc,EAAEwG;oBAClB,CAAC;oBAED,IAAIlI,OAAkC;oBAEtC,IAAI;wBACF,MAAM,IAAI,EAACqH,SAAS,CAAC,CAAC;wBAEtB,IAAI,CAAC,IAAI,EAAC5B,SAAS,CAAC/B,MAAM,EAAE;4BAC1B,MAAM,IAAIzG,KAAK,CACb,iGACF,CAAC;wBACH;wBAEA,IAAI,IAAI,EAAC0I,OAAO,CAACC,aAAa,CAACwC,MAAM,CAAC,CAAC,EAAE;4BACpCrG,WAAY,MAAM,IAAI,EAAC4D,OAAO,CAACC,aAAa,CAACyC,OAAO,CAAC;gCAAEtG;4BAAQ,EAAC,CAAC;wBACtE;wBAEA,IAAI,EAAC+F,IAAI,CAAC,WAAW,EAAE;4BACrBhH,QAAQ,EAAEiB,OAAO,CAACjB,QAAQ;4BAC1B/C,MAAM,EAAEgE,OAAO,CAAChE,MAAAA;wBAClB,CAAC,CAAC;wBAEF,IAAI,IAAI,EAAC4H,OAAO,CAACrI,OAAO,CAAC8K,MAAM,CAAC,CAAC,EAAE;4BACjC;4BACApI,OAAO,GAAG,MAAM,IAAI,EAAC2F,OAAO,CAACrI,OAAO,CAAC+K,OAAO,CAAC;gCAC3CtG,OAAO;gCACP0D,SAAS,EAAE,IAAI,EAACA,SAAAA;4BAClB,CAAC,CAAC;wBACJ,CAAC,MAAM;4BACL;4BACA,kBAA4B,IAAI,EAACA,SAAS,CAAE;gCAAvC,MAAM,mCAAKnI,OAAO,CAAC;gCACtB,IAAMgL,eAAe,GAAG,MAAMhL,OAAO,CACnCyE,OAAO,CAACjB,QAAQ,EAChBiB,OAAO,CAAChE,MAAM,EACdgE,OAAO,CAAChB,YACV,CAAC;gCACD,IAAIuH,eAAe,EAAE;oCACnBtI,OAAO,GAAGsI,eAAe;oCACzB;gCACF;4BACF;wBACF;wBAEA,IAAI,CAACtI,OAAO,EAAE;4BACZ,MAAM,IAAI/C,KAAK,CACb,0CAA0C8E,OAAO,CAACjB,QAAQ,EAC5D,CAAC;wBACH;wBAEA,IAAI,IAAI,EAAC6E,OAAO,CAACE,YAAY,CAACuC,MAAM,CAAC,CAAC,EAAE;;qCACd,MAAM,IAAI,EAACzC,OAAO,CAACE,YAAY,CAACwC,OAAO,CAAC;gCAC9DtG,OAAO;gCACP/B;4BACF,CAAC,CAAC,mBAHC+B,OAAO,mBAAE/B;wBAId;wBAEA,IAAI,OAAOA,OAAO,CAAC9B,GAAG,KAAK,UAAU,EAAE;4BACrC8B,OAAO,CAAC9B,GAAG,GAAG8B,OAAO,CAAC9B,GAAG,CAAC6D,OAAO,CAACL,cAAc,CAAC;wBACnD;oBACF,CAAC,CAAC,OAAOvE,KAAK,EAAE;wBACd6C,OAAO,GAAG,MAAM,IAAI,EAAC2F,OAAO,CAACG,YAAY,CAACuC,OAAO,CAAC;4BAChDtG,OAAO;4BACP5E,KAAK,EAAEA;wBACT,CAAC,CAAC;wBAEF,IAAI,CAAC6C,OAAO,EAAE;4BACZ,IAAI,EAAC2H,WAAW,CACdxK,KAAK,EACL,wDAAwD,EACxD;gCAAE2D,QAAQ,EAAEiB,OAAO,CAACjB,QAAQ;gCAAE/C,MAAM,EAAEgE,OAAO,CAAChE,MAAAA;4BAAO,CACvD,CAAC;wBACH;oBACF;oBAEA,IAAI;wBACF,IAAMwK,MAAM,GAAG,MAAM,IAAI,EAACC,YAAY,CACpCzG,OAAO,CAACjB,QAAQ,EAChBiB,OAAO,CAAChE,MAAM,EACdiC,OACF,CAAC;wBACD,IAAI,EAAC8H,IAAI,CAAC,UAAU,EAAES,MAAM,CAACnE,QAAQ,CAAC,CAAC,CAAC;wBACxC,OAAOmE,MAAM;oBACf,CAAC,CAAC,OAAOpL,KAAK,EAAE;wBACd,IAAI,EAACwK,WAAW,CAACxK,KAAK,EAAE,+CAA+C,EAAE;4BACvE2D,QAAQ,EAAEiB,OAAO,CAACjB,QAAQ;4BAC1B/C,MAAM,EAAEgE,OAAO,CAAChE,MAAAA;wBAClB,CAAC,CAAC;oBACJ;gBACF;;;;;4BAEcyK,YAAYA,CACxB1H,QAAgB,EAChB/C,MAA0B,EAC1BiC,OAAsB,EACtB;;6CAJF;oBAKE,IAAMuI,MAAM,GAAGhH,cAAM,CAACf,IAAI,CAAC;wBAAEM,QAAQ;wBAAE/C;oBAAO,CAAC,EAAEiC,OAAO,EAAE,KAAK,CAAC;oBAChE,IAAMyI,QAAQ,GAAGF,MAAM,CAACvI,OAAO,CAACyC,QAAQ;oBAExC;oBACA,IAAIzC,OAAO,CAAC0I,kBAAkB,EAAE;wBAC9B;wBACA,IAAMvG,KAAK,GAAG,MAAMnC,OAAO,CAAC0I,kBAAkB,CAC5C5H,QAAQ,EACR/C,MAAM,EACNwK,MAAM,CAACxE,iBAAiB,CAAC,IAAI,EAACJ,KAAK,CAAC8E,QAAQ,CAAC,CAC/C,CAAC;wBAED;wBACA,IAAItG,KAAK,EAAE;4BACToG,MAAM,CAACvI,OAAO,CAACmC,KAAK,GAAG,IAAI;wBAC7B;oBACF,CAAC,MAAM;wBACL;wBACA,IAAI,CAAC,IAAI,EAACwB,KAAK,CAAC8E,QAAQ,CAAC,EAAE;4BACzBF,MAAM,CAACvI,OAAO,CAACmC,KAAK,GAAG,IAAI;wBAC7B,CAAC,MAAM,IAAIoG,MAAM,CAACrE,aAAa,CAAC,IAAI,EAACP,KAAK,CAAC8E,QAAQ,CAAC,CAAC,EAAE;4BACrDF,MAAM,CAACvI,OAAO,CAACmC,KAAK,GAAG,IAAI;wBAC7B;oBACF;oBAEA,OAAOoG,MAAM;gBACf;;;;;4BAEcI,WAAWA,CAACJ,MAAc,EAAE;;6CAA1C;oBACE,IAAIA,MAAM,CAACvI,OAAO,CAACmC,KAAK,EAAE;wBACxB,IAAMsG,QAAQ,GAAGF,MAAM,CAACvI,OAAO,CAACyC,QAAQ;wBACxC,IAAI,EAACkB,KAAK,CAAC8E,QAAQ,CAAC,GAAGF,MAAM,CAACpE,YAAY,CAAC,CAAC;wBAC5C,MAAM,IAAI,EAACsD,SAAS,CAAC,CAAC;oBACxB;gBACF;;;;iBAyBM3K,UAAUA;mBAAhB;;;;;;;;;;;;GAXF,GAQE;YACA;YACA;gCAEEkL,UAAkB,EAClBC,QAAiB,OAEjBE,cAAuB,EACvB;4DAFmBzL,oCAAiB,CAAC,CAAC,IAAtCwL;;;oBAGA,IAAInG,OAA0B,GAAG;wBAC/BjB,QAAQ,EAAEkH,UAAU;wBACpBjK,MAAM,EAAEkK,QAAQ;wBAChBlH,YAAY,EAAEoH,cAAc;wBAC5BzG,cAAc,EAAEwG;oBAClB,CAAC;oBAED,IAAIU,MAAM,GAAG,KAAK;oBAElB,IAAMnG,QAAQ,GAAGlB,cAAM,CAACU,iBAAiB,CAACF,OAAO,CAACjB,QAAQ,EAAEiB,OAAO,CAAChE,MAAM,CAAC;oBAE3E,IAAI,IAAI,EAACwH,eAAe,CAAC9C,QAAQ,CAAC,EAAE;wBAClC,IAAM,aAAiB,IAAI,EAAC8C,eAAe,CAAC9C,QAAQ,CAAC,CAA7CoG;wBAER;wBACA,IAAIA,UAAU,EAAE;4BACd,MAAM,IAAI,EAACtD,eAAe,CAAC9C,QAAQ,CAAC;wBACtC,CAAC,MAAM;4BACL,OAAO,IAAI,EAAC8C,eAAe,CAAC9C,QAAQ,CAAC;wBACvC;oBACF;oBAEA,IAAMqG,WAAW;yDAAG,MAAAA,CAAA,KAAY;4BAC9B,IAAIP,MAAM,GAAG,MAAM,IAAI,EAACR,aAAa,CACnChG,OAAO,CAACjB,QAAQ,EAChBiB,OAAO,CAAChE,MAAM,EACdgE,OAAO,CAACL,cAAc,EACtBK,OAAO,CAAChB,YACV,CAAC;4BAED,IAAI;gCACF,IAAI,IAAI,EAAC4E,OAAO,CAACI,UAAU,CAACqC,MAAM,CAAC,CAAC,EAAE;;4CACb,MAAM,IAAI,EAACzC,OAAO,CAACI,UAAU,CAACsC,OAAO,CAAC;wCAC3DtG,OAAO;wCACPwG;oCACF,CAAC,CAAC,kBAHCxG,OAAO,iBAAEwG;gCAId;gCAEA,IAAI,EAACT,IAAI,CAAC,SAAS,EAAES,MAAM,CAACnE,QAAQ,CAAC,CAAC,CAAC;gCAEvC,IAAI,IAAI,EAACuB,OAAO,CAACK,IAAI,CAACoC,MAAM,CAAC,CAAC,EAAE;oCAC9BQ,MAAM,GAAG,MAAM,IAAI,EAACjD,OAAO,CAACK,IAAI,CAACqC,OAAO,CAAC;wCACvCtG,OAAO;wCACPwG,MAAM;wCACNzL,UAAU,sCAAE,MAAAA;gDACVgE,QAAQ,oBAAGiB,OAAO,CAACjB,QAAQ,QAC3Bd,OAAO,qBAAGuI,MAAM,CAACvI,OAAO,KACrB;4CACH,MAAM,IAAI,EAAC+I,mBAAmB,CAACjI,QAAQ,EAAEd,OAAO,CAAC;wCACnD;oCACF,CAAC,CAAC;gCACJ,CAAC,MAAM;oCACL,MAAM,IAAI,EAAC+I,mBAAmB,CAAChH,OAAO,CAACjB,QAAQ,EAAEyH,MAAM,CAACvI,OAAO,CAAC;oCAChE4I,MAAM,GAAG,IAAI;gCACf;gCAEA,IAAI,IAAI,EAACjD,OAAO,CAACM,SAAS,CAACmC,MAAM,CAAC,CAAC,EAAE;;6CACZ,MAAM,IAAI,EAACzC,OAAO,CAACM,SAAS,CAACoC,OAAO,CAAC;wCAC1DtG,OAAO;wCACPwG;oCACF,CAAC,CAAC,mBAHCxG,OAAO,kBAAEwG;gCAId;gCAEA,IAAI,EAACT,IAAI,CAAC,QAAQ,EAAES,MAAM,CAACnE,QAAQ,CAAC,CAAC,CAAC;gCACtC,MAAM,IAAI,EAACuE,WAAW,CAACJ,MAAM,CAAC;4BAChC,CAAC,CAAC,OAAOpL,KAAK,EAAE;gCACd,IAAM,OAAWA,KAAiC,CAA1C6L;gCACRJ,MAAM,GAAG,MAAM,IAAI,EAACjD,OAAO,CAACO,SAAS,CAACmC,OAAO,CAAC;oCAC5CtG,OAAO;oCACP5E,KAAK,EAAEA;gCACT,CAAC,CAAC;gCACF,IAAI,CAACyL,MAAM,EAAE;oCACX,IAAI,EAACjB,WAAW,CACdxK,KAAK,EACL,wCAAwC,EACxC6L,IAAI,GAAG,IAAIA,IAAI,GAAG,GAAG,EAAE,EACvBT,MAAM,CAACnE,QAAQ,CAAC,CAClB,CAAC;gCACH;4BACF,CAAC,QAAS;gCACR;gCACA,OAAO,IAAI,EAACmB,eAAe,CAAC9C,QAAQ,CAAC;4BACvC;wBACF,CAAC;;;;;oBAED,IAAI,EAAC8C,eAAe,CAAC9C,QAAQ,CAAC,GAAGqG,WAAW,CAAC,CAAC;oBAC9C,OAAO,IAAI,EAACvD,eAAe,CAAC9C,QAAQ,CAAC;gBACvC;;;;;mBAEA;;;;;;;;;;;;GAYF,YACkBsG,mBAAmBA,CACjCjI,QAAgB,EAChBd,OAA0E,EAC1E;;6CAHF;oBAIE,MAAM,uBAAEoD,KAAK,sCAAG,CAAC,yCAAqBpD,OAAO,aAA1BqD,UAAU,oCAAG;oBAChC,IAAI4F,QAAQ,GAAG7F,KAAK,GAAG,CAAC,CAAC,CAAC;oBAE1B,MAAO6F,QAAQ,GAAG,CAAC,CAAE;wBACnB,IAAI;4BACF,MAAM,IAAI,EAACvD,mBAAmB,CAAC5I,UAAU,CAACgE,QAAQ,EAAEd,OAAO,CAAC;4BAC5D,OAAO,CAAC;wBACV,CAAC,CAAC,OAAO7C,KAAK,EAAE;4BACd8L,QAAQ,EAAE;4BACV,IAAM,OAAW9L,KAAiC,CAA1C6L;4BACR,IAAIC,QAAQ,GAAG,CAAC,IAAIjE,mBAAmB,CAAC/F,QAAQ,CAAC+J,IAAI,CAAC,EAAE;gCACtD,IAAI3F,UAAU,GAAG,CAAC,EAAE;oCAClB,MAAM,IAAIhG,OAAO,EAAEC,OAAO,GAAK4L,UAAU,CAAC5L,OAAO,EAAE+F,UAAU,CAAC,CAAC;gCACjE;4BACF,CAAC,MAAM;gCACL,MAAMlG,KAAK,CAAC,CAAC;4BACf;wBACF;oBACF;gBACF;;;;;mBAEA;;;;;;;;;GASF,YACQc,cAAcA,CAClB6C,QAAgB,EAChB/C,MAAe,OAEfgD,YAAqB,EACrB;0DAFiBrE,oCAAiB,CAAC,CAAC,IAApCgF;;6CAHF;oBAME,IAAMe,QAAQ,GAAGlB,cAAM,CAACU,iBAAiB,CAACnB,QAAQ,EAAE/C,MAAM,CAAC;oBAC3D,IAAI,IAAI,EAACwH,eAAe,CAAC9C,QAAQ,CAAC,EAAE;wBAClC,OAAO,IAAI,EAAC8C,eAAe,CAAC9C,QAAQ,CAAC;oBACvC;oBACA;yDAAoB,MAAAqG,CAAA,KAAY;4BAC9B,IAAMP,MAAM,GAAG,MAAM,IAAI,EAACR,aAAa,CACrCjH,QAAQ,EACR/C,MAAM,EACN2D,cAAc,EACdX,YACF,CAAC;4BAED,IAAI;gCACF,IAAI,EAAC+G,IAAI,CAAC,aAAa,EAAES,MAAM,CAACnE,QAAQ,CAAC,CAAC,CAAC;gCAC3C,MAAM,IAAI,EAACsB,mBAAmB,CAACzH,cAAc,CAAC6C,QAAQ,EAAEyH,MAAM,CAACvI,OAAO,CAAC;gCACvE,MAAM,IAAI,EAAC2I,WAAW,CAACJ,MAAM,CAAC;4BAChC,CAAC,CAAC,OAAOpL,KAAK,EAAE;gCACd,IAAM,OAAWA,KAAiC,CAA1C6L;gCACR,IAAI,EAACrB,WAAW,CACdxK,KAAK,EACL,4CAA4C,EAC5C6L,IAAI,GAAG,IAAIA,IAAI,GAAG,GAAG,EAAE,EACvBT,MAAM,CAACnE,QAAQ,CAAC,CAClB,CAAC;4BACH,CAAC,QAAS;gCACR;gCACA,OAAO,IAAI,EAACmB,eAAe,CAAC9C,QAAQ,CAAC;4BACvC;wBACF,CAAC;wCAxBKqG,WAAW;;;;oBA0BjB,IAAI,EAACvD,eAAe,CAAC9C,QAAQ,CAAC,GAAGqG,WAAW,CAAC,CAAC;oBAC9C,IAAI,EAACvD,eAAe,CAAC9C,QAAQ,CAAC,CAACoG,UAAU,GAAG,IAAI;oBAChD,OAAO,IAAI,EAACtD,eAAe,CAAC9C,QAAQ,CAAC;gBACvC;;;;;mBAEA;;;;;;;;;;GAUF,GACE,SAAM0G,iBAAiBA;oBAACC,SAAmB,oBAAG,EAAE,EAAE;;;oBAChD,IAAI;wBACF,MAAM,IAAI,EAAC/B,SAAS,CAAC,CAAC;wBAEtB,IAAMgC,GAAG,GAAGD,SAAS,CAAC1F,MAAM,GAAG0F,SAAS,GAAG5F,MAAM,CAACC,IAAI,CAAC,IAAI,EAACE,KAAK,CAAC;wBAClE0F,GAAG,CAAC/G,OAAO,EAAExB,QAAQ,IAAK;4BACxB,OAAO,IAAI,EAAC6C,KAAK,CAAC7C,QAAQ,CAAC;4BAC3B,OAAO,IAAI,EAACyE,eAAe,CAACzE,QAAQ,CAAC;wBACvC,CAAC,CAAC;wBAEF,MAAM,IAAI,EAAC2G,SAAS,CAAC,CAAC;wBACtB,MAAM,IAAI,EAAC/B,mBAAmB,CAACyD,iBAAiB,CAACC,SAAS,CAAC;wBAE3D,IAAI,EAACtB,IAAI,CAAC,aAAa,EAAEuB,GAAG,CAAC;wBAC7B,OAAOA,GAAG;oBACZ,CAAC,CAAC,OAAOlM,KAAK,EAAE;wBACd,IAAM,OAAWA,KAAiC,CAA1C6L;wBACR,IAAI,EAACrB,WAAW,CACdxK,KAAK,EACL,+CAA+C,EAC/C6L,IAAI,GAAG,IAAIA,IAAI,GAAG,GAAG,EACvB,CAAC;oBACH;gBACF;;;;YAEA;;;;;;;;GAQF;4BACEM,uBAAuBA,CAACC,YAAoB,EAAEC,eAAuB,EAAE;gBACrE,IAAI,CAAC9D,mBAAmB,CAAC4D,uBAAuB,CAC9CC,YAAY,EACZC,eACF,CAAC;YACH;;;;;mBAtmBA,SAAOrE,IAAIA,CAAA,EAAG;gBACZ,IAAI,CAACC,mBAAmB,CAACC,MAAM,CAACxI,MAAM,CAACyI,aAAa,EAAE;oBACpDF,mBAAmB,CAACC,MAAM,CAACxI,MAAM,CAACyI,aAAa,GAAG,IAAI7I,aAAa,CAAC,CAAC;gBACvE;YACF;;;iBAEWI,MAAMA,CAAA,EAAkB;iBAAnC;gBACE,OAAOuI,mBAAmB,CAACC,MAAM,CAACxI,MAAM,CAACyI,aAAa;YACxD;;;WATW7I,aAAa;;CAAS4H,eAAY,CAAC;;;;;;;;6CClKtB;;;;;;;yCALI,KAAoB;AAElD;AAG0B,UAAAqF,UAAA;IACxB;;;;;GAKF,GASE;;;;;GAKF,GAiFE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAiFF,GACS,SAASC,iBAAiBA,CAC/B5J,MAAmC;;YAMjC0F,SAAS,CAACzE,GAAG,CAAC,GAAG,CAACF,QAAgB,EAAE/C,MAAe;gBACjD,IAAI+C,QAAQ,KAAKE,GAAG,EAAE;oBACpB,IAAM9C,GAAG,GAAG6B,MAAM,CAAC8J,UAAU,CAAC7I,GAAG,CAAC,CAC/B8I,OAAO,CAAC,WAAW,EAAEhJ,QAAQ,CAAC,CAC9BgJ,OAAO,CAAC,UAAU,EAAEF,YAAY,CAAC;oBACpC,OAAO1L,GAAG;gBACZ;gBAEA,IAAIH,MAAM,KAAKiD,GAAG,EAAE;;oBAClB,IAAM9C,GAAG,IAAG,2BAAQ6L,MAAM,mDAAbhK,MAAM,QAAO,CAAGiB,GAAG,CAAC,KAAIjB,MAAM,CAAC8J,UAAU,CAAC7I,IAAI,EAAE8I,OAAO,CAClE,WAAW,EACXhJ,QACF,CAAC;oBAED,IAAI5C,GAAG,EAACe,QAAQ,CAAC,OAAO,CAAC,EAAE;wBACzB,QAAQyC,cAAmD,GACzDA,cAAc,CAACE,CAAC,CAAC1D,GAAG,EAAC4L,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;oBACjD;oBAEA,OAAO5L,GAAG;gBACZ;gBAEA,OAAOnB,SAAS;YAClB,CAAC;QACH;4CA7Be,mBAAmB,EACX,CADvB6M;QAEA,IAAMnE,SAAgD,GAAG,CAAC,CAAC;QAE3D,IAAK,IAAMzE,GAAG,IAAIjB,MAAM,CAAC8J,UAAU,EAAE;QA2BrC,OAAO,CAAC/I,QAAQ,EAAE/C,MAAM;YACtB,IAAMwI,QAAQ,GACZ,CAACxI,MAAM,GAAG0H,SAAS,CAAC1H,MAAM,CAAC,GAAGhB,SAAAA,CAAS,IAAK0I,SAAS,CAAC3E,QAAQ,CAAC;YAEjE,OAAOyF,QAAQ,CAACzF,QAAQ,EAAE/C,MAAM,CAAC;QACnC,CAAC;IACH;IAAC2L,UAAA,CAAAC,iBAAA,GAAAA,iBAAA;;;;;wBAMD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA6BF,yBACS,UACLM,aAAqB,EACrBC,MAAc;yCACN,SAAS,EACC,CADlBC;;YAEA,IAAI,oCAACC,qBAAwB,CAACD,KAAK,CAAC,kGAAEE,eAAe,GAAE;gBACrD;gBACA;gBACA,MAAMC,qBAAwB,CAACH,KAAK,CAAC;gBACrCC,qBAAwB,CAACD,KAAK,CAAC,CAACE,eAAe,GAAG,IAAI;YACxD;YAEA;YACA;YACA;YACA,IAAI,CAACE,IAAI,CAACN,aAAa,CAAC,EAAE;gBACxB;gBACA,MAAMxN,4BAAa,CAACI,MAAM,CAACC,UAAU,CAACmN,aAAa,CAAC;YACtD;YAEA,IAAMO,SAAS,GAAGD,IAAI,CAACN,aAAa,CAAC;YAErC,IAAI,CAACO,SAAS,CAACH,eAAe,EAAE;gBAC9BG,SAAS,CAACH,eAAe,GAAG,IAAI;gBAChC;gBACA,MAAMG,SAAS,CAACrF,IAAI,CAACiF,qBAAwB,CAACD,KAAK,CAAC,CAAC;YACvD;YAEA,IAAMM,OAAO,GAAG,MAAMD,SAAS,CAACE,GAAG,CAACR,MAAM,CAAC;YAC3C,IAAMS,OAAO,IAAGF,OAAO,CAAC,CAAC;YACzB,OAAOE,OAAO;QAChB;eA/BsBX,YAAYA;;IA+BjCN,UAAA,CAAAM,YAAA,GAAAA,YAAA;CAAA,EAjScP,SAAS,KAATA,SAAS;;;;;ACL1B;;;;CAIA;;;;;;;;;AACO,SAAS/M,iBAAiBA,CAAA,EAAwC;IACvE,OAAO0I,mBAAmB;AAC5B;;;;;;;;;;;eCHSqE,oBAAS;;;;mCAJJ,KAAoB;mCACpB,KAAa;mCACb,KAAY;mCACZ,KAAwB;qCACZ,KAAgB;;;;;;;;;;;;;;;;;2CEJjCmB;;;eAAAA,mBAAO;;;;+EAAQ;;;;;;;;2CCAfC;;;eAAAA,uBAAO;;;;mFAAQ;;;;;;;;2CCAfC;;;eAAAA,uBAAO;;;;mFAAQ;;;;;;ACAX;AAEb,IAAMC,cAAc;AACpB,IAAMC,cAAc;AACpB,IAAMC,cAAc;AACpB,IAAMC,cAAc;AACpB,IAAMC,cAAc;AACpB,IAAMC,cAAc;AACpB,IAAMC,cAAc;AACpB,IAAMC,cAAc;AACpB,IAAMC,WAAW;AACjB,IAAMC,YAAY;AAElB,IAAMC,aAAa,CAACC;IAChB,IAAMC,OAAOD,UAAU,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,WAAW;IAChD,OAAO,CAAC,sFAAsF,EAAEC,KAAK,CAAC,EAAED,WAAW;AACvH;AACA,IAAME,mBAAmB,CAACF,WAAWG,cAAczN,MAAM0N;IACrD,IAAMC,MAAM;QACR,GAAG;YACCF,YAAY,CAACH,UAAU;SAC1B,CAAC,EAAE,EAAEA,WAAW;KACpB;IACDtN,QAAQ2N,IAAI,IAAI,CAAC,CAAC,MAAM,EAAElJ,KAAK,SAAS,CAACzE,OAAO;IAChD2N,IAAI,IAAI,CAACN,WAAWC;IACpBI,oBAAoBC,IAAI,IAAI,CAAC,CAAC,0BAA0B,EAAED,kBAAkB;IAC5E,OAAOC,IAAI,IAAI,CAAC;AACpB;AAEA,SAASC;IACLA,WAAWxI,OAAO,MAAM,IAAI,SAASyI,OAAOC,MAAM;QAC9C,IAAI,IAAIC,IAAI,GAAGA,IAAIC,UAAU,MAAM,EAAED,IAAI;YACrC,IAAIE,SAASD,SAAS,CAACD,EAAE;YACzB,IAAI,IAAInL,OAAOqL,OAAO,IAAI7I,OAAO,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC6I,QAAQrL,MAAMkL,MAAM,CAAClL,IAAI,GAAGqL,MAAM,CAACrL,IAAI;QAC1G;QACA,OAAOkL;IACX;IACA,OAAOF,SAAS,KAAK,CAAC,IAAI,EAAEI;AAChC;AAEA,IAAME,iBAAiB;IACnB,CAACvB,YAAY,EAAE;IACf,CAACC,YAAY,EAAE;IACf,CAACC,YAAY,EAAE;IACf,CAACC,YAAY,EAAE;IACf,CAACC,YAAY,EAAE;IACf,CAACC,YAAY,EAAE;IACf,CAACC,YAAY,EAAE;IACf,CAACC,YAAY,EAAE;AACnB;AACA,IAAMiB,cAAc;IAChB,CAAChB,SAAS,EAAE;AAChB;AACA,IAAMiB,eAAe;IACjB,CAAChB,UAAU,EAAE;AACjB;AACA,IAAMK,eAAeG,SAAS,CAAC,GAAGM,gBAAgBC,aAAaC;AAE/D7B,iBAAiB,GAAGa;AACpBb,mBAAmB,GAAGI;AACtBJ,mBAAmB,GAAGK;AACtBL,mBAAmB,GAAGM;AACtBN,mBAAmB,GAAGO;AACtBP,mBAAmB,GAAGQ;AACtBR,mBAAmB,GAAGS;AACtBT,mBAAmB,GAAGU;AACtBV,mBAAmB,GAAGW;AACtBX,gBAAgB,GAAGY;AACnBZ,oBAAoB,GAAG6B;AACvB7B,oBAAoB,GAAGkB;AACvBlB,wBAAwB,GAAGiB;AAC3BjB,sBAAsB,GAAG2B;AACzB3B,mBAAmB,GAAG4B;;;;;;ACxET;;;;;;;;;;;;AAEb,IAAIE,YAAYjQ,mBAAOA,CAAC,KAAqB;AAC7C,IAAIkQ,MAAMlQ,mBAAOA,CAAC,KAAwB;AAC1C,IAAImQ,aAAanQ,mBAAOA,CAAC,KAAgC;AAEzD,IAAMoQ,eAAe;AACrB,sBAAsB;AACtB,IAAMC,SAASH,IAAI,YAAY,CAACE;AAChC,6EAA6E;AAC7E,SAASE,OAAOC,SAAS,EAAEhB,GAAG;IAC1B,IAAI,CAACgB,WAAW;QACZ5P,MAAM4O;IACV;AACJ;AACA,SAAS5O,MAAM4O,GAAG;IACd,IAAIA,eAAe9O,OAAO;QACtB8O,IAAI,OAAO,GAAG,GAAGa,aAAa,EAAE,EAAEb,IAAI,OAAO,EAAE;QAC/C,MAAMA;IACV;IACA,MAAM,IAAI9O,MAAM,GAAG2P,aAAa,EAAE,EAAEb,KAAK;AAC7C;AACA,SAASrN,KAAKqN,GAAG;IACb,IAAIA,eAAe9O,OAAO;QACtB8O,IAAI,OAAO,GAAG,GAAGa,aAAa,EAAE,EAAEb,IAAI,OAAO,EAAE;QAC/Cc,OAAO,IAAI,CAACd;IAChB,OAAO;QACHc,OAAO,IAAI,CAACd;IAChB;AACJ;AAEA,SAASiB,cAAcC,GAAG,EAAE/F,IAAI;IAC5B,IAAI+F,IAAI,SAAS,CAAC,CAACC,QAAOA,UAAShG,UAAU,CAAC,GAAG;QAC7C+F,IAAI,IAAI,CAAC/F;IACb;IACA,OAAO+F;AACX;AACA,SAASE,QAAQ7Q,UAAU;IACvB,IAAI,aAAaA,cAAcA,WAAW,OAAO,EAAE;QAC/C,OAAO,GAAGA,WAAW,IAAI,CAAC,CAAC,EAAEA,WAAW,OAAO,EAAE;IACrD,OAAO,IAAI,WAAWA,cAAcA,WAAW,KAAK,EAAE;QAClD,OAAO,GAAGA,WAAW,IAAI,CAAC,CAAC,EAAEA,WAAW,KAAK,EAAE;IACnD,OAAO;QACH,OAAO,GAAGA,WAAW,IAAI,EAAE;IAC/B;AACJ;AACA,SAAS8Q,sBAAsBjM,MAAM;IACjC,OAAO,OAAOA,OAAO,KAAK,KAAK;AACnC;AACA,SAASkM,kBAAkBlM,MAAM;IAC7B,OAAO,CAACA,OAAO,KAAK,CAAC,QAAQ,CAAC,YAAYA,OAAO,KAAK,CAAC,QAAQ,CAAC;AACpE;SAEemM,YAAYC,QAAQ,EAAEC,WAAW;WAAjCF;;SAAAA;IAAAA,eADf,8DAA8D;IAC9D,gCAA2BC,QAAQ,EAAEC,WAAW;QAC5C,IAAI;YACA,IAAMC,MAAM,MAAMF;YAClB,OAAOE;QACX,EAAE,OAAOC,GAAG;YACR,CAACF,eAAe9O,KAAKgP;YACrB;QACJ;IACJ;WAReJ;;AASf,SAASK,SAASC,GAAG;IACjB,OAAOA,OAAO,OAAOA,QAAQ;AACjC;AACA,IAAMC,iBAAiBrK,OAAO,SAAS,CAAC,QAAQ;AAChD,wDAAwD;AACxD,SAASsK,cAAcF,GAAG;IACtB,OAAOC,eAAe,IAAI,CAACD,SAAS;AACxC;AACA,SAASG,uBAAuBC,IAAI,EAAEC,IAAI;IACtC,IAAMC,UAAU;IAChB,8CAA8C;IAC9C,IAAMC,eAAeH,KAAK,OAAO,CAACE,SAAS,IAAI,OAAO,CAAC,OAAO;IAC9D,IAAME,eAAeH,KAAK,OAAO,CAACC,SAAS,IAAI,OAAO,CAAC,OAAO;IAC9D,4CAA4C;IAC5C,OAAOC,iBAAiBC;AAC5B;AACA,SAASC,aAAatM,OAAO;IACzB,OAAOuM,MAAM,OAAO,CAACvM,WAAWA,UAAU;QACtCA;KACH;AACL;AACA,SAASwM,+BAA+BC,QAAQ;IAC5C,IAAMC,yBAAyB;QAC3B,KAAK;QACL,MAAM;QACN,YAAY;IAChB;IACA,IAAI/B,IAAI,YAAY,MAAMA,IAAI,gBAAgB,IAAI;QAC9C,OAAO,iBAAiB8B,WAAW;YAC/B,KAAKA,SAAS,WAAW;YACzB,MAAMA,SAAS,eAAe;YAC9B,YAAYA,SAAS,UAAU;QACnC,IAAIC;IACR;IACA,IAAI,oBAAoBD,UAAU;QAC9B,OAAO;YACH,KAAKA,SAAS,cAAc,IAAIC,uBAAuB,GAAG;YAC1D,MAAMD,SAAS,kBAAkB,IAAIC,uBAAuB,IAAI;YAChE,YAAYD,SAAS,UAAU;QACnC;IACJ;IACA,OAAOC;AACX;AACA,IAAMC,qBAAqB,CAACxB,OAAMyB;IAC9B,kCAAkC;IAClC,IAAIzP;IACJ,IAAIgO,MAAK,QAAQ,CAAC,MAAM;QACpBhO,aAAagO,MAAK,KAAK,CAAC,GAAG,CAAC;IAChC,OAAO;QACHhO,aAAagO;IACjB;IACA,IAAIyB,QAAQ,UAAU,CAAC,MAAM;QACzBA,UAAUA,QAAQ,KAAK,CAAC;IAC5B;IACAzP,aAAaA,aAAayP;IAC1B,OAAOzP;AACX;AAEA,IAAM0P,gBAAgB,OAAO5R,eAAe,WAAWA,aAAa6R;AACpE,IAAMC,eAAgB;IAClB,IAAI;QACA,sCAAsC;QACtC,OAAOC,SAAS,WAAW;IAC/B,EAAE,OAAOrB,GAAG;QACR,WAAW;QACX,OAAOkB;IACX;AACJ;AACA,IAAMI,SAASF;AACf,SAASG,wBAAwB/C,MAAM,EAAElL,GAAG,EAAE4M,GAAG;IAC7CpK,OAAO,cAAc,CAAC0I,QAAQlL,KAAK;QAC/B,OAAO4M;QACP,cAAc;QACd,UAAU;IACd;AACJ;AACA,SAASsB,mBAAmBhD,MAAM,EAAElL,GAAG;IACnC,OAAOwC,OAAO,cAAc,CAAC,IAAI,CAAC0I,QAAQlL;AAC9C;AACA,wHAAwH;AACxH,mFAAmF;AACnF,gGAAgG;AAChG,IAAI,CAACkO,mBAAmBN,eAAe,oCAAoC;IACvEK,wBAAwBL,eAAe,mCAAmC,CAAC;AAC/E;AACA,IAAMO,gBAAgBP,cAAc,+BAA+B;AACnE,SAASQ,oBAAoBlD,MAAM;IAC/B,IAAImD,wBAAwBC,yBAAyBC,yBAAyBC,yBAAyBC,yBAAyBC;IAChI,IAAIR,mBAAmBhD,QAAQ,eAAe,CAACgD,mBAAmBhD,QAAQ,mBAAmB;QACzF+C,wBAAwB/C,QAAQ,kBAAkBA,OAAO,QAAQ;IACrE;IACA,IAAI,CAACgD,mBAAmBhD,QAAQ,mBAAmB;QAC/C+C,wBAAwB/C,QAAQ,kBAAkB;YAC9C,mBAAmB,EAAE;YACrB,eAAe,EAAE;YACjB,YAAY,CAAC;YACb,WAAW,CAAC;YACZ,sBAAsB,CAAC;YACvB,mBAAmB,IAAIyD;QAC3B;QACAV,wBAAwB/C,QAAQ,YAAYA,OAAO,cAAc;IACrE;IACA,IAAI0D;IACHA,CAAAA,qBAAsBP,CAAAA,yBAAyBnD,OAAO,cAAa,EAAG,iBAAgB,KAAM,OAAO0D,qBAAqBP,uBAAuB,iBAAiB,GAAG,EAAE;IACtK,IAAIQ;IACHA,CAAAA,iBAAkBP,CAAAA,0BAA0BpD,OAAO,cAAa,EAAG,aAAY,KAAM,OAAO2D,iBAAiBP,wBAAwB,aAAa,GAAG,EAAE;IACxJ,IAAIQ;IACHA,CAAAA,cAAeP,CAAAA,0BAA0BrD,OAAO,cAAa,EAAG,UAAS,KAAM,OAAO4D,cAAcP,wBAAwB,UAAU,GAAG,CAAC;IAC3I,IAAIQ;IACHA,CAAAA,aAAcP,CAAAA,0BAA0BtD,OAAO,cAAa,EAAG,SAAQ,KAAM,OAAO6D,aAAaP,wBAAwB,SAAS,GAAG,CAAC;IACvI,IAAIQ;IACHA,CAAAA,wBAAyBP,CAAAA,0BAA0BvD,OAAO,cAAa,EAAG,oBAAmB,KAAM,OAAO8D,wBAAwBP,wBAAwB,oBAAoB,GAAG,CAAC;IACnL,IAAIQ;IACHA,CAAAA,qBAAsBP,CAAAA,0BAA0BxD,OAAO,cAAa,EAAG,iBAAgB,KAAM,OAAO+D,qBAAqBP,wBAAwB,iBAAiB,GAAG,IAAIC;AAC9K;AACAP,oBAAoBR;AACpBQ,oBAAoBN;AACpB,SAASoB;IACLtB,cAAc,cAAc,CAAC,iBAAiB,GAAG,EAAE;IACnDA,cAAc,cAAc,CAAC,aAAa,GAAG,EAAE;IAC/CA,cAAc,cAAc,CAAC,UAAU,GAAG,CAAC;IAC3CA,cAAc,cAAc,CAAC,SAAS,GAAG,CAAC;IAC1CA,cAAc,cAAc,CAAC,oBAAoB,GAAG,CAAC;IACrDpL,OAAO,IAAI,CAAC2L,eAAe,OAAO,CAAC,CAACnO;QAChC,OAAOmO,aAAa,CAACnO,IAAI;IAC7B;AACJ;AACA,SAASmP,4BAA4BC,kBAAkB;IACnDxB,cAAc,cAAc,CAAC,aAAa,CAAC,IAAI,CAACwB;AACpD;AACA,SAASC;IACL,OAAOzB,cAAc,cAAc,CAAC,qBAAqB;AAC7D;AACA,SAAS0B,+BAA+BC,qBAAqB,EAAEC;QAAAA,UAAAA,iBAAU9D,IAAI,WAAW,KAAzB8D;IAC3D,IAAIC,SAAS;QACT7B,cAAc,cAAc,CAAC,qBAAqB,GAAG2B;QACrD3B,cAAc,cAAc,CAAC,6BAA6B,GAAG;IACjE;AACJ;AACA,wDAAwD;AACxD,SAAS8B,mBAAmBxE,MAAM,EAAElL,GAAG;IACnC,IAAI,OAAOA,QAAQ,UAAU;QACzB,IAAM2P,SAASzE,MAAM,CAAClL,IAAI;QAC1B,IAAI2P,QAAQ;YACR,OAAO;gBACH,OAAOzE,MAAM,CAAClL,IAAI;gBAClB,KAAKA;YACT;QACJ,OAAO;YACH,IAAM4P,aAAapN,OAAO,IAAI,CAAC0I;YAC/B,KAAK,IAAM2E,aAAaD,WAAW;gBAC/B,IAA8BE,sCAAAA,UAAU,KAAK,CAAC,UAAvCC,mBAAuBD,qBAALE,IAAKF;gBAC9B,IAAMG,OAAO,GAAGF,iBAAiB,CAAC,EAAE/P,KAAK;gBACzC,IAAMkQ,iBAAiBhF,MAAM,CAAC+E,KAAK;gBACnC,IAAIC,gBAAgB;oBAChB,OAAO;wBACH,OAAOA;wBACP,KAAKD;oBACT;gBACJ;YACJ;YACA,OAAO;gBACH,OAAOlU;gBACP,KAAKiE;YACT;QACJ;IACJ,OAAO;QACH,MAAM,IAAI/D,MAAM;IACpB;AACJ;AACA,IAAMkU,oBAAoB,IAAIrC,aAAa,cAAc,CAAC,UAAU;AACpE,IAAMsC,oCAAoC,CAACC,YAAY7C;IACnD,sDAAsD;IACtD,IAAM8C,YAAYnE,QAAQkE;IAC1B,IAAME,gBAAgBb,mBAAmBlC,UAAU8C,WAAW,KAAK;IACnE,iDAAiD;IACjD,IAAIC,iBAAiB,CAACA,cAAc,OAAO,IAAI,aAAaF,cAAcA,UAAU,CAAC,UAAU,EAAE;QAC7FE,cAAc,OAAO,GAAGF,UAAU,CAAC,UAAU;IACjD;IACA,IAAIE,eAAe;QACf,OAAOA;IACX;IACA,iFAAiF;IACjF,IAAI,aAAaF,cAAcA,UAAU,CAAC,UAAU,EAAE;QAClD,IAAQzQ,UAAYyQ,WAAZzQ,SAAwB4Q,gBAAgB/E,UAAU,gCAAgC,CAAC4E,YAAY;YACnG;SACH;QACD,IAAMI,0BAA0BtE,QAAQqE;QACxC,IAAME,8BAA8BhB,mBAAmB5B,aAAa,cAAc,CAAC,UAAU,EAAE2C,yBAAyB,KAAK;QAC7H,IAAKC,CAAAA,+BAA+B,OAAO,KAAK,IAAIA,4BAA4B,OAAM,MAAO9Q,SAAS;YAClG,OAAO8Q;QACX;IACJ;IACA;AACJ;AACA,IAAMC,oCAAoC,CAACN,aAAaD,kCAAkCC,YAAYvC,aAAa,cAAc,CAAC,UAAU;AAC5I,IAAM8C,oCAAoC,CAACtV,YAAYuV;IACnD,IAAMP,YAAYnE,QAAQ7Q;IAC1BwS,aAAa,cAAc,CAAC,UAAU,CAACwC,UAAU,GAAGO;IACpD,OAAO/C,aAAa,cAAc,CAAC,UAAU;AACjD;AACA,IAAMgD,oBAAoB,CAACC;IACvBjD,aAAa,cAAc,CAAC,UAAU,GAAGrC,UAAU,QAAQ,CAAC,CAAC,GAAGqC,aAAa,cAAc,CAAC,UAAU,EAAEiD;IACxG,OAAO;QACH,IAAMtO,OAAOD,OAAO,IAAI,CAACuO;QACzB,KAAK,IAAM/Q,OAAOyC,KAAK;YACnB,OAAOqL,aAAa,cAAc,CAAC,UAAU,CAAC9N,IAAI;QACtD;IACJ;AACJ;AACA,IAAMgR,wBAAwB,CAAC9E,OAAMxN;IACjC,IAAMuS,iBAAiBvS,cAAc,CAAC,aAAa,EAAEwN,MAAK,SAAS,CAAC;IACpE,IAAMgF,eAAetD,aAAa,CAACqD,eAAe;IAClD,OAAO;QACHA;QACAC;IACJ;AACJ;AACA,oDAAoD;AACpD,mFAAmF;AACnF,oEAAoE;AACpE,kEAAkE;AAClE,IAAMC,wBAAwB,CAACC;IAC3B,IAAQC,oBAAsBvD,aAAa,cAAc,CAAjDuD;IACRD,QAAQ,OAAO,CAAC,CAACE;QACb,IAAID,kBAAkB,SAAS,CAAC,CAAC1Q,IAAIA,EAAE,IAAI,KAAK2Q,OAAO,IAAI,MAAM,CAAC,GAAG;YACjED,kBAAkB,IAAI,CAACC;QAC3B,OAAO;YACH5T,KAAK,CAAC,WAAW,EAAE4T,OAAO,IAAI,CAAC,qBAAqB,CAAC;QACzD;IACJ;AACJ;AACA,IAAMC,uBAAuB,IAAIzD,aAAa,cAAc,CAAC,iBAAiB;AAC9E,IAAM0D,eAAe,CAACC,KAAK7D,cAAc,cAAc,CAAC,iBAAiB,CAAC,GAAG,CAAC6D;AAC9E,IAAMC,eAAe,CAACD,KAAK7D,cAAc,cAAc,CAAC,iBAAiB,CAAC,GAAG,CAAC6D,IAAI;AAElF,IAAME,gBAAgB;AACtB,IAAMC,sBAAsB;AAE5B,mHAAmH;AACnH,yHAAyH;AACzH,gBAAgB;AAChB,yDAAyD;AACzD,uFAAuF;AACvF,4CAA4C;AAC5C,6CAA6C;AAC7C,4MAA4M;AAC5M,yCAAyC;AACzC,IAAMC,kBAAkB;AACxB,IAAMC,QAAQ,CAAC,OAAO,EAAED,gBAAgB,MAAM,EAAEA,gBAAgB,IAAI,CAAC;AACrE,IAAME,oBAAoB;AAC1B,IAAMC,yBAAyB;AAC/B,IAAMC,uBAAuB;AAC7B,IAAMC,4BAA4B,CAAC,GAAG,EAAEF,uBAAuB,CAAC,EAAEC,qBAAqB,CAAC,CAAC;AACzF,IAAME,kBAAkB,CAAC,MAAM,EAAED,0BAA0B,MAAM,EAAEA,0BAA0B,IAAI,CAAC;AAClG,IAAME,uBAAuB,CAAC,GAAG,EAAEL,kBAAkB,CAAC,EAAEE,qBAAqB,CAAC,CAAC;AAC/E,IAAMI,aAAa,CAAC,KAAK,EAAED,qBAAqB,MAAM,EAAEA,qBAAqB,IAAI,CAAC;AAClF,IAAME,mBAAmB,GAAGP,kBAAkB,QAAQ,CAAC;AACvD,IAAMQ,cAAc,CAAC,SAAS,EAAED,iBAAiB,QAAQ,EAAEA,iBAAiB,QAAQ,EAAEA,iBAAiB,IAAI,EAAED,WAAW,EAAE,EAAEP,MAAM,KAAK,CAAC;AACxI,IAAMU,cAAc,CAAC,MAAM,EAAED,YAAY,WAAW,EAAEA,YAAY,MAAM,CAAC;AACzE,IAAME,mBAAmB,CAAC,CAAC,EAAET,uBAAuB,KAAK,EAAEA,uBAAuB,KAAK,EAAEA,uBAAuB,CAAC,CAAC;AAClH,IAAMU,aAAa,CAAC,QAAQ,EAAED,mBAAmBN,gBAAgB,CAAC,EAAEL,MAAM,CAAC,CAAC;AAC5E,IAAMa,OAAO;AACb,IAAMC,iBAAiB,CAAC,MAAM,EAAED,KAAK,KAAK,EAAED,WAAW,CAAC,EAAEH,YAAY,CAAC,CAAC;AACxE,IAAMM,YAAY;AAClB,IAAMC,YAAY,CAAC,MAAM,EAAED,UAAU,IAAI,CAAC;AAC1C,IAAME,YAAY;AAClB,IAAMC,YAAY,CAAC,MAAM,EAAED,UAAU,IAAI,CAAC;AAC1C,IAAME,OAAO;AACb,IAAMC,QAAQ,CAAC,CAAC,EAAEH,YAAYR,YAAY,CAAC,CAAC;AAC5C,IAAMY,cAAc,CAAC,CAAC,EAAEpB,kBAAkB,KAAK,EAAEA,kBAAkB,KAAK,EAAEA,kBAAkB,CAAC,CAAC;AAC9F,IAAMqB,YAAY,CAAC,EAAE,EAAED,cAAcd,WAAW,CAAC,EAAEP,MAAM,CAAC,CAAC;AAC3D,IAAMuB,QAAQ,CAAC,CAAC,EAAER,YAAYN,YAAY,CAAC,CAAC;AAC5C,IAAMe,SAAS,CAAC,CAAC,EAAEX,KAAK,IAAI,EAAEJ,YAAY,CAAC,CAAC;AAC5C,IAAMgB,aAAa,CAAC,CAAC,EAAEZ,KAAK,KAAK,EAAES,UAAU,KAAK,CAAC;AACnD,2BAA2B;AAC3B,IAAMI,OAAO;AAEb,mHAAmH;AACnH,gBAAgB;AAChB,yDAAyD;AACzD,uFAAuF;AACvF,4CAA4C;AAC5C,6CAA6C;AAC7C,4MAA4M;AAC5M,yCAAyC;AACzC,SAASC,WAAWpI,MAAM;IACtB,OAAO,IAAIqI,OAAOrI;AACtB;AACA,SAASsI,WAAW/T,OAAO;IACvB,OAAO,CAACA,WAAWA,QAAQ,WAAW,OAAO,OAAOA,YAAY;AACpE;AACA,SAASgU,KAAK,GAAGC,GAAG;IAChB,OAAO,CAACC,IAAID,IAAI,MAAM,CAAC,CAACE,GAAGC,IAAIA,EAAED,IAAID;AACzC;AACA,SAASG,kBAAkBC,gBAAgB;IACvC,OAAOA,iBAAiB,KAAK,CAACT,WAAWF;AAC7C;AACA,SAASY,eAAeC,KAAK,EAAEC,KAAK,EAAEC,KAAK,EAAEjC,UAAU;IACnD,IAAMc,cAAc,GAAGiB,MAAM,CAAC,EAAEC,MAAM,CAAC,EAAEC,OAAO;IAChD,IAAIjC,YAAY;QACZ,OAAO,GAAGc,YAAY,CAAC,EAAEd,YAAY;IACzC;IACA,OAAOc;AACX;AAEA,mHAAmH;AACnH,gBAAgB;AAChB,yDAAyD;AACzD,uFAAuF;AACvF,4CAA4C;AAC5C,6CAA6C;AAC7C,4MAA4M;AAC5M,yCAAyC;AACzC,SAASoB,YAAYC,KAAK;IACtB,OAAOA,MAAM,OAAO,CAACf,WAAWjB,cAAc,CAACiC,QAAQjV,MAAMkV,WAAWC,WAAWC,WAAWC,iBAAiBC,YAAYrV,IAAIsV,SAASC,SAASC,SAASC;QACtJ,IAAIvB,WAAWe,YAAY;YACvBlV,OAAO;QACX,OAAO,IAAImU,WAAWgB,YAAY;YAC9BnV,OAAO,CAAC,EAAE,EAAEkV,UAAU,IAAI,CAAC;QAC/B,OAAO,IAAIf,WAAWiB,YAAY;YAC9BpV,OAAO,CAAC,EAAE,EAAEkV,UAAU,CAAC,EAAEC,UAAU,EAAE,CAAC;QAC1C,OAAO;YACHnV,OAAO,CAAC,EAAE,EAAEA,MAAM;QACtB;QACA,IAAImU,WAAWoB,UAAU;YACrBtV,KAAK;QACT,OAAO,IAAIkU,WAAWqB,UAAU;YAC5BvV,KAAK,CAAC,CAAC,EAAEqG,OAAOiP,WAAW,EAAE,MAAM,CAAC;QACxC,OAAO,IAAIpB,WAAWsB,UAAU;YAC5BxV,KAAK,CAAC,CAAC,EAAEsV,QAAQ,CAAC,EAAEjP,OAAOkP,WAAW,EAAE,IAAI,CAAC;QACjD,OAAO,IAAIE,cAAc;YACrBzV,KAAK,CAAC,EAAE,EAAEsV,QAAQ,CAAC,EAAEC,QAAQ,CAAC,EAAEC,QAAQ,CAAC,EAAEC,cAAc;QAC7D,OAAO;YACHzV,KAAK,CAAC,EAAE,EAAEA,IAAI;QAClB;QACA,OAAO,GAAGD,KAAK,CAAC,EAAEC,IAAI,CAAC,IAAI;IAC/B;AACJ;AACA,SAAS0V,oBAAoBX,KAAK;IAC9B,OAAOA,MAAM,OAAO,CAACf,WAAWb,iBAAiB;AACrD;AACA,SAASwC,eAAeZ,KAAK;IACzB,OAAOA,MAAM,OAAO,CAACf,WAAWX,YAAY;AAChD;AACA,SAASuC,eAAeb,KAAK;IACzB,OAAOA,MAAM,OAAO,CAACf,WAAWT,YAAY;AAChD;AACA,SAASsC,YAAYd,KAAK;IACtB,OAAOA,MAAM,IAAI,GAAG,KAAK,CAAC,OAAO,GAAG,CAAC,CAACe,eAAeA,aAAa,OAAO,CAAC9B,WAAWP,QAAQ,CAAClD,GAAGoE,OAAOC,OAAOC,OAAOjC;YAC9G,IAAIsB,WAAWS,QAAQ;gBACnB,OAAO;YACX,OAAO,IAAIT,WAAWU,QAAQ;gBAC1B,OAAO,CAAC,EAAE,EAAED,MAAM,MAAM,EAAEtO,OAAOsO,SAAS,EAAE,MAAM,CAAC;YACvD,OAAO,IAAIT,WAAWW,QAAQ;gBAC1B,IAAIF,UAAU,KAAK;oBACf,OAAO,CAAC,EAAE,EAAEA,MAAM,CAAC,EAAEC,MAAM,IAAI,EAAED,MAAM,CAAC,EAAEtO,OAAOuO,SAAS,EAAE,IAAI,CAAC;gBACrE,OAAO;oBACH,OAAO,CAAC,EAAE,EAAED,MAAM,CAAC,EAAEC,MAAM,IAAI,EAAEvO,OAAOsO,SAAS,EAAE,MAAM,CAAC;gBAC9D;YACJ,OAAO,IAAI/B,YAAY;gBACnB,IAAI+B,UAAU,KAAK;oBACf,IAAIC,UAAU,KAAK;wBACf,OAAO,CAAC,EAAE,EAAED,MAAM,CAAC,EAAEC,MAAM,CAAC,EAAEC,MAAM,CAAC,EAAEjC,WAAW,EAAE,EAAE+B,MAAM,CAAC,EAAEC,MAAM,CAAC,EAAEvO,OAAOwO,SAAS,EAAE,EAAE,CAAC;oBACjG,OAAO;wBACH,OAAO,CAAC,EAAE,EAAEF,MAAM,CAAC,EAAEC,MAAM,CAAC,EAAEC,MAAM,CAAC,EAAEjC,WAAW,EAAE,EAAE+B,MAAM,CAAC,EAAEtO,OAAOuO,SAAS,EAAE,IAAI,CAAC;oBAC1F;gBACJ,OAAO;oBACH,OAAO,CAAC,EAAE,EAAED,MAAM,CAAC,EAAEC,MAAM,CAAC,EAAEC,MAAM,CAAC,EAAEjC,WAAW,EAAE,EAAEvM,OAAOsO,SAAS,EAAE,MAAM,CAAC;gBACnF;YACJ,OAAO;gBACH,IAAIA,UAAU,KAAK;oBACf,IAAIC,UAAU,KAAK;wBACf,OAAO,CAAC,EAAE,EAAED,MAAM,CAAC,EAAEC,MAAM,CAAC,EAAEC,MAAM,EAAE,EAAEF,MAAM,CAAC,EAAEC,MAAM,CAAC,EAAEvO,OAAOwO,SAAS,EAAE,EAAE,CAAC;oBACnF,OAAO;wBACH,OAAO,CAAC,EAAE,EAAEF,MAAM,CAAC,EAAEC,MAAM,CAAC,EAAEC,MAAM,EAAE,EAAEF,MAAM,CAAC,EAAEtO,OAAOuO,SAAS,EAAE,IAAI,CAAC;oBAC5E;gBACJ;gBACA,OAAO,CAAC,EAAE,EAAED,MAAM,CAAC,EAAEC,MAAM,CAAC,EAAEC,MAAM,EAAE,EAAExO,OAAOsO,SAAS,EAAE,MAAM,CAAC;YACrE;QACJ,IAAI,IAAI,CAAC;AACjB;AACA,SAASoB,YAAYhB,KAAK;IACtB,OAAOA,MAAM,IAAI,GAAG,KAAK,CAAC,OAAO,GAAG,CAAC,CAACe,eAAeA,aAAa,OAAO,CAAC9B,WAAWJ,QAAQ,CAACrD,GAAGoE,OAAOC,OAAOC,OAAOjC;YAC9G,IAAIsB,WAAWS,QAAQ;gBACnB,OAAO;YACX,OAAO,IAAIT,WAAWU,QAAQ;gBAC1B,OAAO,CAAC,EAAE,EAAED,MAAM,MAAM,EAAEtO,OAAOsO,SAAS,EAAE,MAAM,CAAC;YACvD,OAAO,IAAIT,WAAWW,QAAQ;gBAC1B,OAAO,CAAC,EAAE,EAAEF,MAAM,CAAC,EAAEC,MAAM,IAAI,EAAED,MAAM,CAAC,EAAEtO,OAAOuO,SAAS,EAAE,IAAI,CAAC;YACrE,OAAO,IAAIhC,YAAY;gBACnB,OAAO,CAAC,EAAE,EAAE+B,MAAM,CAAC,EAAEC,MAAM,CAAC,EAAEC,MAAM,CAAC,EAAEjC,WAAW,EAAE,EAAE+B,MAAM,CAAC,EAAEtO,OAAOuO,SAAS,EAAE,IAAI,CAAC;YAC1F;YACA,OAAO,CAAC,EAAE,EAAED,MAAM,CAAC,EAAEC,MAAM,CAAC,EAAEC,MAAM,EAAE,EAAEF,MAAM,CAAC,EAAEtO,OAAOuO,SAAS,EAAE,IAAI,CAAC;QAC5E,IAAI,IAAI,CAAC;AACjB;AACA,SAASoB,aAAajB,KAAK;IACvB,OAAOA,MAAM,KAAK,CAAC,OAAO,GAAG,CAAC,CAACe,eAAeA,aAAa,IAAI,GAAG,OAAO,CAAC9B,WAAWH,SAAS,CAACoC,KAAK/C,MAAMyB,OAAOC,OAAOC,OAAOjC;YACvH,IAAMsD,WAAWhC,WAAWS;YAC5B,IAAMwB,WAAWD,YAAYhC,WAAWU;YACxC,IAAMwB,WAAWD,YAAYjC,WAAWW;YACxC,IAAI3B,SAAS,OAAOkD,UAAU;gBAC1BlD,OAAO;YACX;YACAN,aAAa;YACb,IAAIsD,UAAU;gBACV,IAAIhD,SAAS,OAAOA,SAAS,KAAK;oBAC9B,qBAAqB;oBACrB,OAAO;gBACX,OAAO;oBACH,uBAAuB;oBACvB,OAAO;gBACX;YACJ,OAAO,IAAIA,QAAQkD,UAAU;gBACzB,mBAAmB;gBACnB,IAAID,UAAU;oBACVvB,QAAQ;gBACZ;gBACAC,QAAQ;gBACR,IAAI3B,SAAS,KAAK;oBACd,gBAAgB;oBAChB,kBAAkB;oBAClBA,OAAO;oBACP,IAAIiD,UAAU;wBACVxB,QAAQtO,OAAOsO,SAAS;wBACxBC,QAAQ;wBACRC,QAAQ;oBACZ,OAAO;wBACHD,QAAQvO,OAAOuO,SAAS;wBACxBC,QAAQ;oBACZ;gBACJ,OAAO,IAAI3B,SAAS,MAAM;oBACtB,0DAA0D;oBAC1D,4CAA4C;oBAC5CA,OAAO;oBACP,IAAIiD,UAAU;wBACVxB,QAAQtO,OAAOsO,SAAS;oBAC5B,OAAO;wBACHC,QAAQvO,OAAOuO,SAAS;oBAC5B;gBACJ;gBACA,IAAI1B,SAAS,KAAK;oBACdN,aAAa;gBACjB;gBACA,OAAO,GAAGM,OAAOyB,MAAM,CAAC,EAAEC,MAAM,CAAC,EAAEC,QAAQjC,YAAY;YAC3D,OAAO,IAAIuD,UAAU;gBACjB,OAAO,CAAC,EAAE,EAAExB,MAAM,IAAI,EAAE/B,WAAW,EAAE,EAAEvM,OAAOsO,SAAS,EAAE,MAAM,CAAC;YACpE,OAAO,IAAIyB,UAAU;gBACjB,OAAO,CAAC,EAAE,EAAEzB,MAAM,CAAC,EAAEC,MAAM,EAAE,EAAEhC,WAAW,EAAE,EAAE+B,MAAM,CAAC,EAAEtO,OAAOuO,SAAS,EAAE,IAAI,CAAC;YAClF;YACA,OAAOqB;QACX,IAAI,IAAI,CAAC;AACjB;AACA,SAASI,UAAUtB,KAAK;IACpB,OAAOA,MAAM,IAAI,GAAG,OAAO,CAACf,WAAWR,OAAO;AAClD;AACA,SAAS8C,UAAU7B,gBAAgB;IAC/B,OAAOA,iBAAiB,IAAI,GAAG,OAAO,CAACT,WAAWD,OAAO;AAC7D;AAEA,mHAAmH;AACnH,gBAAgB;AAChB,yDAAyD;AACzD,uFAAuF;AACvF,4CAA4C;AAC5C,6CAA6C;AAC7C,4MAA4M;AAC5M,yCAAyC;AACzC,SAASwC,YAAYC,SAAS,EAAEC,WAAW;IACvCD,YAAYnQ,OAAOmQ,cAAcA;IACjCC,cAAcpQ,OAAOoQ,gBAAgBA;IACrC,IAAID,YAAYC,aAAa;QACzB,OAAO;IACX;IACA,IAAID,cAAcC,aAAa;QAC3B,OAAO;IACX;IACA,OAAO,CAAC;AACZ;AACA,SAASC,kBAAkBF,SAAS,EAAEC,WAAW;IAC7C,IAAoBE,kBAAoBH,UAAhC;IACR,IAAoBI,oBAAsBH,YAAlC;IACR,IAAIE,oBAAoBra,aAAaua,QAAQD,oBAAoB;QAC7D,OAAO;IACX;IACA,IAAIC,QAAQF,oBAAoBC,sBAAsBta,WAAW;QAC7D,OAAO,CAAC;IACZ;IACA,IAAIqa,oBAAoBra,aAAasa,sBAAsBta,WAAW;QAClE,OAAO;IACX;IACA,IAAI,IAAIoP,IAAI,GAAGoL,IAAIH,gBAAgB,MAAM,EAAEjL,KAAKoL,GAAGpL,IAAI;QACnD,IAAMqL,eAAeJ,eAAe,CAACjL,EAAE;QACvC,IAAMsL,iBAAiBJ,iBAAiB,CAAClL,EAAE;QAC3C,IAAIqL,iBAAiBC,gBAAgB;YACjC;QACJ;QACA,IAAID,iBAAiBza,aAAa0a,mBAAmB1a,WAAW;YAC5D,OAAO;QACX;QACA,IAAI,CAACya,cAAc;YACf,OAAO;QACX;QACA,IAAI,CAACC,gBAAgB;YACjB,OAAO,CAAC;QACZ;QACA,OAAOT,YAAYQ,cAAcC;IACrC;IACA,OAAO;AACX;AACA,SAASC,eAAeT,SAAS,EAAEC,WAAW;IAC1C,OAAOF,YAAYC,UAAU,KAAK,EAAEC,YAAY,KAAK,KAAKF,YAAYC,UAAU,KAAK,EAAEC,YAAY,KAAK,KAAKF,YAAYC,UAAU,KAAK,EAAEC,YAAY,KAAK,KAAKC,kBAAkBF,WAAWC;AACjM;AACA,SAASS,GAAGV,SAAS,EAAEC,WAAW;IAC9B,OAAOD,UAAU,OAAO,KAAKC,YAAY,OAAO;AACpD;AACA,SAASU,QAAQX,SAAS,EAAEC,WAAW;IACnC,OAAOD,UAAU,QAAQ;QACrB,KAAK;QACL,KAAK;YACD,OAAOU,GAAGV,WAAWC;QACzB,KAAK;YACD,OAAOQ,eAAeT,WAAWC,eAAe;QACpD,KAAK;YACD,OAAOS,GAAGV,WAAWC,gBAAgBQ,eAAeT,WAAWC,eAAe;QAClF,KAAK;YACD,OAAOQ,eAAeT,WAAWC,eAAe;QACpD,KAAK;YACD,OAAOS,GAAGV,WAAWC,gBAAgBQ,eAAeT,WAAWC,eAAe;QAClF,KAAKna;YACD;gBACI,8BAA8B;gBAC9B,OAAO;YACX;QACJ;YACI,OAAO;IACf;AACJ;AAEA,mHAAmH;AACnH,gBAAgB;AAChB,yDAAyD;AACzD,uFAAuF;AACvF,4CAA4C;AAC5C,6CAA6C;AAC7C,4MAA4M;AAC5M,yCAAyC;AACzC,SAAS8a,sBAAsBrC,KAAK;IAChC,OAAOZ,KACP,6BAA6B;IAC7B,wCAAwC;IACxC,oCAAoC;IACpC,oCAAoC;IACpC,8BAA8B;IAC9B,8BAA8B;IAC9B0B,aACA,iCAAiC;IACjC,4DAA4D;IAC5D,oDAAoD;IACpD,oDAAoD;IACpD,uCAAuC;IACvC,uCAAuC;IACvCE,aAAaC,cAAcK,WAAWtB;AAC1C;AACA,SAASsC,WAAWtC,KAAK;IACrB,OAAOZ,KACP,uCAAuC;IACvCW,aACA,uCAAuC;IACvCY,qBACA,wBAAwB;IACxBC,gBACA,wBAAwB;IACxBC,gBAAgBb,MAAM,IAAI,IAAI,KAAK,CAAC,OAAO,IAAI,CAAC;AACpD;AACA,SAASuC,QAAQnX,OAAO,EAAE4U,KAAK;IAC3B,IAAI,CAAC5U,SAAS;QACV,OAAO;IACX;IACA,IAAMoX,cAAcF,WAAWtC;IAC/B,IAAMyC,mBAAmBD,YAAY,KAAK,CAAC,KAAK,GAAG,CAAC,CAACzB,eAAesB,sBAAsBtB,eAAe,IAAI,CAAC;IAC9G,IAAM2B,cAAcD,iBAAiB,KAAK,CAAC,OAAO,GAAG,CAAC,CAAC1D,aAAawC,UAAUxC;IAC9E,IAAM4D,mBAAmBlD,kBAAkBrU;IAC3C,IAAI,CAACuX,kBAAkB;QACnB,OAAO;IACX;IACA,IAA2FC,uCAAAA,sBAAlFC,kBAAkFD,sBAA/DE,eAA+DF,sBAAjDG,eAAiDH,sBAAnCI,eAAmCJ,sBAArBf,oBAAqBe;IAC3F,IAAMlB,cAAc;QAChB,UAAUmB;QACV,SAASlD,eAAemD,cAAcC,cAAcC,cAAcnB;QAClE,OAAOiB;QACP,OAAOC;QACP,OAAOC;QACP,YAAYnB,qBAAqB,OAAO,KAAK,IAAIA,kBAAkB,KAAK,CAAC;IAC7E;IACA,KAAK,IAAM9C,cAAc2D,YAAY;QACjC,IAAMO,sBAAsBxD,kBAAkBV;QAC9C,IAAI,CAACkE,qBAAqB;YACtB,OAAO;QACX;QACA,IAAiFC,0CAAAA,yBAAxEC,gBAAwED,yBAAvDE,aAAuDF,yBAA3CG,aAA2CH,yBAA/BI,aAA+BJ,yBAAnBtB,kBAAmBsB;QACjF,IAAMzB,YAAY;YACd,UAAU0B;YACV,SAASxD,eAAeyD,YAAYC,YAAYC,YAAY1B;YAC5D,OAAOwB;YACP,OAAOC;YACP,OAAOC;YACP,YAAY1B,mBAAmB,OAAO,KAAK,IAAIA,gBAAgB,KAAK,CAAC;QACzE;QACA,IAAI,CAACQ,QAAQX,WAAWC,cAAc;YAClC,OAAO,OAAO,eAAe;QACjC;IACJ;IACA,OAAO;AACX;AAEA,SAAS6B,YAAYC,SAAS,EAAExY,IAAI,EAAE0M,KAAI,EAAE+L,aAAa;IACrD,IAAIvO;IACJ,IAAI,SAASsO,WAAW;QACpB,gDAAgD;QAChDtO,MAAMsO,UAAU,GAAG;IACvB,OAAO,IAAI,SAASA,WAAW;QAC3BtO,MAAM,IAAIrN,QAAQ,OAAO,CAAC2b,UAAU,GAAG;IAC3C,OAAO;QACHtO,MAAM,IAAIrN,QAAQ,OAAO,CAAC;gBAClB,MAAM,IAAIJ,MAAM,CAAC,oBAAoB,EAAEiQ,MAAK,EAAE,CAAC;YACnD;IACR;IACA,IAAIgM,oBAAoBC,kBAAkBC;IAC1C,OAAO3M,UAAU,QAAQ,CAAC;QACtB,MAAM,EAAE;QACR,OAAO,EAAE;QACTjM;QACA,SAAS;IACb,GAAGwY,WAAW;QACV,aAAavM,UAAU,QAAQ,CAAC;YAC5B,iBAAiB,CAAC,CAAC,EAAEuM,UAAU,OAAO,EAAE;YACxC,WAAW;YACX,OAAO;YACP,eAAe;QACnB,GAAGA,UAAU,WAAW;QACxBtO;QACA,QAASsO,CAAAA,aAAa,OAAO,KAAK,IAAIA,UAAU,MAAK,KAAM,SAASA,YAAY,OAAOjc;QACvF,SAAUmc,CAAAA,qBAAqBF,UAAU,OAAM,KAAM,OAAOE,qBAAqB;QACjF,OAAO5K,MAAM,OAAO,CAAC0K,UAAU,KAAK,IAAIA,UAAU,KAAK,GAAG;YACrDG,CAAAA,mBAAmBH,UAAU,KAAI,KAAM,OAAOG,mBAAmB;SACrE;QACD,UAAW,CAACC,CAAAA,sBAAsBJ,UAAU,QAAO,KAAM,OAAOI,sBAAsBH,aAAY,KAAM;IAC5G;AACJ;AACA,SAASI,mBAAmBC,aAAa,EAAEC,WAAW;IAClD,IAAMP,YAAYO,YAAY,MAAM,IAAI,CAAC;IACzC,IAAM/Y,OAAO+Y,YAAY,IAAI;IAC7B,IAAMC,aAAahW,OAAO,IAAI,CAACwV,WAAW,MAAM,CAAC,CAACvL,KAAKgM;QACnD,IAAMC,iBAAiBrL,aAAa2K,SAAS,CAACS,QAAQ;QACtDhM,GAAG,CAACgM,QAAQ,GAAGhM,GAAG,CAACgM,QAAQ,IAAI,EAAE;QACjCC,eAAe,OAAO,CAAC,CAACC;YACpBlM,GAAG,CAACgM,QAAQ,CAAC,IAAI,CAACV,YAAYY,aAAanZ,MAAMiZ,SAASF,YAAY,aAAa;QACvF;QACA,OAAO9L;IACX,GAAG,CAAC;IACJ,IAAM5Q,SAAS4P,UAAU,QAAQ,CAAC,CAAC,GAAG6M,cAAc,MAAM;IAC1D9V,OAAO,IAAI,CAACgW,YAAY,OAAO,CAAC,CAACI;QAC7B,IAAI,CAAC/c,MAAM,CAAC+c,SAAS,EAAE;YACnB/c,MAAM,CAAC+c,SAAS,GAAGJ,UAAU,CAACI,SAAS;QAC3C,OAAO;YACHJ,UAAU,CAACI,SAAS,CAAC,OAAO,CAAC,CAACC;gBAC1B,IAAMC,gBAAgBjd,MAAM,CAAC+c,SAAS,CAAC,IAAI,CAAC,CAACG,YAAYA,UAAU,OAAO,KAAKF,qBAAqB,OAAO;gBAC3G,IAAI,CAACC,eAAe;oBAChBjd,MAAM,CAAC+c,SAAS,CAAC,IAAI,CAACC;gBAC1B;YACJ;QACJ;IACJ;IACA,OAAO;QACHhd;QACA2c;IACJ;AACJ;AACA,SAASQ,UAAUpT,CAAC,EAAEC,CAAC;IACnB,IAAMoT,0BAA0B,CAACrZ;QAC7B,IAAMsZ,kBAAkB,CAACpT,OAAO,KAAK,CAACA,OAAOlG;QAC7C,IAAIsZ,iBAAiB;YACjB,IAAMC,WAAWvZ,QAAQ,KAAK,CAAC;YAC/B,IAAIwZ,eAAexZ;YACnB,IAAI,IAAIuL,IAAI,GAAGA,IAAI,IAAIgO,SAAS,MAAM,EAAEhO,IAAI;gBACxCiO,gBAAgB;YACpB;YACA,OAAOA;QACX;QACA,OAAOxZ;IACX;IACA,IAAImX,QAAQkC,wBAAwBrT,IAAI,CAAC,EAAE,EAAEqT,wBAAwBpT,IAAI,GAAG;QACxE,OAAO;IACX,OAAO;QACH,OAAO;IACX;AACJ;AACA,IAAMwT,cAAc,CAACC,iBAAiBC;IAClC,IAAMhN,WAAWgN,MAAM,SAASC,IAAI,EAAEC,GAAG;QACrC,OAAOT,UAAUQ,MAAMC;IAC3B;IACA,OAAOjX,OAAO,IAAI,CAAC8W,iBAAiB,MAAM,CAAC,CAACE,MAAMC;QAC9C,IAAI,CAACD,MAAM;YACP,OAAOC;QACX;QACA,IAAIlN,SAASiN,MAAMC,MAAM;YACrB,OAAOA;QACX;QACA,8GAA8G;QAC9G,IAAID,SAAS,KAAK;YACd,OAAOC;QACX;QACA,OAAOD;IACX,GAAG;AACP;AACA,IAAME,WAAW,CAAC7d;IACd,OAAOya,QAAQza,OAAO,MAAM,KAAK,OAAOA,OAAO,GAAG,KAAK;AAC3D;AACA,IAAM8d,YAAY,CAAC9d;IACf,OAAOya,QAAQza,OAAO,OAAO;AACjC;AACA,SAAS+d,mCAAmCC,aAAa,EAAE1Q,KAAK,EAAEsP,OAAO;IACrE,IAAMqB,WAAWD,aAAa,CAAC1Q,MAAM,CAACsP,QAAQ;IAC9C,IAAMlM,WAAW,SAASiN,IAAI,EAAEC,GAAG;QAC/B,OAAO,CAACC,SAASI,QAAQ,CAACN,KAAK,KAAKR,UAAUQ,MAAMC;IACxD;IACA,OAAOJ,YAAYQ,aAAa,CAAC1Q,MAAM,CAACsP,QAAQ,EAAElM;AACtD;AACA,SAASwN,kCAAkCF,aAAa,EAAE1Q,KAAK,EAAEsP,OAAO;IACpE,IAAMqB,WAAWD,aAAa,CAAC1Q,MAAM,CAACsP,QAAQ;IAC9C,IAAMlM,WAAW,SAASiN,IAAI,EAAEC,GAAG;QAC/B,IAAMO,oBAAoB,CAACne;YACvB,OAAO6d,SAAS7d,WAAW8d,UAAU9d;QACzC;QACA,IAAIme,kBAAkBF,QAAQ,CAACL,IAAI,GAAG;YAClC,IAAIO,kBAAkBF,QAAQ,CAACN,KAAK,GAAG;gBACnC,OAAOlD,QAAQ0C,UAAUQ,MAAMC;YACnC,OAAO;gBACH,OAAO;YACX;QACJ;QACA,IAAIO,kBAAkBF,QAAQ,CAACN,KAAK,GAAG;YACnC,OAAO;QACX;QACA,OAAOR,UAAUQ,MAAMC;IAC3B;IACA,OAAOJ,YAAYQ,aAAa,CAAC1Q,MAAM,CAACsP,QAAQ,EAAElM;AACtD;AACA,SAAS0N,qBAAqBC,QAAQ;IAClC,IAAIA,aAAa,gBAAgB;QAC7B,OAAOH;IACX;IACA,OAAOH;AACX;AACA,SAASO,mBAAmBC,kBAAkB,EAAE3B,OAAO,EAAE4B,SAAS,EAAEC,YAAY;;QASxE,IAAI3B,eAAeyB,kBAAkB,CAACG,GAAG,IAAIH,kBAAkB,CAACG,GAAG,CAAC9B,QAAQ,EAAE;YAC1E,IAAQ+B,kBAAoB7B,YAApB6B;YACR,IAAMC,oBAAoBR,qBAAqBC;YAC/C,IAAMQ,wBAAwBD,kBAAkBL,oBAAoBG,IAAI9B;YACxE,YAAY;YACZ,IAAMkC,kBAAkB;gBACpB,IAAIhC,YAAY,SAAS,EAAE;oBACvB,IAAI,OAAO6B,oBAAoB,YAAY,CAACzD,QAAQ2D,uBAAuBF,kBAAkB;wBACzF,IAAMzP,MAAM,CAAC,QAAQ,EAAE2P,sBAAsB,MAAM,EAAEA,yBAAyBN,kBAAkB,CAACG,GAAG,CAAC9B,QAAQ,CAACiC,sBAAsB,CAAC,IAAI,CAAC,4BAA4B,EAAEjC,QAAQ,qCAAqC,EAAE4B,UAAU,IAAI,CAAC,aAAa,EAAEG,gBAAgB,CAAC,CAAC;wBACvQ,IAAI7B,YAAY,aAAa,EAAE;4BAC3Bxc,MAAM4O;wBACV,OAAO;4BACHrN,KAAKqN;wBACT;oBACJ;oBACA,OAAOqP,kBAAkB,CAACG,GAAG,CAAC9B,QAAQ,CAACiC,sBAAsB;gBACjE,OAAO;oBACH,IAAIF,oBAAoB,SAASA,oBAAoB,KAAK;wBACtD,OAAOJ,kBAAkB,CAACG,GAAG,CAAC9B,QAAQ,CAACiC,sBAAsB;oBACjE;oBACA,IAAI3D,QAAQ2D,uBAAuBF,kBAAkB;wBACjD,OAAOJ,kBAAkB,CAACG,GAAG,CAAC9B,QAAQ,CAACiC,sBAAsB;oBACjE;oBACA,KAAK,WAAoClY,OAAO,OAAO,CAAC4X,kBAAkB,CAACG,GAAG,CAAC9B,QAAQ,EAAE;wBAApF,uCAAOmC,sBAAYC;wBACpB,IAAI9D,QAAQ6D,YAAYJ,kBAAkB;4BACtC,OAAOK;wBACX;oBACJ;gBACJ;YACJ;YACA,IAAMC,SAAS;gBACX,eAAeV;gBACf,OAAOG;gBACP9B;gBACA,SAASiC;gBACT,kBAAkB1M,OAAO,cAAc;gBACvC,UAAU2M;YACd;YACA,IAAMI,gBAAgBT,aAAa,IAAI,CAACQ,WAAWA;YACnD;mBAAOC,cAAc,QAAQ;YAAE;QACnC;IACJ;IAjDA,IAAI,CAACX,oBAAoB;QACrB;IACJ;IACA,IAAQzB,cAAiD0B,UAAjD1B,gCAAiD0B,UAApClR,OAAAA,sCAAQwI,kCAAeuI,WAAaG,UAAbH;IAC5C,IAAMc,SAAS1N,MAAM,OAAO,CAACnE,SAASA,QAAQ;QAC1CA;KACH;IACD,KAAK,IAAMoR,MAAMS;;;;AA2CrB;AACA,SAASC;IACL,OAAOjN,OAAO,cAAc,CAAC,SAAS;AAC1C;AACA,SAASkN,uBAAuBna,OAAO;IACnC,IAAQ0X,UAAsC1X,QAAtC0X,SAAS0C,eAA6Bpa,QAA7Boa,cAAc3C,aAAezX,QAAfyX;IAC/B,IAAMmC,kBAAkB,CAACS;QACrB,IAAI,CAACA,eAAe;YAChB,OAAOrf;QACX;QACA,IAAMud,kBAAkB,CAAC;QACzB8B,cAAc,OAAO,CAAC,CAACvf;YACnByd,eAAe,CAACzd,OAAO,OAAO,CAAC,GAAGA;QACtC;QACA,IAAM0Q,WAAW,SAASiN,IAAI,EAAEC,GAAG;YAC/B,OAAO,CAACC,SAASJ,eAAe,CAACE,KAAK,KAAKR,UAAUQ,MAAMC;QAC/D;QACA,IAAM4B,aAAahC,YAAYC,iBAAiB/M;QAChD,OAAO+M,eAAe,CAAC+B,WAAW;IACtC;IACA,IAAIC;IACJ,IAAM/V,WAAY+V,CAAAA,yBAAyBH,gBAAgB,OAAO,KAAK,IAAIA,aAAa,QAAO,KAAM,OAAOG,yBAAyBX;IACrI,OAAOnY,OAAO,MAAM,CAAC,CAAC,GAAG+C,SAASiT,UAAU,CAACC,QAAQ,GAAG0C,gBAAgB,OAAO,KAAK,IAAIA,aAAa,eAAe;AACxH;AAEA,IAAMI,aAAa;IACfpB;IACAc;AACJ;AACA,IAAMO,cAAc;IAChBxN;IACAF;IACAoB;IACAC;IACAE;IACAC;IACAI;IACAS;IACAC;IACAO;IACAC;IACAE;IACAE;IACAG;IACAI;IACAC;IACAE;AACJ;AACA,IAAI+J,UAAU;IACV,QAAQD;IACR,OAAOD;AACX;AAEA,SAASG;IACL,YAAY;IACZ,OAAO,KAAkD,GAAGC,WAA2BA,GAAG,CAAE;AAChG;AAEA,sDAAsD;AACtD,2EAA2E;AAC3E,iDAAiD;AACjD,yEAAyE;AACzE,SAASC,6BAA6BC,OAAO,EAAEpK,EAAE;IAC7C,KAAK,IAAMtR,UAAU0b,QAAQ;QACzB,gBAAgB;QAChB,IAAMC,gBAAgBrK,GAAG,UAAU,CAACtR,OAAO,IAAI;QAC/C,IAAI4b,SAAStK,GAAG,OAAO,CAACtR,OAAO,IAAI,EAAE;QACrC,IAAI2b,eAAe;YACf,IAAIC,OAAO,UAAU,CAAC,MAAM;gBACxB,IAAMC,iBAAiB7b,OAAO,IAAI;gBAClC4b,SAAS,CAAC,CAAC,EAAEA,QAAQ;gBACrB,OAAO;oBACHC;oBACAD;oBACA5b;gBACJ;YACJ,OAAO,IAAI4b,WAAW,IAAI;gBACtB,OAAO;oBACH,gBAAgB5b,OAAO,IAAI;oBAC3B,QAAQ;oBACRA;gBACJ;YACJ;QACJ;QACA,cAAc;QACd,IAAM8b,iBAAiB9b,OAAO,KAAK,IAAIsR,GAAG,UAAU,CAACtR,OAAO,KAAK;QACjE,IAAI+b,kBAAkB/b,OAAO,KAAK,IAAIsR,GAAG,OAAO,CAACtR,OAAO,KAAK,EAAE;QAC/D,IAAIA,OAAO,KAAK,IAAI8b,gBAAgB;YAChC,IAAIC,mBAAmBA,gBAAgB,UAAU,CAAC,MAAM;gBACpD,IAAMC,kBAAiBhc,OAAO,KAAK;gBACnC+b,kBAAkB,CAAC,CAAC,EAAEA,iBAAiB;gBACvC,OAAO;oBACHC,gBAAAA;oBACA,QAAQD;oBACR/b;gBACJ;YACJ,OAAO,IAAI+b,oBAAoB,IAAI;gBAC/B,OAAO;oBACH,gBAAgB/b,OAAO,KAAK;oBAC5B,QAAQ;oBACRA;gBACJ;YACJ;QACJ;IACJ;IACA;AACJ;AACA,oDAAoD;AACpD,SAASic,YAAYP,OAAO,EAAEte,WAAW;IACrC,KAAK,IAAM4C,UAAU0b,QAAQ;QACzB,IAAMC,gBAAgBve,gBAAgB4C,OAAO,IAAI;QACjD,IAAI2b,eAAe;YACf,OAAO3b;QACX;QACA,IAAM8b,iBAAiB9b,OAAO,KAAK,IAAI5C,gBAAgB4C,OAAO,KAAK;QACnE,IAAI8b,gBAAgB;YAChB,OAAO9b;QACX;IACJ;IACA;AACJ;AAEA,SAASkc,gBAAgBjL,OAAO,EAAEkL,aAAa;IAC3C,IAAMC,gBAAgBhL;IACtB,6BAA6B;IAC7B,IAAIgL,cAAc,MAAM,GAAG,GAAG;QAC1BA,cAAc,OAAO,CAAC,CAACjL;YACnB,IAAIF,WAAW,OAAO,KAAK,IAAIA,QAAQ,IAAI,CAAC,CAAClL,OAAOA,KAAK,IAAI,KAAKoL,OAAO,IAAI,GAAG;gBAC5EF,QAAQ,IAAI,CAACE;YACjB;QACJ;IACJ;IACA,IAAIF,WAAWA,QAAQ,MAAM,GAAG,GAAG;QAC/BA,QAAQ,OAAO,CAAC,CAACE;YACbgL,cAAc,OAAO,CAAC,CAACE;gBACnBA,aAAa,WAAW,CAAClL;YAC7B;QACJ;IACJ;IACA,OAAOF;AACX;SAEeqL,aAAajN,CAA6B;WAA1CiN;;SAAAA;IAAAA,gBAAf,gCAA4BjN;YAAE7T,QAAF6T,IAAE7T,OAAO+gB,qBAATlN,IAASkN;QACjC,OAAO,IAAIrgB,QAAQ,CAACC,SAASqgB;YACzB,IAAI;gBACA,IAAI,CAACD,oBAAoB;oBACrB,IAAI,IAAoD,EAAE;wBACtD,IAAIG,SAAS,aAAa,CAAC,QAAQ,EAAElhB,MAAM,yCAAyC,CAAC,EAAE;4BACnFW;4BACAqgB;yBACH;oBACL,OAAO,EAEN;gBACL,OAAO;oBACHrgB,QAAQogB;gBACZ;YACJ,EAAE,OAAOhQ,GAAG;gBACRiQ,OAAOjQ;YACX;QACJ;IACJ;WAnBe+P;;SAoBAK,kBAAkBtN,CAA6B;WAA/CsN;;SAAAA;IAAAA,qBAAf,gCAAiCtN;YAAE7T,QAAF6T,IAAE7T,OAAO+gB,qBAATlN,IAASkN;QACtC,OAAO,IAAIrgB,QAAQ,CAACC,SAASqgB;YACzB,IAAI;gBACA,IAAI,CAACD,oBAAoB;oBACrB,YAAY;oBACZ,IAAI,KAAyC,EAAE,EAG9C,MAAM;wBACH,IAAIG,SAAS,aAAa,CAAC,eAAe,EAAElhB,MAAM,yCAAyC,CAAC,EAAE;4BAC1FW;4BACAqgB;yBACH;oBACL;gBACJ,OAAO;oBACHrgB,QAAQogB;gBACZ;YACJ,EAAE,OAAOhQ,GAAG;gBACRiQ,OAAOjQ;YACX;QACJ;IACJ;WArBeoQ;;SAsBAG,gBAAgBzN,CAAuC;WAAvDyN;;SAAAA;IAAAA,mBAAf,gCAA+BzN;YAAEtD,QAAFsD,IAAEtD,MAAMxN,aAAR8Q,IAAQ9Q,YAAY/C,QAApB6T,IAAoB7T,OAAOuhB,aAA3B1N,IAA2B0N;QACtD,IAA6CC,yBAAAA,sBAAsBjR,OAAMxN,aAAnDge,qBAAuBS,uBAArC;QACR,IAAIT,oBAAoB;YACpB,OAAOA;QACX;QACA,OAAOhR,IAAI,UAAU,CAAC/P,OAAO;YACzB,OAAO,CAAC;YACR,kBAAkB,CAACuB,KAAKkgB;gBACpB,IAAM3Q,MAAMyQ,WAAW,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC;oBAC/ChgB;oBACAkgB;gBACJ;gBACA,IAAI,CAAC3Q,KAAK;gBACV,IAAIA,eAAe4Q,mBAAmB;oBAClC,OAAO5Q;gBACX;gBACA,IAAI,YAAYA,OAAO,aAAaA,KAAK;oBACrC,OAAOA;gBACX;gBACA;YACJ;QACJ,GAAG,IAAI,CAAC;YACJ,IAAyC0Q,yBAAAA,sBAAsBjR,OAAMxN,aAA7DuS,iBAAiCkM,uBAAjClM,gBAAgBC,eAAiBiM,uBAAjBjM;YACxBpF,OAAOoF,cAAcvF,WAAW,gBAAgB,CAACA,WAAW,WAAW,EAAEA,WAAW,cAAc,EAAE;gBAChG,YAAYO;gBACZ,gBAAgBvQ;gBAChBsV;YACJ;YACA,OAAOC;QACX,GAAG,KAAK,CAAC,CAACxE;YACNZ,OAAO/P,WAAW4P,WAAW,gBAAgB,CAACA,WAAW,WAAW,EAAEA,WAAW,cAAc,EAAE;gBAC7F,YAAYO;gBACZ,aAAavQ;YACjB;YACA,MAAM+Q;QACV;IACJ;WApCeuQ;;SAqCAK,aAAa9N,CAA8C;WAA3D8N;;SAAAA;IAAAA,gBAAf,gCAA4B9N;YAAElU,aAAFkU,IAAElU,YAAYohB,qBAAdlN,IAAckN,oBAAoBQ,aAAlC1N,IAAkC0N;QAC1D,IAAQvhB,QAAmDL,WAAnDK,OAAwB+C,aAA2BpD,WAA5C,iBAA6B4Q,QAAe5Q,WAAf4Q,MAAMvB,OAASrP,WAATqP;QAClD,OAAOA;YACH,KAAK;YACL,KAAK;gBACD,OAAO4S,aAAa;oBAChB5hB;oBACA+gB;gBACJ;YACJ,KAAK;gBACD,OAAOc,kBAAkB;oBACrB7hB;oBACA+gB;gBACJ;YACJ;gBACI,OAAOe,gBAAgB;oBACnB9hB;oBACA+C;oBACAwN,MAAAA;oBACAgR;gBACJ;QACR;IACJ;WAtBeI;;SAuBAI,cAAclO,CAA0B;WAAxCkO;;SAAAA;IAAAA,iBAAf,gCAA6BlO;YAAElU,aAAFkU,IAAElU,YAAY4hB,aAAd1N,IAAc0N;QACvC,IAAQvhB,QAAmDL,WAAnDK,OAAwB+C,aAA2BpD,WAA5C,iBAA6B4Q,QAAe5Q,WAAf4Q,MAAMvB,OAASrP,WAATqP;QAClD,IAA6CwS,yBAAAA,sBAAsBjR,OAAMxN,aAAnDge,qBAAuBS,uBAArC;QACR,IAAIT,oBAAoB;YACpB,OAAOA;QACX;QACA,OAAOhR,IAAI,cAAc,CAAC/P,OAAO;YAC7B,OAAO;gBACHuQ,MAAAA;gBACAxN;gBACAiM;YACJ;YACA,YAAY;gBACR,kBAAkB,CAACzN;wBAAKkgB,yBAAQ,CAAC;oBAC7B,IAAM3Q,MAAMyQ,WAAW,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC;wBAC/ChgB;wBACAkgB;oBACJ;oBACA,IAAI,CAAC3Q,KAAK;oBACV,IAAI,SAASA,KAAK;wBACd,OAAOA;oBACX;oBACA;gBACJ;YACJ;QACJ,GAAG,IAAI,CAAC;YACJ,IAAyC0Q,yBAAAA,sBAAsBjR,OAAMxN,aAA7DuS,iBAAiCkM,uBAAjClM,gBAAgBC,eAAiBiM,uBAAjBjM;YACxBpF,OAAOoF,cAAcvF,WAAW,gBAAgB,CAACA,WAAW,WAAW,EAAEA,WAAW,cAAc,EAAE;gBAChG,YAAYO;gBACZ,gBAAgBvQ;gBAChBsV;YACJ;YACA,OAAOC;QACX,GAAG,KAAK,CAAC,CAACxE;YACN,MAAMA;QACV;IACJ;WApCegR;;AAqCf,SAASC,wBAAwBriB,UAAU;IACvC,IAAQK,QAAgBL,WAAhBK,OAAOuQ,QAAS5Q,WAAT4Q;IACf,OAAOR,IAAI,uBAAuB,CAACQ,OAAMvQ;AAC7C;SACeiiB,eAAepO,CAA0C;WAAzDoO;;SAAAA;IAAAA,kBAAf,gCAA8BpO;YAAEqO,SAAFrO,IAAEqO,QAAQnB,qBAAVlN,IAAUkN,oBAAoBphB,aAA9BkU,IAA8BlU;QACxD,IAAMmK,YAAYkY,wBAAwBriB;QAC1C,IAAIohB,oBAAoB;YACpB,OAAOA;QACX;QACA,IAAI,CAACvO,aAAa,CAAC1I,UAAU,EAAE;YAC3B,IAAMqY,gBAAgBD,OAAO,aAAa,CAAC,KAAK,CAAC,SAAS,CAAC,SAAS;YACpE,IAAMX,aAAaW,OAAO,UAAU;YACpC1P,aAAa,CAAC1I,UAAU,GAAGqY,cAAc,IAAI,CAAC;gBAC1CZ;gBACA5hB;gBACAohB;YACJ,GAAG,IAAI,CAAC,CAACjQ;gBACL,IAAIA,KAAK;oBACL,OAAOA;gBACX;gBACA,OAAOf,IAAI,YAAY,KAAKqS,aAAa;oBACrCziB;oBACAohB;oBACAQ;gBACJ,KAAKc,cAAc;oBACf1iB;oBACA4hB;gBACJ;YACJ;QACJ;QACA,OAAO/O,aAAa,CAAC1I,UAAU;IACnC;WA3BemY;;AA4Bf,SAASK,cAAc9d,MAAM;IACzB,OAAOsL,UAAU,QAAQ,CAAC,CAAC,GAAGtL,QAAQ;QAClC,OAAO,WAAWA,SAASA,OAAO,KAAK,GAAG;QAC1C,MAAMA,OAAO,IAAI,IAAIyR;QACrB,iBAAiBzR,OAAO,eAAe,IAAIA,OAAO,IAAI;QACtD,YAAYA,OAAO,UAAU,IAAIwR;IACrC;AACJ;AAEA,IAAIuM,uBAAS;aAAMA,OAiIH1O;YAAElU,aAAFkU,IAAElU,YAAY6iB,OAAd3O,IAAc2O;kCAjIXD;QAkIX,IAAI,CAAC,MAAM,GAAG;QACd,IAAI,CAAC,GAAG,GAAGniB;QACX,IAAI,CAAC,UAAU,GAAGT;QAClB,IAAI,CAAC,IAAI,GAAG6iB;;;;YApIVC,KAAAA;mBAAN,SAAMA;;uBAAN;oBACI,IAAI,MAAK,kBAAkB,EAAE;wBACzB,OAAO,MAAK,kBAAkB;oBAClC;oBACA,IAAI1B;oBACJ,IAAI;wBACAA,qBAAqB,MAAM2B,eAAe;4BACtC,QAAQ,MAAK,IAAI;4BACjB,YAAY,MAAK,UAAU;4BAC3B,oBAAoB,MAAK,kBAAkB;wBAC/C;oBACJ,EAAE,OAAOC,KAAK;wBACV,IAAM7Y,YAAYkY,wBAAwB,MAAK,UAAU;wBACzDjB,qBAAqB,MAAM,MAAK,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC;4BAC1E2B;4BACA,QAAQ,MAAK,IAAI;4BACjB,YAAY,MAAK,UAAU;4BAC3B,oBAAoB,MAAK,kBAAkB;4BAC3ClQ;4BACA1I;wBACJ;oBACJ;oBACAqG,OAAO4Q,oBAAoB,CAAC,mCAAmC,EAAEhR,IAAI,YAAY,CAAC,MAAK,UAAU,GAAG;oBACpG,MAAK,kBAAkB,GAAGgR;oBAC1B,OAAO,MAAK,kBAAkB;gBAClC;;;;YAEMhT,KAAAA;mBADN,6EAA6E;YAC7E,SAAMA,IAAI+H,EAAE,EAAEsK,MAAM,EAAEhb,OAAO,EAAEvD,cAAc;;uBAA7C;oBACI,IAA+B+gB,OAAAA,WAAW;wBACtC,aAAa;oBACjB,sBAF+BA,KAAvBC,aAAAA,4CAAc;oBAGtB,qBAAqB;oBACrB,IAAM9B,qBAAqB,MAAM,MAAK,QAAQ;oBAC9C,IAAI,CAAC,MAAK,MAAM,EAAE;wBACd,IAAMtC,qBAAqB,MAAK,IAAI,CAAC,aAAa;wBAClD,IAAMqE,iBAAiBnR,MAAM,OAAO,CAAC,MAAK,UAAU,CAAC,UAAU,IAAI,MAAK,UAAU,CAAC,UAAU,GAAG;4BAC5F,MAAK,UAAU,CAAC,UAAU;yBAC7B;wBACD,IAAI,CAACmR,eAAe,MAAM,EAAE;4BACxBA,eAAe,IAAI,CAAC;wBACxB;wBACAA,eAAe,OAAO,CAAC,CAACC;4BACpB,IAAI,CAACtE,kBAAkB,CAACsE,cAAc,EAAE;gCACpCtE,kBAAkB,CAACsE,cAAc,GAAG,CAAC;4BACzC;wBACJ;wBACA,sEAAsE;wBACtE,IAAMC,aAAavE,kBAAkB,CAACqE,cAAc,CAAC,EAAE,CAAC;wBACxD,IAAMG,YAAY,EAAE;wBACpB,IAAMC,yBAAyB;4BAC3B,SAAS,MAAK,UAAU,CAAC,OAAO,IAAI;4BACpC,gBAAgBvR,MAAM,OAAO,CAAC,MAAK,UAAU,CAAC,UAAU,IAAImR,iBAAiB,MAAK,UAAU,CAAC,UAAU,IAAI;wBAC/G;wBACA,6BAA6B;wBAC7Bjc,OAAO,cAAc,CAACqc,wBAAwB,iBAAiB;4BAC3D,OAAOzE;4BACP,iIAAiI;4BACjI,YAAY;wBAChB;wBACA,IAAM0E,uBAAuB,MAAM,MAAK,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,mBAAmB,CAAC,IAAI,CAAC;4BAClFH;4BACA,gEAAgE;4BAChEE;4BACAD;4BACA,YAAY,MAAK,UAAU;4BAC3B,QAAQ,MAAK,IAAI;wBACrB;wBACA,IAAI,OAAQlC,CAAAA,sBAAsB,OAAO,KAAK,IAAIA,mBAAmB,IAAG,MAAO,aAAa;4BACxFvgB,MAAMwP,WAAW,gBAAgB,CAACA,WAAW,WAAW,EAAEA,WAAW,cAAc,EAAE;gCACjF,YAAYvQ;gCACZ,gBAAgB,MAAK,UAAU,CAAC,KAAK;gCACrC,gBAAgB,MAAK,UAAU,CAAC,eAAe;4BACnD;wBACJ;wBACA,MAAMshB,mBAAmB,IAAI,CAACoC,qBAAqB,UAAU,EAAEA,qBAAqB,SAAS,EAAEA,qBAAqB,sBAAsB;wBAC1I,MAAM,MAAK,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,aAAa,CAAC,IAAI,CAACrT,UAAU,QAAQ,CAAC,CAAC,GAAGqT,sBAAsB;4BAC5FrN;4BACAjU;4BACAkf;wBACJ;oBACJ;oBACA,MAAK,GAAG,GAAGA;oBACX,MAAK,MAAM,GAAG;oBACd,IAAIqC;oBACJA,gBAAgB,MAAM,MAAK,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,gBAAgB,CAAC,IAAI,CAAC;wBACvErC;wBACAX;wBACA,YAAY,MAAK,UAAU;oBAC/B;oBACA,mBAAmB;oBACnB,IAAI,CAACgD,eAAe;wBAChBA,gBAAgB,MAAMrC,mBAAmB,GAAG,CAACX;oBACjD;oBACAjQ,OAAOiT,eAAe,GAAG5S,QAAQ,MAAK,UAAU,EAAE,qBAAqB,EAAE4P,OAAO,CAAC,CAAC;oBAClF,gDAAgD;oBAChD,IAAMiD,aAAatR,mBAAmB,MAAK,UAAU,CAAC,IAAI,EAAEqO;oBAC5D,IAAMkD,oBAAoB,MAAK,aAAa,CAACF,eAAeC;oBAC5D,IAAI,CAACR,aAAa;wBACd,OAAOS;oBACX;oBACA,IAAMC,gBAAgB,MAAMD;oBAC5B,OAAOC;gBACX;;;;YACAC,KAAAA;mBAAAA,SAAAA,cAAcJ,aAAa,EAAEtN,EAAE;gBAC3B,SAAS2N,eAAe3S,GAAG,EAAEgF,EAAE;oBAC3B,IAAIhF,OAAO,OAAOA,QAAQ,YAAYjK,OAAO,YAAY,CAACiK,QAAQ,CAACjK,OAAO,wBAAwB,CAACiK,KAAK4S,OAAO,GAAG,CAAC,kBAAkB;wBACjI7c,OAAO,cAAc,CAACiK,KAAK4S,OAAO,GAAG,CAAC,iBAAiB;4BACnD,OAAO5N;4BACP,YAAY;wBAChB;oBACJ;gBACJ;gBACA,IAAIsN,yBAAyB1iB,SAAS;oBAClC,2CAAO;wBACH,IAAMoQ,MAAM,MAAMsS;wBAClB,8CAA8C;wBAC9CK,eAAe3S,KAAKgF;wBACpB,OAAOhF;oBACX;gBACJ,OAAO;oBACH,OAAO;wBACH,IAAMA,MAAMsS;wBACZ,8CAA8C;wBAC9CK,eAAe3S,KAAKgF;wBACpB,OAAOhF;oBACX;gBACJ;YACJ;;;;;AASJ,IAAM6S,yBAAN;aAAMA,SA+BU3U,IAAI;kCA/Bd2U;QAgCE,IAAI,CAAC,IAAI,GAAG;QACZ,IAAI,CAAC,SAAS,GAAG,IAAIC;QACrB,IAAI5U,MAAM;YACN,IAAI,CAAC,IAAI,GAAGA;QAChB;;oBApCF2U;;YACFE,KAAAA;mBAAAA,SAAAA,GAAGtb,EAAE;gBACD,IAAI,OAAOA,OAAO,YAAY;oBAC1B,IAAI,CAAC,SAAS,CAAC,GAAG,CAACA;gBACvB;YACJ;;;YACAub,KAAAA;mBAAAA,SAAAA,KAAKvb,EAAE;gBACH,4DAA4D;gBAC5D,IAAMqF,OAAO,IAAI;gBACjB,IAAI,CAAC,EAAE,CAAC,SAASmW,QAAQ,GAAGtiB,IAAI;oBAC5BmM,KAAK,MAAM,CAACmW;oBACZ,yCAAyC;oBACzC,OAAOxb,GAAG,KAAK,CAAC,MAAM9G;gBAC1B;YACJ;;;YACA0J,KAAAA;mBAAAA,SAAAA,KAAK,GAAG6Y,IAAI;gBACR,IAAIC;gBACJ,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,GAAG,GAAG;oBACzB,yCAAyC;oBACzC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC1b;wBACpB0b,SAAS1b,SAAAA,KAAAA,GAAG,uBAAGyb;oBACnB;gBACJ;gBACA,OAAOC;YACX;;;YACAC,KAAAA;mBAAAA,SAAAA,OAAO3b,EAAE;gBACL,IAAI,CAAC,SAAS,CAAC,MAAM,CAACA;YAC1B;;;YACA4b,KAAAA;mBAAAA,SAAAA;gBACI,IAAI,CAAC,SAAS,CAAC,KAAK;YACxB;;;WA9BER;;AAwCN,IAAMS,0BAAN;gBAAMA;aAAAA;kCAAAA;eAAN,oBAAMA;;oBAAAA;;YACFjZ,KAAAA;mBAAAA,SAAAA,KAAK,GAAG6Y,IAAI;gBACR,IAAIC;gBACJ,IAAMI,KAAK1S,MAAM,IAAI,CAAC,IAAI,CAAC,SAAS;gBACpC,IAAI0S,GAAG,MAAM,GAAG,GAAG;oBACf,IAAI7U,IAAI;oBACR,IAAM8U,OAAO,CAACzG;wBACV,IAAIA,SAAS,OAAO;4BAChB,OAAO,OAAO,gBAAgB;wBAClC,OAAO,IAAIrO,IAAI6U,GAAG,MAAM,EAAE;4BACtB,OAAO3jB,QAAQ,OAAO,CAAC2jB,EAAE,CAAC7U,IAAI,CAAC,KAAK,CAAC,MAAMwU,OAAO,IAAI,CAACM;wBAC3D,OAAO;4BACH,OAAOzG;wBACX;oBACJ;oBACAoG,SAASK;gBACb;gBACA,OAAO5jB,QAAQ,OAAO,CAACujB;YAC3B;;;WAlBEG;EAAkBT;AAqBxB,6EAA6E;AAC7E,SAASY,gBAAgBC,YAAY,EAAEC,YAAY;IAC/C,IAAI,CAACzT,SAASyT,eAAe;QACzB,OAAO;IACX;IACA,IAAID,iBAAiBC,cAAc;QAC/B,gDAAgD;QAChD,IAAI,IAAMpgB,OAAOmgB,aAAa;YAC1B,IAAI,CAAEngB,CAAAA,OAAOogB,YAAW,GAAI;gBACxB,OAAO;YACX;QACJ;IACJ;IACA,OAAO;AACX;AACA,IAAMC,kCAAN;gBAAMA;aAAAA,kBAqBU1V,IAAI;kCArBd0V;;QAsBE,4BAtBFA,oBAsBW,MAAK,OAAO,GAAGlkB;QACxB,MAAK,IAAI,GAAGwO;;;oBAvBd0V;;YACFvZ,KAAAA;mBAAAA,SAAAA,KAAK6Y,IAAI;gBACL,IAAI,CAAChT,SAASgT,OAAO;oBACjBxjB,MAAM,CAAC,kBAAkB,EAAE,IAAI,CAAC,IAAI,CAAC,2BAA2B,CAAC;gBACrE;gBACA,KAAK,IAAM+H,MAAM,IAAI,CAAC,SAAS,CAAC;oBAC5B,IAAI;wBACA,IAAMoc,WAAWpc,GAAGyb;wBACpB,IAAIO,gBAAgBP,MAAMW,WAAW;4BACjCX,OAAOW;wBACX,OAAO;4BACH,IAAI,CAAC,OAAO,CAAC,CAAC,iDAAiD,EAAE,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC;4BACnF;wBACJ;oBACJ,EAAE,OAAO5T,GAAG;wBACRhP,KAAKgP;wBACL,IAAI,CAAC,OAAO,CAACA;oBACjB;gBACJ;gBACA,OAAOiT;YACX;;;WApBEU;EAA0Bf;AA2BhC,IAAMiB,mCAAN;gBAAMA;aAAAA,mBAgCU5V,IAAI;kCAhCd4V;;QAiCE,4BAjCFA,qBAiCW,MAAK,OAAO,GAAGpkB;QACxB,MAAK,IAAI,GAAGwO;;;oBAlCd4V;;YACFzZ,KAAAA;mBAAAA,SAAAA,KAAK6Y,IAAI;gBACL,IAAI,CAAChT,SAASgT,OAAO;oBACjBxjB,MAAM,CAAC,2BAA2B,EAAE,IAAI,CAAC,IAAI,CAAC,yBAAyB,CAAC;gBAC5E;gBACA,IAAM6jB,KAAK1S,MAAM,IAAI,CAAC,IAAI,CAAC,SAAS;gBACpC,IAAI0S,GAAG,MAAM,GAAG,GAAG;oBACf,IAAI7U,IAAI;oBACR,IAAMqV,eAAe,CAAC9T;wBAClBhP,KAAKgP;wBACL,IAAI,CAAC,OAAO,CAACA;wBACb,OAAOiT;oBACX;oBACA,IAAMM,OAAO,CAACQ;wBACV,IAAIP,gBAAgBP,MAAMc,WAAW;4BACjCd,OAAOc;4BACP,IAAItV,IAAI6U,GAAG,MAAM,EAAE;gCACf,IAAI;oCACA,OAAO3jB,QAAQ,OAAO,CAAC2jB,EAAE,CAAC7U,IAAI,CAACwU,OAAO,IAAI,CAACM,MAAMO;gCACrD,EAAE,OAAO9T,GAAG;oCACR,OAAO8T,aAAa9T;gCACxB;4BACJ;wBACJ,OAAO;4BACH,IAAI,CAAC,OAAO,CAAC,CAAC,8CAA8C,EAAE,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC;wBACpF;wBACA,OAAOiT;oBACX;oBACA,OAAOtjB,QAAQ,OAAO,CAAC4jB,KAAKN;gBAChC;gBACA,OAAOtjB,QAAQ,OAAO,CAACsjB;YAC3B;;;WA/BEY;EAA2BjB;AAsCjC,IAAMoB,6BAAN;aAAMA,aAqCUC,SAAS;kCArCnBD;QAsCE,IAAI,CAAC,eAAe,GAAG,CAAC;QACxB,IAAI,CAAC,SAAS,GAAGC;QACjB,IAAI,CAAC,aAAa,GAAGne,OAAO,IAAI,CAACme;;oBAxCnCD;;YACFE,KAAAA;mBAAAA,SAAAA,YAAYtP,MAAM;gBACdxF,OAAOgB,cAAcwE,SAAS;gBAC9B,oDAAoD;gBACpD,IAAMuP,aAAavP,OAAO,IAAI;gBAC9BxF,OAAO+U,YAAY;gBACnB,IAAI,CAAC,IAAI,CAAC,eAAe,CAACA,WAAW,EAAE;oBACnC,IAAI,CAAC,eAAe,CAACA,WAAW,GAAGvP;oBACnC9O,OAAO,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,OAAO,CAAC,CAACxC;wBACjC,IAAM8gB,aAAaxP,MAAM,CAACtR,IAAI;wBAC9B,IAAI8gB,YAAY;4BACZ,IAAI,CAAC,SAAS,CAAC9gB,IAAI,CAAC,EAAE,CAAC8gB;wBAC3B;oBACJ;gBACJ;YACJ;;;YACAC,KAAAA;mBAAAA,SAAAA,aAAaF,UAAU;gBACnB/U,OAAO+U,YAAY;gBACnB,IAAMvP,SAAS,IAAI,CAAC,eAAe,CAACuP,WAAW;gBAC/C/U,OAAOwF,QAAQ,CAAC,YAAY,EAAEuP,WAAW,oBAAoB,CAAC;gBAC9Dre,OAAO,IAAI,CAAC8O,QAAQ,OAAO,CAAC,CAACtR;oBACzB,IAAIA,QAAQ,QAAQ;wBAChB,IAAI,CAAC,SAAS,CAACA,IAAI,CAAC,MAAM,CAACsR,MAAM,CAACtR,IAAI;oBAC1C;gBACJ;YACJ;;;YACA,wDAAwD;YACxDghB,KAAAA;mBAAAA,SAAAA,QAAQxR;oBAAEmR,YAAFnR,IAAEmR,WAAWtE,kBAAb7M,IAAa6M;gBACjB7Z,OAAO,IAAI,CAACme,WAAW,OAAO,CAAC,CAACM;oBAC5BnV,OAAO,CAAC,IAAI,CAAC,SAAS,CAACmV,SAAS,EAAE,CAAC,UAAU,EAAEA,SAAS,yCAAyC,CAAC;oBAClG,IAAI,CAAC,SAAS,CAACA,SAAS,GAAGN,SAAS,CAACM,SAAS;gBAClD;gBACAze,OAAO,IAAI,CAAC6Z,iBAAiB,OAAO,CAAC,CAACwE;oBAClC/U,OAAO,CAAC,IAAI,CAAC,eAAe,CAAC+U,WAAW,EAAE,CAAC,YAAY,EAAEA,WAAW,yCAAyC,CAAC;oBAC9G,IAAI,CAAC,WAAW,CAACxE,eAAe,CAACwE,WAAW;gBAChD;YACJ;;;WApCEH;;AA4CN,SAASQ,mBAAmB7jB,aAAa;IACrC,OAAOoO,UAAU,QAAQ,CAAC;QACtB,kBAAkB;QAClB,OAAO;QACP,YAAY;QACZ,mBAAmB;IACvB,GAAGpO;AACP;AACA,SAAS8jB,kBAAkBtF,OAAO,EAAEuF,WAAW;IAC3C,OAAOA,YAAY,GAAG,CAAC,CAAChkB;QACpB,IAAM9B,aAAa8gB,YAAYP,SAASze,KAAK,WAAW;QACxD0O,OAAOxQ,YAAY,CAAC,kBAAkB,EAAE8B,KAAK,WAAW,CAAC,0BAA0B,EAAE,CAAC9B,cAAcoQ,IAAI,YAAY,CAAC;YACjHpQ;YACAugB;QACJ,IAAI;QACJ,OAAO;YACH,QAAQvgB;YACR,eAAe4lB,mBAAmB9jB;QACtC;IACJ;AACJ;AACA,SAASikB,wBAAwBrjB,OAAO;IACpC,IAAI,CAACA,SAAS;QACV,OAAO,EAAE;IACb;IACA,OAAOA,QAAQ,GAAG,CAAC,CAAC+d;QAChB,IAAIA,WAAW,KAAK;YAChB,OAAOA;QACX;QACA,IAAIA,OAAO,UAAU,CAAC,OAAO;YACzB,OAAOA,OAAO,OAAO,CAAC,MAAM;QAChC;QACA,OAAOA;IACX;AACJ;AACA,SAASuF,cAAchmB,UAAU,EAAE6iB,IAAI,EAAEvgB,MAAM,EAC/C4R;QAAAA,iBAAAA,iBAAiB,OAAjBA;IACI,IAAQjT,YAAiDqB,OAAjDrB,WAAWC,uBAAsCoB,OAAtCpB,sBAAsBC,cAAgBmB,OAAhBnB;IACzC,IAAI0hB,KAAK,OAAO,CAAC,SAAS,EAAE;QACxB1hB,YAAY,OAAO,CAAC,CAACE;YACjB,IAAQ0T,aAAe1T,MAAf0T;YACR,IAAMnH,SAASiV,KAAK,WAAW,CAAC,GAAG,CAAC7iB,WAAW,IAAI;YACnD,IAAI4N,QAAQ;gBACRmV,eAAe;oBACX,QAAQF;oBACR,YAAY9N;oBACZ,oBAAoBnH,OAAO,kBAAkB;gBACjD;YACJ,OAAO;gBACHmV,eAAe;oBACX,QAAQF;oBACR,YAAY9N;oBACZ,oBAAoBtU;gBACxB;YACJ;QACJ;QACA,IAAIwlB,gBAAgB;YAChB,IAAMC,eAAe;gBACjB,KAAK;gBACL,IAAI;YACR;YACAjlB,UAAU,OAAO,CAAC,CAACklB;gBACf,IAAoCC,kBAAAA,IAAI,UAAU,CAAC;oBAC/C,KAAKD;oBACL,IAAI;oBACJ,OAAO;oBACP;oBACA,OAAOD;oBACP,gBAAgB,CAACtkB,KAAKkgB;wBAClB,IAAM3Q,MAAM0R,KAAK,UAAU,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC;4BAClDjhB;4BACAkgB;wBACJ;wBACA,IAAI3Q,eAAekV,iBAAiB;4BAChC,OAAOlV;wBACX;wBACA;oBACJ;gBACJ,IAhBcmV,QAAsBF,gBAA5B,MAAaG,aAAeH,gBAAfG;gBAiBrBA,cAAc9T,SAAS,IAAI,CAAC,WAAW,CAAC6T;YAC5C;QACJ,OAAO;YACH,IAAME,gBAAe;gBACjB,KAAK;gBACL,MAAM;YACV;YACAvlB,UAAU,OAAO,CAAC,CAACklB;gBACf,IAAoCC,kBAAAA,IAAI,UAAU,CAAC;oBAC/C,KAAKD;oBACL,IAAI;oBACJ,OAAO;oBACP;oBACA,OAAOK;oBACP,gBAAgB,CAAC5kB,KAAKkgB;wBAClB,IAAM3Q,MAAM0R,KAAK,UAAU,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC;4BAClDjhB;4BACAkgB;wBACJ;wBACA,IAAI3Q,eAAekV,iBAAiB;4BAChC,OAAOlV;wBACX;wBACA;oBACJ;oBACA,gBAAgB;gBACpB,IAjBcmV,QAAsBF,gBAA5B,MAAaG,aAAeH,gBAAfG;gBAkBrBA,cAAc9T,SAAS,IAAI,CAAC,WAAW,CAAC6T;YAC5C;QACJ;QACA,IAAIL,gBAAgB;YAChB,IAAMQ,gBAAe;gBACjB,KAAK;gBACL,IAAI;YACR;YACAvlB,qBAAqB,OAAO,CAAC,CAACwlB;gBAC1B,IAAqCN,kBAAAA,IAAI,UAAU,CAAC;oBAChD,KAAKM;oBACL,IAAI;oBACJ,OAAO;oBACP;oBACA,OAAOD;oBACP,gBAAgB,CAAC7kB,KAAKkgB;wBAClB,IAAM3Q,MAAM0R,KAAK,UAAU,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC;4BAClDjhB;4BACAkgB;wBACJ;wBACA,IAAI3Q,eAAekV,iBAAiB;4BAChC,OAAOlV;wBACX;wBACA;oBACJ;gBACJ,IAhBcwV,SAAuBP,gBAA7B,MAAcG,aAAeH,gBAAfG;gBAiBtBA,cAAc9T,SAAS,IAAI,CAAC,WAAW,CAACkU;YAC5C;QACJ,OAAO;YACH,IAAMC,gBAAe;gBACjB,eAAe;gBACf,MAAO5mB,CAAAA,cAAc,OAAO,KAAK,IAAIA,WAAW,IAAG,MAAO,WAAW,WAAW;YACpF;YACAkB,qBAAqB,OAAO,CAAC,CAACwlB;gBAC1B,IAAyCG,oBAAAA,IAAI,YAAY,CAAC;oBACtD,KAAKH;oBACL,IAAI;oBACJ,OAAO;oBACP;oBACA,OAAOE;oBACP,kBAAkB,CAAChlB,KAAKkgB;wBACpB,IAAM3Q,MAAM0R,KAAK,UAAU,CAAC,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC;4BACpDjhB;4BACAkgB;wBACJ;wBACA,IAAI3Q,eAAe4Q,mBAAmB;4BAClC,OAAO5Q;wBACX;wBACA;oBACJ;oBACA,kBAAkB;gBACtB,IAjBgB2V,WAAyBD,kBAAjC,QAAkBN,aAAeM,kBAAfN;gBAkB1BA,cAAc9T,SAAS,IAAI,CAAC,WAAW,CAACqU;YAC5C;QACJ;IACJ;AACJ;AAEA,SAASC,iBAAiB/mB,UAAU,EAAEkC,cAAc;IAChD,IAAM8kB,kBAAkB/U,+BAA+B/P;IACvD,IAAI,CAAC8kB,gBAAgB,GAAG,EAAE;QACtBnmB,MAAM,CAAC,6BAA6B,EAAEb,WAAW,IAAI,CAAC,uBAAuB,CAAC;IAClF;IACA,IAAIwD,WAAW4M,IAAI,cAAc,CAAClO,gBAAgB8kB,gBAAgB,GAAG;IACrE,IAAI,CAAC5W,IAAI,YAAY,MAAM,CAAC5M,SAAS,UAAU,CAAC,SAAS;QACrDA,WAAW,CAAC,MAAM,EAAEA,UAAU;IAClC;IACAxD,WAAW,IAAI,GAAGgnB,gBAAgB,IAAI;IACtChnB,WAAW,eAAe,GAAGgnB,gBAAgB,UAAU;IACvDhnB,WAAW,KAAK,GAAGwD;IACnBxD,WAAW,OAAO,GAAGkC,eAAe,OAAO;IAC3ClC,WAAW,YAAY,GAAGkC,eAAe,YAAY;AACzD;AACA,SAAS+kB;IACL,OAAO;QACH,MAAM;QACA,cAAcnlB,IAAI;mBAAxB;gBACI,IAAQ+C,SAAuD/C,KAAvD+C,QAAQ6b,iBAA+C5e,KAA/C4e,gBAAgBD,SAA+B3e,KAA/B2e,QAAQ8B,SAAuBzgB,KAAvBygB,QAAQviB,aAAe8B,KAAf9B;gBAChD,IAAI,CAAC8Q,sBAAsBjM,WAAW,CAACkM,kBAAkBlM,SAAS;oBAC9D,IAA2Coe,OAAAA,MAAMV,OAAO,eAAe,CAAC,sBAAsB,CAAC1d,SAAvF3C,iBAAmC+gB,KAAnC/gB,gBAAgBglB,iBAAmBjE,KAAnBiE;oBACxBH,iBAAiB/mB,YAAYkC;oBAC7B,oBAAoB;oBACpB,IAAMF,iBAAiB;wBACnB6C;wBACA,eAAe;4BACX,aAAa6b;4BACb,SAAS;gCACLD;6BACH;4BACD,kBAAkB;4BAClB,OAAO;4BACP,YAAY;wBAChB;oBACJ;oBACA,IAAMne,SAAS,MAAMigB,OAAO,aAAa,CAAC,KAAK,CAAC,SAAS,CAAC,qBAAqB,CAAC,IAAI,CAAC;wBACjFA;wBACAvgB;wBACAhC;wBACA6E;wBACA3C;wBACAglB;oBACJ;oBACA,IAAI5kB,QAAQ;wBACR0jB,cAAchmB,YAAYuiB,QAAQjgB,QAAQ;oBAC9C;oBACA,OAAO6N,UAAU,QAAQ,CAAC,CAAC,GAAGrO,MAAM;wBAChCI;oBACJ;gBACJ;gBACA,OAAOJ;YACX;;IACJ;AACJ;AAEA,OAAO;AACP,eAAe;AACf,SAASqlB,QAAQhR,EAAE;IACf,IAAMiR,YAAYjR,GAAG,KAAK,CAAC;IAC3B,IAAIiR,UAAU,MAAM,KAAK,GAAG;QACxB,OAAO;YACH,MAAMA,SAAS,CAAC,EAAE;YAClB,SAAS3mB;QACb;IACJ,OAAO,IAAI2mB,UAAU,MAAM,KAAK,GAAG;QAC/B,OAAO;YACH,MAAMA,SAAS,CAAC,EAAE;YAClB,SAASA,SAAS,CAAC,EAAE;QACzB;IACJ,OAAO;QACH,OAAO;YACH,MAAMA,SAAS,CAAC,EAAE;YAClB,SAASA,SAAS,CAAC,EAAE;QACzB;IACJ;AACJ;AACA,oEAAoE;AACpE,SAASC,mBAAmBH,cAAc,EAAElnB,UAAU,EAAEsnB,QAAQ,EAAEC,MAAM,EAAErT,KAAWhS,cAAc;QAAzBgS,OAAAA,iBAAO,CAAC,IAARA;IACtE,IAAMiC,KAAKtF,QAAQ7Q;IACnB,IAAiCwnB,sBAAAA,mBAAmBN,gBAAgB/Q,KAArDsR,gBAAkBD,oBAAzB;IACR,IAAME,0BAA0BxlB,kBAAkBulB;IAClD,IAAIC,2BAA2B,CAACtX,IAAI,kBAAkB,CAACsX,0BAA0B;QAC7EJ,SAASI,yBAAyB1nB,YAAYunB;QAC9C,IAAIG,wBAAwB,WAAW,EAAE;YACrC,IAAMC,aAAazgB,OAAO,IAAI,CAACwgB,wBAAwB,WAAW;YAClE,KAAK,IAAMhjB,OAAOijB,WAAW;gBACzB,IAAIC,IAAI,CAACljB,IAAI,EAAE;oBACX;gBACJ;gBACAkjB,IAAI,CAACljB,IAAI,GAAG;gBACZ,IAAMmjB,gBAAgBV,QAAQziB;gBAC9B,IAAMojB,cAAcJ,wBAAwB,WAAW,CAAChjB,IAAI;gBAC5D2iB,mBAAmBH,gBAAgB;oBAC/B,MAAMW,cAAc,IAAI;oBACxB,SAASC,YAAY,cAAc;gBACvC,GAAGR,UAAU,OAAOM,MAAMnnB;YAC9B;QACJ;IACJ;AACJ;AACA,IAAMsnB,YAAY,CAAC1Y,MAAMzN;IACrB,OAAO6Q,SAAS,aAAa,CAAC,GAAGpD,KAAK,CAAC,EAAEA,SAAS,SAAS,SAAS,MAAM,EAAE,EAAEzN,IAAI,EAAE,CAAC;AACzF;AACA,kDAAkD;AAClD,SAASd,sBAAsByhB,MAAM,EAAEvgB,cAAc,EAAE6C,MAAM,EAAEqiB,cAAc,EAAEhlB,cAAc;IACzF,IAAMjB,YAAY,EAAE;IACpB,IAAM+mB,WAAW,EAAE;IACnB,IAAM7mB,cAAc,EAAE;IACtB,IAAM8mB,uBAAuB,IAAIhE;IACjC,IAAMiE,wBAAwB,IAAIjE;IAClC,IAAQxe,UAAY8c,OAAZ9c;IACR,IAAuB0iB,oBAAsBnmB,eAArC;IACR,IAAQG,aAAegmB,kBAAfhmB;IACR,IAAMylB,OAAO,CAAC;IACdP,mBAAmBH,gBAAgBriB,QAAQ,CAACujB,oBAAoBpoB,YAAYunB;QACxE,IAAIxlB;QACJ,IAAIwlB,QAAQ;YACRxlB,gBAAgBomB;QACpB,OAAO;YACH,IAAInW,MAAM,OAAO,CAAC7P,aAAa;gBAC3B,iDAAiD;gBACjD,IAAMkmB,oBAAoBlmB,WAAW,IAAI,CAAC,CAACmmB;oBACvC,IAAIA,aAAa,WAAW,KAAKtoB,WAAW,IAAI,IAAIsoB,aAAa,WAAW,KAAKtoB,WAAW,KAAK,EAAE;wBAC/F,OAAO;oBACX;oBACA,OAAO;gBACX;gBACA,IAAI,CAACqoB,mBAAmB;oBACpB;gBACJ;gBACAtmB,gBAAgB6jB,mBAAmByC;YACvC,OAAO,IAAIlmB,eAAe,MAAM;gBAC5BJ,gBAAgBomB;YACpB,OAAO;gBACH;YACJ;QACJ;QACA,IAAMI,iBAAiBnY,IAAI,cAAc,CAACgY,oBAAoBnW,+BAA+BmW,oBAAoB,GAAG;QACpH,IAAIG,gBAAgB;YAChBpnB,YAAY,IAAI,CAAC;gBACb,MAAMnB,WAAW,IAAI;gBACrB,YAAY;oBACR,MAAMA,WAAW,IAAI;oBACrB,OAAOuoB;oBACP,MAAM,qBAAqBH,qBAAqBA,mBAAmB,eAAe,GAAG;oBACrF,iBAAiB,gBAAgBA,qBAAqBA,mBAAmB,UAAU,GAAGpoB,WAAW,IAAI;oBACrG,YAAY;oBACZ,SAAS,aAAaooB,qBAAqBA,mBAAmB,OAAO,GAAG3nB;gBAC5E;gBACA,KAAK8nB;YACT;QACJ;QACA,IAAIC,mBAAmB,aAAaJ,qBAAqBA,mBAAmB,OAAO,GAAG,EAAE;QACxF,IAAMK,2BAA2B1C,wBAAwBhkB,cAAc,OAAO;QAC9E,IAAI0mB,yBAAyB,MAAM,IAAI,aAAaL,oBAAoB;YACpE,IAAIM;YACJF,mBAAmBJ,sBAAsB,OAAO,KAAK,IAAKM,CAAAA,8BAA8BN,mBAAmB,OAAM,KAAM,OAAO,KAAK,IAAIM,4BAA4B,MAAM,CAAC,CAACpmB,QAAQqmB;gBAC/K,IAAKF,CAAAA,4BAA4B,OAAO,KAAK,IAAIA,yBAAyB,OAAO,CAACE,gBAAgB,UAAU,OAAO,CAAC,GAAG;oBACnHrmB,OAAO,IAAI,CAACqmB;gBAChB;gBACA,OAAOrmB;YACX,GAAG,EAAE;QACT;QACA,SAASD,aAAaC,MAAM;YACxB,IAAMsmB,YAAYtmB,OAAO,GAAG,CAAC,CAACjB,QAAQ+O,IAAI,cAAc,CAACgY,oBAAoB/mB;YAC7E,IAAIU,cAAc,MAAM,EAAE;gBACtB,OAAO6mB,UAAU,MAAM,CAAC7mB,cAAc,MAAM;YAChD;YACA,OAAO6mB;QACX;QACA,IAAIJ,kBAAkB;YAClB,IAAMK,eAAeL,iBAAiB,MAAM;YAC5C,IAAI,IAAI9d,QAAQ,GAAGA,QAAQme,cAAcne,QAAQ;gBAC7C,IAAMoe,aAAaN,gBAAgB,CAAC9d,MAAM;gBAC1C,IAAMqe,iBAAiB,GAAG/oB,WAAW,IAAI,CAAC,CAAC,EAAE8oB,WAAW,UAAU,EAAE;gBACpEvG,OAAO,aAAa,CAAC,KAAK,CAAC,SAAS,CAAC,mBAAmB,CAAC,IAAI,CAAC;oBAC1D,IAAIuG,WAAW,UAAU,KAAK,MAAM9oB,WAAW,IAAI,GAAG+oB;oBACtD,MAAM/oB,WAAW,IAAI;oBACrB,gBAAgBooB;oBAChBrmB;oBACA,QAAQ/B;oBACRuiB;gBACJ;gBACA,IAAMyG,YAAY9S,aAAa6S;gBAC/B,IAAIC,WAAW;oBACX;gBACJ;gBACA,IAAIjnB,cAAc,gBAAgB,KAAK,OAAO;wBAC1CknB,YACAC,aACAC,WACAC;oBAHAH,CAAAA,aAAAA,WAAU,IAAI,OAAdA,YAAe,uBAAG5mB,aAAaymB,WAAW,MAAM,CAAC,GAAG,CAAC,KAAK;oBAC1DI,CAAAA,cAAAA,WAAU,IAAI,OAAdA,aAAe,uBAAG7mB,aAAaymB,WAAW,MAAM,CAAC,GAAG,CAAC,IAAI;oBACzDK,CAAAA,YAAAA,UAAS,IAAI,OAAbA,WAAc,uBAAG9mB,aAAaymB,WAAW,MAAM,CAAC,EAAE,CAAC,KAAK;oBACxDM,CAAAA,aAAAA,UAAS,IAAI,OAAbA,YAAc,uBAAG/mB,aAAaymB,WAAW,MAAM,CAAC,EAAE,CAAC,IAAI;gBAC3D,iDAAiD;gBACjD,OAAO,IAAI/mB,cAAc,gBAAgB,GAAG,QAAQ;wBAChDsnB,aACAC;oBADAD,CAAAA,cAAAA,WAAU,IAAI,OAAdA,aAAe,uBAAGhnB,aAAaymB,WAAW,MAAM,CAAC,GAAG,CAAC,IAAI;oBACzDQ,CAAAA,aAAAA,UAAS,IAAI,OAAbA,YAAc,uBAAGjnB,aAAaymB,WAAW,MAAM,CAAC,EAAE,CAAC,IAAI;gBAC3D;gBACA1S,aAAa2S;YACjB;QACJ;IACJ,GAAG,MAAMnB,MAAM1lB;IACf,IAAIA,eAAe,MAAM,EAAE;QACvB,IAAMqnB,sBAAsB,CAACxK,WAAWyK;YACpC,IAAMC,mBAAmB5K,mBAAmB0D,OAAO,aAAa,EAAEiH,eAAe,UAAU,EAAEzK,WAAWwD,OAAO,aAAa,CAAC,KAAK,CAAC,SAAS,CAAC,YAAY;YACzJ,iJAAiJ;YACjJ,IAAIkH,oBAAoB,OAAOA,iBAAiB,GAAG,KAAK,YAAY;gBAChED,eAAe,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAACnoB;oBACnC4mB,qBAAqB,GAAG,CAAC5mB;gBAC7B;gBACAmoB,eAAe,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAACnoB;oBACpC6mB,sBAAsB,GAAG,CAAC7mB;gBAC9B;YACJ;QACJ;QACAa,eAAe,MAAM,CAAC,OAAO,CAAC,CAAC3B;YAC3B,IAAImpB;YACJ,IAAMxM,aAAcwM,CAAAA,kBAAkBjkB,QAAQ,MAAK,KAAM,OAAO,KAAK,IAAIikB,eAAe,CAACnpB,OAAO,UAAU,CAAC;YAC3G,IAAI,CAAC2c,YAAY;gBACb;YACJ;YACA,oCAAoC;YACpC,IAAM4C,gBAAgBvf,OAAO,OAAO,GAAG2c,WAAW,IAAI,CAAC,CAACyM,IAAIA,EAAE,OAAO,KAAKppB,OAAO,OAAO,IAAI2c;YAC5F,IAAI,CAAC4C,eAAe;gBAChB;YACJ;YACA,IAAM8J,iBAAiB7X,aAAa+N;YACpC8J,eAAe,OAAO,CAAC,CAACD;gBACpBJ,oBAAoBI,GAAGppB;YAC3B;QACJ;IACJ;IACA,IAAMspB,sBAAsB7B,SAAS,MAAM,CAAC,CAAC3mB,QAAQ,CAAC4mB,qBAAqB,GAAG,CAAC5mB,UAAU,CAAC0mB,UAAU,UAAU1mB;IAC9G,IAAMyoB,uBAAuB7oB,UAAU,MAAM,CAAC,CAACI,QAAQ,CAAC6mB,sBAAsB,GAAG,CAAC7mB,UAAU,CAAC0mB,UAAU,QAAQ1mB;IAC/G,OAAO;QACH,WAAWyoB;QACX,sBAAsBD;QACtB,aAAa1oB,YAAY,MAAM,CAAC,CAACd,QAAQ,CAAC0nB,UAAU,UAAU1nB,MAAM,GAAG;IAC3E;AACJ;AACA,IAAM0pB,8BAA8B;IAChC,OAAO;QACH,MAAM;QACA,uBAAuBjoB,IAAI;mBAAjC;gBACI,IAAQygB,SAA+EzgB,KAA/EygB,QAAQvgB,iBAAuEF,KAAvEE,gBAAgBhC,aAAuD8B,KAAvD9B,YAAY6E,SAA2C/C,KAA3C+C,QAAQqiB,iBAAmCplB,KAAnColB,gBAAgBhlB,iBAAmBJ,KAAnBI;gBACpE,IAAI,CAACkO,IAAI,YAAY,IAAI;oBACrB,OAAO;wBACH,WAAW,EAAE;wBACb,sBAAsB,EAAE;wBACxB,aAAa,EAAE;oBACnB;gBACJ;gBACA,IAAIU,sBAAsBjM,WAAWkM,kBAAkBlM,SAAS;oBAC5D,OAAO;wBACH,WAAW,EAAE;wBACb,sBAAsB,EAAE;wBACxB,aAAa;4BACT;gCACI,MAAMA,OAAO,IAAI;gCACjB,KAAKA,OAAO,KAAK;gCACjB,YAAY;oCACR,MAAM7E,WAAW,IAAI;oCACrB,OAAO6E,OAAO,KAAK;oCACnB,MAAM7E,WAAW,IAAI,IAAI;oCACzB,iBAAiB;oCACjB,YAAY;gCAChB;4BACJ;yBACH;oBACL;gBACJ;gBACA+mB,iBAAiB/mB,YAAYkC;gBAC7B,IAAMI,SAASxB,sBAAsByhB,QAAQvgB,gBAAgBhC,YAAYknB,gBAAgBhlB;gBACzF,OAAOI;YACX;;IACJ;AACJ;AAEA,SAAS0nB,oBAAoBjV,UAAU,EAAEwN,MAAM;IAC3C,IAAM0H,qBAAqB5U,kCAAkC;QACzD,MAAMkN,OAAO,OAAO,CAAC,IAAI;QACzB,SAASA,OAAO,OAAO,CAAC,OAAO;IACnC;IACA,qCAAqC;IACrC,IAAM2H,mBAAmBD,sBAAsB,iBAAiBA,sBAAsBA,mBAAmB,WAAW,IAAI7V,mBAAmB6V,mBAAmB,WAAW,EAAElV,WAAW,IAAI,EAAE,KAAK;IACjM,IAAImV,oBAAoBA,iBAAiB,cAAc,EAAE;QACrD,OAAO;YACHD;YACA,gBAAgBpV;YAChB,gBAAgBQ,kCAAkC;gBAC9C,MAAMN,WAAW,IAAI;gBACrB,SAASmV,iBAAiB,cAAc;YAC5C;QACJ;IACJ;IACA,OAAO;QACH,oBAAoBzpB;QACpB,gBAAgBoU;QAChB,gBAAgBQ,kCAAkC;YAC9C,MAAMN,WAAW,IAAI;YACrB,SAAS,aAAaA,aAAaA,WAAW,OAAO,GAAGtU;QAC5D;IACJ;AACJ;AACA,IAAM0pB,gCAAN;aAAMA,gBAyKUC,YAAY;kCAzKtBD;QA0KE,IAAI,CAAC,mBAAmB,GAAG;QAC3B,IAAI,CAAC,aAAa,GAAG,IAAI9W;QACzB,IAAI,CAAC,KAAK,GAAG,IAAI+R,aAAa;YAC1B,0BAA0B,IAAIX,UAAU;YACxC,cAAc,IAAIQ,mBAAmB;YACrC,oBAAoB,IAAIA,mBAAmB;YAC3C,mBAAmB,IAAIA,mBAAmB;QAC9C;QACA,IAAI,CAAC,eAAe,GAAGvS,OAAO,cAAc,CAAC,oBAAoB;QACjE,IAAI,CAAC,YAAY,GAAG0X;QACpB,IAAI,CAAC,UAAU,GAAGA,aAAa,UAAU;;oBApL3CD;;YACIE,KAAAA;mBAAN,SAAMA,aAAatV,UAAU;;uBAA7B;oBACI,IAAQtP,UAAY,MAAK,YAAY,CAA7BA;oBACR,IAA+D6kB,4BAAAA,MAAK,mBAAmB,CAACvV,aAAhFkV,qBAAuDK,0BAAvDL,oBAAoB/nB,iBAAmCooB,0BAAnCpoB,gBAAgBglB,iBAAmBoD,0BAAnBpD;oBAC5C,IAAoFjE,OAAAA,MAAM,MAAK,KAAK,CAAC,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC;wBAC7Hxd;wBACAsP;wBACAkV;wBACA/nB;wBACAglB;oBACJ,IANwBqD,uBAA4DtH,KAA5E,gBAAsDuH,oBAAsBvH,KAAtC;oBAO9C,OAAO;wBACH,gBAAgBsH;wBAChB,gBAAgBC;oBACpB;gBACJ;;;;YAEMC,KAAAA;mBADN,kDAAkD;YAClD,SAAMA,uBAAuB1V,UAAU;;uBAAvC;oBACI,IAAQtP,UAAY,MAAK,YAAY,CAA7BA;oBACR,MAAM,MAAK,KAAK,CAAC,SAAS,CAAC,wBAAwB,CAAC,IAAI,CAAC;wBACrDA;wBACAsP;oBACJ;oBACA,IAAI2V,eAAerV,kCAAkC;wBACjD,MAAM,MAAK,YAAY,CAAC,OAAO,CAAC,IAAI;wBACpC,SAAS,MAAK,YAAY,CAAC,OAAO,CAAC,OAAO;oBAC9C;oBACA,IAAI,CAACqV,cAAc;wBACfA,eAAe;4BACX,SAAS,MAAK,YAAY,CAAC,OAAO,CAAC,OAAO,IAAI;4BAC9C,aAAa;4BACb,aAAa,CAAC;wBAClB;wBACAlV,kBAAkB;4BACd,CAAC,MAAK,YAAY,CAAC,OAAO,CAAC,IAAI,CAAC,EAAEkV;wBACtC;oBACJ;oBACA,2KAA2K;oBAC3K,2KAA2K;oBAC3K,IAAIA,gBAAgB,iBAAiBA,gBAAgB,CAACtW,mBAAmBsW,aAAa,WAAW,EAAE3V,WAAW,IAAI,EAAE,KAAK,EAAE;wBACvH,IAAI,aAAaA,cAAc,WAAWA,YAAY;4BAClD2V,aAAa,WAAW,GAAGva,UAAU,QAAQ,CAAC,CAAC,GAAGua,gBAAgB,OAAO,KAAK,IAAIA,aAAa,WAAW,EAAE;gCACxG,CAAC3V,WAAW,IAAI,CAAC,EAAE;oCACf,gBAAgB,aAAaA,aAAaA,WAAW,OAAO,GAAGA,WAAW,KAAK;gCACnF;4BACJ;wBACJ;oBACJ;oBACA,IAA+DuV,4BAAAA,MAAK,mBAAmB,CAACvV,aAAhFkV,qBAAuDK,0BAAvDL,oBAAoB/nB,iBAAmCooB,0BAAnCpoB,gBAAgBglB,iBAAmBoD,0BAAnBpD;oBAC5C,IAAoFjE,OAAAA,MAAM,MAAK,KAAK,CAAC,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC;wBAC7Hxd;wBACAsP;wBACAkV;wBACA/nB;wBACAglB;oBACJ,IANwBqD,uBAA4DtH,KAA5E,gBAAsDuH,oBAAsBvH,KAAtC;oBAO9C,IAAI0H;oBACJ,IAAIC;oBACJ,qEAAqE;oBACrE,IAAIL,sBAAsB;wBACtB,IAAIna,IAAI,kBAAkB,CAACma,uBAAuB;4BAC9C,IAAMlnB,cAAc+M,IAAI,YAAY,KAAKma,qBAAqB,WAAW,GAAGA,qBAAqB,cAAc,IAAIA,qBAAqB,WAAW,IAAI;4BACvJ,IAAMM,iBAAiB,MAAM,MAAK,eAAe,CAACxnB,aAAa0R,YAAY,CAAC;4BAC5E,wDAAwD;4BACxD,IAAM+V,qBAAoBxV,kCAAkCnF,UAAU,QAAQ,CAAC,CAAC,GAAG4E,YAAY;gCAC3F,sCAAsC;gCACtC,8EAA8E;gCAC9E,OAAO1R;4BACX,IAAIwnB;4BACJF,YAAYE;4BACZD,YAAYE;wBAChB,OAAO;4BACH,IAA8CC,QAAAA,MAAM,MAAK,KAAK,CAAC,SAAS,CAAC,kBAAkB,CAAC,IAAI,CAAC;gCAC7F,SAAS,MAAK,YAAY,CAAC,OAAO;gCAClChW;gCACA,gBAAgBwV;gCAChB,MAAM;4BACV,IALwBS,oBAAsBD,MAAtC;4BAMRJ,YAAYK;4BACZJ,YAAYJ;wBAChB;oBACJ,OAAO;wBACH,IAAI1Z,sBAAsBiE,aAAa;4BACnC,kEAAkE;4BAClE,IAAMkW,kBAAiB,MAAM,MAAK,eAAe,CAAClW,WAAW,KAAK,EAAEA,YAAY,CAAC;4BACjF,wDAAwD;4BACxD,IAAMmW,qBAAoB5V,kCAAkCP,YAAYkW;4BACxE,IAA8CE,QAAAA,MAAM,MAAK,KAAK,CAAC,SAAS,CAAC,kBAAkB,CAAC,IAAI,CAAC;gCAC7F,SAAS,MAAK,YAAY,CAAC,OAAO;gCAClCpW;gCACA,gBAAgBkW;gCAChB,MAAM;4BACV,IALwBG,qBAAsBD,MAAtC;4BAMRR,YAAYS;4BACZR,YAAYM;wBAChB,OAAO;4BACHrqB,MAAMwP,WAAW,gBAAgB,CAACA,WAAW,WAAW,EAAEA,WAAW,cAAc,EAAE;gCACjF,UAAU0E,WAAW,IAAI;gCACzB,aAAaA,WAAW,OAAO;gCAC/B,gBAAgBxO,KAAK,SAAS,CAACikB;4BACnC;wBACJ;oBACJ;oBACA,MAAM,MAAK,KAAK,CAAC,SAAS,CAAC,iBAAiB,CAAC,IAAI,CAAC;wBAC9C/kB;wBACAsP;wBACA,gBAAgB4V;oBACpB;oBACA,OAAO;wBACH,gBAAgBA;wBAChB,gBAAgBC;oBACpB;gBACJ;;;;YACAS,KAAAA;mBAAAA,SAAAA,qBAAoBtW,UAAU;gBAC1B,OAAOiV,oBAAoBjV,YAAY,IAAI,CAAC,YAAY;YAC5D;;;YACMuW,KAAAA;mBAAN,SAAMA,gBAAgBC,WAAW,EAAExW,UAAU,EAAE8K,YAAY;;uBAA3D;oBACI,IAAM2L;mCAAc;4BAChB,IAAIC,eAAe,MAAK,aAAa,CAAC,GAAG,CAACF;4BAC1C,IAAIE,cAAc;gCACd,OAAOA;4BACX;4BACA,IAAI;gCACA,IAAIta,MAAM,MAAM,MAAK,UAAU,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAACoa,aAAa,CAAC;gCACnE,IAAI,CAACpa,OAAO,CAAEA,CAAAA,eAAeua,QAAO,GAAI;oCACpCva,MAAM,MAAMtL,MAAM0lB,aAAa,CAAC;gCACpC;gCACAE,eAAe,MAAMta,IAAI,IAAI;4BACjC,EAAE,OAAO6R,KAAK;gCACVyI,eAAe,MAAM,MAAK,YAAY,CAAC,aAAa,CAAC,KAAK,CAAC,SAAS,CAAC,eAAe,CAAC,IAAI,CAAC;oCACtF,IAAIF;oCACJ,OAAOvI;oCACP,MAAM;oCACN,WAAW;oCACX,QAAQ,MAAK,YAAY;gCAC7B;gCACA,IAAI,CAACyI,cAAc;oCACf,OAAO,MAAK,eAAe,CAACF,YAAY;oCACxC1qB,MAAMwP,WAAW,gBAAgB,CAACA,WAAW,WAAW,EAAEA,WAAW,cAAc,EAAE;wCACjFkb;wCACA,YAAYxW,WAAW,IAAI;wCAC3B,UAAU,MAAK,YAAY,CAAC,OAAO,CAAC,IAAI;oCAC5C,GAAG,GAAGiO,KAAK;gCACf;4BACJ;4BACAxS,OAAOib,aAAa,QAAQ,IAAIA,aAAa,OAAO,IAAIA,aAAa,MAAM,EAAE,GAAGF,YAAY,6BAA6B,CAAC;4BAC1H,MAAK,aAAa,CAAC,GAAG,CAACA,aAAaE;4BACpC,OAAOA;wBACX;wCA/BMD;;;;oBAgCN,IAAMG;mCAAmB;4BACrB,IAAMF,eAAe,MAAMD;4BAC3B,IAAMtpB,iBAAiBkO,IAAI,4BAA4B,CAACqb,cAAc;gCAClE,SAASF;4BACb;4BACA,IAA8CtI,OAAAA,MAAM,MAAK,KAAK,CAAC,SAAS,CAAC,kBAAkB,CAAC,IAAI,CAAC;gCAC7F,SAAS,MAAK,YAAY,CAAC,OAAO;gCAClClO;gCACA0W;gCACAvpB;gCACAqpB;gCACA,MAAM;4BACV,IAPwBP,oBAAsB/H,KAAtC;4BAQR,OAAO+H;wBACX;wCAdMW;;;;oBAeN,IAAI,CAAC,MAAK,eAAe,CAACJ,YAAY,EAAE;wBACpC,MAAK,eAAe,CAACA,YAAY,GAAGI,mBAAmB,IAAI,CAAC,CAACxa,MAAMA;oBACvE;oBACA,OAAO,MAAK,eAAe,CAACoa,YAAY;gBAC5C;;;;WAxKEpB;;AAwLN,IAAMyB,8BAAN;aAAMA,cAsVU/I,IAAI;kCAtVd+I;QAuVE,IAAI,CAAC,KAAK,GAAG,IAAIxG,aAAa;YAC1B,cAAc,IAAIH,mBAAmB;YACrC,iBAAiB,IAAIA,mBAAmB;YACxC,eAAe;YACf,WAAW,IAAIR;YACf,cAAc,IAAIM,kBAAkB;YACpC,uDAAuD;YACvD,4BAA4B,IAAIA,kBAAkB;QACtD;QACA,IAAI,CAAC,IAAI,GAAGlC;QACZ,IAAI,CAAC,aAAa,GAAG,CAAC;QACtB,IAAI,CAAC,UAAU,GAAG,CAAC;QACnB,IAAI,CAAC,uBAAuB,CAACA,KAAK,OAAO;;oBAnW3C+I;;YACF,mCAAmC;YACnCC,KAAAA;mBAAAA,SAAAA,eAAe7O,aAAa,EAAEC,WAAW;gBACrC,IAA+B6O,sBAAAA,mBAAmB9O,eAAeC,cAAzDC,aAAuB4O,oBAAvB5O,YAAY3c,SAAWurB,oBAAXvrB;gBACpB,IAAMwrB,aAAa7kB,OAAO,IAAI,CAACgW;gBAC/B6O,WAAW,OAAO,CAAC,CAACC;oBAChB,IAAMC,aAAa/O,UAAU,CAAC8O,UAAU;oBACxCC,WAAW,OAAO,CAAC,CAACxO;wBAChB,IAAMgM,mBAAmB5K,mBAAmB,IAAI,CAAC,aAAa,EAAEmN,WAAWvO,WAAW,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,YAAY;wBACvH,IAAI,CAACgM,oBAAoBhM,aAAaA,UAAU,GAAG,EAAE;4BACjD,IAAI,CAAC,SAAS,CAAC;gCACX,SAASuO;gCACT,KAAKvO,UAAU,GAAG;gCAClB,KAAKA,UAAU,GAAG;gCAClB,QAAQ;gCACR,QAAQA;gCACR,MAAMR,YAAY,IAAI;4BAC1B;wBACJ;oBACJ;gBACJ;gBACA,OAAO;oBACHC;oBACA3c;gBACJ;YACJ;;;YACM2rB,KAAAA;mBAAN,SAAMA,UAAU/O,OAAO,EAAE0C,YAAY;;uBAArC;oBACI,IAAQgD,aAAAA;oBACR,8CAA8C;oBAC9C,qFAAqF;oBACrF,2EAA2E;oBAC3E,kGAAkG;oBAClG,IAAM9D,YAAYa,uBAAuB;wBACrCzC;wBACA0C;wBACA,YAAYgD,KAAK,OAAO,CAAC,MAAM;oBACnC;oBACA,IAAI9D,aAAa,OAAO,KAAK,IAAIA,UAAU,KAAK,EAAE;wBAC9C,MAAMhe,QAAQ,GAAG,CAACge,UAAU,KAAK,CAAC,GAAG;uCAAC,gCAAOsE;gCACzC,MAAMtiB,QAAQ,GAAG,CAAC,MAAK,iBAAiB,CAACsiB,YAAY;oCACjD,UAAUtE,UAAU,QAAQ;gCAChC;gCACA;4BACJ;4CAL6CsE;;;;oBAMjD;oBACA,IAAM8I,eAAe,MAAM,MAAK,KAAK,CAAC,SAAS,CAAC,eAAe,CAAC,IAAI,CAAC;wBACjEhP;wBACA4B;wBACA,QAAQ8D,KAAK,OAAO,CAAC,MAAM;wBAC3B,QAAQA;oBACZ;oBACA,IAAmBuJ,eAAiBD,aAA5B;oBACR,0DAA0D;oBAC1D3b,OAAO4b,cAAc,CAAC,YAAY,EAAEjP,QAAQ,cAAc,EAAE0F,KAAK,OAAO,CAAC,IAAI,CAAC,yBAAyB,EAAE1F,QAAQ,oCAAoC,CAAC;oBACtJ,sBAAsB;oBACtB,IAAMsM,mBAAmB5K,mBAAmB,MAAK,aAAa,EAAE1B,SAASiP,cAAc,MAAK,KAAK,CAAC,SAAS,CAAC,YAAY;oBACxH,IAAMC,WAAW,CAAC9rB;wBACd,IAAI,CAACA,OAAO,KAAK,EAAE;4BACfA,OAAO,KAAK,GAAG,EAAE;wBACrB;wBACAmQ,cAAcnQ,OAAO,KAAK,EAAEsiB,KAAK,OAAO,CAAC,IAAI;oBACjD;oBACA,IAAI4G,oBAAoBA,iBAAiB,GAAG,EAAE;wBAC1C4C,SAAS5C;wBACT,OAAOA,iBAAiB,GAAG;oBAC/B,OAAO,IAAIA,oBAAoBA,iBAAiB,OAAO,IAAI,CAACA,iBAAiB,MAAM,EAAE;wBACjF,IAAMtb,UAAU,MAAMsb,iBAAiB,OAAO;wBAC9CA,iBAAiB,MAAM,GAAG;wBAC1B,IAAI,CAACA,iBAAiB,GAAG,EAAE;4BACvBA,iBAAiB,GAAG,GAAGtb;wBAC3B;wBACAke,SAAS5C;wBACT,OAAOtb;oBACX,OAAO,IAAIsb,kBAAkB;wBACzB,IAAMkC;uCAAmB;gCACrB,IAAMxd,UAAU,MAAMsb,iBAAiB,GAAG;gCAC1C2C,aAAa,GAAG,GAAGje;gCACnBie,aAAa,MAAM,GAAG;gCACtBC,SAASD;gCACT,IAAME,UAAUzN,mBAAmB,MAAK,aAAa,EAAE1B,SAASiP,cAAc,MAAK,KAAK,CAAC,SAAS,CAAC,YAAY;gCAC/G,IAAIE,SAAS;oCACTA,QAAQ,GAAG,GAAGne;oCACdme,QAAQ,MAAM,GAAG;gCACrB;gCACA,OAAOne;4BACX;4CAXMwd;;;;wBAYN,IAAMY,UAAUZ;wBAChB,MAAK,SAAS,CAAC;4BACXxO;4BACA,QAAQ;4BACR,QAAQsM;4BACR,MAAM5G,KAAK,OAAO,CAAC,IAAI;4BACvB,KAAK;4BACL0J;wBACJ;wBACA,OAAOA;oBACX,OAAO;wBACH,IAAI1M,gBAAgB,OAAO,KAAK,IAAIA,aAAa,eAAe,EAAE;4BAC9D,OAAO;wBACX;wBACA,IAAM2M;uCAAmB;gCACrB,IAAMre,UAAU,MAAMie,aAAa,GAAG;gCACtCA,aAAa,GAAG,GAAGje;gCACnBie,aAAa,MAAM,GAAG;gCACtBC,SAASD;gCACT,IAAME,UAAUzN,mBAAmB,MAAK,aAAa,EAAE1B,SAASiP,cAAc,MAAK,KAAK,CAAC,SAAS,CAAC,YAAY;gCAC/G,IAAIE,SAAS;oCACTA,QAAQ,GAAG,GAAGne;oCACdme,QAAQ,MAAM,GAAG;gCACrB;gCACA,OAAOne;4BACX;4CAXMqe;;;;wBAYN,IAAMC,WAAUD;wBAChB,MAAK,SAAS,CAAC;4BACXrP;4BACA,QAAQ;4BACR,QAAQiP;4BACR,MAAMvJ,KAAK,OAAO,CAAC,IAAI;4BACvB,KAAK;4BACL4J,SAAAA;wBACJ;wBACA,OAAOA;oBACX;gBACJ;;;;YACA;;;;GAID,GAAG,8DAA8D;YAChEC,KAAAA;mBAAAA,SAAAA,kBAAkBxY,KAAgC2L,YAAY;oBAA5C3L,iBAAAA,iBAAiBmC,gBAAjBnC;gBACd,IAAQ2O,OAAS,IAAI,CAAbA;gBACR,IAAM3e,OAAO2b,gBAAgB,OAAO,KAAK,IAAIA,aAAa,IAAI;gBAC9D,IAAMjB,WAAWiB,gBAAgB,OAAO,KAAK,IAAIA,aAAa,QAAQ;gBACtE,IAAIyD,YAAYzD,gBAAgB,OAAO,KAAK,IAAIA,aAAa,SAAS;gBACtE,IAAM8M,WAAW,EAAE;gBACnB,IAAIzoB,SAAS,SAAS;oBAClB,IAAQ0oB,aAAe,IAAI,CAAnBA;oBACR,IAAI,CAACtJ,WAAWA,YAAY,EAAE;oBAC9B,IAAIuJ,YAAYD,UAAU,CAACE,eAAe;oBAC1C,IAAI,CAACD,WAAWA,YAAYD,UAAU,CAACE,eAAe,GAAG;wBACrD,MAAM,IAAI,CAAC,IAAI,CAAC,IAAI;oBACxB;oBACA,IAAIxJ,UAAU,OAAO,CAACuJ,cAAc,GAAG,OAAOF;oBAC9CrJ,UAAU,IAAI,CAACuJ;gBACnB;gBACA,IAAMxJ,aAAa,IAAI,CAAC,aAAa;gBACrC,IAAM0J,WAAWlK,KAAK,OAAO,CAAC,IAAI;gBAClC,yCAAyC;gBACzC,IAAI,CAACQ,UAAU,CAACyJ,eAAe,EAAE;oBAC7BzJ,UAAU,CAACyJ,eAAe,GAAG,CAAC;gBAClC;gBACA,mEAAmE;gBACnE,IAAMjf,QAAQwV,UAAU,CAACyJ,eAAe;gBACxC,IAAME,WAAW,CAACpc,OAAMrQ;oBACpB,IAAI0sB;oBACJ,IAAQ3oB,UAAmB/D,OAAnB+D,SAAS4oB,QAAU3sB,OAAV2sB;oBACjBrf,KAAK,CAAC+C,MAAK,GAAG/C,KAAK,CAAC+C,MAAK,IAAI,CAAC;oBAC9B,IAAM4N,WAAW3Q,KAAK,CAAC+C,MAAK;oBAC5B,IAAMuc,gBAAgB3O,QAAQ,CAACla,QAAQ;oBACvC,IAAM8oB,qBAAqBpS,QAAQmS,iBAAkBA,CAAAA,cAAc,KAAK,IAAK,CAACF,CAAAA,6BAA6BE,cAAc,WAAU,KAAM,OAAO,KAAK,IAAIF,2BAA2B,KAAI,CAAC;oBACzL,IAAI,CAACE,iBAAiBA,cAAc,QAAQ,KAAK,kBAAkB,CAACA,cAAc,MAAM,IAAKnS,CAAAA,QAAQ,CAACkS,WAAW,CAACE,qBAAqBF,QAAQH,WAAWI,cAAc,IAAG,GAAI;wBAC3K3O,QAAQ,CAACla,QAAQ,GAAG/D;oBACxB;gBACJ;gBACA,IAAM8sB,SAAS,CAACC,MAAMA,OAAOA,IAAI,IAAI,IAAIA,IAAI,IAAI,CAACjK,UAAU,CAACyJ,eAAe,EAAExJ;gBAC9E,IAAMiK;+BAAmB,gCAAO7oB;wBAC5B,IAAQkJ,SAAW,OAAMiV,KAAK,aAAa,CAAC,yBAAyB,CAAC;4BAClE,IAAIne;wBACR,EAAC,EAFOkJ;wBAGR,IAAIA,OAAO,QAAQ,EAAE;4BACjB,IAAIwT;4BACJ,IAAI;gCACAA,qBAAqB,MAAMxT,OAAO,QAAQ;4BAC9C,EAAE,OAAO/M,OAAO;gCACZugB,qBAAqB,MAAMyB,KAAK,aAAa,CAAC,KAAK,CAAC,SAAS,CAAC,eAAe,CAAC,IAAI,CAAC;oCAC/E,IAAIne;oCACJ7D;oCACA,MAAM;oCACN,WAAW;oCACX,QAAQgiB;gCACZ;4BACJ;4BACA,IAAI,CAACjV,OAAO,MAAM,EAAE;gCAChB,MAAMyf,OAAOjM;gCACbxT,OAAO,MAAM,GAAG;4BACpB;wBACJ;oBACJ;oCAtBM2f,iBAA0B7oB;;;;gBAuBhCwC,OAAO,IAAI,CAAC2b,KAAK,OAAO,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC2K;oBACtC,IAAMC,YAAY5K,KAAK,OAAO,CAAC,MAAM,CAAC2K,UAAU;oBAChDC,UAAU,OAAO,CAAC,CAACltB;wBACf,IAAIA,OAAO,KAAK,CAAC,QAAQ,CAACusB,iBAAiB;4BACvCE,SAASQ,WAAWjtB;wBACxB;oBACJ;gBACJ;gBACA,oEAAoE;gBACpE,IAAIsiB,KAAK,OAAO,CAAC,aAAa,KAAK,mBAAmBjE,aAAa,iBAAiB;oBAChFiE,KAAK,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,CAAChe;wBAC1B,IAAIA,OAAO,UAAU,KAAKioB,gBAAgB;4BACtCH,SAAS,IAAI,CAACY,iBAAiB1oB,OAAO,IAAI;wBAC9C;oBACJ;gBACJ;gBACA,OAAO8nB;YACX;;;YACA,kIAAkI;YAClI,0EAA0E;YAC1E,6DAA6D;YAC7D,0FAA0F;YAC1Fe,KAAAA;mBAAAA,SAAAA,cAAcvQ,OAAO,EAAE0C,YAAY;gBAC/B,IAAQgD,OAAS,IAAI,CAAbA;gBACR,IAAM9D,YAAYa,uBAAuB;oBACrCzC;oBACA0C;oBACA,YAAYgD,KAAK,OAAO,CAAC,MAAM;gBACnC;gBACA,IAAI9D,aAAa,OAAO,KAAK,IAAIA,UAAU,KAAK,EAAE;oBAC9CA,UAAU,KAAK,CAAC,OAAO,CAAC,CAACsE;wBACrB,IAAI,CAAC,iBAAiB,CAACA,YAAY;4BAC/B,UAAUtE,UAAU,QAAQ;wBAChC;oBACJ;gBACJ;gBACA,IAAM0K,mBAAmB5K,mBAAmB,IAAI,CAAC,aAAa,EAAE1B,SAAS4B,WAAW,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,YAAY;gBACrH,IAAMsN,WAAW,CAAC9rB;oBACd,IAAI,CAACA,OAAO,KAAK,EAAE;wBACfA,OAAO,KAAK,GAAG,EAAE;oBACrB;oBACAmQ,cAAcnQ,OAAO,KAAK,EAAEsiB,KAAK,OAAO,CAAC,IAAI;gBACjD;gBACA,IAAI4G,kBAAkB;oBAClB,IAAI,OAAOA,iBAAiB,GAAG,KAAK,YAAY;wBAC5C4C,SAAS5C;wBACT,IAAI,CAACA,iBAAiB,MAAM,EAAE;4BAC1BA,iBAAiB,MAAM,GAAG;4BAC1B,IAAIA,iBAAiB,IAAI,KAAK5G,KAAK,OAAO,CAAC,IAAI,EAAE;gCAC7C9D,UAAU,MAAM,GAAG;4BACvB;wBACJ;wBACA,OAAO0K,iBAAiB,GAAG;oBAC/B;oBACA,IAAI,OAAOA,iBAAiB,GAAG,KAAK,YAAY;wBAC5C,IAAM7b,SAAS6b,iBAAiB,GAAG;wBACnC,IAAI,CAAE7b,CAAAA,kBAAkB7M,OAAM,GAAI;4BAC9BsrB,SAAS5C;4BACT,IAAI,CAAC,SAAS,CAAC;gCACXtM;gCACA,QAAQ;gCACR,MAAM0F,KAAK,OAAO,CAAC,IAAI;gCACvB,KAAKjV;gCACL,QAAQ6b;4BACZ;4BACA,OAAO7b;wBACX;oBACJ;gBACJ;gBACA,IAAImR,UAAU,GAAG,EAAE;oBACf,IAAI,CAACA,UAAU,MAAM,EAAE;wBACnBA,UAAU,MAAM,GAAG;oBACvB;oBACA,OAAOA,UAAU,GAAG;gBACxB;gBACA,IAAIA,UAAU,GAAG,EAAE;oBACf,IAAM4O,UAAS5O,UAAU,GAAG;oBAC5B,IAAI4O,mBAAkB5sB,SAAS;wBAC3B,IAAMqO,YAAayQ,CAAAA,gBAAgB,OAAO,KAAK,IAAIA,aAAa,IAAG,MAAO,UAAUxP,WAAW,WAAW,GAAGA,WAAW,WAAW;wBACnI,MAAM,IAAI1P,MAAM0P,WAAW,gBAAgB,CAACjB,WAAWiB,WAAW,cAAc,EAAE;4BAC9E,UAAUwS,KAAK,OAAO,CAAC,IAAI;4BAC3B,eAAe1F;wBACnB;oBACJ;oBACA4B,UAAU,GAAG,GAAG4O;oBAChB,IAAI,CAAC,SAAS,CAAC;wBACXxQ;wBACA,QAAQ;wBACR,MAAM0F,KAAK,OAAO,CAAC,IAAI;wBACvB,KAAK9D,UAAU,GAAG;wBAClB,QAAQA;oBACZ;oBACA,OAAOA,UAAU,GAAG;gBACxB;gBACA,MAAM,IAAIpe,MAAM0P,WAAW,gBAAgB,CAACA,WAAW,WAAW,EAAEA,WAAW,cAAc,EAAE;oBAC3F,UAAUwS,KAAK,OAAO,CAAC,IAAI;oBAC3B,eAAe1F;gBACnB;YACJ;;;YACAyQ,KAAAA;mBAAAA,SAAAA,kBAAkBC,SAAS,EAAExK,UAAU,EAAEnP;oBAAAA,eAAAA,iBAAe,CAAC,IAAhBA;gBACrC,IAAQ2O,OAAS,IAAI,CAAbA;gBACR,IAAI,CAAC,aAAa,CAACgL,UAAU,GAAGxK;gBAChC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,0BAA0B,CAAC,IAAI,CAAC;oBACjDA;oBACA,SAASR,KAAK,OAAO;oBACrB,QAAQA;oBACRgL;oBACA,mBAAmBhO,aAAa,iBAAiB;gBACrD;YACJ;;;YACAiO,KAAAA;mBAAAA,SAAAA,UAAU5Z;oBAAEiJ,UAAFjJ,IAAEiJ,SAAS5c,SAAX2T,IAAW3T,QAAQ2D,OAAnBgQ,IAAmBhQ,MAAM6pB,MAAzB7Z,IAAyB6Z,KAAKxB,UAA9BrY,IAA8BqY,SAASjgB,SAAvC4H,IAAuC5H,QAAQ8B,MAA/C8F,IAA+C9F;gBACrD,IAAQ9J,UAA+B/D,OAA/B+D,yBAA+B/D,OAAtBsN,OAAAA,mCAAQ,2BAAsBkR,YAAY5O,UAAU,gCAAgC,CAAC5P,QAAQ;oBAC1G;oBACA;iBACH;gBACD,IAAMmf,SAAS1N,MAAM,OAAO,CAACnE,SAASA,QAAQ;oBAC1CA;iBACH;gBACD6R,OAAO,OAAO,CAAC,CAACT;oBACZ,IAAI,CAAC,IAAI,CAAC,aAAa,CAACA,GAAG,EAAE;wBACzB,IAAI,CAAC,aAAa,CAACA,GAAG,GAAG,CAAC;oBAC9B;oBACA,IAAI,CAAC,IAAI,CAAC,aAAa,CAACA,GAAG,CAAC9B,QAAQ,EAAE;wBAClC,IAAI,CAAC,aAAa,CAAC8B,GAAG,CAAC9B,QAAQ,GAAG,CAAC;oBACvC;oBACA,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC8B,GAAG,CAAC9B,QAAQ,CAAC7Y,QAAQ,EAAE;wBAC3C,IAAI,CAAC,aAAa,CAAC2a,GAAG,CAAC9B,QAAQ,CAAC7Y,QAAQ,GAAG6L,UAAU,QAAQ,CAAC;4BAC1D7L;4BACA,OAAO;gCACH;6BACH;wBACL,GAAGya,WAAW;4BACVgP;4BACAzhB;4BACAigB;wBACJ;wBACA,IAAIne,KAAK;4BACL,IAAI,CAAC,aAAa,CAAC6Q,GAAG,CAAC9B,QAAQ,CAAC7Y,QAAQ,CAAC,GAAG,GAAG8J;wBACnD;wBACA;oBACJ;oBACA,IAAMqb,mBAAmB,IAAI,CAAC,aAAa,CAACxK,GAAG,CAAC9B,QAAQ,CAAC7Y,QAAQ;oBACjE,IAAIioB,WAAW,CAAC9C,iBAAiB,OAAO,EAAE;wBACtCA,iBAAiB,OAAO,GAAG8C;oBAC/B;gBACJ;YACJ;;;YACAyB,KAAAA;mBAAAA,SAAAA,wBAAwBC,WAAW;gBAC/B,IAAMC,sBAAsBvO;gBAC5B,IAAMwO,aAAaF,YAAY,EAAE,IAAIA,YAAY,IAAI;gBACrD,IAAIE,cAAc,CAACD,mBAAmB,CAACC,WAAW,EAAE;oBAChDD,mBAAmB,CAACC,WAAW,GAAG,IAAI,CAAC,aAAa;gBACxD;YACJ;;;WArVEvC;;AAuWN,IAAMwC,8BAAN;aAAMA,cA6UUvL,IAAI;kCA7UduL;QA8UE,IAAI,CAAC,KAAK,GAAG,IAAIhJ,aAAa;YAC1B,sBAAsB,IAAIL,kBAAkB;YAC5C,gBAAgB,IAAIA,kBAAkB;YACtC,eAAe,IAAIE,mBAAmB;YACtC,QAAQ,IAAIR,UAAU;YACtB,qBAAqB,IAAIT,SAAS;YAClC,iBAAiB,IAAIS,UAAU;YAC/B,qBAAqB,IAAIA,UAAU;YACnC,uBAAuB,IAAIA,UAAU;YACrC,eAAe;YACf,oBAAoB,IAAIA;YACxB,WAAW,IAAIA;QACnB;QACA,IAAI,CAAC,IAAI,GAAG5B;QACZ,IAAI,CAAC,aAAa,GAAG,CAAC;;oBA5VxBuL;;YACFC,KAAAA;mBAAAA,SAAAA,wBAAwBrR,aAAa,EAAEC,WAAW;gBAC9C,IAAMqR,cAAcrR,YAAY,OAAO,IAAI,EAAE;gBAC7C,OAAOqR,YAAY,MAAM,CAAC,CAACnd,KAAKtM;oBAC5B,IAAI,CAAC,cAAc,CAACA,QAAQsM,KAAK;wBAC7B,OAAO;oBACX;oBACA,OAAOA;gBACX,GAAG6L,cAAc,OAAO;YAC5B;;;YACAuR,KAAAA;mBAAAA,SAAAA,iBAAiBpY,EAAE,EAAEqY,eAAe;gBAChC,IAAQ3pB,SAAmB2pB,gBAAnB3pB,QAAQ4b,SAAW+N,gBAAX/N;gBAChB,IAAQ7P,QAAgB/L,OAAhB+L,MAAM6d,QAAU5pB,OAAV4pB;gBACd,IAAI,CAAC,aAAa,CAACtY,GAAG,GAAG;oBACrB,MAAMtR,OAAO,IAAI;oBACjB4b;gBACJ;gBACA,IAAIgO,SAAStY,GAAG,UAAU,CAACvF,QAAO;oBAC9B,IAAM8d,cAAcvY,GAAG,OAAO,CAACvF,OAAM6d;oBACrC,IAAI,CAAC,aAAa,CAACC,YAAY,GAAG;wBAC9B,MAAM7pB,OAAO,IAAI;wBACjB4b;oBACJ;oBACA;gBACJ;gBACA,IAAIgO,SAAStY,GAAG,UAAU,CAACsY,QAAQ;oBAC/B,IAAME,aAAaxY,GAAG,OAAO,CAACsY,OAAO7d;oBACrC,IAAI,CAAC,aAAa,CAAC+d,WAAW,GAAG;wBAC7B,MAAM9pB,OAAO,IAAI;wBACjB4b;oBACJ;gBACJ;YACJ;;;YAGMmO,KAAAA;mBAFN,kDAAkD;YAClD,8DAA8D;YAC9D,SAAMA,WAAWzY,EAAE,EAAE1Q,OAAO;;uBAA5B;oBACI,IAAQod,aAAAA;oBACR,IAAI;wBACA,IAA+BI,OAAAA,WAAW;4BACtC,aAAa;wBACjB,sBAF+BA,KAAvBC,aAAAA,4CAAc;wBAGtB,iIAAiI;wBACjI,iQAAiQ;wBACjQ,wHAAwH;wBACxH,iIAAiI;wBACjI,2EAA2E;wBAC3E,iDAAiD;wBACjD,yEAAyE;wBACzE,IAAmD6H,QAAAA,MAAM,MAAK,yBAAyB,CAAC;4BACpF5U;wBACJ,IAFQvI,SAA2Cmd,MAA3Cnd,QAAQihB,gBAAmC9D,MAAnC8D,eAAeL,kBAAoBzD,MAApByD;wBAG/B,IAAQ9N,iBAA8D8N,gBAA9D9N,gBAAgB7b,SAA8C2pB,gBAA9C3pB,QAAQ4b,SAAsC+N,gBAAtC/N,QAAYqO,QAA0BN,gBAA9B,IAAWtsB,iBAAmBssB,gBAAnBtsB;wBACnD,IAAM6sB,kBAAkB,MAAMnhB,OAAO,GAAG,CAACkhB,OAAOrO,QAAQhb,SAASvD;wBACjE,IAAM8sB,gBAAgB,MAAM,MAAK,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC;4BACzD,IAAIF;4BACJpO;4BACAD;4BACA,cAAcyC,cAAc6L,kBAAkBtuB;4BAC9C,qBAAqByiB,cAAcziB,YAAYsuB;4BAC/ClqB;4BACA,SAASgqB;4BACT,gBAAgBjhB;4BAChB,QAAQiV;wBACZ;wBACA,MAAK,gBAAgB,CAAC1M,IAAIqY;wBAC1B,IAAI,OAAOQ,kBAAkB,YAAY;4BACrC,OAAOA;wBACX;wBACA,OAAOD;oBACX,EAAE,OAAOluB,OAAO;wBACZ,IAA6BsqB,QAAAA,WAAW;4BACpC,MAAM;wBACV,eAF6BA,MAArBjnB,MAAAA,8BAAO;wBAGf,IAAM+qB,WAAW,MAAM,MAAK,KAAK,CAAC,SAAS,CAAC,eAAe,CAAC,IAAI,CAAC;4BAC7D9Y;4BACAtV;4BACAqD;4BACA,WAAW;4BACX,QAAQ2e;wBACZ;wBACA,IAAI,CAACoM,UAAU;4BACX,MAAMpuB;wBACV;wBACA,OAAOouB;oBACX;gBACJ;;;;YAEMC,KAAAA;mBADN,8DAA8D;YAC9D,SAAMA,cAAcltB,cAAc;;uBAAlC;oBACI,IAAQ6gB,aAAAA;oBACR,MAAM,MAAK,KAAK,CAAC,SAAS,CAAC,mBAAmB,CAAC,IAAI,CAAC;wBAChD,YAAY7gB;wBACZ,SAAS6gB,KAAK,OAAO;wBACrB,QAAQA;oBACZ;oBACA,IAAMsM,aAAatJ,kBAAkBhD,KAAK,OAAO,CAAC,OAAO,EAAE7gB;oBAC3D,MAAMjB,QAAQ,GAAG,CAACouB,WAAW,GAAG;mCAAC,gCAAOC;4BACpC,IAAQvqB,SAAWuqB,IAAXvqB;4BACR,IAAM7E,aAAa2iB,cAAc9d;4BACjC,IAA2Coe,OAAAA,MAAMJ,KAAK,eAAe,CAAC,sBAAsB,CAAChe,SAArFqiB,iBAAmCjE,KAAnCiE,gBAAgBhlB,iBAAmB+gB,KAAnB/gB;4BACxB,IAAMI,SAAS,MAAM,MAAK,KAAK,CAAC,SAAS,CAAC,qBAAqB,CAAC,IAAI,CAAC;gCACjE,QAAQugB;gCACR,gBAAgBuM;gCAChBvqB;gCACA7E;gCACAknB;gCACAhlB;4BACJ;4BACA,IAAI,CAACI,QAAQ;gCACT;4BACJ;4BACA0jB,cAAchmB,YAAY6iB,MAAMvgB;wBACpC;wCAhBwC8sB;;;;gBAiB5C;;;;YACAC,KAAAA;mBAAAA,SAAAA,gBAAgB9O,OAAO,EAAE9a,OAAO;gBAC5B,IAAQod,OAAS,IAAI,CAAbA;gBACRtC,QAAQ,OAAO,CAAC,CAAC1b;oBACb,IAAI,CAAC,cAAc,CAACA,QAAQge,KAAK,OAAO,CAAC,OAAO,EAAE;wBAC9C,OAAOpd,WAAW,OAAO,KAAK,IAAIA,QAAQ,KAAK;oBACnD;gBACJ;YACJ;;;YACM6pB,KAAAA;mBAAN,SAAMA,0BAA0B7pB,OAAO;;uBAAvC;oBACI,IAAQod,aAAAA;oBACR,IAAQ1M,KAAO1Q,QAAP0Q;oBACR,IAAIoZ;oBACJ,IAAI;wBACAA,iBAAiB,MAAM,MAAK,KAAK,CAAC,SAAS,CAAC,aAAa,CAAC,IAAI,CAAC;4BAC3DpZ;4BACA,SAAS0M,KAAK,OAAO;4BACrB,QAAQA;wBACZ;oBACJ,EAAE,OAAOhiB,OAAO;wBACZ0uB,iBAAiB,MAAM,MAAK,KAAK,CAAC,SAAS,CAAC,eAAe,CAAC,IAAI,CAAC;4BAC7DpZ;4BACA,SAAS0M,KAAK,OAAO;4BACrB,QAAQA;4BACR,MAAM;4BACNhiB;4BACA,WAAW;wBACf;wBACA,IAAI,CAAC0uB,gBAAgB;4BACjB,MAAM1uB;wBACV;oBACJ;oBACA,IAAYiuB,QAAUS,eAAd;oBACR,IAAMC,kBAAkBlP,6BAA6BuC,KAAK,OAAO,CAAC,OAAO,EAAEiM;oBAC3Ete,OAAOgf,iBAAiBnf,WAAW,gBAAgB,CAACA,WAAW,WAAW,EAAEA,WAAW,cAAc,EAAE;wBACnG,UAAUwS,KAAK,OAAO,CAAC,IAAI;wBAC3B,WAAWiM;oBACf;oBACA,IAAgBW,YAAcD,gBAAtB;oBACR,IAAMxvB,aAAa2iB,cAAc8M;oBACjC,IAAMC,YAAY,MAAM7M,KAAK,aAAa,CAAC,KAAK,CAAC,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC1S,UAAU,QAAQ,CAAC;wBAC5F,IAAI2e;oBACR,GAAGU,iBAAiB;wBAChB,SAAS3M,KAAK,OAAO;wBACrB,QAAQA;wBACR7iB;oBACJ;oBACA,IAAQ6E,SAAmB6qB,UAAnB7qB,QAAQ4b,SAAWiP,UAAXjP;oBAChBjQ,OAAO3L,UAAU4b,QAAQ,CAAC,sHAAsH,EAAEqO,MAAM,CAAC,CAAC;oBAC1J,IAAIlhB,SAASiV,KAAK,WAAW,CAAC,GAAG,CAAChe,OAAO,IAAI;oBAC7C,IAAMgqB,gBAAgB;wBAClB,MAAMhM;wBACN7iB;oBACJ;oBACA,IAAI,CAAC4N,QAAQ;wBACTA,SAAS,IAAIgV,OAAOiM;wBACpBhM,KAAK,WAAW,CAAC,GAAG,CAAChe,OAAO,IAAI,EAAE+I;oBACtC;oBACA,OAAO;wBACHA;wBACAihB;wBACA,iBAAiBa;oBACrB;gBACJ;;;;YACA9qB,KAAAA;mBAAAA,SAAAA,eAAeC,MAAM,EAAE8qB,aAAa,EAAElqB,OAAO;gBACzC,IAAQod,OAAS,IAAI,CAAbA;gBACR,IAAM+M,kBAAkB;oBACpB,IAAI/qB,OAAO,KAAK,EAAE;wBACd,6FAA6F;wBAC7F,qHAAqH;wBACrH,IAAMgrB,YAAYF,cAAc,IAAI,CAAC,CAAC/kB;4BAClC,IAAIklB;4BACJ,OAAOjrB,OAAO,KAAK,IAAK+F,CAAAA,KAAK,IAAI,CAAC,UAAU,CAAC/F,OAAO,KAAK,KAAM,CAACirB,CAAAA,cAAcllB,KAAK,KAAI,KAAM,OAAO,KAAK,IAAIklB,YAAY,UAAU,CAACjrB,OAAO,KAAK,EAAC;wBACrJ;wBACA2L,OAAO,CAACqf,WAAW,CAAC,UAAU,EAAEhrB,OAAO,KAAK,CAAC,WAAW,EAAEA,OAAO,IAAI,CAAC,oCAAoC,EAAEgrB,aAAaA,UAAU,IAAI,CAAC,cAAc,CAAC;oBAC3J;oBACA,0CAA0C;oBAC1C,IAAI,WAAWhrB,QAAQ;wBACnB,IAAIuL,IAAI,YAAY,MAAM,CAACvL,OAAO,KAAK,CAAC,UAAU,CAAC,SAAS;4BACxDA,OAAO,KAAK,GAAG,IAAIkrB,IAAIlrB,OAAO,KAAK,EAAE0N,OAAO,QAAQ,CAAC,MAAM,EAAE,IAAI;wBACrE;oBACJ;oBACA,IAAI,CAAC1N,OAAO,UAAU,EAAE;wBACpBA,OAAO,UAAU,GAAGwR;oBACxB;oBACA,IAAI,CAACxR,OAAO,IAAI,EAAE;wBACdA,OAAO,IAAI,GAAGyR;oBAClB;gBACJ;gBACA,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,oBAAoB,CAAC,IAAI,CAAC;oBAC3CzR;oBACA,QAAQge;gBACZ;gBACA,IAAMmN,mBAAmBL,cAAc,IAAI,CAAC,CAAC/kB,OAAOA,KAAK,IAAI,KAAK/F,OAAO,IAAI;gBAC7E,IAAI,CAACmrB,kBAAkB;oBACnBJ;oBACAD,cAAc,IAAI,CAAC9qB;oBACnB,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC;wBACrCA;wBACA,QAAQge;oBACZ;gBACJ,OAAO;oBACH,IAAMoN,WAAW;wBACb,CAAC,YAAY,EAAEprB,OAAO,IAAI,CAAC,wBAAwB,CAAC;wBACpD;qBACH;oBACD,IAAIY,WAAW,OAAO,KAAK,IAAIA,QAAQ,KAAK,EAAE;wBAC1C,2BAA2B;wBAC3B,IAAI,CAAC,YAAY,CAACuqB;wBAClBJ;wBACAD,cAAc,IAAI,CAAC9qB;wBACnB,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC;4BACrCA;4BACA,QAAQge;wBACZ;wBACAzS,IAAI,IAAI,CAAC6f,SAAS,IAAI,CAAC;oBAC3B;gBACJ;YACJ;;;YACAC,KAAAA;mBAAAA,SAAAA,aAAarrB,MAAM;gBACf,IAAI;oBACA,IAAQge,OAAS,IAAI,CAAbA;oBACR,IAAQjS,QAAS/L,OAAT+L;oBACR,IAAMuf,cAActN,KAAK,OAAO,CAAC,OAAO,CAAC,SAAS,CAAC,CAACjY,OAAOA,KAAK,IAAI,KAAKgG;oBACzE,IAAIuf,gBAAgB,CAAC,GAAG;wBACpBtN,KAAK,OAAO,CAAC,OAAO,CAAC,MAAM,CAACsN,aAAa;oBAC7C;oBACA,IAAMC,eAAevN,KAAK,WAAW,CAAC,GAAG,CAAChe,OAAO,IAAI;oBACrD,IAAIurB,cAAc;wBACd,IAAMpwB,aAAaowB,aAAa,UAAU;wBAC1C,IAAM1rB,MAAM1E,WAAW,eAAe;wBACtC,IAAIsS,aAAa,CAAC5N,IAAI,EAAE;4BACpB,IAAI2rB;4BACJ,IAAKA,CAAAA,mCAAmCnpB,OAAO,wBAAwB,CAACoL,eAAe5N,IAAG,KAAM,OAAO,KAAK,IAAI2rB,iCAAiC,YAAY,EAAE;gCAC3J,OAAO/d,aAAa,CAAC5N,IAAI;4BAC7B,OAAO;gCACH,aAAa;gCACb4N,aAAa,CAAC5N,IAAI,GAAGjE;4BACzB;wBACJ;wBACA,IAAM6vB,uBAAuBjO,wBAAwB+N,aAAa,UAAU;wBAC5E,IAAIvd,aAAa,CAACyd,qBAAqB,EAAE;4BACrC,OAAOzd,aAAa,CAACyd,qBAAqB;wBAC9C;wBACAzN,KAAK,eAAe,CAAC,aAAa,CAAC,MAAM,CAAC7iB,WAAW,KAAK;wBAC1D,sCAAsC;wBACtC,IAAIuwB,cAAcvwB,WAAW,YAAY,GAAGoQ,IAAI,uBAAuB,CAACpQ,WAAW,IAAI,EAAEA,WAAW,YAAY,IAAIA,WAAW,IAAI;wBACnI,IAAMwwB,iBAAiBle,cAAc,cAAc,CAAC,aAAa,CAAC,SAAS,CAAC,CAACme;4BACzE,IAAIzwB,WAAW,YAAY,EAAE;gCACzB,OAAOywB,IAAI,OAAO,CAAC,EAAE,KAAKF;4BAC9B,OAAO;gCACH,OAAOE,IAAI,IAAI,KAAKF;4BACxB;wBACJ;wBACA,IAAIC,mBAAmB,CAAC,GAAG;4BACvB,IAAME,YAAYpe,cAAc,cAAc,CAAC,aAAa,CAACke,eAAe;4BAC5ED,cAAcG,UAAU,OAAO,CAAC,EAAE,IAAIH;4BACtC,IAAMrC,sBAAsBvO;4BAC5B,IAAIgR,qBAAqB;4BACzB,IAAMC,iBAAiB,EAAE;4BACzB1pB,OAAO,IAAI,CAACgnB,qBAAqB,OAAO,CAAC,CAAC2C;gCACtC,IAAMtS,gBAAgB2P,mBAAmB,CAAC2C,OAAO;gCACjDtS,iBAAiBrX,OAAO,IAAI,CAACqX,eAAe,OAAO,CAAC,CAAC8E;oCACjD,IAAMyN,gBAAgBvS,aAAa,CAAC8E,WAAW;oCAC/CyN,iBAAiB5pB,OAAO,IAAI,CAAC4pB,eAAe,OAAO,CAAC,CAACtD;wCACjD,IAAMuD,aAAaD,aAAa,CAACtD,UAAU;wCAC3CuD,cAAc7pB,OAAO,IAAI,CAAC6pB,YAAY,OAAO,CAAC,CAACC;4CAC3C,IAAMzwB,SAASwwB,UAAU,CAACC,aAAa;4CACvC,IAAIzwB,UAAU,OAAOA,WAAW,YAAYA,OAAO,IAAI,KAAKP,WAAW,IAAI,EAAE;gDACzE,IAAIO,OAAO,MAAM,IAAIA,OAAO,OAAO,EAAE;oDACjCA,OAAO,KAAK,GAAGA,OAAO,KAAK,CAAC,MAAM,CAAC,CAAC0wB,eAAeA,iBAAiBjxB,WAAW,IAAI;oDACnF,IAAIO,OAAO,KAAK,CAAC,MAAM,EAAE;wDACrBowB,qBAAqB;oDACzB,OAAO;wDACHC,eAAe,IAAI,CAAC;4DAChBC;4DACAxN;4DACAmK;4DACAwD;yDACH;oDACL;gDACJ,OAAO;oDACHJ,eAAe,IAAI,CAAC;wDAChBC;wDACAxN;wDACAmK;wDACAwD;qDACH;gDACL;4CACJ;wCACJ;oCACJ;gCACJ;4BACJ;4BACA,IAAIL,oBAAoB;gCACpBD,UAAU,aAAa,GAAG,CAAC;gCAC3B,OAAOxC,mBAAmB,CAACqC,YAAY;4BAC3C;4BACAK,eAAe,OAAO,CAAC;uEAAEM,iBAAO7N,sBAAYmK,qBAAWwD;gCACnD,IAAIG,iDAAiDC,uCAAuCC;gCAC3FA,CAAAA,6BAA6BnD,mBAAmB,CAACgD,MAAK,KAAM,OAAO,OAAQE,CAAAA,wCAAwCC,0BAA0B,CAAChO,WAAU,KAAM,OAAO,OAAQ8N,CAAAA,kDAAkDC,qCAAqC,CAAC5D,UAAS,KAAM,OAAO,OAAO,OAAO2D,+CAA+C,CAACH,aAAa;4BAC3W;4BACA1e,cAAc,cAAc,CAAC,aAAa,CAAC,MAAM,CAACke,gBAAgB;wBACtE;wBACA,IAAQvG,qBAAuBD,oBAAoBnlB,QAAQge,MAAnDoH;wBACR,IAAIA,oBAAoB;4BACpB,IAAMqH,YAAYrH,sBAAsB,iBAAiBA,sBAAsBA,mBAAmB,WAAW,IAAI7V,mBAAmB6V,mBAAmB,WAAW,EAAEplB,OAAO,IAAI,EAAE,GAAG;4BACpL,IAAIysB,WAAW;gCACX,OAAOrH,mBAAmB,WAAW,CAACqH,UAAU;gCAChD,IACAtW,QAAQtI,OAAO,cAAc,CAAC,oBAAoB,CAAC4e,UAAU,GAAG;oCAC5D,OAAO5e,OAAO,cAAc,CAAC,oBAAoB,CAAC4e,UAAU;gCAChE;4BACJ;wBACJ;wBACAzO,KAAK,WAAW,CAAC,MAAM,CAAChe,OAAO,IAAI;oBACvC;gBACJ,EAAE,OAAOme,KAAK;oBACVzS,OAAO,GAAG,CAAC,uBAAuByS;gBACtC;YACJ;;;WA5UEoL;;AAgWN,IAAMmD,+BAAN;aAAMA,eAiGUtU,WAAW;kCAjGrBsU;QAkGE,IAAI,CAAC,KAAK,GAAG,IAAInM,aAAa;YAC1B,YAAY,IAAIL,kBAAkB;YAClC,MAAM,IAAIf;YACV,uDAAuD;YACvD,qBAAqB,IAAIiB,mBAAmB;YAC5C,uDAAuD;YACvD,eAAe,IAAIA,mBAAmB;QAC1C;QACA,IAAI,CAAC,OAAO,GAAG;QACf,IAAI,CAAC,WAAW,GAAG,IAAI5R;QACvB,IAAI,CAAC,UAAU,GAAG,IAAI+R,aAAa;YAC/B,0DAA0D;YAC1D,eAAe,IAAIpB;YACnB,cAAc,IAAIA;YAClB,YAAY,IAAIA;YAChB,OAAO,IAAIS;YACX,gBAAgB,IAAIA;YACpB,kBAAkB,IAAIA;QAC1B;QACA,IAAI,CAAC,UAAU,GAAG,IAAIW,aAAa;YAC/B,oBAAoB,IAAIpB;YACxB,mBAAmB,IAAIA;YACvB,qBAAqB,IAAIA;YACzB,oBAAoB,IAAIA;QAC5B;QACA,4CAA4C;QAC5C,yCAAyC;QACzC,IAAMwN,iBAAiB;YACnB,IAAIpR;YACJ,MAAMnD,YAAY,IAAI;YACtB,SAAS;gBACLgK;gBACA8C;aACH;YACD,SAAS,EAAE;YACX,QAAQ,CAAC;YACT,WAAW3Z,IAAI,YAAY;QAC/B;QACA,IAAI,CAAC,IAAI,GAAG6M,YAAY,IAAI;QAC5B,IAAI,CAAC,OAAO,GAAGuU;QACf,IAAI,CAAC,eAAe,GAAG,IAAIrH,gBAAgB,IAAI;QAC/C,IAAI,CAAC,aAAa,GAAG,IAAIyB,cAAc,IAAI;QAC3C,IAAI,CAAC,aAAa,GAAG,IAAIwC,cAAc,IAAI;QAC3C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,aAAa;QACrD,IAAI,CAAC,eAAe,CAChB,uBAAGoD,eAAe,OAAO,SACzB,uBAAGvU,YAAY,OAAO,IAAI,EAAE;QAEhC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,aAAa,CAACuU,gBAAgBvU;;oBAlJpDsU;;YACFE,KAAAA;mBAAAA,SAAAA,YAAYxU,WAAW;gBACnB,IAAI,CAAC,eAAe,CAACA,YAAY,OAAO;gBACxC,IAAMxX,UAAU,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,EAAEwX;gBACjD,IAAI,CAAC,OAAO,GAAGxX;gBACf,OAAOA;YACX;;;YACMymB,KAAAA;mBAAN,SAAMA,UAAU/O,OAAO,EAAE0C,YAAY;;uBAArC;oBACI,OAAO,MAAK,aAAa,CAAC,SAAS,CAAC1C,SAAS0C;gBACjD;;;;YACA,kIAAkI;YAClI,0EAA0E;YAC1E,6DAA6D;YAC7D,0FAA0F;YAC1F6N,KAAAA;mBAAAA,SAAAA,cAAcvQ,OAAO,EAAE0C,YAAY;gBAC/B,OAAO,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC1C,SAAS0C;YACrD;;;YACA6M,KAAAA;mBAAAA,SAAAA,kBAAkBxY,KAAgC2L,YAAY;oBAA5C3L,iBAAAA,iBAAiBmC,gBAAjBnC;gBACd,OAAO,IAAI,CAAC,aAAa,CAAC,iBAAiB,CAAC4Y,gBAAgBjN;YAChE;;;YACA6R,KAAAA;mBAAAA,SAAAA,iBAAiB9gB,KAAI,EAAEhP,GAAG,EAAEsM,SAAS;gBACjC,IAAMlO,aAAa2iB,cAAc;oBAC7B/R,MAAAA;oBACA,OAAOhP;gBACX;gBACA,IAAMgM,SAAS,IAAIgV,OAAO;oBACtB,MAAM,IAAI;oBACV5iB;gBACJ;gBACA4N,OAAO,kBAAkB,GAAGM;gBAC5B,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC0C,OAAMhD;gBAC3B,OAAOA;YACX;;;YAGMghB,KAAAA;mBAFN,kDAAkD;YAClD,8DAA8D;YAC9D,SAAMA,WAAWzY,EAAE,EAAE1Q,OAAO;;uBAA5B;oBACI,OAAO,MAAK,aAAa,CAAC,UAAU,CAAC0Q,IAAI1Q;gBAC7C;;;;YAEMypB,KAAAA;mBADN,8DAA8D;YAC9D,SAAMA,cAAcltB,cAAc;;uBAAlC;oBACI,OAAO,MAAK,aAAa,CAAC,aAAa,CAACA;gBAC5C;;;;YACA4rB,KAAAA;mBAAAA,SAAAA,kBAAkBC,SAAS,EAAExK,UAAU,EAAEnP;oBAAAA,eAAAA,iBAAe,CAAC,IAAhBA;gBACrC,IAAI,CAAC,aAAa,CAAC,iBAAiB,CAAC2Z,WAAWxK,YAAYxD;YAChE;;;YACA8R,KAAAA;mBAAAA,SAAAA,cAAc3U,aAAa,EAAEC,WAAW;gBACpC,IAAQ1c,SAAWwc,mBAAmBC,eAAeC,aAA7C1c;gBACR,IAAmEqxB,wCAAAA,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC;oBACpG,QAAQ,IAAI;oBACZ3U;oBACA,SAASD;oBACT,WAAWzc;gBACf,IALqBsxB,iBAA8CD,sCAA3D,aAAsCE,mBAAqBF,sCAA9B;gBAMrC,IAAMrR,UAAU,IAAI,CAAC,aAAa,CAAC,uBAAuB,CAACuR,kBAAkBD;gBAC7E,IAAkCE,qCAAAA,IAAI,CAAC,aAAa,CAAC,cAAc,CAACD,kBAAkBD,iBAAtEG,gBAAkBD,mCAA1B;gBACR,IAAMjc,UACF,uBAAGgc,iBAAiB,OAAO;gBAE/B,IAAID,eAAe,OAAO,EAAE;oBACxBA,eAAe,OAAO,CAAC,OAAO,CAAC,CAAC7b;wBAC5B,IAAI,CAACF,QAAQ,QAAQ,CAACE,SAAS;4BAC3BF,QAAQ,IAAI,CAACE;wBACjB;oBACJ;gBACJ;gBACA,IAAMic,aAAa9hB,UAAU,QAAQ,CAAC,CAAC,GAAG6M,eAAeC,aAAa;oBAClEnH;oBACAyK;oBACA,QAAQyR;gBACZ;gBACA,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC;oBAC3B,QAAQ,IAAI;oBACZ,SAASC;gBACb;gBACA,OAAOA;YACX;;;YACAC,KAAAA;mBAAAA,SAAAA,iBAAgBpc,OAAO;gBACnB,IAAMqc,YAAYpR,gBAAgBjL,SAAS;oBACvC,IAAI,CAAC,KAAK;oBACV,IAAI,CAAC,aAAa,CAAC,KAAK;oBACxB,IAAI,CAAC,aAAa,CAAC,KAAK;oBACxB,IAAI,CAAC,eAAe,CAAC,KAAK;oBAC1B,IAAI,CAAC,UAAU;oBACf,IAAI,CAAC,UAAU;iBAClB;gBACD,eAAe;gBACf,IAAI,CAAC,OAAO,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC3E,KAAK6E;oBACrD,IAAI,CAACA,QAAQ,OAAO7E;oBACpB,IAAIA,OAAO,CAACA,IAAI,IAAI,CAAC,CAACvG,OAAOA,KAAK,IAAI,KAAKoL,OAAO,IAAI,GAAG;wBACrD7E,IAAI,IAAI,CAAC6E;oBACb;oBACA,OAAO7E;gBACX,GAAGghB,aAAa,EAAE;YACtB;;;YACA9C,KAAAA;mBAAAA,SAAAA,gBAAgB9O,OAAO,EAAE9a,OAAO;gBAC5B,OAAO,IAAI,CAAC,aAAa,CAAC,eAAe,CAAC8a,SAAS9a;YACvD;;;WAhGE8rB;;AAsJN,IAAI7mB,QAAQ,WAAW,GAAExD,OAAO,MAAM,CAAC;IACrC,WAAW;AACb;AAEAmH,kBAAkB,GAAG+B,IAAI,UAAU;AACnC/B,sBAAsB,GAAG+B,IAAI,cAAc;AAC3C/B,qBAAqB,GAAGiE;AACxBjE,sBAAsB,GAAGkjB;AACzBljB,cAAc,GAAGqE;AACjBrE,cAAc,GAAGuU;AACjBvU,yBAAyB,GAAGmH;AAC5BnH,cAAc,GAAGmC;AACjBnC,sCAAsC,GAAG0F;AACzC1F,yBAAyB,GAAGwG;AAC5BxG,0BAA0B,GAAG+F;AAC7B/F,0BAA0B,GAAGwQ;AAC7BxQ,sBAAsB,GAAG0U;AACzB1U,qBAAqB,GAAGsU;AACxBtU,eAAe,GAAG8R;AAClB9R,8BAA8B,GAAGoD;AACjCpD,oCAAoC,GAAGiS;AACvCjS,6BAA6B,GAAGwH;AAChCxH,iCAAiC,GAAGuF;AACpCvF,mBAAmB,GAAG+jB;AACtB/jB,eAAe,GAAGoN;AAClBpN,sCAAsC,GAAG2F;AACzC3F,mCAAmC,GAAGwF;AACtCxF,aAAa,GAAG3D;;;;;;AC3+FH;AAEb,SAASgF;IACLA,WAAWxI,OAAO,MAAM,IAAI,SAASyI,OAAOC,MAAM;QAC9C,IAAI,IAAIC,IAAI,GAAGA,IAAIC,UAAU,MAAM,EAAED,IAAI;YACrC,IAAIE,SAASD,SAAS,CAACD,EAAE;YACzB,IAAI,IAAInL,OAAOqL,OAAO,IAAI7I,OAAO,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC6I,QAAQrL,MAAMkL,MAAM,CAAClL,IAAI,GAAGqL,MAAM,CAACrL,IAAI;QAC1G;QACA,OAAOkL;IACX;IACA,OAAOF,SAAS,KAAK,CAAC,IAAI,EAAEI;AAChC;AAEA,SAASuiB,iCAAiCtiB,MAAM,EAAEuiB,QAAQ;IACtD,IAAIviB,UAAU,MAAM,OAAO,CAAC;IAC5B,IAAIH,SAAS,CAAC;IACd,IAAI2iB,aAAarrB,OAAO,IAAI,CAAC6I;IAC7B,IAAIrL,KAAKmL;IACT,IAAIA,IAAI,GAAGA,IAAI0iB,WAAW,MAAM,EAAE1iB,IAAI;QAClCnL,MAAM6tB,UAAU,CAAC1iB,EAAE;QACnB,IAAIyiB,SAAS,OAAO,CAAC5tB,QAAQ,GAAG;QAChCkL,MAAM,CAAClL,IAAI,GAAGqL,MAAM,CAACrL,IAAI;IAC7B;IACA,OAAOkL;AACX;AAEAvB,gBAAgB,GAAGqB;AACnBrB,wCAAwC,GAAGgkB;;;;;;AC3B9B;AAEb,IAAIG,cAActyB,mBAAOA,CAAC,KAAiC;AAC3D,IAAIuyB,QAAQvyB,mBAAOA,CAAC,KAAiB;AAErC,IAAI4T,qBAAqB;AACzB,SAASjL,KAAKpD,OAAO;IACjB,gDAAgD;IAChD,IAAMitB,WAAWD,MAAM,2BAA2B,CAAChtB,QAAQ,IAAI,EAAEA,QAAQ,OAAO;IAChF,IAAI,CAACitB,UAAU;QACX,6BAA6B;QAC7B,IAAMze,wBAAwBue,YAAY,8BAA8B,MAAMA,YAAY,cAAc;QACxG1e,qBAAqB,IAAIG,sBAAsBxO;QAC/C+sB,YAAY,2BAA2B,CAAC1e;QACxC,OAAOA;IACX,OAAO;QACH,gBAAgB;QAChB4e,SAAS,WAAW,CAACjtB;QACrB,IAAI,CAACqO,oBAAoB;YACrBA,qBAAqB4e;QACzB;QACA,OAAOA;IACX;AACJ;AACA,SAAS9D,WAAW,GAAG9sB,IAAI;IACvB0wB,YAAY,MAAM,CAAC1e,oBAAoB;IACvC,IAAM6e,cAAc7e,mBAAmB,UAAU;IACjD,yCAAyC;IACzC,OAAO6e,YAAY,KAAK,CAAC7e,oBAAoBhS;AACjD;AACA,SAASoqB,UAAU,GAAGpqB,IAAI;IACtB0wB,YAAY,MAAM,CAAC1e,oBAAoB;IACvC,yCAAyC;IACzC,IAAM8e,aAAa9e,mBAAmB,SAAS;IAC/C,OAAO8e,WAAW,KAAK,CAAC9e,oBAAoBhS;AAChD;AACA,SAAS4rB,cAAc,GAAG5rB,IAAI;IAC1B0wB,YAAY,MAAM,CAAC1e,oBAAoB;IACvC,IAAM+e,iBAAiB/e,mBAAmB,aAAa;IACvD,yCAAyC;IACzC,OAAO+e,eAAe,KAAK,CAAC/e,oBAAoBhS;AACpD;AACA,SAASotB,cAAc,GAAGptB,IAAI;IAC1B0wB,YAAY,MAAM,CAAC1e,oBAAoB;IACvC,yCAAyC;IACzC,OAAOA,mBAAmB,aAAa,CAAC,KAAK,CAACA,oBAAoBhS;AACtE;AACA,SAASutB,gBAAgB,GAAGvtB,IAAI;IAC5B0wB,YAAY,MAAM,CAAC1e,oBAAoB;IACvC,yCAAyC;IACzC,OAAOA,mBAAmB,eAAe,CAAC,KAAK,CAACA,oBAAoBhS;AACxE;AACA,SAASif,gBAAgB,GAAGjf,IAAI;IAC5B0wB,YAAY,MAAM,CAAC1e,oBAAoB;IACvC,yCAAyC;IACzC,OAAOA,mBAAmB,eAAe,CAAC,KAAK,CAACA,oBAAoBhS;AACxE;AACA,SAASgxB;IACL,OAAOhf;AACX;AACA,mBAAmB;AACnB0e,YAAY,8BAA8B,CAACA,YAAY,cAAc;AAErEnkB,sBAAsB,GAAGmkB,YAAY,cAAc;AACnDnkB,cAAc,GAAGmkB,YAAY,MAAM;AACnCnkB,sBAAsB,GAAGmkB,YAAY,cAAc;AACnDnkB,qBAAqB,GAAGmkB,YAAY,aAAa;AACjDnkB,kBAAkB,GAAGmkB,YAAY,UAAU;AAC3CnkB,sBAAsB,GAAGmkB,YAAY,cAAc;AACnDnkB,6BAA6B,GAAGmkB,YAAY,qBAAqB;AACjEnkB,mBAAmB,GAAGykB;AACtBzkB,YAAY,GAAGxF;AACfwF,kBAAkB,GAAGugB;AACrBvgB,iBAAiB,GAAG6d;AACpB7d,qBAAqB,GAAGqf;AACxBrf,qBAAqB,GAAG6gB;AACxB7gB,uBAAuB,GAAG0S;AAC1B1S,uBAAuB,GAAGghB;;;;;;AC7Eb;AAEb,IAAImD,cAActyB,mBAAOA,CAAC,KAAiC;AAE3D,4DAA4D;AAC5D,SAASkgB;IACL,YAAY;IACZ,OAAO,KAAkD,GAAGC,WAA2BA,GAAG,CAAE;AAChG;AACA,SAAS0S,4BAA4BjzB,IAAI,EAAEwE,OAAO;IAC9C,IAAM0uB,UAAU5S;IAChB,OAAOoS,YAAY,aAAa,CAAC,cAAc,CAAC,aAAa,CAAC,IAAI,CAAC,CAACS;QAChE,IAAID,WAAWC,WAAW,OAAO,CAAC,EAAE,KAAK7S,gBAAgB;YACrD,OAAO;QACX;QACA,IAAI6S,WAAW,OAAO,CAAC,IAAI,KAAKnzB,QAAQ,CAACmzB,WAAW,OAAO,CAAC,OAAO,IAAI,CAAC3uB,SAAS;YAC7E,OAAO;QACX;QACA,IAAI2uB,WAAW,OAAO,CAAC,IAAI,KAAKnzB,QAAQwE,WAAW2uB,WAAW,OAAO,CAAC,OAAO,KAAK3uB,SAAS;YACvF,OAAO;QACX;QACA,OAAO;IACX;AACJ;AAEA+J,mCAAmC,GAAG0kB;;;;;;ACzBzB;;;;;;;;;;AAEb,IAAI5iB,YAAYjQ,mBAAOA,CAAC,KAAqB;AAE7C,IAAMgzB,2BAA2B;AACjC,IAAMC,eAAe;AACrB,IAAMC,kBAAkB;AACxB,IAAMC,oBAAoB;AAC1B,IAAMC,sBAAsB;IACxB,IAAI;IACJ,QAAQ;IACR,OAAO;AACX;AACA,IAAMC,mBAAmB;IACrB,CAACD,oBAAoB,EAAE,CAAC,EAAE;IAC1B,CAACA,oBAAoB,MAAM,CAAC,EAAE;IAC9B,CAACA,oBAAoB,KAAK,CAAC,EAAE;AACjC;AACA,IAAME,0BAA0B;IAC5B,CAACD,gBAAgB,CAACD,oBAAoB,EAAE,CAAC,CAAC,EAAEA,oBAAoB,EAAE;IAClE,CAACC,gBAAgB,CAACD,oBAAoB,MAAM,CAAC,CAAC,EAAEA,oBAAoB,MAAM;IAC1E,CAACC,gBAAgB,CAACD,oBAAoB,KAAK,CAAC,CAAC,EAAEA,oBAAoB,KAAK;AAC5E;AACA,IAAMG,YAAY;AAClB,IAAMC,mBAAmB;AACzB,IAAMC,gBAAgB;AACtB,IAAMC,eAAe;IACjB,KAAK;IACL,KAAK;AACT;AACA,IAAMC,4BAA4B;AAClC,IAAMC,qBAAqB;AAC3B,IAAMC,WAAW;AACjB,IAAMC,mBAAmB;IACrB,YAAY;IACZ,WAAW;IACX,SAAS;IACT,YAAY;IACZ,UAAU;AACd;AAEA,IAAIC,kBAAkB,WAAW,GAAE/sB,OAAO,MAAM,CAAC;IAC/C,WAAW;AACb;AAEA,IAAIgtB,2BAA2B,WAAW,GAAEhtB,OAAO,MAAM,CAAC;IACxD,WAAW;AACb;AAEA,IAAIitB,yBAAyB,WAAW,GAAEjtB,OAAO,MAAM,CAAC;IACtD,WAAW;AACb;AAEA,IAAIktB,cAAc,WAAW,GAAEltB,OAAO,MAAM,CAAC;IAC3C,WAAW;AACb;AAEA,SAASmtB;IACL,OAAO,OAAO9hB,WAAW,eAAe,OAAOA,OAAO,QAAQ,KAAK;AACvE;AACA,SAAS+hB;IACL,IAAIC;IACJ,OAAO,OAAOC,cAAc,eAAgB,CAACD,CAAAA,aAAaC,SAAQ,KAAM,OAAO,KAAK,IAAID,WAAW,OAAM,MAAO;AACpH;AACA,SAASE;IACL,IAAI;QACA,IAAIJ,kBAAkB9hB,OAAO,YAAY,EAAE;YACvC,OAAOmiB,aAAa,OAAO,CAACtB,qBAAqBC;QACrD;IACJ,EAAE,OAAOsB,QAAO;QACZ,OAAO;IACX;IACA,OAAO;AACX;AACA,SAASC;IACL,IAAI,OAAOC,YAAY,eAAeA,QAAQ,GAAG,IAAIA,QAAQ,GAAG,CAAC,mBAAmB,EAAE;QAClF,OAAO7Z,QAAQ6Z,QAAQ,GAAG,CAAC,mBAAmB;IAClD;IACA,IAAI,OAAOC,qBAAqB,eAAe9Z,QAAQ8Z,mBAAmB;QACtE,OAAO;IACX;IACA,OAAOL;AACX;AACA,IAAMM,gBAAgB;IAClB,OAAO,OAAOF,YAAY,eAAeA,QAAQ,GAAG,GAAGA,QAAQ,GAAG,GAAG,CAAC;AAC1E;AAEA,IAAMvkB,eAAe;AACrB,iDAAiD;AACjD,6EAA6E;AAC7E,IAAM0kB,aAAa,CAACC,KAAKC;QAAaC,6BAAY1B;IAC9C,IAAM2B,WAAWH,IAAI,KAAK,CAACE;IAC3B,IAAME,kBAAkBN,eAAe,CAAC,WAAW,KAAK,iBAAiBG;IACzE,IAAMI,iBAAiB;IACvB,IAAMC,UAAU,CAAC5L,IAAIA,EAAE,UAAU,CAAC,WAAWA,EAAE,QAAQ,CAACwJ;IACxD,yCAAyC;IACzC,IAAIiC,SAAS,MAAM,IAAI,GAAG;QACtB,IAAmCI,wBAAAA,WAA9B11B,OAA8B01B,cAArBC,oBAAqBD,gBAAxB;QACX,0BAA0B;QAC1B,IAAIP,IAAI,UAAU,CAACE,YAAY;YAC3Br1B,OAAOs1B,SAAS,KAAK,CAAC,GAAG,GAAG,IAAI,CAACD;YACjCM,oBAAoB;gBAChBJ,mBAAmBD,SAAS,KAAK,CAAC,GAAG,IAAI,CAACD;aAC7C;QACL;QACA,IAAIO,iBAAiBL,mBAAmBI,kBAAkB,IAAI,CAACN;QAC/D,IAAII,QAAQG,iBAAiB;YACzB,OAAO;gBACH51B;gBACA,OAAO41B;YACX;QACJ,OAAO;YACH,qBAAqB;YACrB,oDAAoD;YACpD,OAAO;gBACH51B;gBACA,SAAS41B,kBAAkBJ;YAC/B;QACJ;IACJ,OAAO,IAAIF,SAAS,MAAM,KAAK,GAAG;QAC9B,IAAeO,gCAAAA,cAAR/kB,QAAQ+kB;QACf,IAAIN,mBAAmBE,QAAQF,kBAAkB;YAC7C,OAAO;gBACHzkB,MAAAA;gBACA,OAAOykB;YACX;QACJ;QACA,OAAO;YACHzkB,MAAAA;YACA,SAASykB,mBAAmBC;QAChC;IACJ,OAAO;QACH,MAAM,CAAC,qBAAqB,EAAEL,KAAK;IACvC;AACJ;AACA,IAAMW,0BAA0B,SAAS,GAAG9zB,IAAI;IAC5C,IAAI,CAACA,KAAK,MAAM,EAAE;QACd,OAAO;IACX;IACA,OAAOA,KAAK,MAAM,CAAC,CAAC+zB,KAAK1X;QACrB,IAAI,CAACA,KAAK;YACN,OAAO0X;QACX;QACA,IAAI,CAACA,KAAK;YACN,OAAO1X;QACX;QACA,OAAO,GAAG0X,MAAMpC,YAAYtV,KAAK;IACrC,GAAG;AACP;AACA,IAAM2X,aAAa,SAASh2B,IAAI,EAAEoU,KAAa6hB;QAAb7hB,SAAAA,iBAAS,KAATA,KAAa6hB,UAAAA,kBAAU,QAAVA;IAC3C,IAAI;QACA,IAAMC,MAAMC,UAAU,QAAQ;QAC9B,OAAO,GAAGrwB,SAAS9F,KAAK,OAAO,CAAC,IAAIsY,OAAO,GAAGkb,oBAAoB,EAAE,EAAE,EAAE,MAAMC,gBAAgB,CAACD,oBAAoB,EAAE,CAAC,EAAE,OAAO,CAAC,IAAIlb,OAAO,GAAGkb,oBAAoB,MAAM,EAAE,EAAE,MAAMC,gBAAgB,CAACD,oBAAoB,MAAM,CAAC,EAAE,OAAO,CAAC,IAAIlb,OAAO,GAAGkb,oBAAoB,KAAK,EAAE,EAAE,MAAMC,gBAAgB,CAACD,oBAAoB,KAAK,CAAC,IAAI0C,KAAK;IACjV,EAAE,OAAOhT,KAAK;QACV,MAAMA;IACV;AACJ;AACA,IAAMkT,aAAa,SAASp2B,IAAI,EAAE8F,MAAM,EAAEqwB,OAAO;IAC7C,IAAI;QACA,IAAIE,cAAcr2B;QAClB,IAAI8F,QAAQ;YACR,IAAI,CAACuwB,YAAY,UAAU,CAACvwB,SAAS;gBACjC,OAAOuwB;YACX;YACAA,cAAcA,YAAY,OAAO,CAAC,IAAI/d,OAAOxS,QAAQ,MAAM;QAC/D;QACAuwB,cAAcA,YAAY,OAAO,CAAC,IAAI/d,OAAO,GAAGmb,gBAAgB,CAACD,oBAAoB,EAAE,CAAC,EAAE,EAAE,MAAME,uBAAuB,CAACD,gBAAgB,CAACD,oBAAoB,EAAE,CAAC,CAAC,EAAE,OAAO,CAAC,IAAIlb,OAAO,GAAGmb,gBAAgB,CAACD,oBAAoB,KAAK,CAAC,EAAE,EAAE,MAAME,uBAAuB,CAACD,gBAAgB,CAACD,oBAAoB,KAAK,CAAC,CAAC,EAAE,OAAO,CAAC,IAAIlb,OAAO,GAAGmb,gBAAgB,CAACD,oBAAoB,MAAM,CAAC,EAAE,EAAE,MAAME,uBAAuB,CAACD,gBAAgB,CAACD,oBAAoB,MAAM,CAAC,CAAC;QACvc,IAAI2C,SAAS;YACTE,cAAcA,YAAY,OAAO,CAAC,OAAO;QAC7C;QACA,OAAOA;IACX,EAAE,OAAOnT,KAAK;QACV,MAAMA;IACV;AACJ;AACA,IAAMoT,yBAAyB,CAACC,YAAYJ;IACxC,IAAI,CAACI,YAAY;QACb,OAAO;IACX;IACA,IAAI5V,SAAS4V;IACb,IAAI5V,WAAW,KAAK;QAChBA,SAAS;IACb;IACA,IAAIA,OAAO,UAAU,CAAC,OAAO;QACzBA,SAASA,OAAO,OAAO,CAAC,MAAM;IAClC;IACA,OAAOqV,WAAWrV,QAAQ,wBAAwBwV;AACtD;AACA,IAAMK,wBAAwB,CAACnZ,SAAS8Y;IACpC,IAAI,CAAC9Y,SAAS;QACV,OAAO;IACX;IACA,OAAO2Y,WAAW3Y,SAAS,wBAAwB8Y;AACvD;AACA,IAAMM,iBAAiB,CAAC3oB,QAAQ4oB;IAC5B,IAAI,mBAAmB5oB,QAAQ;QAC3B,IAAIxJ;QACJ,IAAI,CAACwJ,OAAO,aAAa,CAAC,UAAU,CAAC,aAAa;YAC9CxJ,aAAa,IAAImd,SAAS3T,OAAO,aAAa;QAClD,OAAO;YACHxJ,aAAa,IAAImd,SAAS,YAAY3T,OAAO,aAAa;QAC9D;QACA,OAAO,GAAGxJ,aAAaoyB,WAAW;IACtC,OAAO,IAAI,gBAAgB5oB,QAAQ;QAC/B,IAAI,CAACymB,kBAAkB,CAACC,sBAAsB,mBAAmB1mB,QAAQ;YACrE,OAAO,GAAGA,OAAO,aAAa,GAAG4oB,WAAW;QAChD;QACA,OAAO,GAAG5oB,OAAO,UAAU,GAAG4oB,WAAW;IAC7C,OAAO;QACH51B,QAAQ,IAAI,CAAC,6DAA6DgN,QAAQ4oB;QAClF,OAAO;IACX;AACJ;AACA,6EAA6E;AAC7E,IAAMhmB,SAAS,CAACC,WAAWhB;IACvB,IAAI,CAACgB,WAAW;QACZ5P,MAAM4O;IACV;AACJ;AACA,IAAM5O,QAAQ,CAAC4O;IACX,MAAM,IAAI9O,MAAM,GAAG2P,aAAa,EAAE,EAAEb,KAAK;AAC7C;AACA,IAAMrN,OAAO,CAACqN;IACV7O,QAAQ,IAAI,CAAC,GAAG0P,aAAa,EAAE,EAAEb,KAAK;AAC1C;AACA,SAASgnB,aAAaC,IAAI;IACtB,IAAI;QACA,OAAOnwB,KAAK,SAAS,CAACmwB,MAAM,MAAM;IACtC,EAAE,OAAOtlB,GAAG;QACR,OAAO;IACX;AACJ;AACA,4BAA4B;AAC5B,IAAMulB,yBAAyB;AAC/B,SAASC,kBAAkB3B,GAAG;IAC1B,OAAO0B,uBAAuB,IAAI,CAAC1B;AACvC;AAEA,IAAM4B,wBAAwB,CAACC,OAAOC;IAClC,IAAI,CAACD,OAAO;QACR,OAAOC;IACX;IACA,IAAMC,gBAAgB,CAAC/B;QACnB,IAAIA,QAAQ,KAAK;YACb,OAAO;QACX;QACA,IAAIA,IAAI,UAAU,CAAC,OAAO;YACtB,OAAOA,IAAI,OAAO,CAAC,MAAM;QAC7B;QACA,IAAIA,IAAI,UAAU,CAAC,MAAM;YACrB,IAAMgC,kBAAkBhC,IAAI,KAAK,CAAC;YAClC,IAAIgC,gBAAgB,QAAQ,CAAC,MAAM;gBAC/B,OAAOA,gBAAgB,KAAK,CAAC,GAAG,CAAC;YACrC;YACA,OAAOA;QACX;QACA,OAAOhC;IACX;IACA,IAAMiC,kBAAkBF,cAAcF;IACtC,IAAI,CAACI,iBAAiB;QAClB,OAAOH;IACX;IACA,IAAIG,gBAAgB,QAAQ,CAAC,MAAM;QAC/B,OAAO,GAAGA,kBAAkBH,OAAO;IACvC;IACA,OAAO,GAAGG,gBAAgB,CAAC,EAAEH,OAAO;AACxC;AACA,SAASI,oBAAoBv1B,GAAG;IAC5B,OAAOA,IAAI,OAAO,CAAC,QAAQ,IAAI,OAAO,CAAC,SAAS,IAAI,OAAO,CAAC,aAAa;AAC7E;AACA,gCAAgC;AAChC,kDAAkD;AAClD,SAASw1B,6BAA6BC,QAAQ,EAAEnjB;QAAAA,UAAAA,iBAAU,CAAC,IAAXA;IAC5C,IAAIojB,oBAAoBC;IACxB,uBAAkD9xB,QAA1C8a,SAAAA,wCAAU,CAAC,2CAA+B9a,QAA5B+xB,WAAAA,4CAAY,CAAC,wBAAGlzB,UAAYmB,QAAZnB;IACtC,IAAIpC;IACJ,IAAMyB,gBAAgB;QAClB,IAAI,gBAAgB0zB,SAAS,QAAQ,EAAE;YACnC,IAAIA,SAAS,QAAQ,CAAC,UAAU,KAAK,UAAU/yB,SAAS;gBACpD,uEAAuE;gBACvE,OAAO6yB,oBAAoB7yB;YAC/B;YACA,OAAO+yB,SAAS,QAAQ,CAAC,UAAU;QACvC,OAAO;YACH,OAAOA,SAAS,QAAQ,CAAC,aAAa;QAC1C;IACJ;IACA,IAAMI,gBAAgBvwB,OAAO,IAAI,CAACswB;IAClC,IAAIE,cAAc,CAAC;IACnB,6EAA6E;IAC7E,IAAI,CAACxwB,OAAO,IAAI,CAACqZ,SAAS,MAAM,EAAE;QAC9B,IAAIoX;QACJD,cAAe,CAACC,CAAAA,oBAAoBN,SAAS,OAAM,KAAM,OAAO,KAAK,IAAIM,kBAAkB,MAAM,CAAC,CAACxmB,KAAKymB;YACpG,IAAIC;YACJ,IAAM/3B,OAAO83B,KAAK,uBAAuB;YACzC,iCAAiC;YACjC,IAAIH,cAAc,QAAQ,CAAC33B,OAAO;gBAC9B+3B,iBAAiBL,SAAS,CAAC13B,KAAK;YACpC,OAAO;gBACH,IAAI,aAAa83B,MAAM;oBACnBC,iBAAiBD,KAAK,OAAO;gBACjC,OAAO;oBACHC,iBAAiBD,KAAK,KAAK;gBAC/B;YACJ;YACAzmB,GAAG,CAACrR,KAAK,GAAG;gBACR+3B;YACJ;YACA,OAAO1mB;QACX,GAAG,CAAC,EAAC,KAAM,CAAC;IAChB;IACA,8EAA8E;IAC9EjK,OAAO,IAAI,CAACqZ,SAAS,OAAO,CAAC,CAAC7b,MAAMgzB,WAAW,CAAChzB,IAAI,GAAG;YAC/C,uCAAuC;YACvC,gBAAgB+yB,cAAc,QAAQ,CAAC/yB,OAAO8yB,SAAS,CAAC9yB,IAAI,GAAG6b,OAAO,CAAC7b,IAAI;QAC/E;IACJ,IAA8KozB,sBAAAA,SAAS,QAAQ,mCAAjBA,oBAAtK,aAAqBC,iDAAN,MAA6BC,iDAAN,MAA6BC,iDAAN,MAAgCC,cAAyEJ,oBAAhF,OAAiCK,eAA+CL,oBAA5D,UAAaK,cAAgB/0B,aAA+B00B,oBAA/B10B,YAAYg1B,iBAAmBN,oBAAnBM;IAC3J,IAAQ11B,UAAY20B,SAAZ30B;IACR,IAAI21B,sBAAsB;QACtB,SAAS/zB,UAAUA,UAAU;QAC7B6zB;QACA/0B;QACA,aAAayzB,sBAAsBkB,iBAAiBC;QACpDC;QACA,aAAapB,sBAAsBqB,YAAY,IAAI,EAAEA,YAAY,IAAI;QACrE,gBAAgBA,YAAY,GAAG,IAAI;QACnC,gBAAgBA,YAAY,GAAG,IAAI;QACnCR;QACA,QAAQL,YAAY,OAAO,KAAK,IAAIA,SAAS,MAAM,CAAC,GAAG,CAAC,CAACzsB,OAAQ;gBACzD,QAAQA,KAAK,MAAM;gBACnB,YAAYA,KAAK,IAAI;gBACrB,SAASA,KAAK,OAAO;YACzB;QACJ,SAASlI,WAAW,OAAO,KAAK,IAAIA,QAAQ,GAAG,CAAC,CAAC+d,SAAU;gBACnD,YAAYA,OAAO,IAAI;gBACvB,YAAYA,OAAO,IAAI;gBACvB,QAAQA,OAAO,MAAM;YACzB;IACR;IACA,IAAK6W,CAAAA,qBAAqBD,SAAS,QAAO,KAAM,OAAO,KAAK,IAAIC,mBAAmB,iBAAiB,EAAE;QAClG,IAAMgB,oBAAoBjB,SAAS,QAAQ,CAAC,iBAAiB;QAC7DgB,sBAAsBloB,UAAU,CAAC,CAAC,CAAC,GAAGkoB,qBAAqB;YACvDC;QACJ;IACJ;IACA,IAAKf,CAAAA,sBAAsBF,SAAS,QAAO,KAAM,OAAO,KAAK,IAAIE,oBAAoB,aAAa,EAAE;QAChG,IAA6BgB,mCAAAA,SAAS,QAAQ,CAAC,aAAa,EAApDC,OAAqBD,iCAArBC,MAAM14B,OAAey4B,iCAAfz4B,MAAMuP,OAASkpB,iCAATlpB;QACpBgpB,sBAAsBloB,UAAU,CAAC,CAAC,CAAC,GAAGkoB,qBAAqB;YACvD,eAAexB,sBAAsB2B,MAAM14B;YAC3C,mBAAmBuP;QACvB;IACJ;IACA,IAAI,gBAAgBgoB,SAAS,QAAQ,EAAE;QACnCn1B,iBAAiBiO,UAAU,CAAC,CAAC,CAAC,GAAGkoB,qBAAqB;YAClD,YAAY10B;YACZ,eAAe0zB,SAAS,QAAQ,CAAC,aAAa;QAClD;IACJ,OAAO;QACHn1B,iBAAiBiO,UAAU,CAAC,CAAC,CAAC,GAAGkoB,qBAAqB;YAClD,eAAe10B;QACnB;IACJ;IACA,IAAIy0B,gBAAgB;QAChB,IAAMK,qBAAqB5B,sBAAsBuB,eAAe,IAAI,EAAEA,eAAe,IAAI;QACzFl2B,eAAe,cAAc,GAAGu2B;QAChCv2B,eAAe,kBAAkB,GAAGk2B,eAAe,IAAI,IAAI;IAC/D;IACA,OAAOl2B;AACX;AACA,SAASw2B,mBAAmB3jB,UAAU;IAClC,IAAI,iBAAiBA,cAAcA,WAAW,WAAW,CAAC,QAAQ,CAACoe,eAAe;QAC9E,OAAO;IACX,OAAO;QACH,OAAO;IACX;AACJ;AAEA,IAAMwF,SAAS;AACf,IAAIC,uBAAS;aAAMC,QA2BHjzB,MAAM;kCA3BHizB;QA4BX,IAAI,CAAC,MAAM,GAAGjzB;;;;YA3BlBkzB,KAAAA;mBAAAA,SAAAA,UAAUlzB,MAAM;gBACZ,IAAI,CAAC,MAAM,GAAGA;YAClB;;;YACAmzB,KAAAA;mBAAAA,SAAAA,IAAI,GAAGj3B,IAAI;oBACPk3B;gBAAAA,CAAAA,WAAAA,SAAQ,GAAG,OAAXA,UAAAA;oBAAY,IAAI,CAAC,MAAM;iBAAU,CAAjCA,OAAyB,uBAAGl3B;YAChC;;;YACAm3B,KAAAA;mBAAAA,SAAAA,MAAK,GAAGn3B,IAAI;oBACRk3B;gBAAAA,CAAAA,WAAAA,SAAQ,GAAG,OAAXA,UAAAA;oBAAY,IAAI,CAAC,MAAM;iBAAU,CAAjCA,OAAyB,uBAAGl3B;YAChC;;;YACA6yB,KAAAA;mBAAAA,SAAAA,OAAM,GAAG7yB,IAAI;oBACTk3B;gBAAAA,CAAAA,WAAAA,SAAQ,GAAG,OAAXA,UAAAA;oBAAY,IAAI,CAAC,MAAM;iBAAU,CAAjCA,OAAyB,uBAAGl3B;YAChC;;;YACAo3B,KAAAA;mBAAAA,SAAAA,QAAQ,GAAGp3B,IAAI;oBACXk3B;gBAAAA,CAAAA,WAAAA,SAAQ,GAAG,OAAXA,UAAAA;oBAAY,IAAI,CAAC,MAAM;iBAAU,CAAjCA,OAAyB,uBAAGl3B;YAChC;;;YACA40B,KAAAA;mBAAAA,SAAAA,KAAK,GAAG50B,IAAI;oBACRk3B;gBAAAA,CAAAA,WAAAA,SAAQ,GAAG,OAAXA,UAAAA;oBAAY,IAAI,CAAC,MAAM;iBAAU,CAAjCA,OAAyB,uBAAGl3B;YAChC;;;YACAq3B,KAAAA;mBAAAA,SAAAA,MAAM,GAAGr3B,IAAI;oBACTk3B;gBAAAA,CAAAA,WAAAA,SAAQ,GAAG,OAAXA,UAAAA;oBAAY,IAAI,CAAC,MAAM;iBAAU,CAAjCA,OAAyB,uBAAGl3B;YAChC;;;YACAs3B,KAAAA;mBAAAA,SAAAA,MAAM,GAAGt3B,IAAI;gBACT,IAAI8yB,eAAe;wBACfoE;oBAAAA,CAAAA,WAAAA,SAAQ,GAAG,OAAXA,UAAAA;wBAAY,IAAI,CAAC,MAAM;qBAAU,CAAjCA,OAAyB,uBAAGl3B;gBAChC;YACJ;;;;;AAKJ,SAASu3B,aAAazzB,MAAM;IACxB,OAAO,IAAIgzB,OAAOhzB;AACtB;AACA,IAAM2K,SAAS8oB,aAAaV;SAGb3nB,YAAYC,QAAQ,EAAEC,WAAW;WAAjCF;;SAAAA;IAAAA,eADf,8DAA8D;IAC9D,gCAA2BC,QAAQ,EAAEC,WAAW;QAC5C,IAAI;YACA,IAAMC,MAAM,MAAMF;YAClB,OAAOE;QACX,EAAE,OAAOC,GAAG;YACR,CAACF,eAAe9O,KAAKgP;YACrB;QACJ;IACJ;WAReJ;;AASf,SAASS,uBAAuBC,IAAI,EAAEC,IAAI;IACtC,IAAMC,UAAU;IAChB,8CAA8C;IAC9C,IAAMC,eAAeH,KAAK,OAAO,CAACE,SAAS,IAAI,OAAO,CAAC,OAAO;IAC9D,IAAME,eAAeH,KAAK,OAAO,CAACC,SAAS,IAAI,OAAO,CAAC,OAAO;IAC9D,4CAA4C;IAC5C,OAAOC,iBAAiBC;AAC5B;AACA,SAAS5F,aAAawqB,IAAI;IACtB,4DAA4D;IAC5D,IAAIzqB,SAAS;IACb,IAAIsa,aAAa;IACjB,IAAI1f,UAAU;IACd,IAAIyyB;IACJ,IAAMC,UAAU9mB,SAAS,oBAAoB,CAAC;IAC9C,IAAI,IAAI5C,IAAI,GAAGA,IAAI0pB,QAAQ,MAAM,EAAE1pB,IAAI;QACnC,IAAM8Z,IAAI4P,OAAO,CAAC1pB,EAAE;QACpB,IAAM2pB,YAAY7P,EAAE,YAAY,CAAC;QACjC,IAAI6P,aAAa/nB,uBAAuB+nB,WAAW9C,KAAK,GAAG,GAAG;YAC1DzqB,SAAS0d;YACTpD,aAAa;YACb;QACJ;IACJ;IACA,IAAI,CAACta,QAAQ;QACT,IAAM6V,QAAQ4U,KAAK,KAAK;QACxBzqB,SAASwG,SAAS,aAAa,CAAC;QAChCxG,OAAO,IAAI,GAAI6V,CAAAA,SAAS,OAAO,KAAK,IAAIA,KAAK,CAAC,OAAM,MAAO,WAAW,WAAW;QACjF,IAAI2X,kBAAkBh5B;QACtB,IAAIi2B,KAAK,gBAAgB,EAAE;YACvB+C,kBAAkB/C,KAAK,gBAAgB,CAACA,KAAK,GAAG,EAAEA,KAAK,KAAK;YAC5D,IAAI+C,2BAA2B1X,mBAAmB;gBAC9C9V,SAASwtB;YACb,OAAO,IAAI,OAAOA,oBAAoB,UAAU;gBAC5C,IAAI,YAAYA,mBAAmBA,gBAAgB,MAAM,EAAE;oBACvDxtB,SAASwtB,gBAAgB,MAAM;gBACnC;gBACA,IAAI,aAAaA,mBAAmBA,gBAAgB,OAAO,EAAE;oBACzD5yB,UAAU4yB,gBAAgB,OAAO;gBACrC;YACJ;QACJ;QACA,IAAI,CAACxtB,OAAO,GAAG,EAAE;YACbA,OAAO,GAAG,GAAGyqB,KAAK,GAAG;QACzB;QACA,IAAI5U,SAAS,CAAC2X,iBAAiB;YAC3BvyB,OAAO,IAAI,CAAC4a,OAAO,OAAO,CAAC,CAAChiB;gBACxB,IAAImM,QAAQ;oBACR,IAAInM,SAAS,WAAWA,SAAS,SAAS;wBACtCmM,MAAM,CAACnM,KAAK,GAAGgiB,KAAK,CAAChiB,KAAK;oBAC9B,yDAAyD;oBACzD,OAAO,IAAI,CAACmM,OAAO,YAAY,CAACnM,OAAO;wBACnCmM,OAAO,YAAY,CAACnM,MAAMgiB,KAAK,CAAChiB,KAAK;oBACzC;gBACJ;YACJ;QACJ;IACJ;IACA,IAAM45B;mBAAmB,gCAAOxb,MAChCyb;YACIC,aAAaN;YACb,IAAMO,2BAA2B;gBAC7B,IAAKF,CAAAA,SAAS,OAAO,KAAK,IAAIA,MAAM,IAAG,MAAO,SAAS;oBAClDjD,CAAAA,QAAQ,OAAO,KAAK,IAAIA,KAAK,eAAc,KAAOA,CAAAA,QAAQ,OAAO,KAAK,IAAIA,KAAK,eAAe,CAACiD,MAAK;gBACzG,OAAO;oBACFjD,CAAAA,QAAQ,OAAO,KAAK,IAAIA,KAAK,EAAC,KAAOA,CAAAA,QAAQ,OAAO,KAAK,IAAIA,KAAK,EAAE,EAAC;gBAC1E;YACJ;YACA,8BAA8B;YAC9B,IAAIzqB,QAAQ;gBACRA,OAAO,OAAO,GAAG;gBACjBA,OAAO,MAAM,GAAG;gBAChBmmB,YAAY;oBACR,6BAAoCsE,KAA5BoD,kBAAAA,uDAAmB;oBAC3B,IAAIA,kBAAkB;wBACjB7tB,CAAAA,UAAU,OAAO,KAAK,IAAIA,OAAO,UAAS,KAAMA,OAAO,UAAU,CAAC,WAAW,CAACA;oBACnF;gBACJ;gBACA,IAAIiS,QAAQ,OAAOA,SAAS,YAAY;oBACpC,IAAMoG,SAASpG,KAAKyb;oBACpB,IAAIrV,kBAAkBvjB,SAAS;wBAC3B,IAAMoQ,MAAM,MAAMmT;wBAClBuV;wBACA,OAAO1oB;oBACX;oBACA0oB;oBACA,OAAOvV;gBACX;YACJ;YACAuV;QACJ;wBAhCMH,iBAA0Bxb,MAChCyb;;;;IAgCA1tB,OAAO,OAAO,GAAGytB,iBAAiB,IAAI,CAAC,MAAMztB,OAAO,OAAO;IAC3DA,OAAO,MAAM,GAAGytB,iBAAiB,IAAI,CAAC,MAAMztB,OAAO,MAAM;IACzDqtB,YAAY1sB,WAAW;QACnB8sB,iBAAiB,MAAM,IAAI/4B,MAAM,CAAC,eAAe,EAAE+1B,KAAK,GAAG,CAAC,aAAa,CAAC;IAC9E,GAAG7vB;IACH,OAAO;QACHoF;QACAsa;IACJ;AACJ;AACA,SAASwT,WAAWrD,IAAI;IACpB,oDAAoD;IACpD,4DAA4D;IAC5D,IAAIsD,OAAO;IACX,IAAIzT,aAAa;IACjB,IAAM0T,QAAQxnB,SAAS,oBAAoB,CAAC;IAC5C,IAAI,IAAI5C,IAAI,GAAGA,IAAIoqB,MAAM,MAAM,EAAEpqB,IAAI;QACjC,IAAMqqB,IAAID,KAAK,CAACpqB,EAAE;QAClB,IAAMsqB,WAAWD,EAAE,YAAY,CAAC;QAChC,IAAME,UAAUF,EAAE,YAAY,CAAC;QAC/B,IAAIC,YAAY1oB,uBAAuB0oB,UAAUzD,KAAK,GAAG,KAAK0D,YAAY1D,KAAK,KAAK,CAAC,MAAM,EAAE;YACzFsD,OAAOE;YACP3T,aAAa;YACb;QACJ;IACJ;IACA,IAAI,CAACyT,MAAM;QACPA,OAAOvnB,SAAS,aAAa,CAAC;QAC9BunB,KAAK,YAAY,CAAC,QAAQtD,KAAK,GAAG;QAClC,IAAI2D,gBAAgB55B;QACpB,IAAMqhB,QAAQ4U,KAAK,KAAK;QACxB,IAAIA,KAAK,cAAc,EAAE;YACrB2D,gBAAgB3D,KAAK,cAAc,CAACA,KAAK,GAAG,EAAE5U;YAC9C,IAAIuY,yBAAyBhU,iBAAiB;gBAC1C2T,OAAOK;YACX;QACJ;QACA,IAAIvY,SAAS,CAACuY,eAAe;YACzBnzB,OAAO,IAAI,CAAC4a,OAAO,OAAO,CAAC,CAAChiB;gBACxB,IAAIk6B,QAAQ,CAACA,KAAK,YAAY,CAACl6B,OAAO;oBAClCk6B,KAAK,YAAY,CAACl6B,MAAMgiB,KAAK,CAAChiB,KAAK;gBACvC;YACJ;QACJ;IACJ;IACA,IAAMw6B,iBAAiB,CAACpc,MACxByb;QACI,IAAMY,yBAAyB;YAC3B,IAAKZ,CAAAA,SAAS,OAAO,KAAK,IAAIA,MAAM,IAAG,MAAO,SAAS;gBAClDjD,CAAAA,QAAQ,OAAO,KAAK,IAAIA,KAAK,eAAc,KAAOA,CAAAA,QAAQ,OAAO,KAAK,IAAIA,KAAK,eAAe,CAACiD,MAAK;YACzG,OAAO;gBACFjD,CAAAA,QAAQ,OAAO,KAAK,IAAIA,KAAK,EAAC,KAAOA,CAAAA,QAAQ,OAAO,KAAK,IAAIA,KAAK,EAAE,EAAC;YAC1E;QACJ;QACA,8BAA8B;QAC9B,IAAIsD,MAAM;YACNA,KAAK,OAAO,GAAG;YACfA,KAAK,MAAM,GAAG;YACd5H,YAAY;gBACR,2BAAkCsE,KAA1B8D,gBAAAA,mDAAiB;gBACzB,IAAIA,gBAAgB;oBACfR,CAAAA,QAAQ,OAAO,KAAK,IAAIA,KAAK,UAAS,KAAMA,KAAK,UAAU,CAAC,WAAW,CAACA;gBAC7E;YACJ;YACA,IAAI9b,MAAM;gBACN,8DAA8D;gBAC9D,IAAM/M,MAAM+M,KAAKyb;gBACjBY;gBACA,OAAOppB;YACX;QACJ;QACAopB;IACJ;IACAP,KAAK,OAAO,GAAGM,eAAe,IAAI,CAAC,MAAMN,KAAK,OAAO;IACrDA,KAAK,MAAM,GAAGM,eAAe,IAAI,CAAC,MAAMN,KAAK,MAAM;IACnD,OAAO;QACHA;QACAzT;IACJ;AACJ;AACA,SAAS/lB,WAAWoB,GAAG,EAAE80B,IAAI;IACzB,kBAAyCA,KAAjC5U,OAAAA,iCAAQ,CAAC,iBAAG2Y,mBAAqB/D,KAArB+D;IACpB,OAAO,IAAI15B,QAAQ,CAACC,SAASqgB;QACzB,IAA+BqZ,gBAAAA,aAAa;YACxC94B;YACA,IAAIZ;YACJ,iBAAiBqgB;YACjB,OAAOlR,UAAU,CAAC,CAAC;gBACf,eAAe;YACnB,GAAG2R;YACH2Y;YACA,kBAAkB;QACtB,IATQxuB,SAAuByuB,cAAvBzuB,QAAQsa,aAAemU,cAAfnU;QAUhBA,cAAc9T,SAAS,IAAI,CAAC,WAAW,CAACxG;IAC5C;AACJ;AAEA,SAAS0uB,iBAAiB76B,IAAI;IAC1B,IAAI,CAACA,MAAM;QACP,MAAM,IAAIa,MAAM;IACpB;IACA,IAAM+M,eAAe,IAAI6T,SAAS,QAAQ,CAAC,mBAAmB,CAAC;IAC/D,OAAO7T,aAAa5N,MAAM,IAAI,CAAC,CAACqR,MAAMA,KAAK,KAAK,CAAC,CAACwjB;QAC9C/zB,QAAQ,KAAK,CAAC,CAAC,uBAAuB,EAAEd,KAAK,CAAC,CAAC,EAAE60B;QACjD,MAAMA;IACV;AACJ;AACA,IAAMiG;eAAgB;QAClB,IAAMC,cAAc,MAAMF,iBAAiB;QAC3C,OAAOE,YAAY,OAAO,IAAIA;IAClC;oBAHMD;;;;AAIN,IAAME;eAAsB,gCAAOC,OAAOlyB,MAAM+Y;QAC5C,IAAMoZ,OAAO,CAACp5B,KAAKiH;YACf,OAAO+Y,WAAW,SAAS,CAAC,KAAK,CAAC,IAAI,CAAChgB,KAAKiH;QAChD;QACA,IAAMsI,MAAM,MAAM6pB,KAAKD,OAAOlyB,QAAQ,CAAC;QACvC,IAAI,CAACsI,OAAO,CAAEA,CAAAA,eAAeua,QAAO,GAAI;YACpC,IAAMuP,gBAAgB,OAAOp1B,UAAU,cAAc,MAAMq1B,kBAAkBr1B;YAC7E,OAAOo1B,cAAcF,OAAOlyB,QAAQ,CAAC;QACzC;QACA,OAAOsI;IACX;oBAVM2pB,qBAA6BC,OAAOlyB,MAAM+Y;;;;AAWhD,SAASuZ,iBAAiBv5B,GAAG,EAAEqc,EAAE,EAAE6D,KAAK,EAAEF,UAAU;IAChD,IAAIA,cAAc,OAAO,KAAK,IAAIA,WAAW,gBAAgB,EAAE;QAC3D,IAAMwZ,aAAaxZ,WAAW,gBAAgB,CAAChgB;QAC/C,IAAIw5B,cAAc,OAAOA,eAAe,YAAY,SAASA,YAAY;YACrEx5B,MAAMw5B,WAAW,GAAG;QACxB;IACJ;IACA,IAAIC;IACJ,IAAI;QACAA,SAAS,IAAItL,IAAInuB;IACrB,EAAE,OAAOwP,GAAG;QACRxQ,QAAQ,KAAK,CAAC,2BAA2BwQ;QACzC6M,GAAG,IAAItd,MAAM,CAAC,aAAa,EAAEyQ,GAAG;QAChC;IACJ;IACA,IAAMkqB;mBAAW;YACb,IAAI1Z,cAAc,OAAO,KAAK,IAAIA,WAAW,KAAK,EAAE;gBAChD,OAAO,CAACmZ,OAAOlyB,OAAO0yB,oBAAoBR,OAAOlyB,MAAM+Y;YAC3D;YACA,OAAO,OAAO/b,UAAU,cAAcq1B,kBAAkBr1B;QAC5D;wBALMy1B;;;;IAMN,IAAME;mBAAoB,gCAAO9iB,GAAG2iB;YAChC,IAAI;gBACA,IACAI;gBACA,IAAMtqB,MAAM,MAAMuH,EAAE2iB,OAAO,IAAI;gBAC/B,IAAMhX,OAAO,MAAMlT,IAAI,IAAI;gBAC3B,IAAmB8R,0BAAAA,CAAAA,MAAMliB,QAAQ,GAAG,CAAC;oBACjC45B,iBAAiB;oBACjBA,iBAAiB;iBACpB,QAHMnC,OAAYvV,SAANyY,KAAMzY;gBAInB,IAAM0Y,gBAAgB;oBAClB,SAAS,CAAC;oBACV,QAAQ;wBACJ,SAAS,CAAC;oBACd;gBACJ;gBACA,IAAMC,aAAaP,OAAO,QAAQ,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC;gBAChE,IAAMQ,WAAWrD,KAAK,QAAQ,CAAC6C,OAAO,QAAQ;gBAC9C,IAAIS;gBACJ,IAAM7vB,SAAS,IAAIyvB,GAAG,MAAM,CAAC,CAAC,4DAA4D,EAAErX,KAAK,IAAI,CAAC,EAAE;oBACpGwX;oBACA,yBAA0BC,CAAAA,gDAAiDL,CAAAA,gBAAgBC,GAAG,SAAQ,KAAM,OAAO,KAAK,IAAID,cAAc,+BAA8B,KAAM,OAAOK,gDAAgDnB;gBACzO;gBACA1uB,OAAO,gBAAgB,GAAG0vB,cAAc,OAAO,EAAEA,cAAc,MAAM,EAAEI,KAAK,YAAYH,YAAYC;gBACpG,IAAMG,oBAAoBL,cAAc,MAAM,CAAC,OAAO,IAAIA,cAAc,OAAO;gBAC/E,IAAI7Z,SAASka,qBAAqBla,KAAK,CAAC,aAAa,EAAE;oBACnD,IAAM5T,YAAY8tB,iBAAiB,CAACla,KAAK,CAAC,aAAa,CAAC,IAAIka;oBAC5D/d,GAAGxd,WAAWyN;oBACd;gBACJ;gBACA+P,GAAGxd,WAAWu7B;YAClB,EAAE,OAAO5qB,GAAG;gBACR6M,GAAG7M,aAAazQ,QAAQyQ,IAAI,IAAIzQ,MAAM,CAAC,wBAAwB,EAAEyQ,GAAG;YACxE;QACJ;wBAlCMoqB,kBAA2B9iB,GAAG2iB;;;;IAmCpCC,WAAW,IAAI;mBAAC,gCAAO5iB;YACnB,IAAKoJ,CAAAA,SAAS,OAAO,KAAK,IAAIA,KAAK,CAAC,OAAM,MAAO,SAAUA,CAAAA,SAAS,OAAO,KAAK,IAAIA,KAAK,CAAC,OAAM,MAAO,UAAU;gBAC7G,OAAOma,WAAWZ,OAAO,IAAI,EAAE;oBAC3B,OAAO3iB;oBACP,IAAI,MAAMiiB,iBAAiB;gBAC/B,GAAG,IAAI;+BAAC,gCAAO/sB;wBACX,MAAMA,OAAO,QAAQ;wBACrBqQ,GAAGxd,WAAWmN,OAAO,SAAS;oBAClC;oCAHeA;;;qBAGZ,KAAK,CAAC,CAACwD;oBACN6M,GAAG7M,aAAazQ,QAAQyQ,IAAI,IAAIzQ,MAAM,CAAC,wBAAwB,EAAEyQ,GAAG;gBACxE;YACJ;YACAoqB,kBAAkB9iB,GAAG2iB;QACzB;wBAbuB3iB;;;SAapB,KAAK,CAAC,CAACsK;QACN/E,GAAG+E;IACP;AACJ;AACA,SAASkZ,eAAet6B,GAAG,EAAE80B,IAAI;IAC7B,OAAO,IAAI31B,QAAQ,CAACC,SAASqgB;QACzB8Z,iBAAiBv5B,KAAK,CAAC+yB,QAAOgH;YAC1B,IAAIhH,QAAO;gBACPtT,OAAOsT;YACX,OAAO;gBACH,IAAIwH,aAAaC;gBACjB,IAAMzmB,iBAAkB+gB,CAAAA,QAAQ,OAAO,KAAK,IAAKyF,CAAAA,cAAczF,KAAK,KAAI,KAAM,OAAO,KAAK,IAAIyF,WAAW,CAAC,aAAY,KAAM,CAAC,aAAa,EAAEzF,QAAQ,OAAO,KAAK,IAAK0F,CAAAA,eAAe1F,KAAK,KAAI,KAAM,OAAO,KAAK,IAAI0F,YAAY,CAAC,OAAO,CAAC,SAAS,CAAC;gBAClP,IAAMxmB,eAAelV,UAAU,CAACiV,eAAe,GAAGgmB;gBAClD36B,QAAQ4U;YACZ;QACJ,GAAG8gB,KAAK,KAAK,EAAEA,KAAK,UAAU;IAClC;AACJ;SACe2F,WAAWz6B,GAAG,EAAE6D,OAAO;WAAvB42B;;SAAAA;IAAAA,cAAf,gCAA0Bz6B,GAAG,EAAE6D,OAAO;QAClC,IAAe62B,SAAe72B,QAAtB,OAAei2B,KAAOj2B,QAAPi2B;QACvB,IAAMa,WAAW,MAAMD,OAAO16B;QAC9B,IAAM8K,OAAO,MAAM6vB,SAAS,IAAI;QAChC,IAAM3uB,SAAS,IAAI8tB,GAAG,gBAAgB,CAAChvB,MAAM;YACzC,aAAa;YACb,uBAAuB;2BAAE,gCAAO8vB,WAAWvwB;oBACvC,IAAMwwB,cAAc,IAAI1M,IAAIyM,WAAW56B,KAAK,IAAI;oBAChD,OAAOq6B,WAAWQ,aAAah3B;gBACnC;gCAHgC+2B,WAAWvwB;;;;QAI/C;QACA,MAAM2B,OAAO,IAAI;uBAAC,gCAAO4uB;gBACrB,IAAMC,cAAc,IAAI1M,IAAIyM,WAAW56B,KAAK,IAAI;gBAChD,IAAMgM,SAAS,MAAMquB,WAAWQ,aAAah3B;gBAC7C,OAAOmI;YACX;4BAJyB4uB;;;;QAKzB,OAAO5uB;IACX;WAjBeyuB;;AAmBf,SAASK,iBAAiBC,aAAa,EAAEnL,cAAc,EAAE9sB,GAAG;IACxD,OAAO,SAASe,OAAO;QACnB,IAAIA,YAAY,OAAO;YACnB,OAAO;QACX;QACA,IAAI,OAAOA,YAAY,aAAa;YAChC,IAAIk3B,eAAe;gBACf,OAAOnL;YACX,OAAO;gBACH,OAAO;YACX;QACJ;QACA,IAAI/rB,YAAY,MAAM;YAClB,OAAO+rB;QACX;QACA,IAAI/rB,WAAW,OAAOA,YAAY,UAAU;YACxC,OAAO0K,UAAU,CAAC,CAAC,CAAC,GAAGqhB,gBAAgB/rB;QAC3C;QACA,MAAM,IAAI9E,MAAM,CAAC,sBAAsB,EAAE+D,IAAI,0CAA0C,EAAE,OAAOe,SAAS;IAC7G;AACJ;AAEA4I,uBAAuB,GAAG+kB;AAC1B/kB,yBAAyB,GAAGglB;AAC5BhlB,0BAA0B,GAAGylB;AAC7BzlB,+BAA+B,GAAGmlB;AAClCnlB,gCAAgC,GAAG6kB;AACnC7kB,oBAAoB,GAAG8kB;AACvB9kB,oBAAoB,GAAGulB;AACvBvlB,wBAAwB,GAAG2lB;AAC3B3lB,iCAAiC,GAAGwlB;AACpCxlB,wBAAwB,GAAGqlB;AAC3BrlB,wBAAwB,GAAGklB;AAC3BllB,2BAA2B,GAAGilB;AAC9BjlB,iBAAiB,GAAGolB;AACpBplB,qBAAqB,GAAGslB;AACxBtlB,gBAAgB,GAAG0lB;AACnB1lB,cAAc,GAAGmC;AACjBnC,+BAA+B,GAAGunB;AAClCvnB,uBAAuB,GAAG4lB;AAC1B5lB,gCAAgC,GAAG6lB;AACnC7lB,kBAAkB,GAAG0rB;AACrB1rB,oBAAoB,GAAGgrB;AACvBhrB,oBAAoB,GAAGnC;AACvBmC,wBAAwB,GAAG8sB;AAC3B9sB,kBAAkB,GAAG6nB;AACrB7nB,kBAAkB,GAAGynB;AACrBznB,aAAa,GAAGxN;AAChBwN,8BAA8B,GAAG+nB;AACjC/nB,6BAA6B,GAAGioB;AAChCjoB,oCAAoC,GAAG+oB;AACvC/oB,qBAAqB,GAAG0mB;AACxB1mB,sBAAsB,GAAGkoB;AACzBloB,2BAA2B,GAAG8oB;AAC9B9oB,oBAAoB,GAAGgmB;AACvBhmB,mBAAmB,GAAGumB;AACtBvmB,0BAA0B,GAAGqqB;AAC7BrqB,wBAAwB,GAAGimB;AAC3BjmB,yBAAyB,GAAGuoB;AAC5BvoB,8BAA8B,GAAGoD;AACjCpD,kBAAkB,GAAG7N;AACrB6N,sBAAsB,GAAG6tB;AACzB7tB,cAAc,GAAGkC;AACjBlC,8BAA8B,GAAG8lB;AACjC9lB,wBAAwB,GAAGquB;AAC3BruB,kBAAkB,GAAG2mB;AACrB3mB,oBAAoB,GAAGooB;AACvBpoB,mBAAmB,GAAG+jB;AACtB/jB,mBAAmB,GAAG+lB;AACtB/lB,6BAA6B,GAAGwoB;AAChCxoB,YAAY,GAAGjM;;;;;;AC7yBF;AAEb,SAASsN;IACLA,WAAWxI,OAAO,MAAM,IAAI,SAASyI,OAAOC,MAAM;QAC9C,IAAI,IAAIC,IAAI,GAAGA,IAAIC,UAAU,MAAM,EAAED,IAAI;YACrC,IAAIE,SAASD,SAAS,CAACD,EAAE;YACzB,IAAI,IAAInL,OAAOqL,OAAO,IAAI7I,OAAO,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC6I,QAAQrL,MAAMkL,MAAM,CAAClL,IAAI,GAAGqL,MAAM,CAACrL,IAAI;QAC1G;QACA,OAAOkL;IACX;IACA,OAAOF,SAAS,KAAK,CAAC,IAAI,EAAEI;AAChC;AAEAzB,SAAS,GAAGqB;;;;;;ACbC;AAEb,IAAMktB,6BAA6B;IAC/B;CACH;AAEDvuB,kCAAkC,GAAGuuB;;;;;;ACNxB;AAEb,IAAIC,UAAU38B,mBAAOA,CAAC,KAA4B;AAClD,IAAI48B,WAAW58B,mBAAOA,CAAC,KAAoB;AAC3C,IAAIkQ,MAAMlQ,mBAAOA,CAAC,KAAwB;AAE1C,SAAS68B,yBAAyB3rB,CAAC;IACjC,IAAI6J,IAAI/T,OAAO,MAAM,CAAC;IACtB,IAAIkK,GAAG;QACL,IAAK,IAAI4rB,KAAK5rB,EAAG;YACf6J,CAAC,CAAC+hB,EAAE,GAAG5rB,CAAC,CAAC4rB,EAAE;QACb;IACF;IACA/hB,EAAE,OAAO,GAAG7J;IACZ,OAAOlK,OAAO,MAAM,CAAC+T;AACvB;AAEA,IAAIgiB,qBAAqB,WAAW,GAAEF,yBAAyBF;AAE/D,SAASK,oBAAoBC,cAAc;IACvC,IAAI,CAACA,eAAe,CAAC,IAAIA,eAAe,UAAU,CAAC,sBAAsB,IAAI,CAACA,eAAe,UAAU,CAAC,QAAQ,IAAI,CAACA,eAAe,UAAU,CAAC,QAAQ,CAAC,aAAa,EAAE;QACnK;IACJ;IACAA,eAAe,CAAC,GAAGA,eAAe,UAAU,CAAC,QAAQ,CAAC,aAAa;IACnEA,eAAe,UAAU,CAAC,sBAAsB,GAAG;AACvD;AAEA,SAAS5c,QAAQ9a,OAAO;IACpB,IAAQ23B,UAA+F33B,QAA/F23B,SAASzQ,WAAsFlnB,QAAtFknB,UAAU0Q,eAA4E53B,QAA5E43B,cAAcC,6BAA8D73B,QAA9D63B,4BAA4BH,iBAAkC13B,QAAlC03B,gBAAgBI,gBAAkB93B,QAAlB83B;IACrFL,oBAAoBC;IACpB,IAAIA,eAAe,CAAC,CAACE,cAAcD,UAAU;QACzCC,YAAY,CAACD,QAAQ,CAAC,OAAO,CAAC,CAACjnB;YAC3B,IAAIqnB,WAAWL,eAAe,CAAC;YAC/B,IAAI,CAACK,UAAU;gBACXA,WAAW,EAAE;YACjB;YACA,IAAMnZ,OAAOiZ,0BAA0B,CAACnnB,GAAG;YAC3C,IAAMsnB,cAAcF,aAAa,CAACpnB,GAAG;YACrC,4BAA4B;YAC5B,IAAIqnB,SAAS,OAAO,CAACnZ,SAAS,GAAG;gBAC7B;YACJ;YACA,4BAA4B;YAC5BmZ,SAAS,IAAI,CAACnZ;YACd,IAAIA,KAAK,CAAC,EAAE;gBACR,OAAOsI,SAAS,IAAI,CAACtI,KAAK,CAAC;YAC/B;YACA,IAAMqZ,UAAU,CAAC78B;gBACb,IAAI,CAACA,OAAO;oBACRA,QAAQ,IAAIF,MAAM;gBACtB;gBACA,IAAI,OAAOE,MAAM,OAAO,KAAK,UAAU;oBACnCA,MAAM,OAAO,IAAI,CAAC,iBAAiB,EAAEwjB,IAAI,CAAC,EAAE,CAAC,OAAO,EAAEA,IAAI,CAAC,EAAE,EAAE;gBACnE;gBACA8Y,eAAe,CAAC,CAAChnB,GAAG,GAAG;oBACnB,MAAMtV;gBACV;gBACAwjB,KAAK,CAAC,GAAG;YACb;YACA,IAAMsZ,iBAAiB,CAAC/0B,IAAIg1B,MAAMC,MAAMC,GAAGlG,MAAMmG;gBAC7C,IAAI;oBACA,IAAMhyB,UAAUnD,GAAGg1B,MAAMC;oBACzB,IAAI9xB,WAAWA,QAAQ,IAAI,EAAE;wBACzB,IAAM1G,IAAI0G,QAAQ,IAAI,CAAC,CAACuY,SAASsT,KAAKtT,QAAQwZ,IAAIJ;wBAClD,IAAIK,OAAO;4BACPpR,SAAS,IAAI,CAACtI,KAAK,CAAC,GAAGhf;wBAC3B,OAAO;4BACH,OAAOA;wBACX;oBACJ,OAAO;wBACH,OAAOuyB,KAAK7rB,SAAS+xB,GAAGC;oBAC5B;gBACJ,EAAE,OAAOl9B,OAAO;oBACZ68B,QAAQ78B;gBACZ;YACJ;YACA,IAAMm9B,aAAa,CAACC,UAAUvpB,GAAGqpB,QAAQE,WAAWN,eAAeR,eAAe,CAAC,EAAE9Y,IAAI,CAAC,EAAE,EAAE,GAAG4Z,UAAUC,eAAeH,SAASL;YACnI,kCAAkC;YAClC,IAAIQ,gBAAgB,CAACxpB,GAAGupB,UAAUF,QAAQJ,eAAeM,SAAS,GAAG,EAAE5Z,IAAI,CAAC,EAAE,EAAEmZ,UAAU,GAAGW,WAAWJ;YACxG,kCAAkC;YAClC,IAAII,YAAY,CAAChwB;gBACbkW,KAAK,CAAC,GAAG;gBACT8Y,eAAe,CAAC,CAAChnB,GAAG,GAAG,CAACwX;oBACpBA,QAAO,OAAO,GAAGxf;gBACrB;YACJ;YACA,IAAMiwB,iBAAiB;gBACnB,IAAI;oBACA,IAAM18B,aAAa0O,IAAI,UAAU,CAACqtB,WAAW,CAAC,EAAE,CAAC,IAAI,EAAErtB,IAAI,kBAAkB;oBAC7E,IAAMiuB,mBAAmB38B,aAAa2iB,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC;oBACpD,IAAMqO,WAAWyK,eAAe,UAAU,CAAC,QAAQ;oBACnD,IAAMvO,aAAa,IAAIuO,eAAe,UAAU,CAAC,QAAQ,CAAC,UAAU,CAACkB,kBAAkB;4BAC/E,aAAa;4BACb,MAAM;wBACV;oBACJ,IAAI3L,SAAS,OAAO,CAAC,aAAa,KAAK,iBAAiB;wBACpD,OAAO3xB,QAAQ,GAAG,CAAC2xB,SAAS,aAAa,CAAC,iBAAiB,CAACrO,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC;4BACvE,OAAOuK;wBACX;oBACJ;oBACA,OAAOA;gBACX,EAAE,OAAO/tB,OAAO;oBACZ68B,QAAQ78B;gBACZ;YACJ;YACA,IAAMy9B,iBAAiBb,YAAY,MAAM,KAAK,KAAKX,SAAS,0BAA0B,CAAC,QAAQ,CAACW,WAAW,CAAC,EAAE,CAAC,YAAY,KAAKA,WAAW,CAAC,EAAE,CAAC,IAAI;YACnJ,IAAIa,gBAAgB;gBAChBX,eAAeS,gBAAgB/Z,IAAI,CAAC,EAAE,EAAE,GAAG,GAAG8Z,WAAW;YAC7D,OAAO;gBACHR,eAAeR,gBAAgB9Y,IAAI,CAAC,EAAE,EAAE,GAAG,GAAG2Z,YAAY;YAC9D;QACJ;IACJ;AACJ;AAEA,SAASO,SAAS94B,OAAO;IACrB,IAAQ23B,UAA8F33B,QAA9F23B,SAASzQ,WAAqFlnB,QAArFknB,UAAU0Q,eAA2E53B,QAA3E43B,cAAcmB,mBAA6D/4B,QAA7D+4B,kBAAkBC,yBAA2Ch5B,QAA3Cg5B,wBAAwBtB,iBAAmB13B,QAAnB03B;IACnFD,oBAAoBC;IACpB,IAAIA,eAAe,CAAC,CAACE,cAAcD,UAAU;QACzCC,YAAY,CAACD,QAAQ,CAAC,OAAO,CAAC,CAACjnB;YAC3B,IAAIgnB,eAAe,CAAC,CAACqB,kBAAkBroB,KAAK;gBACxC,OAAOwW,SAAS,IAAI,CAAC6R,gBAAgB,CAACroB,GAAG;YAC7C;YACA,IAAMgoB,YAAY,CAAChwB;gBACfqwB,gBAAgB,CAACroB,GAAG,GAAG;gBACvBgnB,eAAe,CAAC,CAAChnB,GAAG,GAAG,CAACwX;oBACpB,OAAOwP,eAAe,CAAC,CAAChnB,GAAG;oBAC3BwX,QAAO,OAAO,GAAGxf;gBACrB;YACJ;YACA,IAAMuvB,UAAU,CAAC78B;gBACb,OAAO29B,gBAAgB,CAACroB,GAAG;gBAC3BgnB,eAAe,CAAC,CAAChnB,GAAG,GAAG,CAACwX;oBACpB,OAAOwP,eAAe,CAAC,CAAChnB,GAAG;oBAC3B,MAAMtV;gBACV;YACJ;YACA,IAAI;gBACA,IAAM69B,qBAAqBvB,eAAe,UAAU,CAAC,QAAQ;gBAC7D,IAAI,CAACuB,oBAAoB;oBACrB,MAAM,IAAI/9B,MAAM;gBACpB;gBACA,IAAwCg+B,6BAAAA,sBAAsB,CAACxoB,GAAG,EAA1DmH,WAAgCqhB,2BAAhCrhB,UAAUshB,SAAsBD,2BAAtBC,QAAQ7f,YAAc4f,2BAAd5f;gBAC1B,IAAMhT,UAAU2yB,mBAAmB,SAAS,CAACphB,UAAU;oBACnD,iBAAiByB;gBACrB,GAAG,IAAI,CAAC,CAAC5Q;oBACL,IAAIA,YAAY,OAAO;wBACnB,OAAOywB;oBACX;oBACA,OAAOzwB;gBACX;gBACA,IAAIpC,QAAQ,IAAI,EAAE;oBACd4gB,SAAS,IAAI,CAAC6R,gBAAgB,CAACroB,GAAG,GAAGpK,QAAQ,IAAI,CAACoyB,WAAW,KAAK,CAACT;gBACvE,OAAO;oBACH,qCAAqC;oBACrCS,UAAUpyB;gBACd;YACJ,EAAE,OAAOqF,GAAG;gBACRssB,QAAQtsB;YACZ;QACJ;IACJ;AACJ;AAEA,SAASsb,kBAAkBxY;QAAE4Y,iBAAF5Y,IAAE4Y,gBAAgBqQ,iBAAlBjpB,IAAkBipB,gBAAgB0B,eAAlC3qB,IAAkC2qB,cAAcjS,aAAhD1Y,IAAgD0Y,YAAYtJ,YAA5DpP,IAA4DoP;IACnF,IAAMH,iBAAiBnR,MAAM,OAAO,CAAC8a,kBAAkBA,iBAAiB;QACpEA;KACH;IACD,IAAIgS,4BAA4B,EAAE;IAClC,IAAIC,qBAAqB,SAAS3b,aAAa;QAC3C,IAAI,CAACE,WAAWA,YAAY,EAAE;QAC9B,IAAM0b,aAAa7B,eAAe,UAAU,CAAC,QAAQ;QACrD,+BAA+B;QAC/B,IAAItQ,YAAYD,UAAU,CAACxJ,cAAc;QACzC,IAAI,CAACyJ,WAAWA,YAAYD,UAAU,CAACxJ,cAAc,GAAG;YACpD,MAAM4b,WAAW,IAAI;QACzB;QACA,IAAI1b,UAAU,OAAO,CAACuJ,cAAc,GAAG;QACvCvJ,UAAU,IAAI,CAACuJ;QACf,IAAM9gB,UAAU8yB,YAAY,CAACzb,cAAc;QAC3C,IAAIrX,SAAS,OAAOA;QACpB,IAAI3J,OAAO,CAACqN,MAAM,OAAO7O,YAAY,eAAeA,QAAQ,IAAI,IAAIA,QAAQ,IAAI,CAAC6O;QACjF,IAAIwvB,eAAe,CAAC9oB;YAChB,IAAI9K,cAAc,CAAC2X,MAAM5gB,KAAK,gDAAgD4gB;YAC9E,IAAI;gBACA,IAAIkc,WAAS/B,eAAehnB;gBAC5B,IAAI,CAAC+oB,UAAQ;gBACb,IAAI7R,SAAS,CAACM,UAASA,WAAUA,QAAO,IAAI,IAAI,8CAA8C;oBAC1FA,QAAO,IAAI,CAACwP,eAAe,CAAC,CAAC/Z,cAAc,EAAEE,WAAW;wBACpD,eAAe6Z,eAAe,CAAC,IAAI,CAAC;wBACpC,gBAAgBrQ;oBACpB;gBACJ,IAAIoS,SAAO,IAAI,EAAE,OAAOvS,SAAS,IAAI,CAACuS,SAAO,IAAI,CAAC7R,QAAQhiB;gBAC1D,IAAI8zB,aAAa9R,OAAO6R;gBACxB,aAAa;gBACb,IAAIC,cAAc,OAAOA,eAAe,aAAaA,WAAW,IAAI,EACpE,OAAOxS,SAAS,IAAI,CAACwS,UAAU,CAAC,QAAQ,CAAC9zB;YAC7C,EAAE,OAAO2X,KAAK;gBACV3X,YAAY2X;YAChB;QACJ;QACA,IAAM2J,WAAWqS,WAAW,iBAAiB,CAAC5b,eAAe;YACzD,UAAU4b,WAAW,OAAO,CAAC,aAAa;YAC1C1b;YACA,MAAM;QACV;QACA4Z,oBAAoBC;QACpB,IAAMiC,+BAA+BjC,eAAe,UAAU,CAAC,qBAAqB,CAAC,OAAO;QAC5F,IAAIiC,8BAA8B;YAC9Bl4B,OAAO,IAAI,CAACk4B,6BAA6B,aAAa,EAAE,OAAO,CAAC,CAACC;gBAC7D,IAAM3I,OAAO0I,6BAA6B,aAAa,CAACC,SAAS;gBACjE,IAAMC,mBAAmBF,6BAA6B,0BAA0B,CAACC,SAAS,CAAC,EAAE;gBAC7F,IAAI3I,KAAK,MAAM,GAAG,GAAG;oBACjBuI,aAAaK;gBACjB,OAAO,IAAI5I,KAAK,MAAM,KAAK,GAAG;oBAC1B,IAAM12B,aAAa02B,IAAI,CAAC,EAAE;oBAC1B,IAAI,CAACoG,SAAS,0BAA0B,CAAC,QAAQ,CAAC98B,WAAW,YAAY,GAAG;wBACxEi/B,aAAaK;oBACjB;gBACJ;YACJ;QACJ;QACA,IAAI,CAAC3S,SAAS,MAAM,EAAE;YAClB,OAAOkS,YAAY,CAACzb,cAAc,GAAG;QACzC;QACA,OAAOyb,YAAY,CAACzb,cAAc,GAAGriB,QAAQ,GAAG,CAAC4rB,UAAU,IAAI,CAAC,IAAIkS,YAAY,CAACzb,cAAc,GAAG;IACtG;IACAD,eAAe,OAAO,CAAC,CAACze;QACpBo6B,0BAA0B,IAAI,CAACC,mBAAmBr6B;IACtD;IACA,OAAO3D,QAAQ,GAAG,CAAC+9B,2BAA2B,IAAI,CAAC,IAAI;AAC3D;AAEA,SAASS,sBAAsB95B,OAAO;IAClC,IAAQ45B,WAAqD55B,QAArD45B,UAAUZ,yBAA2Ch5B,QAA3Cg5B,wBAAwBtB,iBAAmB13B,QAAnB03B;IAC1C,IAAMuB,qBAAqBvB,eAAe,UAAU,CAAC,QAAQ;IAC7D,IAAI,CAACuB,oBAAoB;QACrB,MAAM,IAAI/9B,MAAM;IACpB;IACA,IAAgC6+B,mCAAAA,sBAAsB,CAACH,SAAS,EAAxD/hB,WAAwBkiB,iCAAxBliB,UAAUyB,YAAcygB,iCAAdzgB;IAClB,IAAI;QACA,OAAO2f,mBAAmB,aAAa,CAACphB,UAAU;YAC9C,iBAAiByB;QACrB;IACJ,EAAE,OAAOiE,KAAK;QACVpiB,QAAQ,KAAK,CAAC;QACdA,QAAQ,KAAK,CAAC;QACd,MAAMoiB;IACV;AACJ;AACA,SAASyc,uBAAuBh6B,OAAO;IACnC,IAAQg5B,yBAA8Eh5B,QAA9Eg5B,wBAAwBtB,iBAAsD13B,QAAtD03B,gBAAgBqB,mBAAsC/4B,QAAtC+4B,kBAAkBkB,kBAAoBj6B,QAApBi6B;IAClEA,gBAAgB,OAAO,CAAC,CAACvpB;QACrBgnB,eAAe,CAAC,CAAChnB,GAAG,GAAG,CAACwX;YACpB,oDAAoD;YACpD6Q,gBAAgB,CAACroB,GAAG,GAAG;YACvB,OAAOgnB,eAAe,CAAC,CAAChnB,GAAG;YAC3B,IAAMhI,UAAUoxB,sBAAsB;gBAClC,UAAUppB;gBACVsoB;gBACAtB;YACJ;YACA,IAAI,OAAOhvB,YAAY,YAAY;gBAC/B,MAAM,IAAIxN,MAAM,CAAC,sDAAsD,EAAEwV,IAAI;YACjF;YACAwX,QAAO,OAAO,GAAGxf;QACrB;IACJ;AACJ;AAEA,SAASuB;IACLA,WAAWxI,OAAO,MAAM,IAAI,SAASyI,OAAOC,MAAM;QAC9C,IAAI,IAAIC,IAAI,GAAGA,IAAIC,UAAU,MAAM,EAAED,IAAI;YACrC,IAAIE,SAASD,SAAS,CAACD,EAAE;YACzB,IAAI,IAAInL,OAAOqL,OAAO,IAAI7I,OAAO,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC6I,QAAQrL,MAAMkL,MAAM,CAAClL,IAAI,GAAGqL,MAAM,CAACrL,IAAI;QAC1G;QACA,OAAOkL;IACX;IACA,OAAOF,SAAS,KAAK,CAAC,IAAI,EAAEI;AAChC;AAEA,SAAS6vB,mBAAmBl6B,OAAO;IAC/B,IAAQ03B,iBAAiF13B,QAAjF03B,gBAAgB9Z,aAAiE5d,QAAjE4d,YAAYC,YAAqD7d,QAArD6d,WAAWF,gBAA0C3d,QAA1C2d,eAAeG,yBAA2B9d,QAA3B8d;IAC9D,IAAI,CAAC4Z,eAAe,CAAC,EAAE;IACvB,IAAI,CAACA,eAAe,UAAU,IAAI,CAACA,eAAe,UAAU,CAAC,QAAQ,IAAI,CAACA,eAAe,UAAU,CAAC,WAAW,EAAE;IACjH,IAAMuB,qBAAqBvB,eAAe,UAAU,CAAC,QAAQ;IAC7DuB,mBAAmB,WAAW,CAAChvB,SAAS;QACpC,MAAMytB,eAAe,UAAU,CAAC,WAAW,CAAC,IAAI;QAChD,SAAS,EAAE;IACf,GAAG5Z;IACH,IAAMqc,qBAAqBrc,0BAA0B,OAAO,KAAK,IAAIA,uBAAuB,cAAc;IAC1G,IAAMsc,oBAAoBtc,0BAA0B,OAAO,KAAK,IAAIA,uBAAuB,aAAa;IACxG,sFAAsF;IACtF,iJAAiJ;IACjJ,sJAAsJ;IACtJ,iKAAiK;IACjK,IAAI,CAACH,iBAAiB,OAAOA,kBAAkB,UAAU;QACrD,IAAM1e,MAAM0e,iBAAiB;QAC7B,IAAIpR,MAAM,OAAO,CAAC4tB,qBAAqB;YACnC,sCAAsC;YACtC,aAAa;YACb,wEAAwE;YACxE,IAAI;YACJ,kDAAkD;YAClD,oEAAoE;YACpE,MAAM;YACNA,mBAAmB,OAAO,CAAC,CAACE;gBACxB,IAAI,CAACD,iBAAiB,CAACC,QAAQ,EAAE;oBAC7BD,iBAAiB,CAACC,QAAQ,GAAG,CAAC;gBAClC;gBACA,IAAM7gB,KAAK4gB,iBAAiB,CAACC,QAAQ;gBACrCpB,mBAAmB,iBAAiB,CAACoB,SAAS7gB,IAAI;oBAC9C,mBAAoBsE,CAAAA,0BAA0B,OAAO,KAAK,IAAIA,uBAAuB,aAAY,KAAM,CAAC;gBAC5G;YACJ;QACJ,OAAO;YACHmb,mBAAmB,iBAAiB,CAACh6B,KAAK2e,YAAY;gBAClD,mBAAoBE,CAAAA,0BAA0B,OAAO,KAAK,IAAIA,uBAAuB,aAAY,KAAM,CAAC;YAC5G;QACJ;IACJ,OAAO;QACHH,cAAc,OAAO,CAAC,CAAC1e;YACnB,IAAI,CAACk7B,sBAAsB,CAACC,mBAAmB;gBAC3CnB,mBAAmB,iBAAiB,CAACh6B,KAAK2e,YAAY;oBAClD,mBAAoBE,CAAAA,0BAA0B,OAAO,KAAK,IAAIA,uBAAuB,aAAY,KAAM,CAAC;gBAC5G;gBACA;YACJ;YACA,IAAI,CAACsc,iBAAiB,CAACn7B,IAAI,EAAE;gBACzBm7B,iBAAiB,CAACn7B,IAAI,GAAG,CAAC;YAC9B;YACA,IAAMua,KAAK4gB,iBAAiB,CAACn7B,IAAI;YACjCg6B,mBAAmB,iBAAiB,CAACh6B,KAAKua,IAAI;gBAC1C,mBAAoBsE,CAAAA,0BAA0B,OAAO,KAAK,IAAIA,uBAAuB,aAAY,KAAM,CAAC;YAC5G;QACJ;IACJ;IACA,IAAI4Z,eAAe,UAAU,CAAC,mBAAmB,EAAE;QAC/CA,eAAe,UAAU,CAAC,mBAAmB,CAACA;IAClD;IACA,IAAI,OAAOA,eAAe,UAAU,CAAC,QAAQ,KAAK,YAAY;QAC1DA,eAAe,UAAU,CAAC,QAAQ;IACtC;IACA,IAAI,CAACnrB,MAAM,OAAO,CAACoR,gBAAgB;QAC/B,aAAa;QACb,OAAO+Z,eAAe,CAAC,CAAC/Z,iBAAiB,WAAWE;IACxD;IACA,IAAIyc,yBAAyB/kB,QAAQmiB,eAAe,UAAU,CAAC,WAAW,CAAC,MAAM;IACjF,IAAI4C,wBAAwB;QACxB,aAAa;QACb,OAAO5C,eAAe,CAAC,CAAC/Z,eAAeE;IAC3C;IACA,aAAa;IACb,OAAOviB,QAAQ,GAAG,CAACqiB,cAAc,GAAG,CAAC,CAAC1e;QAClC,aAAa;QACb,OAAOy4B,eAAe,CAAC,CAACz4B,KAAK4e;IACjC,IAAI,IAAI,CAAC,IAAI;AACjB;AAEA,IAAM0c,aAAa;IACf,SAAS/C;IACT,UAAUx8B;IACV,aAAaA;IACb,gBAAgB;QACZ8f;QACAge;QACA,GAAG7R;QACH,GAAG,CAAC;QACJ+S;QACAE;IACJ;IACAzC;IACA,uBAAuB,CAAC;AAC5B;AAEAtvB,cAAc,GAAGoyB;;;;;;ACvXJ;AAEb,SAASC,qBAAqBtvB,GAAG,EAAEuvB,GAAG;IAClC,IAAIA,OAAO,QAAQA,MAAMvvB,IAAI,MAAM,EAAEuvB,MAAMvvB,IAAI,MAAM;IAErD,IAAK,IAAId,IAAI,GAAGswB,OAAO,IAAInuB,MAAMkuB,MAAMrwB,IAAIqwB,KAAKrwB,IAAKswB,IAAI,CAACtwB,EAAE,GAAGc,GAAG,CAACd,EAAE;IAErE,OAAOswB;AACX;AACA9xB,SAAS,GAAG4xB;;;;;;ACTC;AAEb,SAASG,kBAAkBzvB,GAAG;IAC1B,IAAIqB,MAAM,OAAO,CAACrB,MAAM,OAAOA;AACnC;AACAtC,SAAS,GAAG+xB;;;;;;ACLC;AAEb,IAAIH,uBAAuB//B,mBAAOA,CAAC,KAA4B;AAE/D,SAASmgC,qBAAqB1vB,GAAG;IAC7B,IAAIqB,MAAM,OAAO,CAACrB,MAAM,OAAOsvB,qBAAqB,CAAC,CAACtvB;AAC1D;AACAtC,SAAS,GAAGgyB;;;;;;ACPC;AAEb,SAASC,yBAAyBryB,IAAI;IAClC,IAAIA,SAAS,KAAK,GAAG,MAAM,IAAIsyB,eAAe;IAE9C,OAAOtyB;AACX;AACAI,SAAS,GAAGiyB;;;;;;ACPC;AAEb,SAASE,mBAAmBC,GAAG,EAAEz/B,OAAO,EAAEqgB,MAAM,EAAEqf,KAAK,EAAEC,MAAM,EAAEj8B,GAAG,EAAEk8B,GAAG;IACrE,IAAI;QACA,IAAIlK,OAAO+J,GAAG,CAAC/7B,IAAI,CAACk8B;QACpB,IAAI36B,QAAQywB,KAAK,KAAK;IAC1B,EAAE,OAAO71B,OAAO;QACZwgB,OAAOxgB;QACP;IACJ;IACA,IAAI61B,KAAK,IAAI,EAAE11B,QAAQiF;SAClBlF,QAAQ,OAAO,CAACkF,OAAO,IAAI,CAACy6B,OAAOC;AAC5C;AACA,SAASE,oBAAoBj4B,EAAE;IAC3B,OAAO;QACH,IAAIqF,OAAO,IAAI,EAAEnM,OAAOgO;QAExB,OAAO,IAAI/O,QAAQ,SAASC,OAAO,EAAEqgB,MAAM;YACvC,IAAIof,MAAM73B,GAAG,KAAK,CAACqF,MAAMnM;YAEzB,SAAS4+B,MAAMz6B,KAAK;gBAChBu6B,mBAAmBC,KAAKz/B,SAASqgB,QAAQqf,OAAOC,QAAQ,QAAQ16B;YACpE;YAEA,SAAS06B,OAAO3d,GAAG;gBACfwd,mBAAmBC,KAAKz/B,SAASqgB,QAAQqf,OAAOC,QAAQ,SAAS3d;YACrE;YAEA0d,MAAMjgC;QACV;IACJ;AACJ;AACA4N,SAAS,GAAGwyB;;;;;;AChCC;AAEb,IAAIC,oBAAoB5gC,mBAAOA,CAAC,KAAyB;AACzD,IAAI6gC,+BAA+B7gC,mBAAOA,CAAC,KAAoC;AAC/E,IAAI8gC,+BAA+B9gC,mBAAOA,CAAC,KAAoC;AAE/E,SAAS+gC,YAAYC,KAAK,EAAEC,OAAO,EAAEr/B,IAAI;IACrC,QAAQ;IACRq/B,UAAUL,kBAAkB,CAAC,CAACK;IAC9B,OAAOH,6BAA6B,CAAC,CACjCE,OACAH,6BAA6B,CAAC,KAExBK,QAAQ,SAAS,CAACD,SAASr/B,QAAQ,EAAE,EAAEg/B,kBAAkB,CAAC,CAACI,OAAO,WAAW,IAC7EC,QAAQ,KAAK,CAACD,OAAOp/B;AAEnC;AAEAuM,SAAS,GAAG4yB;;;;;;AClBC;AAEb,SAASI,kBAAkB3O,QAAQ,EAAE4O,WAAW;IAC5C,IAAI,CAAE5O,CAAAA,oBAAoB4O,WAAU,GAAI,MAAM,IAAIC,UAAU;AAChE;AACAlzB,SAAS,GAAGgzB;;;;;;ACLC;AAEb,SAASG,kBAAkB5xB,MAAM,EAAE6xB,KAAK;IACpC,IAAK,IAAI5xB,IAAI,GAAGA,IAAI4xB,MAAM,MAAM,EAAE5xB,IAAK;QACnC,IAAI6xB,aAAaD,KAAK,CAAC5xB,EAAE;QACzB6xB,WAAW,UAAU,GAAGA,WAAW,UAAU,IAAI;QACjDA,WAAW,YAAY,GAAG;QAE1B,IAAI,WAAWA,YAAYA,WAAW,QAAQ,GAAG;QAEjDx6B,OAAO,cAAc,CAAC0I,QAAQ8xB,WAAW,GAAG,EAAEA;IAClD;AACJ;AACA,SAASC,cAAcL,WAAW,EAAEM,UAAU,EAAEC,WAAW;IACvD,IAAID,YAAYJ,kBAAkBF,YAAY,SAAS,EAAEM;IACzD,IAAIC,aAAaL,kBAAkBF,aAAaO;IAEhD,OAAOP;AACX;AACAjzB,SAAS,GAAGszB;;;;;;ACnBC;AAEb,SAASG,iBAAiBC,GAAG,EAAEr9B,GAAG,EAAEuB,KAAK;IACrC,IAAIvB,OAAOq9B,KAAK;QACZ76B,OAAO,cAAc,CAAC66B,KAAKr9B,KAAK;YAAE,OAAOuB;YAAO,YAAY;YAAM,cAAc;YAAM,UAAU;QAAK;IACzG,OAAO87B,GAAG,CAACr9B,IAAI,GAAGuB;IAElB,OAAO87B;AACX;AACA1zB,SAAS,GAAGyzB;;;;;;ACTC;AAEb,SAASE,aAAa99B,IAAI,EAAEC,EAAE;IAC1B+C,OAAO,IAAI,CAAChD,MAAM,OAAO,CAAC,SAAS84B,CAAC;QAChC,IAAIA,MAAM,aAAa,CAAC91B,OAAO,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC/C,IAAI64B,IAAI;YACjE91B,OAAO,cAAc,CAAC/C,IAAI64B,GAAG;gBACzB,YAAY;gBACZ,KAAK;oBACD,OAAO94B,IAAI,CAAC84B,EAAE;gBAClB;YACJ;QACJ;IACJ;IAEA,OAAO94B;AACX;AACAmK,SAAS,GAAG2zB;;;;;;AChBC;AAEb,SAASlB,kBAAkBmB,CAAC;IACxB5zB,SAAS,GAAGyyB,oBAAoB55B,OAAO,cAAc,GAAGA,OAAO,cAAc,GAAG,SAASg7B,eAAeD,CAAC;QACrG,OAAOA,EAAE,SAAS,IAAI/6B,OAAO,cAAc,CAAC+6B;IAChD;IAEA,OAAOnB,kBAAkBmB;AAC7B;AACA5zB,SAAS,GAAGyyB;;;;;;ACTC;AAEb,IAAIqB,oBAAoBjiC,mBAAOA,CAAC,KAAyB;AAEzD,SAASkiC,UAAUC,QAAQ,EAAEC,UAAU;IACnC,IAAI,OAAOA,eAAe,cAAcA,eAAe,MAAM;QACzD,MAAM,IAAIf,UAAU;IACxB;IAEAc,SAAS,SAAS,GAAGn7B,OAAO,MAAM,CAACo7B,cAAcA,WAAW,SAAS,EAAE;QAAE,aAAa;YAAE,OAAOD;YAAU,UAAU;YAAM,cAAc;QAAK;IAAE;IAE9I,IAAIC,YAAYH,kBAAkB,CAAC,CAACE,UAAUC;AAClD;AACAj0B,SAAS,GAAG+zB;;;;;;ACbC;AAEb,SAASG,yBAAyBR,GAAG;IACjC,OAAOA,OAAOA,IAAI,UAAU,GAAGA,MAAM;QAAE,SAASA;IAAI;AACxD;AACA1zB,SAAS,GAAGk0B;;;;;;ACLC;AAEb,SAASxB;IACL,6DAA6D;IAC7D,yEAAyE;IACzE,sEAAsE;IACtE,mCAAmC;IACnC,IAAI;QACA,oEAAoE;QACpE,6CAA6C;QAC7C,IAAIzc,SAAS,CAACtJ,QAAQ,SAAS,CAAC,OAAO,CAAC,IAAI,CAAComB,QAAQ,SAAS,CAACpmB,SAAS,EAAE,EAAE,YAAY;IAC5F,EAAE,OAAOtG,GAAG,CAAC;IACb,OAAQrG,CAAAA,SAAS,GAAG0yB,+BAA+B;QAC/C,OAAO,CAAC,CAACzc;IACb;AACJ;AAEAjW,SAAS,GAAG0yB;;;;;;ACjBC;AAEb,SAASyB,mBAAmBC,IAAI;IAC5B,IAAI,OAAO1e,WAAW,eAAe0e,IAAI,CAAC1e,OAAO,QAAQ,CAAC,IAAI,QAAQ0e,IAAI,CAAC,aAAa,IAAI,MAAM;QAC9F,OAAOzwB,MAAM,IAAI,CAACywB;IACtB;AACJ;AACAp0B,SAAS,GAAGm0B;;;;;;ACPC;AAEb,SAASE,yBAAyB/xB,GAAG,EAAEd,CAAC;IACpC,IAAI8yB,KAAKhyB,OAAO,OAAO,OAAO,OAAOoT,WAAW,eAAepT,GAAG,CAACoT,OAAO,QAAQ,CAAC,IAAIpT,GAAG,CAAC,aAAa;IAExG,IAAIgyB,MAAM,MAAM;IAEhB,IAAIC,OAAO,EAAE;IACb,IAAIC,KAAK;IACT,IAAIC,KAAK;IACT,IAAIC,IAAIC;IAER,IAAI;QACA,IAAKL,KAAKA,GAAG,IAAI,CAAChyB,MAAM,CAAEkyB,CAAAA,KAAME,CAAAA,KAAKJ,GAAG,IAAI,EAAC,EAAG,IAAG,GAAIE,KAAK,KAAM;YAC9DD,KAAK,IAAI,CAACG,GAAG,KAAK;YAClB,IAAIlzB,KAAK+yB,KAAK,MAAM,KAAK/yB,GAAG;QAChC;IACJ,EAAE,OAAOmT,KAAK;QACV8f,KAAK;QACLE,KAAKhgB;IACT,SAAU;QACN,IAAI;YACA,IAAI,CAAC6f,MAAMF,EAAE,CAAC,SAAS,IAAI,MAAMA,EAAE,CAAC,SAAS;QACjD,SAAU;YACN,IAAIG,IAAI,MAAME;QAClB;IACJ;IAEA,OAAOJ;AACX;AACAv0B,SAAS,GAAGq0B;;;;;;AC9BC;AAEb,SAASO;IACL,MAAM,IAAI1B,UAAU;AACxB;AACAlzB,SAAS,GAAG40B;;;;;;ACLC;AAEb,SAASC;IACL,MAAM,IAAI3B,UAAU;AACxB;AACAlzB,SAAS,GAAG60B;;;;;;ACLC;AAEb,IAAIpB,mBAAmB5hC,mBAAOA,CAAC,KAAwB;AAEvD,SAASijC,eAAevzB,MAAM;IAC1B,IAAK,IAAIC,IAAI,GAAGA,IAAIC,UAAU,MAAM,EAAED,IAAK;QACvC,IAAIE,SAASD,SAAS,CAACD,EAAE,IAAI,OAAOC,SAAS,CAACD,EAAE,GAAG,CAAC;QACpD,IAAIuzB,UAAUl8B,OAAO,IAAI,CAAC6I;QAE1B,IAAI,OAAO7I,OAAO,qBAAqB,KAAK,YAAY;YACpDk8B,UAAUA,QAAQ,MAAM,CACpBl8B,OAAO,qBAAqB,CAAC6I,QAAQ,MAAM,CAAC,SAASszB,GAAG;gBACpD,OAAOn8B,OAAO,wBAAwB,CAAC6I,QAAQszB,KAAK,UAAU;YAClE;QAER;QAEAD,QAAQ,OAAO,CAAC,SAAS1+B,GAAG;YACxBo9B,iBAAiB,CAAC,CAAClyB,QAAQlL,KAAKqL,MAAM,CAACrL,IAAI;QAC/C;IACJ;IAEA,OAAOkL;AACX;AACAvB,SAAS,GAAG80B;;;;;;ACxBC;AAEb,IAAI7C,2BAA2BpgC,mBAAOA,CAAC,KAAgC;AACvE,IAAIojC,WAAWpjC,mBAAOA,CAAC,KAAgB;AAEvC,SAAS8gC,6BAA6B/yB,IAAI,EAAE0W,IAAI;IAC5C,IAAIA,QAAS2e,CAAAA,SAAS,CAAC,CAAC3e,UAAU,YAAY,OAAOA,SAAS,UAAS,GAAI,OAAOA;IAElF,OAAO2b,yBAAyB,CAAC,CAACryB;AACtC;AACAI,SAAS,GAAG2yB;;;;;;ACVC;AAEb,SAASmB,kBAAkBF,CAAC,EAAE58B,CAAC;IAC3BgJ,SAAS,GAAG8zB,oBAAoBj7B,OAAO,cAAc,IAAI,SAASq8B,eAAetB,CAAC,EAAE58B,CAAC;QACjF48B,EAAE,SAAS,GAAG58B;QAEd,OAAO48B;IACX;IAEA,OAAOE,kBAAkBF,GAAG58B;AAChC;AACAgJ,SAAS,GAAG8zB;;;;;;ACXC;AAEb,IAAI/B,oBAAoBlgC,mBAAOA,CAAC,KAAyB;AACzD,IAAIwiC,2BAA2BxiC,mBAAOA,CAAC,KAAgC;AACvE,IAAI+iC,qBAAqB/iC,mBAAOA,CAAC,KAA0B;AAC3D,IAAIsjC,iCAAiCtjC,mBAAOA,CAAC,KAAsC;AAEnF,SAASujC,iBAAiB9yB,GAAG,EAAEd,CAAC;IAC5B,OAAOuwB,kBAAkB,CAAC,CAACzvB,QAAQ+xB,yBAAyB,CAAC,CAAC/xB,KAAKd,MAAM2zB,+BAA+B,CAAC,CAAC7yB,KAAKd,MAAMozB,mBAAmB,CAAC;AAC7I;AACA50B,SAAS,GAAGo1B;;;;;;ACVC;AAEb,IAAIrD,oBAAoBlgC,mBAAOA,CAAC,KAAyB;AACzD,IAAIsiC,qBAAqBtiC,mBAAOA,CAAC,KAA0B;AAC3D,IAAI+iC,qBAAqB/iC,mBAAOA,CAAC,KAA0B;AAC3D,IAAIsjC,iCAAiCtjC,mBAAOA,CAAC,KAAsC;AAEnF,SAASwjC,UAAU/yB,GAAG;IAClB,OAAOyvB,kBAAkB,CAAC,CAACzvB,QAAQ6xB,mBAAmB,CAAC,CAAC7xB,QAAQ6yB,+BAA+B,CAAC,CAAC7yB,QAAQsyB,mBAAmB,CAAC;AACjI;AACA50B,SAAS,GAAGq1B;;;;;;ACVC;AAEb,IAAIrD,uBAAuBngC,mBAAOA,CAAC,KAA4B;AAC/D,IAAIsiC,qBAAqBtiC,mBAAOA,CAAC,KAA0B;AAC3D,IAAIgjC,uBAAuBhjC,mBAAOA,CAAC,KAA4B;AAC/D,IAAIsjC,iCAAiCtjC,mBAAOA,CAAC,KAAsC;AAEnF,SAASyjC,qBAAqBhzB,GAAG;IAC7B,OAAO0vB,qBAAqB,CAAC,CAAC1vB,QAAQ6xB,mBAAmB,CAAC,CAAC7xB,QAAQ6yB,+BAA+B,CAAC,CAAC7yB,QAAQuyB,qBAAqB,CAAC;AACtI;AACA70B,SAAS,GAAGs1B;;;;;;ACVC;AAEb,SAASL,SAASvB,GAAG;IACjB;IAEA,OAAOA,OAAO,OAAOhe,WAAW,eAAege,IAAI,WAAW,KAAKhe,SAAS,WAAW,OAAOge;AAClG;AACA1zB,SAAS,GAAGi1B;;;;;;ACPC;AAEb,IAAIrD,uBAAuB//B,mBAAOA,CAAC,KAA4B;AAE/D,SAASsjC,+BAA+BvB,CAAC,EAAE2B,MAAM;IAC7C,IAAI,CAAC3B,GAAG;IACR,IAAI,OAAOA,MAAM,UAAU,OAAOhC,qBAAqB,CAAC,CAACgC,GAAG2B;IAE5D,IAAI3oB,IAAI/T,OAAO,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC+6B,GAAG,KAAK,CAAC,GAAG,CAAC;IAEpD,IAAIhnB,MAAM,YAAYgnB,EAAE,WAAW,EAAEhnB,IAAIgnB,EAAE,WAAW,CAAC,IAAI;IAC3D,IAAIhnB,MAAM,SAASA,MAAM,OAAO,OAAOjJ,MAAM,IAAI,CAACiJ;IAClD,IAAIA,MAAM,eAAe,2CAA2C,IAAI,CAACA,IAAI,OAAOglB,qBAAqB,CAAC,CAACgC,GAAG2B;AAClH;AACAv1B,SAAS,GAAGm1B;;;;;;;;;;;;;;;ICbDz+B,iCAAiC;;;oDAKe;;;WAMJ;;;;uCAZnB,KAAc;AAC3C,wCAAqD,SAAUA,iCAAiC,EAAE;IACvGA,iCAAiC,CAAC,KAAK,CAAC,GAAG,KAAK;IAChDA,iCAAiC,CAAC,MAAM,CAAC,GAAG,MAAM;IAClD,OAAOA,iCAAiC;AAC1C,CAAC,CAAC,CAAC,CAAC,CAAC;AACE,IAAIC,mDAAgE,SAAUA,gDAAgD,EAAE;IACrIA,gDAAgD,CAAC,QAAQ,CAAC,GAAG,QAAQ;IACrEA,gDAAgD,CAAC,KAAK,CAAC,GAAG,KAAK;IAC/DA,gDAAgD,CAAC,KAAK,CAAC,GAAG,KAAK;IAC/D,OAAOA,gDAAgD;AACzD,CAAC,CAAC,CAAC,CAAC,CAAC;IACL,WAAe6+B,gCAAmB,CAACz1B,GAAG,CAAC,eAAe,CAAC;;;;;;ACZvD,sDAAsD;AACtD,EAAE;AACF,0EAA0E;AAC1E,gEAAgE;AAChE,sEAAsE;AACtE,sEAAsE;AACtE,4EAA4E;AAC5E,qEAAqE;AACrE,wBAAwB;AACxB,EAAE;AACF,0EAA0E;AAC1E,yDAAyD;AACzD,EAAE;AACF,0EAA0E;AAC1E,6DAA6D;AAC7D,4EAA4E;AAC5E,2EAA2E;AAC3E,wEAAwE;AACxE,4EAA4E;AAC5E,yCAAyC;AAE5B;AAEb,IAAI01B,IAAI,OAAO1C,YAAY,WAAWA,UAAU;AAChD,IAAI2C,eAAeD,KAAK,OAAOA,EAAE,KAAK,KAAK,aACvCA,EAAE,KAAK,GACP,SAASC,aAAan0B,MAAM,EAAEo0B,QAAQ,EAAEliC,IAAI;IAC5C,OAAOyf,SAAS,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC3R,QAAQo0B,UAAUliC;AACzD;AAEF,IAAImiC;AACJ,IAAIH,KAAK,OAAOA,EAAE,OAAO,KAAK,YAAY;IACxCG,iBAAiBH,EAAE,OAAO;AAC5B,OAAO,IAAI58B,OAAO,qBAAqB,EAAE;IACvC+8B,iBAAiB,SAASA,eAAer0B,MAAM;QAC7C,OAAO1I,OAAO,mBAAmB,CAAC0I,QAC/B,MAAM,CAAC1I,OAAO,qBAAqB,CAAC0I;IACzC;AACF,OAAO;IACLq0B,iBAAiB,SAASA,eAAer0B,MAAM;QAC7C,OAAO1I,OAAO,mBAAmB,CAAC0I;IACpC;AACF;AAEA,SAASs0B,mBAAmBC,OAAO;IACjC,IAAIvjC,WAAWA,QAAQ,IAAI,EAAEA,QAAQ,IAAI,CAACujC;AAC5C;AAEA,IAAIC,cAAc55B,OAAO,KAAK,IAAI,SAAS45B,YAAYn+B,KAAK;IAC1D,OAAOA,UAAUA;AACnB;AAEA,SAAS8B;IACPA,aAAa,IAAI,CAAC,IAAI,CAAC,IAAI;AAC7B;AACA6F,cAAc,GAAG7F;AACjB6F,mBAAmB,GAAGuW;AAEtB,oCAAoC;AACpCpc,aAAa,YAAY,GAAGA;AAE5BA,aAAa,SAAS,CAAC,OAAO,GAAGtH;AACjCsH,aAAa,SAAS,CAAC,YAAY,GAAG;AACtCA,aAAa,SAAS,CAAC,aAAa,GAAGtH;AAEvC,8EAA8E;AAC9E,0EAA0E;AAC1E,IAAI4jC,sBAAsB;AAE1B,SAASC,cAAcC,QAAQ;IAC7B,IAAI,OAAOA,aAAa,YAAY;QAClC,MAAM,IAAIhD,UAAU,qEAAqE,OAAOgD;IAClG;AACF;AAEAr9B,OAAO,cAAc,CAACa,cAAc,uBAAuB;IACzD,YAAY;IACZ,KAAK;QACH,OAAOs8B;IACT;IACA,KAAK,SAASzD,GAAG;QACf,IAAI,OAAOA,QAAQ,YAAYA,MAAM,KAAKwD,YAAYxD,MAAM;YAC1D,MAAM,IAAI4D,WAAW,oGAAoG5D,MAAM;QACjI;QACAyD,sBAAsBzD;IACxB;AACF;AAEA74B,aAAa,IAAI,GAAG;IAElB,IAAI,IAAI,CAAC,OAAO,KAAKtH,aACjB,IAAI,CAAC,OAAO,KAAKyG,OAAO,cAAc,CAAC,IAAI,EAAE,OAAO,EAAE;QACxD,IAAI,CAAC,OAAO,GAAGA,OAAO,MAAM,CAAC;QAC7B,IAAI,CAAC,YAAY,GAAG;IACtB;IAEA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,IAAIzG;AAC7C;AAEA,2EAA2E;AAC3E,mDAAmD;AACnDsH,aAAa,SAAS,CAAC,eAAe,GAAG,SAAS08B,gBAAgBxpB,CAAC;IACjE,IAAI,OAAOA,MAAM,YAAYA,IAAI,KAAKmpB,YAAYnpB,IAAI;QACpD,MAAM,IAAIupB,WAAW,kFAAkFvpB,IAAI;IAC7G;IACA,IAAI,CAAC,aAAa,GAAGA;IACrB,OAAO,IAAI;AACb;AAEA,SAASypB,iBAAiBC,IAAI;IAC5B,IAAIA,KAAK,aAAa,KAAKlkC,WACzB,OAAOsH,aAAa,mBAAmB;IACzC,OAAO48B,KAAK,aAAa;AAC3B;AAEA58B,aAAa,SAAS,CAAC,eAAe,GAAG,SAAS68B;IAChD,OAAOF,iBAAiB,IAAI;AAC9B;AAEA38B,aAAa,SAAS,CAAC,IAAI,GAAG,SAASyD,KAAK6D,IAAI;IAC9C,IAAIvN,OAAO,EAAE;IACb,IAAK,IAAI+N,IAAI,GAAGA,IAAIC,UAAU,MAAM,EAAED,IAAK/N,KAAK,IAAI,CAACgO,SAAS,CAACD,EAAE;IACjE,IAAIg1B,UAAWx1B,SAAS;IAExB,IAAIy1B,SAAS,IAAI,CAAC,OAAO;IACzB,IAAIA,WAAWrkC,WACbokC,UAAWA,WAAWC,OAAO,KAAK,KAAKrkC;SACpC,IAAI,CAACokC,SACR,OAAO;IAET,oDAAoD;IACpD,IAAIA,SAAS;QACX,IAAIE;QACJ,IAAIjjC,KAAK,MAAM,GAAG,GAChBijC,KAAKjjC,IAAI,CAAC,EAAE;QACd,IAAIijC,cAAcpkC,OAAO;YACvB,qEAAqE;YACrE,iEAAiE;YACjE,MAAMokC,IAAI,0BAA0B;QACtC;QACA,iDAAiD;QACjD,IAAI/hB,MAAM,IAAIriB,MAAM,qBAAsBokC,CAAAA,KAAK,OAAOA,GAAG,OAAO,GAAG,MAAM,EAAC;QAC1E/hB,IAAI,OAAO,GAAG+hB;QACd,MAAM/hB,KAAK,0BAA0B;IACvC;IAEA,IAAIgiB,UAAUF,MAAM,CAACz1B,KAAK;IAE1B,IAAI21B,YAAYvkC,WACd,OAAO;IAET,IAAI,OAAOukC,YAAY,YAAY;QACjCjB,aAAaiB,SAAS,IAAI,EAAEljC;IAC9B,OAAO;QACL,IAAIo+B,MAAM8E,QAAQ,MAAM;QACxB,IAAIC,YAAYC,WAAWF,SAAS9E;QACpC,IAAK,IAAIrwB,IAAI,GAAGA,IAAIqwB,KAAK,EAAErwB,EACzBk0B,aAAakB,SAAS,CAACp1B,EAAE,EAAE,IAAI,EAAE/N;IACrC;IAEA,OAAO;AACT;AAEA,SAASqjC,aAAav1B,MAAM,EAAEP,IAAI,EAAEk1B,QAAQ,EAAEa,OAAO;IACnD,IAAIC;IACJ,IAAIP;IACJ,IAAIQ;IAEJhB,cAAcC;IAEdO,SAASl1B,OAAO,OAAO;IACvB,IAAIk1B,WAAWrkC,WAAW;QACxBqkC,SAASl1B,OAAO,OAAO,GAAG1I,OAAO,MAAM,CAAC;QACxC0I,OAAO,YAAY,GAAG;IACxB,OAAO;QACL,qEAAqE;QACrE,wDAAwD;QACxD,IAAIk1B,OAAO,WAAW,KAAKrkC,WAAW;YACpCmP,OAAO,IAAI,CAAC,eAAeP,MACfk1B,SAAS,QAAQ,GAAGA,SAAS,QAAQ,GAAGA;YAEpD,yEAAyE;YACzE,8CAA8C;YAC9CO,SAASl1B,OAAO,OAAO;QACzB;QACA01B,WAAWR,MAAM,CAACz1B,KAAK;IACzB;IAEA,IAAIi2B,aAAa7kC,WAAW;QAC1B,wEAAwE;QACxE6kC,WAAWR,MAAM,CAACz1B,KAAK,GAAGk1B;QAC1B,EAAE30B,OAAO,YAAY;IACvB,OAAO;QACL,IAAI,OAAO01B,aAAa,YAAY;YAClC,sDAAsD;YACtDA,WAAWR,MAAM,CAACz1B,KAAK,GACrB+1B,UAAU;gBAACb;gBAAUe;aAAS,GAAG;gBAACA;gBAAUf;aAAS;QACvD,8CAA8C;QAChD,OAAO,IAAIa,SAAS;YAClBE,SAAS,OAAO,CAACf;QACnB,OAAO;YACLe,SAAS,IAAI,CAACf;QAChB;QAEA,0BAA0B;QAC1Bc,IAAIX,iBAAiB90B;QACrB,IAAIy1B,IAAI,KAAKC,SAAS,MAAM,GAAGD,KAAK,CAACC,SAAS,MAAM,EAAE;YACpDA,SAAS,MAAM,GAAG;YAClB,+CAA+C;YAC/C,gDAAgD;YAChD,IAAIC,IAAI,IAAI5kC,MAAM,iDACE2kC,SAAS,MAAM,GAAG,MAAME,OAAOn2B,QAAQ,gBACvC,6CACA;YACpBk2B,EAAE,IAAI,GAAG;YACTA,EAAE,OAAO,GAAG31B;YACZ21B,EAAE,IAAI,GAAGl2B;YACTk2B,EAAE,KAAK,GAAGD,SAAS,MAAM;YACzBpB,mBAAmBqB;QACrB;IACF;IAEA,OAAO31B;AACT;AAEA7H,aAAa,SAAS,CAAC,WAAW,GAAG,SAAS09B,YAAYp2B,IAAI,EAAEk1B,QAAQ;IACtE,OAAOY,aAAa,IAAI,EAAE91B,MAAMk1B,UAAU;AAC5C;AAEAx8B,aAAa,SAAS,CAAC,EAAE,GAAGA,aAAa,SAAS,CAAC,WAAW;AAE9DA,aAAa,SAAS,CAAC,eAAe,GAClC,SAAS29B,gBAAgBr2B,IAAI,EAAEk1B,QAAQ;IACrC,OAAOY,aAAa,IAAI,EAAE91B,MAAMk1B,UAAU;AAC5C;AAEJ,SAASoB;IACP,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;QACf,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM;QACjD,IAAI,CAAC,KAAK,GAAG;QACb,IAAI71B,UAAU,MAAM,KAAK,GACvB,OAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM;QACvC,OAAO,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAEA;IAC1C;AACF;AAEA,SAAS81B,UAAUh2B,MAAM,EAAEP,IAAI,EAAEk1B,QAAQ;IACvC,IAAIsB,QAAQ;QAAE,OAAO;QAAO,QAAQplC;QAAW,QAAQmP;QAAQ,MAAMP;QAAM,UAAUk1B;IAAS;IAC9F,IAAIuB,UAAUH,YAAY,IAAI,CAACE;IAC/BC,QAAQ,QAAQ,GAAGvB;IACnBsB,MAAM,MAAM,GAAGC;IACf,OAAOA;AACT;AAEA/9B,aAAa,SAAS,CAAC,IAAI,GAAG,SAASoc,KAAK9U,IAAI,EAAEk1B,QAAQ;IACxDD,cAAcC;IACd,IAAI,CAAC,EAAE,CAACl1B,MAAMu2B,UAAU,IAAI,EAAEv2B,MAAMk1B;IACpC,OAAO,IAAI;AACb;AAEAx8B,aAAa,SAAS,CAAC,mBAAmB,GACtC,SAASg+B,oBAAoB12B,IAAI,EAAEk1B,QAAQ;IACzCD,cAAcC;IACd,IAAI,CAAC,eAAe,CAACl1B,MAAMu2B,UAAU,IAAI,EAAEv2B,MAAMk1B;IACjD,OAAO,IAAI;AACb;AAEJ,0EAA0E;AAC1Ex8B,aAAa,SAAS,CAAC,cAAc,GACjC,SAASi+B,eAAe32B,IAAI,EAAEk1B,QAAQ;IACpC,IAAI0B,MAAMnB,QAAQoB,UAAUr2B,GAAGs2B;IAE/B7B,cAAcC;IAEdO,SAAS,IAAI,CAAC,OAAO;IACrB,IAAIA,WAAWrkC,WACb,OAAO,IAAI;IAEbwlC,OAAOnB,MAAM,CAACz1B,KAAK;IACnB,IAAI42B,SAASxlC,WACX,OAAO,IAAI;IAEb,IAAIwlC,SAAS1B,YAAY0B,KAAK,QAAQ,KAAK1B,UAAU;QACnD,IAAI,EAAE,IAAI,CAAC,YAAY,KAAK,GAC1B,IAAI,CAAC,OAAO,GAAGr9B,OAAO,MAAM,CAAC;aAC1B;YACH,OAAO49B,MAAM,CAACz1B,KAAK;YACnB,IAAIy1B,OAAO,cAAc,EACvB,IAAI,CAAC,IAAI,CAAC,kBAAkBz1B,MAAM42B,KAAK,QAAQ,IAAI1B;QACvD;IACF,OAAO,IAAI,OAAO0B,SAAS,YAAY;QACrCC,WAAW,CAAC;QAEZ,IAAKr2B,IAAIo2B,KAAK,MAAM,GAAG,GAAGp2B,KAAK,GAAGA,IAAK;YACrC,IAAIo2B,IAAI,CAACp2B,EAAE,KAAK00B,YAAY0B,IAAI,CAACp2B,EAAE,CAAC,QAAQ,KAAK00B,UAAU;gBACzD4B,mBAAmBF,IAAI,CAACp2B,EAAE,CAAC,QAAQ;gBACnCq2B,WAAWr2B;gBACX;YACF;QACF;QAEA,IAAIq2B,WAAW,GACb,OAAO,IAAI;QAEb,IAAIA,aAAa,GACfD,KAAK,KAAK;aACP;YACHG,UAAUH,MAAMC;QAClB;QAEA,IAAID,KAAK,MAAM,KAAK,GAClBnB,MAAM,CAACz1B,KAAK,GAAG42B,IAAI,CAAC,EAAE;QAExB,IAAInB,OAAO,cAAc,KAAKrkC,WAC5B,IAAI,CAAC,IAAI,CAAC,kBAAkB4O,MAAM82B,oBAAoB5B;IAC1D;IAEA,OAAO,IAAI;AACb;AAEJx8B,aAAa,SAAS,CAAC,GAAG,GAAGA,aAAa,SAAS,CAAC,cAAc;AAElEA,aAAa,SAAS,CAAC,kBAAkB,GACrC,SAASs+B,mBAAmBh3B,IAAI;IAC9B,IAAI41B,WAAWH,QAAQj1B;IAEvBi1B,SAAS,IAAI,CAAC,OAAO;IACrB,IAAIA,WAAWrkC,WACb,OAAO,IAAI;IAEb,oDAAoD;IACpD,IAAIqkC,OAAO,cAAc,KAAKrkC,WAAW;QACvC,IAAIqP,UAAU,MAAM,KAAK,GAAG;YAC1B,IAAI,CAAC,OAAO,GAAG5I,OAAO,MAAM,CAAC;YAC7B,IAAI,CAAC,YAAY,GAAG;QACtB,OAAO,IAAI49B,MAAM,CAACz1B,KAAK,KAAK5O,WAAW;YACrC,IAAI,EAAE,IAAI,CAAC,YAAY,KAAK,GAC1B,IAAI,CAAC,OAAO,GAAGyG,OAAO,MAAM,CAAC;iBAE7B,OAAO49B,MAAM,CAACz1B,KAAK;QACvB;QACA,OAAO,IAAI;IACb;IAEA,sDAAsD;IACtD,IAAIS,UAAU,MAAM,KAAK,GAAG;QAC1B,IAAI3I,OAAOD,OAAO,IAAI,CAAC49B;QACvB,IAAIpgC;QACJ,IAAKmL,IAAI,GAAGA,IAAI1I,KAAK,MAAM,EAAE,EAAE0I,EAAG;YAChCnL,MAAMyC,IAAI,CAAC0I,EAAE;YACb,IAAInL,QAAQ,kBAAkB;YAC9B,IAAI,CAAC,kBAAkB,CAACA;QAC1B;QACA,IAAI,CAAC,kBAAkB,CAAC;QACxB,IAAI,CAAC,OAAO,GAAGwC,OAAO,MAAM,CAAC;QAC7B,IAAI,CAAC,YAAY,GAAG;QACpB,OAAO,IAAI;IACb;IAEA+9B,YAAYH,MAAM,CAACz1B,KAAK;IAExB,IAAI,OAAO41B,cAAc,YAAY;QACnC,IAAI,CAAC,cAAc,CAAC51B,MAAM41B;IAC5B,OAAO,IAAIA,cAAcxkC,WAAW;QAClC,aAAa;QACb,IAAKoP,IAAIo1B,UAAU,MAAM,GAAG,GAAGp1B,KAAK,GAAGA,IAAK;YAC1C,IAAI,CAAC,cAAc,CAACR,MAAM41B,SAAS,CAACp1B,EAAE;QACxC;IACF;IAEA,OAAO,IAAI;AACb;AAEJ,SAASy2B,WAAW12B,MAAM,EAAEP,IAAI,EAAEk3B,MAAM;IACtC,IAAIzB,SAASl1B,OAAO,OAAO;IAE3B,IAAIk1B,WAAWrkC,WACb,OAAO,EAAE;IAEX,IAAI+lC,aAAa1B,MAAM,CAACz1B,KAAK;IAC7B,IAAIm3B,eAAe/lC,WACjB,OAAO,EAAE;IAEX,IAAI,OAAO+lC,eAAe,YACxB,OAAOD,SAAS;QAACC,WAAW,QAAQ,IAAIA;KAAW,GAAG;QAACA;KAAW;IAEpE,OAAOD,SACLE,gBAAgBD,cAActB,WAAWsB,YAAYA,WAAW,MAAM;AAC1E;AAEAz+B,aAAa,SAAS,CAAC,SAAS,GAAG,SAASk9B,UAAU51B,IAAI;IACxD,OAAOi3B,WAAW,IAAI,EAAEj3B,MAAM;AAChC;AAEAtH,aAAa,SAAS,CAAC,YAAY,GAAG,SAAS2+B,aAAar3B,IAAI;IAC9D,OAAOi3B,WAAW,IAAI,EAAEj3B,MAAM;AAChC;AAEAtH,aAAa,aAAa,GAAG,SAAS4+B,OAAO,EAAEt3B,IAAI;IACjD,IAAI,OAAOs3B,QAAQ,aAAa,KAAK,YAAY;QAC/C,OAAOA,QAAQ,aAAa,CAACt3B;IAC/B,OAAO;QACL,OAAOu3B,cAAc,IAAI,CAACD,SAASt3B;IACrC;AACF;AAEAtH,aAAa,SAAS,CAAC,aAAa,GAAG6+B;AACvC,SAASA,cAAcv3B,IAAI;IACzB,IAAIy1B,SAAS,IAAI,CAAC,OAAO;IAEzB,IAAIA,WAAWrkC,WAAW;QACxB,IAAI+lC,aAAa1B,MAAM,CAACz1B,KAAK;QAE7B,IAAI,OAAOm3B,eAAe,YAAY;YACpC,OAAO;QACT,OAAO,IAAIA,eAAe/lC,WAAW;YACnC,OAAO+lC,WAAW,MAAM;QAC1B;IACF;IAEA,OAAO;AACT;AAEAz+B,aAAa,SAAS,CAAC,UAAU,GAAG,SAAS8+B;IAC3C,OAAO,IAAI,CAAC,YAAY,GAAG,IAAI5C,eAAe,IAAI,CAAC,OAAO,IAAI,EAAE;AAClE;AAEA,SAASiB,WAAWv0B,GAAG,EAAEsK,CAAC;IACxB,IAAI6rB,OAAO,IAAI90B,MAAMiJ;IACrB,IAAK,IAAIpL,IAAI,GAAGA,IAAIoL,GAAG,EAAEpL,EACvBi3B,IAAI,CAACj3B,EAAE,GAAGc,GAAG,CAACd,EAAE;IAClB,OAAOi3B;AACT;AAEA,SAASV,UAAUH,IAAI,EAAEv7B,KAAK;IAC5B,MAAOA,QAAQ,IAAIu7B,KAAK,MAAM,EAAEv7B,QAC9Bu7B,IAAI,CAACv7B,MAAM,GAAGu7B,IAAI,CAACv7B,QAAQ,EAAE;IAC/Bu7B,KAAK,GAAG;AACV;AAEA,SAASQ,gBAAgB91B,GAAG;IAC1B,IAAIyJ,MAAM,IAAIpI,MAAMrB,IAAI,MAAM;IAC9B,IAAK,IAAId,IAAI,GAAGA,IAAIuK,IAAI,MAAM,EAAE,EAAEvK,EAAG;QACnCuK,GAAG,CAACvK,EAAE,GAAGc,GAAG,CAACd,EAAE,CAAC,QAAQ,IAAIc,GAAG,CAACd,EAAE;IACpC;IACA,OAAOuK;AACT;AAEA,SAAS+J,KAAKwiB,OAAO,EAAE7mC,IAAI;IACzB,OAAO,IAAIiB,QAAQ,SAAUC,OAAO,EAAEqgB,MAAM;QAC1C,SAAS0lB,cAAc/jB,GAAG;YACxB2jB,QAAQ,cAAc,CAAC7mC,MAAMmK;YAC7BoX,OAAO2B;QACT;QAEA,SAAS/Y;YACP,IAAI,OAAO08B,QAAQ,cAAc,KAAK,YAAY;gBAChDA,QAAQ,cAAc,CAAC,SAASI;YAClC;YACA/lC,QAAQ,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC8O;QACxB;;QAEAk3B,+BAA+BL,SAAS7mC,MAAMmK,UAAU;YAAE,MAAM;QAAK;QACrE,IAAInK,SAAS,SAAS;YACpBmnC,8BAA8BN,SAASI,eAAe;gBAAE,MAAM;YAAK;QACrE;IACF;AACF;AAEA,SAASE,8BAA8BN,OAAO,EAAE3B,OAAO,EAAEkC,KAAK;IAC5D,IAAI,OAAOP,QAAQ,EAAE,KAAK,YAAY;QACpCK,+BAA+BL,SAAS,SAAS3B,SAASkC;IAC5D;AACF;AAEA,SAASF,+BAA+BL,OAAO,EAAE7mC,IAAI,EAAEykC,QAAQ,EAAE2C,KAAK;IACpE,IAAI,OAAOP,QAAQ,EAAE,KAAK,YAAY;QACpC,IAAIO,MAAM,IAAI,EAAE;YACdP,QAAQ,IAAI,CAAC7mC,MAAMykC;QACrB,OAAO;YACLoC,QAAQ,EAAE,CAAC7mC,MAAMykC;QACnB;IACF,OAAO,IAAI,OAAOoC,QAAQ,gBAAgB,KAAK,YAAY;QACzD,8DAA8D;QAC9D,2DAA2D;QAC3DA,QAAQ,gBAAgB,CAAC7mC,MAAM,SAASqnC,aAAavG,GAAG;YACtD,0DAA0D;YAC1D,0BAA0B;YAC1B,IAAIsG,MAAM,IAAI,EAAE;gBACdP,QAAQ,mBAAmB,CAAC7mC,MAAMqnC;YACpC;YACA5C,SAAS3D;QACX;IACF,OAAO;QACL,MAAM,IAAIW,UAAU,wEAAwE,OAAOoF;IACrG;AACF;;;;;AChfA,EAAE;AAEF/4B,cAAc,GAAG,SAAS9I,aAAasiC,IAAI,EAAEC,IAAI,EAAE/rB,OAAO,EAAEgsB,cAAc;IACxE,IAAIltB,MAAMkB,UAAUA,QAAQ,IAAI,CAACgsB,gBAAgBF,MAAMC,QAAQ,KAAK;IAEpE,IAAIjtB,QAAQ,KAAK,GAAG;QAClB,OAAO,CAAC,CAACA;IACX;IAEA,IAAIgtB,SAASC,MAAM;QACjB,OAAO;IACT;IAEA,IAAI,OAAOD,SAAS,YAAY,CAACA,QAAQ,OAAOC,SAAS,YAAY,CAACA,MAAM;QAC1E,OAAO;IACT;IAEA,IAAIE,QAAQrgC,OAAO,IAAI,CAACkgC;IACxB,IAAII,QAAQtgC,OAAO,IAAI,CAACmgC;IAExB,IAAIE,MAAM,MAAM,KAAKC,MAAM,MAAM,EAAE;QACjC,OAAO;IACT;IAEA,IAAIC,kBAAkBvgC,OAAO,SAAS,CAAC,cAAc,CAAC,IAAI,CAACmgC;IAE3D,sCAAsC;IACtC,IAAK,IAAIK,MAAM,GAAGA,MAAMH,MAAM,MAAM,EAAEG,MAAO;QAC3C,IAAIhjC,MAAM6iC,KAAK,CAACG,IAAI;QAEpB,IAAI,CAACD,gBAAgB/iC,MAAM;YACzB,OAAO;QACT;QAEA,IAAIijC,SAASP,IAAI,CAAC1iC,IAAI;QACtB,IAAIkjC,SAASP,IAAI,CAAC3iC,IAAI;QAEtB0V,MAAMkB,UAAUA,QAAQ,IAAI,CAACgsB,gBAAgBK,QAAQC,QAAQljC,OAAO,KAAK;QAEzE,IAAI0V,QAAQ,SAAUA,QAAQ,KAAK,KAAKutB,WAAWC,QAAS;YAC1D,OAAO;QACT;IACF;IAEA,OAAO;AACT;;;;;;AC7CA;;;AAGA,GACa;;;;;;;;AAEb,IAAMC,OAAO3nC,mBAAOA,CAAC,KAAQ;AAC7B,IAAM4nC,kBAAkB5nC,mBAAOA,CAAC,KAAmB;AAEnD,IAAM6nC,iDAAN;gBAAMA;aAAAA;kCAAAA;eAAN,oBAAMA;;oBAAAA;;YACLC,KAAAA;mBAAAA,SAAAA,QAAQ9zB;oBAAEwpB,UAAFxpB,IAAEwpB,SAASuK,WAAX/zB,IAAW+zB,UAAUC,SAArBh0B,IAAqBg0B;gBAC5B,IAAIx7B,OAAO;gBACXA,QAAQ,CAAC,yBAAyB,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;gBAClEA,QAAQ;gBACRA,QAAQ;gBACRA,QAAQ;gBACRA,QAAQ;gBACRA,QAAQ;gBACRA,QAAQu7B,SAAS;gBACjBv7B,QAAQ;gBACRA,QAAQ;gBACRA,QAAQ;gBACRA,QAAQgxB,QAAQ;gBAChBhxB,QAAQ;gBACRA,QAAQ;gBACRA,QAAQ;gBACRA,QAAQ;gBACRA,QAAQ;gBACRA,QAAQ,IAAI,CAAC,gBAAgB,CAAC;oBAC7B,SAAS,CAACmD,GAAGmT,KAAKmlB,MAAMC;wBACvB,IAAI17B,OAAO;wBACXA,QAAQ,CAAC,GAAG,EAAEmD,EAAE,0CAA0C,EAAEA,IAC3D,EAAE,aAAa,EAAEA,EAAE,aAAa,EAAEmT,IAAI,uBAAuB,CAAC;wBAC/DtW,QAAQ07B,UAAU;wBAClB17B,QAAQ;wBACRA,QAAQy7B;wBACRz7B,QAAQ;wBACR,OAAOA;oBACR;oBACA,UAAU,CAACmD,GAAGyU,QAAQ6jB,MAAMC;wBAC3B,IAAI17B,OAAO;wBACXA,QAAQ,CAAC,GAAG,EAAEmD,EAAE,uBAAuB,EAAEyU,OAAO,qCAAqC,EAAEzU,IACtF,EAAE,aAAa,EAAEA,EAAE,cAAc,EAAEyU,OAAO,uBAAuB,CAAC;wBACnE5X,QAAQ07B,UAAU;wBAClB17B,QAAQ;wBACRA,QAAQy7B;wBACRz7B,QAAQ;wBACR,OAAOA;oBACR;oBACA,OAAO,CAACmD,GAAGw4B,KAAKF,MAAMC;wBACrB,IAAI17B,OAAO;wBACX,IAAImD,IAAI,GAAG;4BACVnD,QAAQ,CAAC,GAAG,EAAEmD,EAAE,wBAAwB,CAAC;4BACzCnD,QAAQy7B;4BACRz7B,QAAQ;wBACT;wBACAA,QAAQ27B;wBACR,IAAIx4B,IAAI,GAAGnD,QAAQ;wBACnB,OAAOA;oBACR;oBACAw7B;gBACD;gBACA,OAAOx7B;YACR;;;WAtDKq7B;EAAyCD;AAyD/C,IAAM35B,UAAU,IAAI45B;AAEpB,IAAMO,UAAU,SAAS7iC,OAAO;IAC/B0I,QAAQ,KAAK,CAAC,IAAI,EAAE1I;IACpB,OAAO0I,QAAQ,MAAM,CAAC1I;AACvB;AAEA,SAAS8iC,sBAAsBr0B,KAAW6hB;QAAX7hB,OAAAA,iBAAO,EAAE,GAATA,KAAW6hB,OAAAA,kBAAOt1B,YAAPs1B;IACzC,IAAMiF,OAAO,IAAI6M,KAAK/lC,MAAMhC;IAC5Bk7B,KAAK,WAAW,GAAGuN;IACnBvN,KAAK,OAAO,GAAGsN;IACftN,KAAK,KAAK,GAAGv6B;IACbu6B,KAAK,IAAI,GAAGv6B;IACZ,OAAOu6B;AACR;AAEAuN,sBAAsB,SAAS,GAAG;AAElC36B,cAAc,GAAG26B;;;;;;ACpFjB;;;AAGA,GACa;;;;;;;;AAEb,IAAMV,OAAO3nC,mBAAOA,CAAC,KAAQ;AAC7B,IAAM4nC,kBAAkB5nC,mBAAOA,CAAC,KAAmB;AAEnD,IAAMsoC,6CAAN;gBAAMA;aAAAA;kCAAAA;eAAN,oBAAMA;;oBAAAA;;YACLR,KAAAA;mBAAAA,SAAAA,QAAQ9zB;oBAAEwpB,UAAFxpB,IAAEwpB,SAASwK,SAAXh0B,IAAWg0B;gBAClB,OAAO,IAAI,CAAC,gBAAgB,CAAC;oBAC5B,SAAS,CAACr4B,GAAGmT,KAAKmlB,MAAMC,YAAc1K,QAAQ1a,OAAOolB,UAAU;oBAC/DF;gBACD;YACD;;;WANKM;EAAqCV;AAS3C,IAAM35B,UAAU,IAAIq6B;AAEpB,IAAMF,UAAU,SAAS7iC,OAAO;IAC/B0I,QAAQ,KAAK,CAAC,IAAI,EAAE1I;IACpB,OAAO0I,QAAQ,MAAM,CAAC1I;AACvB;AAEA,SAASgjC,kBAAkBv0B,KAAW6hB;QAAX7hB,OAAAA,iBAAO,EAAE,GAATA,KAAW6hB,OAAAA,kBAAOt1B,YAAPs1B;IACrC,IAAMiF,OAAO,IAAI6M,KAAK/lC,MAAMhC;IAC5Bk7B,KAAK,WAAW,GAAGyN;IACnBzN,KAAK,OAAO,GAAGsN;IACftN,KAAK,KAAK,GAAGv6B;IACbu6B,KAAK,IAAI,GAAGv6B;IACZ,OAAOu6B;AACR;AAEAyN,kBAAkB,SAAS,GAAG;AAE9B76B,cAAc,GAAG66B;;;;;;ACpCjB;;;AAGA,GACa;;;;;;;;AAEb,IAAMZ,OAAO3nC,mBAAOA,CAAC,KAAQ;AAC7B,IAAM4nC,kBAAkB5nC,mBAAOA,CAAC,KAAmB;AAEnD,IAAMwoC,+CAAN;gBAAMA;aAAAA;kCAAAA;eAAN,oBAAMA;;oBAAAA;;YACLV,KAAAA;mBAAAA,SAAAA,QAAQ9zB;oBAAEwpB,UAAFxpB,IAAEwpB,SAASuK,WAAX/zB,IAAW+zB,UAAUU,gBAArBz0B,IAAqBy0B,eAAeT,SAApCh0B,IAAoCg0B;gBAC3C,OAAO,IAAI,CAAC,cAAc,CAAC;oBAC1B,SAAS,CAACr4B,GAAGmT,KAAK4U,MAAMwQ,YAAc1K,QAAQ1a,OAAOolB,UAAU;oBAC/D,UAAU,CAACv4B,GAAGyU,QAAQsT,OACrB,CAAC,GAAG,EAAEtT,OAAO,mBAAmB,EAAE2jB,SACjC3jB,QACC,YAAY,EAAEsT,OAAO,GAAG,CAAC;oBAC5B+Q;oBACAT;gBACD;YACD;;;WAXKQ;EAAuCZ;AAc7C,IAAM35B,UAAU,IAAIu6B;AAEpB,IAAMJ,UAAU,SAAS7iC,OAAO;IAC/B0I,QAAQ,KAAK,CAAC,IAAI,EAAE1I;IACpB,OAAO0I,QAAQ,MAAM,CAAC1I;AACvB;AAEA,SAASuC,oBAAoBkM,KAAW6hB;QAAX7hB,OAAAA,iBAAO,EAAE,GAATA,KAAW6hB,OAAAA,kBAAOt1B,YAAPs1B;IACvC,IAAMiF,OAAO,IAAI6M,KAAK/lC,MAAMhC;IAC5Bk7B,KAAK,WAAW,GAAGhzB;IACnBgzB,KAAK,OAAO,GAAGsN;IACftN,KAAK,KAAK,GAAGv6B;IACbu6B,KAAK,IAAI,GAAGv6B;IACZ,OAAOu6B;AACR;AAEAhzB,oBAAoB,SAAS,GAAG;AAEhC4F,cAAc,GAAG5F;;;;;;ACzCjB;;;AAGA,GACa;;;;;;;;AAEb,IAAM6/B,OAAO3nC,mBAAOA,CAAC,KAAQ;AAC7B,IAAM4nC,kBAAkB5nC,mBAAOA,CAAC,KAAmB;AAEnD,IAAM0oC,2CAAN;gBAAMA;aAAAA;kCAAAA;eAAN,oBAAMA;;oBAAAA;;YACLZ,KAAAA;mBAAAA,SAAAA,QAAQ9zB;oBAAEwpB,UAAFxpB,IAAEwpB,SAASwK,SAAXh0B,IAAWg0B;gBAClB,OAAO,IAAI,CAAC,cAAc,CAAC;oBAC1B,SAAS,CAACr4B,GAAGmT,KAAK4U,MAAMwQ,YAAc1K,QAAQ1a,OAAOolB,UAAU;oBAC/DF;gBACD;YACD;;;WANKU;EAAmCd;AASzC,IAAM35B,UAAU,IAAIy6B;AAEpB,IAAMN,UAAU,SAAS7iC,OAAO;IAC/B0I,QAAQ,KAAK,CAAC,IAAI,EAAE1I;IACpB,OAAO0I,QAAQ,MAAM,CAAC1I;AACvB;AAEA,SAASojC,gBAAgB30B,KAAW6hB;QAAX7hB,OAAAA,iBAAO,EAAE,GAATA,KAAW6hB,OAAAA,kBAAOt1B,YAAPs1B;IACnC,IAAMiF,OAAO,IAAI6M,KAAK/lC,MAAMhC;IAC5Bk7B,KAAK,WAAW,GAAG6N;IACnB7N,KAAK,OAAO,GAAGsN;IACftN,KAAK,KAAK,GAAGv6B;IACbu6B,KAAK,IAAI,GAAGv6B;IACZ,OAAOu6B;AACR;AAEA6N,gBAAgB,SAAS,GAAG;AAE5Bj7B,cAAc,GAAGi7B;;;;;;ACpCjB;;;AAGA,GACa;;;;;;;;AAEb,IAAMhB,OAAO3nC,mBAAOA,CAAC,KAAQ;AAC7B,IAAM4nC,kBAAkB5nC,mBAAOA,CAAC,KAAmB;AAEnD,IAAM4oC,+CAAN;gBAAMA;aAAAA;kCAAAA;eAAN,oBAAMA;;oBAAAA;;YACLd,KAAAA;mBAAAA,SAAAA,QAAQ9zB;oBAAEwpB,UAAFxpB,IAAEwpB,SAASwK,SAAXh0B,IAAWg0B;gBAClB,OAAO,IAAI,CAAC,eAAe,CAAC;oBAC3B,SAAS,CAACr4B,GAAGmT,KAAK4U,MAAMwQ,YAAc1K,QAAQ1a,OAAOolB,UAAU;oBAC/DF;gBACD;YACD;;;WANKY;EAAuChB;AAS7C,IAAM35B,UAAU,IAAI26B;AAEpB,IAAMR,UAAU,SAAS7iC,OAAO;IAC/B0I,QAAQ,KAAK,CAAC,IAAI,EAAE1I;IACpB,OAAO0I,QAAQ,MAAM,CAAC1I;AACvB;AAEA,SAASsjC,oBAAoB70B,KAAW6hB;QAAX7hB,OAAAA,iBAAO,EAAE,GAATA,KAAW6hB,OAAAA,kBAAOt1B,YAAPs1B;IACvC,IAAMiF,OAAO,IAAI6M,KAAK/lC,MAAMhC;IAC5Bk7B,KAAK,WAAW,GAAG+N;IACnB/N,KAAK,OAAO,GAAGsN;IACftN,KAAK,KAAK,GAAGv6B;IACbu6B,KAAK,IAAI,GAAGv6B;IACZ,OAAOu6B;AACR;AAEA+N,oBAAoB,SAAS,GAAG;AAEhCn7B,cAAc,GAAGm7B;;;;;;ACpCjB;;;AAGA,GACa;;;;;;;;AAEb,IAAMlB,OAAO3nC,mBAAOA,CAAC,KAAQ;AAC7B,IAAM4nC,kBAAkB5nC,mBAAOA,CAAC,KAAmB;AAEnD,IAAM8oC,oDAAN;gBAAMA;aAAAA;kCAAAA;eAAN,oBAAMA;;oBAAAA;;YACLhB,KAAAA;mBAAAA,SAAAA,QAAQ9zB;oBAAEwpB,UAAFxpB,IAAEwpB,SAASuK,WAAX/zB,IAAW+zB,UAAUC,SAArBh0B,IAAqBg0B;gBAC5B,OAAO,IAAI,CAAC,cAAc,CAAC;oBAC1B,SAAS,CAACr4B,GAAGmT,KAAK4U,MAAMwQ,YAAc1K,QAAQ1a,OAAOolB,UAAU;oBAC/D,UAAU,CAACv4B,GAAGyU,QAAQsT;wBACrB,IAAIlrB,OAAO;wBACXA,QAAQ,CAAC,GAAG,EAAE4X,OAAO,mBAAmB,CAAC;wBACzC5X,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,GAAG,EAAE4X,OAAO,GAAG,CAAC;wBACzC5X,QAAQ,CAAC,GAAG,CAAC;wBACbA,QAAQkrB;wBACR,OAAOlrB;oBACR;oBACA,QAAQ,IAAMu7B,SAAS,IAAI,CAAC,KAAK,CAAC,EAAE;gBACrC;YACD;;;WAdKe;EAA4ClB;AAiBlD,IAAM35B,UAAU,IAAI66B;AAEpB,IAAMV,UAAU,SAAS7iC,OAAO;IAC/B0I,QAAQ,KAAK,CAAC,IAAI,EAAE1I;IACpB,OAAO0I,QAAQ,MAAM,CAAC1I;AACvB;AAEA,SAASwC,yBAAyBiM,KAAW6hB;QAAX7hB,OAAAA,iBAAO,EAAE,GAATA,KAAW6hB,OAAAA,kBAAOt1B,YAAPs1B;IAC5C,IAAIj0B,KAAK,MAAM,GAAG,GACjB,MAAM,IAAInB,MAAM;IACjB,IAAMq6B,OAAO,IAAI6M,KAAK/lC,MAAMhC;IAC5Bk7B,KAAK,WAAW,GAAG/yB;IACnB+yB,KAAK,OAAO,GAAGsN;IACftN,KAAK,KAAK,GAAGv6B;IACbu6B,KAAK,IAAI,GAAGv6B;IACZ,OAAOu6B;AACR;AAEA/yB,yBAAyB,SAAS,GAAG;AAErC2F,cAAc,GAAG3F;;;;;;AC9CjB;;;AAGA,GACa;;;;;;;AAEb,IAAMghC,OAAO/oC,mBAAOA,CAAC,KAAM;AAE3B,IAAMgpC,mBAAmBD,KAAK,SAAS,CAAC,KAAO,GAC/C;AAEA,IAAME,gBAAgB,SAAS,GAAGrnC,IAAI;IACrC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC;IAC7B,OAAO,IAAI,CAAC,IAAI,OAAT,IAAI,EAAM,uBAAGA;AACrB;AACA,IAAMsnC,sBAAsB,SAAS,GAAGtnC,IAAI;IAC3C,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC;IAClC,OAAO,IAAI,CAAC,SAAS,OAAd,IAAI,EAAW,uBAAGA;AAC1B;AACA,IAAMunC,mBAAmB,SAAS,GAAGvnC,IAAI;IACxC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC;IAChC,OAAO,IAAI,CAAC,OAAO,OAAZ,IAAI,EAAS,uBAAGA;AACxB;AAEA,IAAM+lC,qBAAN;aAAMA,KACO3zB,KAAW6hB;YAAX7hB,OAAAA,iBAAO,EAAE,GAATA,KAAW6hB,OAAAA,kBAAOt1B,YAAPs1B;kCADlB8R;QAEJ,IAAI,CAAC,KAAK,GAAG/lC;QACb,IAAI,CAAC,IAAI,GAAGhC;QACZ,IAAI,CAAC,IAAI,GAAG,EAAE;QACd,IAAI,CAAC,YAAY,GAAG,EAAE;QACtB,IAAI,CAAC,KAAK,GAAGqpC;QACb,IAAI,CAAC,IAAI,GAAGA;QACZ,IAAI,CAAC,UAAU,GAAGC;QAClB,IAAI,CAAC,SAAS,GAAGA;QACjB,IAAI,CAAC,QAAQ,GAAGC;QAChB,IAAI,CAAC,OAAO,GAAGA;QACf,IAAI,CAAC,EAAE,GAAG5oC;QAEV,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO;QAC3B,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG;QACnB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ;QAC7B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU;;oBAjB7BonC;;YAoBLyB,KAAAA;mBAAAA,SAAAA,QAAQ7jC,OAAO;gBACd,MAAM,IAAI9E,MAAM;YACjB;;;YAEA4oC,KAAAA;mBAAAA,SAAAA,YAAYl6B,IAAI;gBACf,OAAO,IAAI,CAAC,OAAO,CAAC;oBACnB,MAAM,IAAI,CAAC,IAAI;oBACf,cAAc,IAAI,CAAC,YAAY;oBAC/B,MAAM,IAAI,CAAC,KAAK;oBAChB,MAAMA;gBACP;YACD;;;YAEAm6B,KAAAA;mBAAAA,SAAAA,KAAKn6B,IAAI,EAAE5J,OAAO,EAAEmD,EAAE;gBACrB,IAAI,OAAOnD,YAAY,UAAU;oBAChCA,UAAU;wBACT,MAAMA,QAAQ,IAAI;oBACnB;gBACD,OAAO,IAAI,OAAOA,YAAY,YAAYA,YAAY,MAAM;oBAC3D,MAAM,IAAI9E,MAAM;gBACjB;gBACA,IAAI,OAAO8E,QAAQ,IAAI,KAAK,YAAYA,QAAQ,IAAI,KAAK,IAAI;oBAC5D,MAAM,IAAI9E,MAAM;gBACjB;gBACA,IAAI,OAAO8E,QAAQ,OAAO,KAAK,aAAa;oBAC3CyjC;gBACD;gBACAzjC,UAAUyB,OAAO,MAAM,CAAC;oBAAEmI;oBAAMzG;gBAAG,GAAGnD;gBACtCA,UAAU,IAAI,CAAC,wBAAwB,CAACA;gBACxC,IAAI,CAAC,OAAO,CAACA;YACd;;;YAEAgkC,KAAAA;mBAAAA,SAAAA,IAAIhkC,OAAO,EAAEmD,EAAE;gBACd,IAAI,CAAC,IAAI,CAAC,QAAQnD,SAASmD;YAC5B;;;YAEA8gC,KAAAA;mBAAAA,SAAAA,SAASjkC,OAAO,EAAEmD,EAAE;gBACnB,IAAI,CAAC,IAAI,CAAC,SAASnD,SAASmD;YAC7B;;;YAEAkB,KAAAA;mBAAAA,SAAAA,WAAWrE,OAAO,EAAEmD,EAAE;gBACrB,IAAI,CAAC,IAAI,CAAC,WAAWnD,SAASmD;YAC/B;;;YAEA+gC,KAAAA;mBAAAA,SAAAA,yBAAyBlkC,OAAO;gBAC/B,KAAK,IAAMmkC,eAAe,IAAI,CAAC,YAAY,CAAE;oBAC5C,IAAIA,YAAY,QAAQ,EAAE;wBACzB,IAAMC,aAAaD,YAAY,QAAQ,CAACnkC;wBACxC,IAAIokC,eAAeppC,WAAW;4BAC7BgF,UAAUokC;wBACX;oBACD;gBACD;gBACA,OAAOpkC;YACR;;;YAEAqkC,KAAAA;mBAAAA,SAAAA,YAAYrkC,OAAO;gBAClB,IAAMskC,eAAeC,CAAAA,MACpB9iC,OAAO,MAAM,CAAC,CAAC,GAAGzB,SAAS,OAAOukC,QAAQ,WAAW;wBAAE,MAAMA;oBAAI,IAAIA;gBAEtE,OAAO;oBACN,MAAM,IAAI,CAAC,IAAI;oBACf,KAAK,CAACA,KAAKphC,KAAO,IAAI,CAAC,GAAG,CAACmhC,aAAaC,MAAMphC;oBAC9C,UAAU,CAACohC,KAAKphC,KAAO,IAAI,CAAC,QAAQ,CAACmhC,aAAaC,MAAMphC;oBACxD,YAAY,CAACohC,KAAKphC,KAAO,IAAI,CAAC,UAAU,CAACmhC,aAAaC,MAAMphC;oBAC5D,WAAWghC,CAAAA,cAAe,IAAI,CAAC,SAAS,CAACA;oBACzC,QAAQ,IAAM,IAAI,CAAC,MAAM;oBACzB,aAAaI,CAAAA,MAAO,IAAI,CAAC,WAAW,CAACD,aAAaC;gBACnD;YACD;;;YAEAl+B,KAAAA;mBAAAA,SAAAA;gBACC,OAAO,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG;YAC3D;;;YAEAm+B,KAAAA;mBAAAA,SAAAA,UAAUL,WAAW;gBACpB,IAAI,CAAC,iBAAiB;gBACtB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC1iC,OAAO,MAAM,CAAC,CAAC,GAAG0iC;gBACzC,IAAIA,YAAY,QAAQ,EAAE;oBACzB,IAAK,IAAI/5B,IAAI,GAAGA,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,EAAEA,IAAK;wBAC1C,IAAI,CAAC,IAAI,CAACA,EAAE,GAAG+5B,YAAY,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC/5B,EAAE;oBACjD;gBACD;YACD;;;YAEAq6B,KAAAA;mBAAAA,SAAAA;gBACC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK;gBACtB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,UAAU;gBAChC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ;YAC7B;;;YAEAC,KAAAA;mBAAAA,SAAAA,QAAQv/B,IAAI;gBACX,IAAI,CAAC,iBAAiB;gBACtB,IAAIw/B;gBACJ,IAAI,OAAOx/B,KAAK,MAAM,KAAK,UAAU;oBACpCw/B,SAAS,IAAInmB,IAAI;wBAACrZ,KAAK,MAAM;qBAAC;gBAC/B,OAAO,IAAIoH,MAAM,OAAO,CAACpH,KAAK,MAAM,GAAG;oBACtCw/B,SAAS,IAAInmB,IAAIrZ,KAAK,MAAM;gBAC7B;gBACA,IAAIy/B,QAAQ;gBACZ,IAAI,OAAOz/B,KAAK,KAAK,KAAK,UAAU;oBACnCy/B,QAAQz/B,KAAK,KAAK;gBACnB;gBACA,IAAIiF,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM;gBACxB,MAAOA,IAAI,EAAG;oBACbA;oBACA,IAAM2I,IAAI,IAAI,CAAC,IAAI,CAAC3I,EAAE;oBACtB,IAAI,CAAC,IAAI,CAACA,IAAI,EAAE,GAAG2I;oBACnB,IAAM8xB,SAAS9xB,EAAE,KAAK,IAAI;oBAC1B,IAAI4xB,QAAQ;wBACX,IAAIA,OAAO,GAAG,CAAC5xB,EAAE,IAAI,GAAG;4BACvB4xB,OAAO,MAAM,CAAC5xB,EAAE,IAAI;4BACpB;wBACD;wBACA,IAAI4xB,OAAO,IAAI,GAAG,GAAG;4BACpB;wBACD;oBACD;oBACA,IAAIE,SAASD,OAAO;wBACnB;oBACD;oBACAx6B;oBACA;gBACD;gBACA,IAAI,CAAC,IAAI,CAACA,EAAE,GAAGjF;YAChB;;;WAjJKi9B;;AAoJN3gC,OAAO,cAAc,CAAC2gC,KAAK,SAAS,EAAE;AAEtCj6B,cAAc,GAAGi6B;;;;;;AC9KjB;;;AAGA,GACa;;;;;;AAEb,IAAMC,gCAAN;aAAMA,gBACOrkC,MAAM;kCADbqkC;QAEJ,IAAI,CAAC,MAAM,GAAGrkC;QACd,IAAI,CAAC,OAAO,GAAGhD;QACf,IAAI,CAAC,KAAK,GAAGA;;oBAJTqnC;;YAOLyC,KAAAA;mBAAAA,SAAAA,OAAO9kC,OAAO;gBACb,IAAI,CAAC,IAAI,CAACA;gBACV,IAAImD;gBACJ,OAAQ,IAAI,CAAC,OAAO,CAAC,IAAI;oBACxB,KAAK;wBACJA,KAAK,IAAI2Y,SACR,IAAI,CAAC,IAAI,IACT,oBACC,IAAI,CAAC,MAAM,KACX,IAAI,CAAC,uBAAuB,CAAC;4BAC5B,SAASyB,CAAAA,MAAO,CAAC,MAAM,EAAEA,IAAI,GAAG,CAAC;4BACjC,UAAUsB,CAAAA,SAAU,CAAC,OAAO,EAAEA,OAAO,GAAG,CAAC;4BACzC,eAAe;4BACf,QAAQ,IAAM;4BACd,mBAAmB;wBACpB;wBAEF;oBACD,KAAK;wBACJ1b,KAAK,IAAI2Y,SACR,IAAI,CAAC,IAAI,CAAC;4BACT,OAAO;wBACR,IACA,oBACC,IAAI,CAAC,MAAM,KACX,IAAI,CAAC,uBAAuB,CAAC;4BAC5B,SAASyB,CAAAA,MAAO,CAAC,UAAU,EAAEA,IAAI,IAAI,CAAC;4BACtC,UAAUsB,CAAAA,SAAU,CAAC,gBAAgB,EAAEA,OAAO,IAAI,CAAC;4BACnD,QAAQ,IAAM;wBACf;wBAEF;oBACD,KAAK;wBACJ,IAAIkmB,kBAAkB;wBACtB,IAAMxC,UAAU,IAAI,CAAC,uBAAuB,CAAC;4BAC5C,SAAShlB,CAAAA;gCACRwnB,kBAAkB;gCAClB,OAAO,CAAC,OAAO,EAAExnB,IAAI,IAAI,CAAC;4BAC3B;4BACA,UAAUsB,CAAAA,SAAU,CAAC,SAAS,EAAEA,OAAO,IAAI,CAAC;4BAC5C,QAAQ,IAAM;wBACf;wBACA,IAAI5X,OAAO;wBACXA,QAAQ;wBACRA,QAAQ,IAAI,CAAC,MAAM;wBACnBA,QAAQ;wBACR,IAAI89B,iBAAiB;4BACpB99B,QAAQ;4BACRA,QAAQ;4BACRA,QAAQ;4BACRA,QACC;4BACDA,QAAQ;4BACRA,QAAQ;4BACRA,QAAQ;wBACT;wBACAA,QAAQs7B;wBACR,IAAIwC,iBAAiB;4BACpB99B,QAAQ;wBACT;wBACAA,QAAQ;wBACR9D,KAAK,IAAI2Y,SAAS,IAAI,CAAC,IAAI,IAAI7U;wBAC/B;gBACF;gBACA,IAAI,CAAC,MAAM;gBACX,OAAO9D;YACR;;;YAEA6hC,KAAAA;mBAAAA,SAAAA,MAAM/X,QAAQ,EAAEjtB,OAAO;gBACtBitB,SAAS,EAAE,GAAGjtB,QAAQ,IAAI,CAAC,GAAG,CAACilC,CAAAA,IAAKA,EAAE,EAAE;YACzC;;;YAEA;;EAEC,GACD7hC,KAAAA;mBAAAA,SAAAA,KAAKpD,OAAO;gBACX,IAAI,CAAC,OAAO,GAAGA;gBACf,IAAI,CAAC,KAAK,GAAGA,QAAQ,IAAI,CAAC,KAAK;YAChC;;;YAEAklC,KAAAA;mBAAAA,SAAAA;gBACC,IAAI,CAAC,OAAO,GAAGlqC;gBACf,IAAI,CAAC,KAAK,GAAGA;YACd;;;YAEAmqC,KAAAA;mBAAAA,SAAAA,wBAAwBnlC,OAAO;gBAC9B,IAAI,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,MAAM,GAAG,GAAG;oBACzC,IAAMi4B,UAAUj4B,QAAQ,OAAO;oBAC/B,IAAMwiC,WAAWxiC,QAAQ,QAAQ;oBACjC,IAAMyiC,SAASziC,QAAQ,MAAM;oBAC7B,IAAIiH,OAAO;oBACX,IAAK,IAAImD,IAAI,GAAGA,IAAI,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,MAAM,EAAEA,IAAK;wBAC1D,IAAM+5B,cAAc,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC/5B,EAAE;wBAChD,IAAI+5B,YAAY,IAAI,EAAE;4BACrBl9B,QAAQ,GAAG,IAAI,CAAC,cAAc,CAACmD,GAAG,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC;gCACnD,QAAQ+5B,YAAY,OAAO,GAAG,aAAanpC;4BAC5C,GAAG,IAAI,CAAC;wBACT;oBACD;oBACAiM,QAAQ,IAAI,CAAC,OAAO,CACnBxF,OAAO,MAAM,CAACzB,SAAS;wBACtB,SACCi4B,WACC1a,CAAAA,CAAAA;4BACA,IAAItW,OAAO;4BACX,IAAK,IAAImD,IAAI,GAAGA,IAAI,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,MAAM,EAAEA,IAAK;gCAC1D,IAAM+5B,cAAc,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC/5B,EAAE;gCAChD,IAAI+5B,YAAY,KAAK,EAAE;oCACtBl9B,QAAQ,GAAG,IAAI,CAAC,cAAc,CAACmD,GAAG,OAAO,EAAEmT,IAAI,IAAI,CAAC;gCACrD;4BACD;4BACAtW,QAAQgxB,QAAQ1a;4BAChB,OAAOtW;wBACR;wBACD,UACCu7B,YACC3jB,CAAAA,CAAAA;4BACA,IAAI5X,OAAO;4BACX,IAAK,IAAImD,IAAI,GAAGA,IAAI,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,MAAM,EAAEA,IAAK;gCAC1D,IAAM+5B,cAAc,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC/5B,EAAE;gCAChD,IAAI+5B,YAAY,MAAM,EAAE;oCACvBl9B,QAAQ,GAAG,IAAI,CAAC,cAAc,CAACmD,GAAG,QAAQ,EAAEyU,OAAO,IAAI,CAAC;gCACzD;4BACD;4BACA5X,QAAQu7B,SAAS3jB;4BACjB,OAAO5X;wBACR;wBACD,QACCw7B,UACC;4BACA,IAAIx7B,OAAO;4BACX,IAAK,IAAImD,IAAI,GAAGA,IAAI,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,MAAM,EAAEA,IAAK;gCAC1D,IAAM+5B,cAAc,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC/5B,EAAE;gCAChD,IAAI+5B,YAAY,IAAI,EAAE;oCACrBl9B,QAAQ,GAAG,IAAI,CAAC,cAAc,CAACmD,GAAG,UAAU,CAAC;gCAC9C;4BACD;4BACAnD,QAAQw7B;4BACR,OAAOx7B;wBACR;oBACF;oBAED,OAAOA;gBACR,OAAO;oBACN,OAAO,IAAI,CAAC,OAAO,CAACjH;gBACrB;YACD;;;YAEAolC,KAAAA;mBAAAA,SAAAA;gBACC,IAAIn+B,OAAO;gBACX,IAAI,IAAI,CAAC,WAAW,IAAI;oBACvBA,QAAQ;gBACT,OAAO;oBACNA,QAAQ;gBACT;gBACAA,QAAQ;gBACR,IAAI,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,MAAM,GAAG,GAAG;oBACzCA,QAAQ;oBACRA,QAAQ;gBACT;gBACA,OAAOA;YACR;;;YAEAo+B,KAAAA;mBAAAA,SAAAA;gBACC,KAAK,IAAMrB,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAE,IAAIA,IAAI,OAAO,EAAE,OAAO;gBAC7D,OAAO;YACR;;;YAEAsB,KAAAA;mBAAAA,SAAAA,QAAQC,QAAQ,EAAE92B;oBAAEwpB,UAAFxpB,IAAEwpB,SAASuK,WAAX/zB,IAAW+zB,UAAUC,SAArBh0B,IAAqBg0B,QAAQ+C,oBAA7B/2B,IAA6B+2B;gBAC9C,IAAIv+B,OAAO;gBACX,IAAIw+B,eAAe;gBACnB,IAAK,IAAIr7B,IAAI,GAAGA,IAAI,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,MAAM,EAAEA,IAAK;oBAC1D,IAAM+5B,cAAc,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC/5B,EAAE;oBAChD,IAAI+5B,YAAY,GAAG,EAAE;wBACpB,IAAI,CAACsB,cAAc;4BAClBx+B,QAAQ,CAAC,QAAQ,EAAEs+B,SAAS,GAAG,EAAE,IAAI,CAAC,MAAM,CAACA,UAAU,GAAG,CAAC;4BAC3DE,eAAe;wBAChB;wBACAx+B,QAAQ,GAAG,IAAI,CAAC,cAAc,CAACmD,GAAG,KAAK,EACtC+5B,YAAY,OAAO,GAAG,eAAe,GACrC,IAAI,EAAEoB,SAAS,IAAI,CAAC;oBACtB;gBACD;gBACAt+B,QAAQ,CAAC,OAAO,EAAEs+B,SAAS,GAAG,EAAE,IAAI,CAAC,QAAQ,CAACA,UAAU,GAAG,CAAC;gBAC5D,IAAMvB,MAAM,IAAI,CAAC,OAAO,CAAC,IAAI,CAACuB,SAAS;gBACvC,OAAQvB,IAAI,IAAI;oBACf,KAAK;wBACJ,IAAI,CAACwB,mBAAmB;4BACvBv+B,QAAQ,CAAC,aAAa,EAAEs+B,SAAS,WAAW,CAAC;4BAC7Ct+B,QAAQ;wBACT;wBACA,IAAIu7B,UAAU;4BACbv7B,QAAQ,CAAC,WAAW,EAAEs+B,SAAS,MAAM,EAAEA,SAAS,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC;gCAC5D,QAAQvB,IAAI,OAAO,GAAG,aAAahpC;4BACpC,GAAG,IAAI,CAAC;wBACT,OAAO;4BACNiM,QAAQ,CAAC,GAAG,EAAEs+B,SAAS,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC;gCACnC,QAAQvB,IAAI,OAAO,GAAG,aAAahpC;4BACpC,GAAG,IAAI,CAAC;wBACT;wBACA,IAAI,CAACwqC,mBAAmB;4BACvBv+B,QAAQ;4BACRA,QAAQ,CAAC,SAAS,EAAEs+B,SAAS,UAAU,CAAC;4BACxCt+B,QAAQgxB,QAAQ;4BAChBhxB,QAAQ;4BACRA,QAAQ,CAAC,aAAa,EAAEs+B,SAAS,KAAK,CAAC;wBACxC;wBACA,IAAI/C,UAAU;4BACbv7B,QAAQu7B,SAAS,CAAC,OAAO,EAAE+C,UAAU;wBACtC;wBACA,IAAI9C,QAAQ;4BACXx7B,QAAQw7B;wBACT;wBACA,IAAI,CAAC+C,mBAAmB;4BACvBv+B,QAAQ;wBACT;wBACA;oBACD,KAAK;wBACJ,IAAIy+B,SAAS;wBACb,IAAIlD,UACHkD,UAAU,CAAC,cAAc,EAAEH,SAAS,SAAS,EAAEA,SAAS,KAAK,CAAC;6BAC1DG,UAAU,CAAC,cAAc,EAAEH,SAAS,KAAK,CAAC;wBAC/CG,UAAU,CAAC,OAAO,EAAEH,SAAS,KAAK,CAAC;wBACnCG,UAAUzN,QAAQ,CAAC,IAAI,EAAEsN,UAAU;wBACnCG,UAAU;wBACV,IAAIlD,UAAU;4BACbkD,UAAUlD,SAAS,CAAC,OAAO,EAAE+C,UAAU;wBACxC;wBACA,IAAI9C,QAAQ;4BACXiD,UAAUjD;wBACX;wBACAiD,UAAU;wBACVA,UAAU;wBACVz+B,QAAQ,CAAC,GAAG,EAAEs+B,SAAS,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC;4BACnC,QAAQvB,IAAI,OAAO,GAAG,aAAahpC;4BACnC,OAAO0qC;wBACR,GAAG,IAAI,CAAC;wBACR;oBACD,KAAK;wBACJz+B,QAAQ,CAAC,cAAc,EAAEs+B,SAAS,WAAW,CAAC;wBAC9Ct+B,QAAQ,CAAC,YAAY,EAAEs+B,SAAS,MAAM,EAAEA,SAAS,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC;4BAC7D,QAAQvB,IAAI,OAAO,GAAG,aAAahpC;wBACpC,GAAG,IAAI,CAAC;wBACRiM,QAAQ,CAAC,aAAa,EAAEs+B,SAAS,aAAa,EAAEA,SAAS,QAAQ,CAAC;wBAClEt+B,QAAQ,CAAC,0FAA0F,EAAEs+B,SAAS,UAAU,CAAC;wBACzHt+B,QAAQ,CAAC,QAAQ,EAAEs+B,SAAS,uBAAuB,EAAEA,SAAS,KAAK,CAAC;wBACpEt+B,QAAQ,CAAC,UAAU,EAAEs+B,SAAS,UAAU,CAAC;wBACzC,IAAI/C,UAAU;4BACbv7B,QAAQu7B,SAAS,CAAC,OAAO,EAAE+C,UAAU;wBACtC;wBACA,IAAI9C,QAAQ;4BACXx7B,QAAQw7B;wBACT;wBACAx7B,QAAQ,CAAC,iBAAiB,EAAEs+B,SAAS,KAAK,CAAC;wBAC3Ct+B,QAAQ,CAAC,aAAa,EAAEs+B,SAAS,YAAY,EAAEA,SAAS,GAAG,CAAC;wBAC5Dt+B,QAAQgxB,QAAQ,CAAC,IAAI,EAAEsN,UAAU;wBACjCt+B,QAAQ;wBACR;gBACF;gBACA,OAAOA;YACR;;;YAEA0+B,KAAAA;mBAAAA,SAAAA,eAAel3B;;oBAeb,IAAMrE,IAAIw7B;oBACV,IAAMC,SACLC,YAAYrD,UACX,OAAK,OAAO,CAAC,IAAI,CAACr4B,EAAE,CAAC,IAAI,KAAK,UAAU27B,kBAAkB,EAAC;oBAC7D,IAAIF,QAAQ;wBACXE,gBAAgB;wBAChB9+B,QAAQ,CAAC,cAAc,EAAEmD,EAAE,MAAM,CAAC;wBAClCnD,QAAQ6+B;wBACR7+B,QAAQ,CAAC,GAAG,CAAC;wBACb6+B,UAAU,IAAM,GAAGE,mBAAmB,YAAY,GAAG,KAAK,EAAE57B,EAAE,KAAK,CAAC;oBACrE;oBACA,IAAMs4B,OAAOoD;oBACb,IAAMnD,YAAYsD,CAAAA;wBACjB,IAAIA,UAAU,OAAO;wBACrB,OAAOxD;oBACR;oBACA,IAAMF,UAAU,MAAK,OAAO,CAACn4B,GAAG;wBAC/B,SAAShP,CAAAA,QAAS68B,QAAQ7tB,GAAGhP,OAAOsnC,MAAMC;wBAC1C,UACCH,YACC3jB,CAAAA,CAAAA;4BACA,OAAO2jB,SAASp4B,GAAGyU,QAAQ6jB,MAAMC;wBAClC;wBACD,QAAQ,CAACH,YAAYE;wBACrB,mBACC8C,qBAAsBU,CAAAA,aAAa,KAAK97B,IAAI87B,UAAS;oBACvD;oBACAJ,UAAU,IAAMvD;gBACjB;oBA1CAtK,UADcxpB,IACdwpB,SACAuK,WAFc/zB,IAEd+zB,UACAU,gBAHcz0B,IAGdy0B,eACAT,SAJch0B,IAIdg0B,QACA0D,cALc13B,IAKd03B,aACAX,oBANc/2B,IAMd+2B;gBAEA,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,KAAK,GAAG,OAAO/C;gBAC3C,IAAMyD,aAAa,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAACjB,CAAAA,IAAKA,EAAE,IAAI,KAAK;gBAC/D,IAAMe,mBAAmB9C,iBAAiBiD;gBAC1C,IAAIl/B,OAAO;gBACX,IAAI6+B,UAAUrD;gBACd,IAAIsD,gBAAgB;gBACpB,IAAK,IAAIH,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,GAAG,GAAGA,KAAK,GAAGA;gBA8BnD3+B,QAAQ6+B;gBACR,OAAO7+B;YACR;;;YAEAm/B,KAAAA;mBAAAA,SAAAA,gBAAgB33B;oBAAEwpB,UAAFxpB,IAAEwpB,SAASwK,SAAXh0B,IAAWg0B,QAAQ+C,oBAAnB/2B,IAAmB+2B;gBAClC,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,KAAK,GAAG,OAAO/C;gBAC3C,IAAM4D,WAAW,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAACpB,CAAAA,IAAKA,EAAE,IAAI,KAAK;gBACzD,IAAIh+B,OAAO;gBACX,IAAI,CAACo/B,UAAU;oBACdp/B,QAAQ;oBACRA,QAAQ;gBACT;gBACAA,QAAQ;gBACRA,QAAQ;gBACRA,QAAQ;gBACR,IAAK,IAAImD,IAAI,GAAGA,IAAI,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,MAAM,EAAEA,IAAK;oBAC1D,IAAM+5B,cAAc,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC/5B,EAAE;oBAChD,IAAI+5B,YAAY,IAAI,EAAE;wBACrBl9B,QAAQ,GAAG,IAAI,CAAC,cAAc,CAACmD,GAAG,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC;4BACnD,QAAQ+5B,YAAY,OAAO,GAAG,aAAanpC;wBAC5C,GAAG,IAAI,CAAC;oBACT;gBACD;gBACAiM,QAAQ,IAAI,CAAC,cAAc,CAAC;oBAC3BgxB;oBACA,UAAU,CAAC7tB,GAAGyU,QAAQsT,MAAMwQ;wBAC3B,IAAI17B,OAAO;wBACXA,QAAQ,CAAC,GAAG,EAAE4X,OAAO,mBAAmB,CAAC;wBACzC5X,QAAQ;wBACR,IAAI,CAACo/B,UAAUp/B,QAAQ;wBACvBA,QAAQ07B,UAAU;wBAClB17B,QAAQ,CAAC,UAAU,CAAC;wBACpBA,QAAQkrB;wBACRlrB,QAAQ,CAAC,GAAG,CAAC;wBACb,OAAOA;oBACR;oBACA,QACCw7B,UACC;wBACA,IAAIx7B,OAAO;wBACXA,QAAQ;wBACRA,QAAQw7B;wBACRx7B,QAAQ;wBACR,OAAOA;oBACR;oBACD,mBAAmBu+B,qBAAqBa;gBACzC;gBACAp/B,QAAQ;gBACR,IAAI,CAACo/B,UAAU;oBACdp/B,QAAQ;oBACRA,QAAQ;oBACRA,QAAQ;gBACT;gBACA,OAAOA;YACR;;;YAEAq/B,KAAAA;mBAAAA,SAAAA,iBAAiB73B;;oBAwBf,IAAMi0B,OAAO;wBACZ,IAAID,QAAQ,OAAO;6BACd,OAAO;oBACb;oBACA,IAAME,YAAYsD,CAAAA;wBACjB,IAAIA,YAAY,CAACxD,QAAQ,OAAO;6BAC3B,OAAO;oBACb;oBACAx7B,QAAQ;oBACRA,QAAQs/B,MACPn8B,GACA,IACC,MAAK,OAAO,CAACA,GAAG;4BACf,SAAShP,CAAAA;gCACR,IAAI6L,OAAO;gCACXA,QAAQ;gCACRA,QAAQgxB,QAAQ7tB,GAAGhP,OAAOsnC,MAAMC;gCAChC17B,QAAQ;gCACR,OAAOA;4BACR;4BACA,UACCu7B,YACC3jB,CAAAA,CAAAA;gCACA,IAAI5X,OAAO;gCACXA,QAAQ;gCACRA,QAAQu7B,SAASp4B,GAAGyU,QAAQ6jB,MAAMC;gCAClC17B,QAAQ;gCACR,OAAOA;4BACR;4BACD,QACC,CAACu7B,YACA;gCACA,OAAOE;4BACR;4BACD8C;wBACD,IACD9C,MACAC;gBAEF;oBA9DA1K,UADgBxpB,IAChBwpB,SACAuK,WAFgB/zB,IAEhB+zB,UACAC,SAHgBh0B,IAGhBg0B,QACA+C,oBAJgB/2B,IAIhB+2B,gCAJgB/2B,IAKhB83B,OAAAA,gCAAQ,CAACn8B,GAAGw4B,MAAQA;gBAEpB,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,IAAI,GAAG;oBAClC,OAAO,IAAI,CAAC,cAAc,CAAC;wBAC1B3K;wBACAuK;wBACAC;wBACA+C;oBACD;gBACD;gBACA,IAAIv+B,OAAO;gBACXA,QAAQ;gBACRA,QAAQ,CAAC,eAAe,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC;gBACvD,IAAIw7B,QAAQ;oBACXx7B,QAAQ;oBACRA,QAAQw7B;oBACRx7B,QAAQ;gBACT;gBACA,IAAK,IAAImD,IAAI,GAAGA,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,EAAEA;gBAyC9CnD,QAAQ;gBACR,OAAOA;YACR;;;YAEA5K,KAAAA;mBAAAA,SAAAA,KAAKoS;2BAAAA,iBAAoB,CAAC,IAArBA,KAAEk2B,cAAAA,QAAQ6B,aAAAA;gBACd,IAAIC,UAAU,IAAI,CAAC,KAAK;gBACxB,IAAI9B,QAAQ8B,UAAU;oBAAC9B;iBAAO,CAAC,MAAM,CAAC8B;gBACtC,IAAID,OAAOC,UAAUA,QAAQ,MAAM,CAACD;gBACpC,IAAIC,QAAQ,MAAM,KAAK,GAAG;oBACzB,OAAO;gBACR,OAAO;oBACN,OAAOA,QAAQ,IAAI,CAAC;gBACrB;YACD;;;YAEAC,KAAAA;mBAAAA,SAAAA,SAASzE,GAAG;gBACX,OAAO,CAAC,GAAG,EAAEA,IAAI,CAAC,CAAC;YACpB;;;YAEA0E,KAAAA;mBAAAA,SAAAA,OAAO1E,GAAG;gBACT,OAAO,CAAC,MAAM,EAAEA,IAAI,CAAC,CAAC;YACvB;;;YAEA2E,KAAAA;mBAAAA,SAAAA,eAAe3E,GAAG;gBACjB,OAAO,CAAC,cAAc,EAAEA,IAAI,CAAC,CAAC;YAC/B;;;WA1cKI;;AA6cNl6B,cAAc,GAAGk6B;;;;;;ACndjB;;;AAGA,GACa;;;;;;AAEb,IAAMmB,OAAO/oC,mBAAOA,CAAC,KAAM;AAE3B,IAAMosC,iBAAiB,CAAC5nC,KAAKs2B,OAASA;AAEtC,IAAMuR,wBAAN;aAAMA,QACOp+B,OAAO,EAAE+F;YAAAA,OAAAA,iBAAOzT,YAAPyT;kCADhBq4B;QAEJ,IAAI,CAAC,IAAI,GAAG,IAAIl5B;QAChB,IAAI,CAAC,IAAI,GAAGvT;QACZ,IAAI,CAAC,QAAQ,GAAGqO;QAChB,IAAI,CAAC,aAAa,GAAG,EAAE;;oBALnBo+B;;YAQLn+B,KAAAA;mBAAAA,SAAAA,IAAI1J,GAAG;gBACN,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAACA;YACtB;;;YAEA8nC,KAAAA;mBAAAA,SAAAA,KAAI9nC,GAAG;gBACN,IAAMs2B,OAAO,IAAI,CAAC,GAAG,CAACt2B;gBACtB,IAAIs2B,SAASv6B,WAAW;oBACvB,OAAOu6B;gBACR;gBACA,IAAIyR,UAAU,IAAI,CAAC,QAAQ,CAAC/nC;gBAC5B,IAAMgoC,eAAe,IAAI,CAAC,aAAa;gBACvC,IAAK,IAAI78B,IAAI,GAAGA,IAAI68B,aAAa,MAAM,EAAE78B,IAAK;oBAC7C48B,UAAUC,YAAY,CAAC78B,EAAE,CAAC,OAAO,CAACnL,KAAK+nC;gBACxC;gBACA,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC/nC,KAAK+nC;gBACnB,OAAOA;YACR;;;YAEAxC,KAAAA;mBAAAA,SAAAA,UAAUL,WAAW;gBACpB,IAAI,CAAC,aAAa,CAAC,IAAI,CACtB1iC,OAAO,MAAM,CACZ;oBACC,SAASolC;gBACV,GACA1C;YAGH;;;WAnCK2C;;AAsCNA,QAAQ,SAAS,CAAC,GAAG,GAAGtD,KAAK,SAAS,CAAC,SAASvkC,GAAG,EAAEe,OAAO,EAAEmD,EAAE;IAC/D,OAAO,IAAI,CAAC,GAAG,CAAClE,KAAK,GAAG,CAACe,SAASmD;AACnC,GAAG;AAEH2jC,QAAQ,SAAS,CAAC,QAAQ,GAAGtD,KAAK,SAAS,CAAC,SAASvkC,GAAG,EAAEe,OAAO,EAAEmD,EAAE;IACpE,OAAO,IAAI,CAAC,GAAG,CAAClE,KAAK,QAAQ,CAACe,SAASmD;AACxC,GAAG;AAEH2jC,QAAQ,SAAS,CAAC,UAAU,GAAGtD,KAAK,SAAS,CAAC,SAASvkC,GAAG,EAAEe,OAAO,EAAEmD,EAAE;IACtE,OAAO,IAAI,CAAC,GAAG,CAAClE,KAAK,UAAU,CAACe,SAASmD;AAC1C,GAAG;AAEHgF,cAAc,GAAG2+B;;;;;;AC5DjB;;;AAGA,GACa;;;;;;AAEb,IAAM1E,OAAO3nC,mBAAOA,CAAC,KAAQ;AAE7B,IAAMysC,0BAAN;aAAMA,UACO9iC,KAAK,EAAEqK;YAAAA,OAAAA,iBAAOzT,YAAPyT;kCADdy4B;QAEJ,IAAI,CAAC,KAAK,GAAG9iC;QACb,IAAI,CAAC,IAAI,GAAG/J;;oBAHR6sC;;YAMLlD,KAAAA;mBAAAA,SAAAA,IAAIhkC,OAAO,EAAEmD,EAAE;gBACd,KAAK,IAAMoyB,QAAQ,IAAI,CAAC,KAAK,CAAE;oBAC9BA,KAAK,GAAG,CAACv1B,SAASmD;gBACnB;YACD;;;YAEA8gC,KAAAA;mBAAAA,SAAAA,SAASjkC,OAAO,EAAEmD,EAAE;gBACnB,KAAK,IAAMoyB,QAAQ,IAAI,CAAC,KAAK,CAAE;oBAC9BA,KAAK,QAAQ,CAACv1B,SAASmD;gBACxB;YACD;;;YAEAkB,KAAAA;mBAAAA,SAAAA,WAAWrE,OAAO,EAAEmD,EAAE;gBACrB,KAAK,IAAMoyB,QAAQ,IAAI,CAAC,KAAK,CAAE;oBAC9BA,KAAK,UAAU,CAACv1B,SAASmD;gBAC1B;YACD;;;YAEAkD,KAAAA;mBAAAA,SAAAA;gBACC,KAAK,IAAMkvB,QAAQ,IAAI,CAAC,KAAK,CAAE;oBAC9B,IAAIA,KAAK,MAAM,IAAI,OAAO;gBAC3B;gBACA,OAAO;YACR;;;YAEAiP,KAAAA;mBAAAA,SAAAA,UAAUL,WAAW;gBACpB,KAAK,IAAM5O,QAAQ,IAAI,CAAC,KAAK,CAAE;oBAC9BA,KAAK,SAAS,CAAC4O;gBAChB;YACD;;;YAEAE,KAAAA;mBAAAA,SAAAA,YAAYrkC,OAAO;gBAClB,OAAO,IAtCHknC,UAuCH,IAAI,CAAC,KAAK,CAAC,GAAG,CAACC,CAAAA,IAAKA,EAAE,WAAW,CAACnnC,WAClC,IAAI,CAAC,IAAI;YAEX;;;WA1CKknC;;AA6CN/+B,cAAc,GAAG++B;;;;;;ACrDjB;;;AAGA,GACa;;;;;;;;AAEb,IAAM9E,OAAO3nC,mBAAOA,CAAC,KAAQ;AAC7B,IAAM4nC,kBAAkB5nC,mBAAOA,CAAC,KAAmB;AAEnD,IAAM2sC,wCAAN;gBAAMA;aAAAA;kCAAAA;eAAN,oBAAMA;;oBAAAA;;YACL7E,KAAAA;mBAAAA,SAAAA,QAAQ9zB;oBAAEwpB,UAAFxpB,IAAEwpB,SAASuK,WAAX/zB,IAAW+zB,UAAUU,gBAArBz0B,IAAqBy0B,eAAeT,SAApCh0B,IAAoCg0B,QAAQ+C,oBAA5C/2B,IAA4C+2B;gBACnD,OAAO,IAAI,CAAC,cAAc,CAAC;oBAC1B,SAAS,CAACp7B,GAAGmT,MAAQ0a,QAAQ1a;oBAC7B,UAAU,CAACnT,GAAGyU,QAAQsT,OACrB,CAAC,GAAG,EAAEtT,OAAO,mBAAmB,EAAE2jB,SACjC3jB,QACC,aAAa,EAAEsT,OAAO,GAAG,CAAC;oBAC7B+Q;oBACAT;oBACA+C;gBACD;YACD;;;WAZK4B;EAAgC/E;AAetC,IAAM35B,UAAU,IAAI0+B;AAEpB,IAAMC,YAAY;IACjB,MAAM,IAAInsC,MAAM;AACjB;AAEA,IAAMosC,cAAc;IACnB,MAAM,IAAIpsC,MAAM;AACjB;AAEA,IAAM2nC,UAAU,SAAS7iC,OAAO;IAC/B0I,QAAQ,KAAK,CAAC,IAAI,EAAE1I;IACpB,OAAO0I,QAAQ,MAAM,CAAC1I;AACvB;AAEA,SAASunC,aAAa94B,KAAW6hB;QAAX7hB,OAAAA,iBAAO,EAAE,GAATA,KAAW6hB,OAAAA,kBAAOt1B,YAAPs1B;IAChC,IAAMiF,OAAO,IAAI6M,KAAK/lC,MAAMhC;IAC5Bk7B,KAAK,WAAW,GAAGgS;IACnBhS,KAAK,QAAQ,GAAG8R;IAChB9R,KAAK,UAAU,GAAG+R;IAClB/R,KAAK,OAAO,GAAGsN;IACf,OAAOtN;AACR;AAEAgS,aAAa,SAAS,GAAG;AAEzBp/B,cAAc,GAAGo/B;;;;;;AClDjB;;;AAGA,GACa;;;;;;;;AAEb,IAAMnF,OAAO3nC,mBAAOA,CAAC,KAAQ;AAC7B,IAAM4nC,kBAAkB5nC,mBAAOA,CAAC,KAAmB;AAEnD,IAAM+sC,oCAAN;gBAAMA;aAAAA;kCAAAA;eAAN,oBAAMA;;oBAAAA;;YACLjF,KAAAA;mBAAAA,SAAAA,QAAQ9zB;oBAAEwpB,UAAFxpB,IAAEwpB,SAASwK,SAAXh0B,IAAWg0B,QAAQ+C,oBAAnB/2B,IAAmB+2B;gBAC1B,OAAO,IAAI,CAAC,cAAc,CAAC;oBAC1B,SAAS,CAACp7B,GAAGmT,MAAQ0a,QAAQ1a;oBAC7BklB;oBACA+C;gBACD;YACD;;;WAPKgC;EAA4BnF;AAUlC,IAAM35B,UAAU,IAAI8+B;AAEpB,IAAMH,YAAY;IACjB,MAAM,IAAInsC,MAAM;AACjB;AAEA,IAAMosC,cAAc;IACnB,MAAM,IAAIpsC,MAAM;AACjB;AAEA,IAAM2nC,UAAU,SAAS7iC,OAAO;IAC/B0I,QAAQ,KAAK,CAAC,IAAI,EAAE1I;IACpB,OAAO0I,QAAQ,MAAM,CAAC1I;AACvB;AAEA,SAASue,SAAS9P,KAAW6hB;QAAX7hB,OAAAA,iBAAO,EAAE,GAATA,KAAW6hB,OAAAA,kBAAOt1B,YAAPs1B;IAC5B,IAAMiF,OAAO,IAAI6M,KAAK/lC,MAAMhC;IAC5Bk7B,KAAK,WAAW,GAAGhX;IACnBgX,KAAK,QAAQ,GAAG8R;IAChB9R,KAAK,UAAU,GAAG+R;IAClB/R,KAAK,OAAO,GAAGsN;IACf,OAAOtN;AACR;AAEAhX,SAAS,SAAS,GAAG;AAErBpW,cAAc,GAAGoW;;;;;;AC7CjB;;;AAGA,GACa;;;;;;;;AAEb,IAAM6jB,OAAO3nC,mBAAOA,CAAC,KAAQ;AAC7B,IAAM4nC,kBAAkB5nC,mBAAOA,CAAC,KAAmB;AAEnD,IAAMgtC,wCAAN;gBAAMA;aAAAA;kCAAAA;eAAN,oBAAMA;;oBAAAA;;YACLlF,KAAAA;mBAAAA,SAAAA,QAAQ9zB;oBAAEwpB,UAAFxpB,IAAEwpB,SAASwK,SAAXh0B,IAAWg0B,QAAQ+C,oBAAnB/2B,IAAmB+2B;gBAC1B,OAAO,IAAI,CAAC,eAAe,CAAC;oBAC3B,SAAS,CAACp7B,GAAGmT,MAAQ0a,QAAQ1a;oBAC7BklB;oBACA+C;gBACD;YACD;;;WAPKiC;EAAgCpF;AAUtC,IAAM35B,UAAU,IAAI++B;AAEpB,IAAMJ,YAAY;IACjB,MAAM,IAAInsC,MAAM;AACjB;AAEA,IAAMosC,cAAc;IACnB,MAAM,IAAIpsC,MAAM;AACjB;AAEA,IAAM2nC,UAAU,SAAS7iC,OAAO;IAC/B0I,QAAQ,KAAK,CAAC,IAAI,EAAE1I;IACpB,OAAO0I,QAAQ,MAAM,CAAC1I;AACvB;AAEA,SAAS0nC,aAAaj5B,KAAW6hB;QAAX7hB,OAAAA,iBAAO,EAAE,GAATA,KAAW6hB,OAAAA,kBAAOt1B,YAAPs1B;IAChC,IAAMiF,OAAO,IAAI6M,KAAK/lC,MAAMhC;IAC5Bk7B,KAAK,WAAW,GAAGmS;IACnBnS,KAAK,QAAQ,GAAG8R;IAChB9R,KAAK,UAAU,GAAG+R;IAClB/R,KAAK,OAAO,GAAGsN;IACf,OAAOtN;AACR;AAEAmS,aAAa,SAAS,GAAG;AAEzBv/B,cAAc,GAAGu/B;;;;;;AC7CjB;;;AAGA,GACa;;;;;;;;AAEb,IAAMtF,OAAO3nC,mBAAOA,CAAC,KAAQ;AAC7B,IAAM4nC,kBAAkB5nC,mBAAOA,CAAC,KAAmB;AAEnD,IAAMktC,6CAAN;gBAAMA;aAAAA;kCAAAA;eAAN,oBAAMA;;oBAAAA;;YACLpF,KAAAA;mBAAAA,SAAAA,QAAQ9zB;oBAAEwpB,UAAFxpB,IAAEwpB,SAASuK,WAAX/zB,IAAW+zB,UAAUU,gBAArBz0B,IAAqBy0B,eAAesC,oBAApC/2B,IAAoC+2B;gBAC3C,OAAO,IAAI,CAAC,cAAc,CAAC;oBAC1B,SAAS,CAACp7B,GAAGmT,MAAQ0a,QAAQ1a;oBAC7B,UAAU,CAACnT,GAAGyU,QAAQsT;wBACrB,IAAIlrB,OAAO;wBACXA,QAAQ,CAAC,GAAG,EAAE4X,OAAO,mBAAmB,CAAC;wBACzC5X,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,GAAG,EAAE4X,OAAO,GAAG,CAAC;wBACzC5X,QAAQ,CAAC,GAAG,CAAC;wBACbA,QAAQkrB;wBACR,OAAOlrB;oBACR;oBACA,QAAQ,IAAMu7B,SAAS,IAAI,CAAC,KAAK,CAAC,EAAE;oBACpC,aAAaU;oBACbsC;gBACD;YACD;;;WAhBKmC;EAAqCtF;AAmB3C,IAAM35B,UAAU,IAAIi/B;AAEpB,IAAMN,YAAY;IACjB,MAAM,IAAInsC,MAAM;AACjB;AAEA,IAAMosC,cAAc;IACnB,MAAM,IAAIpsC,MAAM;AACjB;AAEA,IAAM2nC,UAAU,SAAS7iC,OAAO;IAC/B0I,QAAQ,KAAK,CAAC,IAAI,EAAE1I;IACpB,OAAO0I,QAAQ,MAAM,CAAC1I;AACvB;AAEA,SAASsf,kBAAkB7Q,KAAW6hB;QAAX7hB,OAAAA,iBAAO,EAAE,GAATA,KAAW6hB,OAAAA,kBAAOt1B,YAAPs1B;IACrC,IAAIj0B,KAAK,MAAM,GAAG,GACjB,MAAM,IAAInB,MAAM;IACjB,IAAMq6B,OAAO,IAAI6M,KAAK/lC,MAAMhC;IAC5Bk7B,KAAK,WAAW,GAAGjW;IACnBiW,KAAK,QAAQ,GAAG8R;IAChB9R,KAAK,UAAU,GAAG+R;IAClB/R,KAAK,OAAO,GAAGsN;IACf,OAAOtN;AACR;AAEAjW,kBAAkB,SAAS,GAAG;AAE9BnX,cAAc,GAAGmX;;;;;;ACxDjB;;;AAGA,GACa;AAEb1W,kBAAkB,GAAG;AACrBA,6CAAwC;AACxCA,iDAAgD;AAChDA,qDAA0D;AAC1DA,iDAAgD;AAChDA,oDAA0D;AAC1DA,yDAAkE;AAClEA,oDAAsD;AACtDA,wDAA8D;AAC9DA,wDAA8D;AAC9DA,6DAAwE;AACxEA,4CAAsC;AACtCA,4CAA0C;;;;;;AClB1C;;;AAGA,GACa;AAEbA,iBAAiB,GAAG,CAACzF,IAAI6G;IACxB,IAAI0U,OAAO;IACX,OAAO;QACN,IAAIA,MAAM;YACTvjB,QAAQ,IAAI,CAAC,yBAAyB6O;YACtC0U,OAAO;QACR;QACA,OAAOvb,GAAG,KAAK,CAAC,IAAI,EAAEkH;IACvB;AACD;;;;;;;;;;;;gFCfkD,KAA0H;mFAAoD,KAAoG;mFAAoD,KAAoG;+EAAoD,IAAgG;AAAC,IAAMu9B,wCAAwC;IAACC,IAAAA,uBAAsC;IAAIC,IAAAA,uBAAsC;IAAIC,IAAAA,mBAAsC;CAAG;AAAC,IAAMC,qCAAqC,CAAC;AAAE,IAAMC,uCAAuC;AAAM,IAAMC,uCAAuC;AAAe,IAAI7kC,CAAAA,mBAAmBA,CAAC,qBAAqB,IAAEA,mBAAmBA,CAAC,qBAAoB,KAAIA,mBAAmBA,CAAC,UAAU,EAAC;IAAC,IAAI8kC,wCAAuCC,yCAAwCC,2CAA0CC,yCAAwCC,0CAAyCC,2CAA0CC;IAAyC,IAAMC,WAAS,CAACpM,KAAIr9B,KAAIuB;QAAS,IAAG,CAAC87B,KAAI;QAAO,IAAGA,GAAG,CAACr9B,IAAI,EAACq9B,GAAG,CAACr9B,IAAI,GAACuB;IAAK;IAAE,IAAMmoC,QAAM,CAACrM,KAAIr9B,KAAIkE;QAAM,IAAM3C,QAAM2C;QAAK,IAAGoJ,MAAM,OAAO,CAAC/L,QAAO;gBAAiFooC;YAAhF,IAAIC,MAAKC;YAAK,IAAI75B;YAAGA,CAAAA,IAAG45B,CAAAA,OAAKvM,GAAE,CAAE,CAACwM,OAAK7pC,IAAG,MAAK,QAAMgQ,MAAI,KAAK,IAAEA,IAAE45B,IAAI,CAACC,KAAK,GAAC,EAAE;YAACF,CAAAA,WAAAA,GAAG,CAAC3pC,IAAI,EAAC,IAAI,OAAb2pC,UAAc,uBAAGpoC;QAAM,OAAM,IAAG,OAAOA,UAAQ,YAAUA,UAAQ,MAAK;YAAC,IAAIuoC,OAAMC;YAAM,IAAIC;YAAIA,CAAAA,KAAIF,CAAAA,QAAMzM,GAAE,CAAE,CAAC0M,QAAM/pC,IAAG,MAAK,QAAMgqC,OAAK,KAAK,IAAEA,KAAGF,KAAK,CAACC,MAAM,GAAC,CAAC;YAAEvnC,OAAO,MAAM,CAAC66B,GAAG,CAACr9B,IAAI,EAACuB;QAAM;IAAC;IAAE,IAAM0oC,QAAM,CAAC5M,KAAIr9B,KAAIkqC;QAAW,IAAIN,MAAKC;QAAK,IAAI75B;QAAGA,CAAAA,IAAG45B,CAAAA,OAAKvM,GAAE,CAAE,CAACwM,OAAK7pC,IAAG,MAAK,QAAMgQ,MAAI,KAAK,IAAEA,IAAE45B,IAAI,CAACC,KAAK,GAACK;IAAS;IAAE,IAAIC;IAAoD,IAAMC,6BAA4BD,CAAAA,sDAAqDjB,CAAAA,yCAAuC9kC,mBAAmBA,CAAC,kBAAiB,MAAK,QAAM8kC,2CAAyC,KAAK,IAAE,KAAK,IAAEA,uCAAuC,YAAW,MAAK,QAAMiB,wDAAsD,KAAK,IAAEA,sDAAoD,CAAC;IAAE,IAAIE;IAAmE,IAAMC,4CAA2CD,CAAAA,qEAAoElB,CAAAA,0CAAwC/kC,mBAAmBA,CAAC,kBAAiB,MAAK,QAAM+kC,4CAA0C,KAAK,IAAE,KAAK,IAAEA,wCAAwC,2BAA0B,MAAK,QAAMkB,uEAAqE,KAAK,IAAEA,qEAAmE,CAAC;IAAE,IAAIE;IAAoE,IAAMC,0CAAyCD,CAAAA,sEAAqEnB,CAAAA,4CAA0ChlC,mBAAmBA,CAAC,qBAAoB,MAAK,QAAMglC,8CAA4C,KAAK,IAAE,KAAK,IAAEA,0CAA0C,yBAAwB,MAAK,QAAMmB,wEAAsE,KAAK,IAAEA,sEAAoE,CAAC;IAAE,IAAIE;IAAqD,IAAMC,8BAA6BD,CAAAA,uDAAsDpB,CAAAA,0CAAwCjlC,mBAAmBA,CAAC,mBAAkB,MAAK,QAAMilC,4CAA0C,KAAK,IAAE,KAAK,IAAEA,wCAAwC,YAAW,MAAK,QAAMoB,yDAAuD,KAAK,IAAEA,uDAAqD,CAAC;IAAE,IAAIE;IAAqE,IAAMC,4CAA2CD,CAAAA,uEAAsErB,CAAAA,2CAAyCllC,mBAAmBA,CAAC,mBAAkB,MAAK,QAAMklC,6CAA2C,KAAK,IAAE,KAAK,IAAEA,yCAAyC,4BAA2B,MAAK,QAAMqB,yEAAuE,KAAK,IAAEA,uEAAqE,CAAC;IAAE,IAAME,kCAAgC,CAAC;IAAE,IAAMC,gCAA8B,EAAE;IAAC,IAAMC,8BAA4B,CAAC;IAAE,IAAMC,sBAAqBzB,CAAAA,4CAA0CnlC,mBAAmBA,CAAC,qBAAoB,MAAK,QAAMmlC,8CAA4C,KAAK,IAAE,KAAK,IAAEA,0CAA0C,UAAU;IAAC,IAAI,IAAMvpC,OAAOirC,oBAAqC,CAAC;QAAC7mC,mBAAmBA,CAAC,UAAU,CAACpE,IAAI,GAACirC,oBAAqC,CAACjrC,IAAI;IAAA;IAACiqC,MAAM7lC,mBAAmBA,CAAC,UAAU,EAAC,yCAAwC;QAAK,IAAM8mC,wCAAsC,CAAC;QAAE,KAAI,WAAqB1oC,OAAO,OAAO,CAACooC,2CAA2C;YAA/E,uCAAIjQ,oBAAShb;YAAmEurB,qCAAqC,CAACvQ,SAAS,GAAC;gBAAC,QAAOhb,KAAK,QAAQ;gBAAC,WAAU;oBAAC,aAAY;wBAAC,mBAAkB;wBAAM,iBAAgBA,KAAK,eAAe;wBAAC,eAAcA,KAAK,aAAa;wBAAC,WAAUA,KAAK,SAAS;wBAAC,OAAMA,KAAK,KAAK;oBAAA;oBAAE,OAAM;wBAACA,KAAK,UAAU;qBAAC;gBAAA;gBAAE,UAASA,KAAK,QAAQ;YAAA;QAAC;QAAC,OAAOurB;IAAqC;IAAGjB,MAAM7lC,mBAAmBA,CAAC,UAAU,EAAC,eAAc,IAAK,EAAC;IAAI6lC,MAAM7lC,mBAAmBA,CAAC,UAAU,CAAC,WAAW,EAAC,QAAO,IAAI4kC;IAAsCiB,MAAM7lC,mBAAmBA,CAAC,UAAU,CAAC,WAAW,EAAC,iBAAgB,IAAI6kC;IAAsCgB,MAAM7lC,mBAAmBA,CAAC,UAAU,CAAC,WAAW,EAAC,UAAS;QAAK,IAAMvI,SAAO,CAAC;QAAE,KAAI,WAAoB2G,OAAO,OAAO,CAACgoC,yCAAyC;YAA5E,uCAAIrhC,iBAAMgiC;YAAmE,KAAI,IAAIxF,SAASwF,OAAO;gBAAC,IAAG,OAAOxF,UAAQ,YAAUA,UAAQ,MAAK;oBAAC,IAAMvqC,OAAoEuqC,MAApEvqC,MAAKwE,UAA+D+lC,MAA/D/lC,SAAQ6J,UAAuDk8B,MAAvDl8B,SAAQ+e,QAA+Cmd,MAA/Cnd,OAAM4iB,YAAyCzF,MAAzCyF,WAAU5wB,kBAA+BmrB,MAA/BnrB,iBAAgB6wB,gBAAe1F,MAAf0F;oBAAqB,IAAM1yB,cAAY,CAAC;oBAAE,IAAM2yB,eAAa,SAAS1+B,GAAG;wBAAE,OAAO,OAAOA,QAAM;oBAAW;oBAAE,IAAG0+B,aAAaF,YAAW;wBAACzyB,YAAY,SAAS,GAACyyB;oBAAS;oBAAC,IAAGE,aAAa9wB,kBAAiB;wBAAC7B,YAAY,eAAe,GAAC6B;oBAAe;oBAAC,IAAG8wB,aAAa9iB,QAAO;wBAAC7P,YAAY,KAAK,GAAC6P;oBAAK;oBAAC,IAAG8iB,aAAaD,gBAAe;wBAAC1yB,YAAY,aAAa,GAAC0yB;oBAAa;oBAAC,IAAMtqC,UAAQ;wBAACnB;wBAAQ,OAAM;4BAACuJ;yBAAM;wBAACwP;wBAAY,KAAIlP;oBAAO;oBAAE,IAAG5N,MAAM,CAACT,KAAK,EAAC;wBAACS,MAAM,CAACT,KAAK,CAAC,IAAI,CAAC2F;oBAAQ,OAAK;wBAAClF,MAAM,CAACT,KAAK,GAAC;4BAAC2F;yBAAQ;oBAAA;gBAAC;YAAC;QAAC;QAAC,OAAOlF;IAAM;IAAG6tC,MAAMtlC,mBAAmBA,CAAC,UAAU,CAAC,WAAW,EAAC,WAAU,IAAI5B,OAAO,MAAM,CAACumC,oCAAoC,IAAI,GAAG,MAAM,CAAC5oC,CAAAA,SAAQA,OAAO,YAAY,KAAG;IAAWupC,MAAMtlC,mBAAmBA,CAAC,UAAU,CAAC,WAAW,EAAC,WAAU,IAAIukC;IAAuCsB,MAAM7lC,mBAAmBA,CAAC,UAAU,EAAC,yBAAwB,IAAK,EAAC;IAAI6lC,MAAM7lC,mBAAmBA,CAAC,UAAU,CAAC,qBAAqB,EAAC,WAAU,IAAK,EAAC;IAAI6lC,MAAM7lC,mBAAmBA,CAAC,UAAU,CAAC,qBAAqB,CAAC,OAAO,EAAC,gBAAe,IAAIgmC;IAA4BH,MAAM7lC,mBAAmBA,CAAC,UAAU,CAAC,qBAAqB,CAAC,OAAO,EAAC,8BAA6B;QAAK,IAAMmnC,kDAAgD,CAAC;QAAE,KAAI,WAAqB/oC,OAAO,OAAO,CAAC8nC,2CAA2C;YAA/E,uCAAI3P,oBAAShb;YAAmE4rB,+CAA+C,CAAC5Q,SAAS,GAAC;gBAAChb,KAAK,UAAU;gBAACA,KAAK,IAAI;gBAACA,KAAK,gBAAgB;gBAACA,KAAK,UAAU;aAAC;QAAA;QAAC,OAAO4rB;IAA+C;IAAGtB,MAAM7lC,mBAAmBA,CAAC,UAAU,CAAC,qBAAqB,CAAC,OAAO,EAAC,kBAAiB,IAAIA,mBAAmBA;IAAEslC,MAAMtlC,mBAAmBA,CAAC,UAAU,CAAC,qBAAqB,CAAC,OAAO,EAAC,iBAAgB;QAAK,IAAMy0B,gBAAc,CAAC;QAAE,KAAI,WAAqBr2B,OAAO,OAAO,CAAC8nC,2CAA2C;YAA/E,uCAAI74B,cAAG+5B;YAAyE,IAAMxZ,OAAK+W,kCAAkC,CAACyC,WAAW,UAAU,CAAC;YAAC,IAAGxZ,MAAK6G,aAAa,CAACpnB,GAAG,GAACugB;QAAI;QAAC,OAAO6G;IAAa;IAAG4Q,SAASrlC,mBAAmBA,EAAC,KAAIA,mBAAmBA,CAAC,UAAU,CAAC,cAAc,CAAC,CAAC;IAAE,IAAGA,mBAAmBA,CAAC,UAAU,CAAC,mBAAmB,EAAC;QAACA,mBAAmBA,CAAC,UAAU,CAAC,mBAAmB,CAACA,mBAAmBA;IAAC;IAACqlC,SAASrlC,mBAAmBA,CAAC,CAAC,EAAC,WAAU,CAACs0B,SAAQzQ,WAAW7jB,mBAAmBA,CAAC,UAAU,CAAC,cAAc,CAAC,OAAO,CAAC;YAACs0B;YAAQzQ;YAAS,cAAamiB;YAA2B,4BAA2BhmC,mBAAmBA,CAAC,UAAU,CAAC,qBAAqB,CAAC,OAAO,CAAC,0BAA0B;YAAC,eAAcA,mBAAmBA,CAAC,UAAU,CAAC,qBAAqB,CAAC,OAAO,CAAC,aAAa;YAAC,gBAAeA,mBAAmBA;QAAA;IAAIqlC,SAASrlC,mBAAmBA,CAAC,CAAC,EAAC,YAAW,CAACs0B,SAAQzQ,WAAW7jB,mBAAmBA,CAAC,UAAU,CAAC,cAAc,CAAC,QAAQ,CAAC;YAACs0B;YAAQzQ;YAAS,cAAayiB;YAA4B,wBAAuBtmC,mBAAmBA,CAAC,UAAU,CAAC,qCAAqC;YAAC,kBAAiBymC;YAAgC,gBAAezmC,mBAAmBA;QAAA;IAAIqlC,SAASrlC,mBAAmBA,EAAC,KAAI,CAAChJ,MAAKwjB,YAAYxa,mBAAmBA,CAAC,UAAU,CAAC,cAAc,CAAC,CAAC,CAAC;YAAC,gBAAehJ;YAAKwjB;YAAU,cAAaksB;YAA8B,YAAWC;YAA4B,gBAAe3mC,mBAAmBA;QAAA;IAAIqlC,SAASrlC,mBAAmBA,EAAC,iBAAgB,CAACua,YAAWC,WAAUC,yBAAyBza,mBAAmBA,CAAC,UAAU,CAAC,cAAc,CAAC,kBAAkB,CAAC;YAACua;YAAWC;YAAUC;YAAuB,eAAcmsB;YAAoB,gBAAe5mC,mBAAmBA;QAAA;IAAIqlC,SAASrlC,mBAAmBA,EAAC,gBAAe,CAAC6kB,SAAQ6P;QAAY,IAAI2S,YAAUrnC,mBAAmBA,CAAC,qBAAqB,CAAC,SAAS;QAACA,mBAAmBA,CAAC,CAAC,GAAC00B;QAASA,WAASt2B,OAAO,SAAS,CAAC,cAAc,CAAC,IAAI,CAACipC,WAAUxiB,WAASwiB,SAAS,CAACxiB,QAAQ,KAAG5sB,QAAQ,OAAO,GAAG,IAAI,CAAC;YAAK,MAAM,IAAIJ,MAAM,aAAWgtB,UAAQ;QAAiC;QAAG7kB,mBAAmBA,CAAC,CAAC,GAACrI;QAAU,OAAO+8B;IAAQ;IAAG10B,mBAAmBA,CAAC,UAAU,CAAC,QAAQ,GAACA,mBAAmBA,CAAC,UAAU,CAAC,OAAO,CAAC,IAAI,CAACA,mBAAmBA,CAAC,UAAU,CAAC,WAAW;IAAE,IAAIolC,CAAAA,2CAAyCplC,mBAAmBA,CAAC,mBAAkB,MAAK,QAAMolC,6CAA2C,KAAK,IAAE,KAAK,IAAEA,yCAAyC,eAAe,EAAC;QAACplC,mBAAmBA,CAAC,UAAU,CAAC,cAAc,CAAC,sBAAsB,CAAC;YAAC,gBAAeA,mBAAmBA;YAAC,kBAAiBymC;YAAgC,iBAAgBzmC,mBAAmBA,CAAC,mBAAmB,CAAC,eAAe;YAAC,wBAAuBA,mBAAmBA,CAAC,UAAU,CAAC,qCAAqC;QAAA;IAAE;AAAC"}